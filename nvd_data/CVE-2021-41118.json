{
  "cve_id": "CVE-2021-41118",
  "github_data": {
    "repository": "Universal-Omega/DynamicPageList3",
    "fix_commit": "2c04dafb37a14d9ccfe070f53e7f11bbca0156e7",
    "related_commits": [
      "2c04dafb37a14d9ccfe070f53e7f11bbca0156e7",
      "2c04dafb37a14d9ccfe070f53e7f11bbca0156e7"
    ],
    "patch_url": "https://github.com/Universal-Omega/DynamicPageList3/commit/2c04dafb37a14d9ccfe070f53e7f11bbca0156e7.patch",
    "fix_commit_details": {
      "sha": "2c04dafb37a14d9ccfe070f53e7f11bbca0156e7",
      "commit_date": "2021-10-01T22:52:30Z",
      "author": {
        "login": "Universal-Omega",
        "type": "User",
        "stats": null
      },
      "commit_message": {
        "title": "Major cleanup (#57)",
        "length": 19,
        "has_description": false,
        "references_issue": true
      },
      "stats": {
        "total": 8838,
        "additions": 4806,
        "deletions": 4032
      },
      "files": [
        {
          "filename": ".gitattributes",
          "status": "added",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -0,0 +1 @@\n+dependencies linguist-language=yaml"
        },
        {
          "filename": ".github/dependabot.yml",
          "status": "added",
          "additions": 10,
          "deletions": 0,
          "patch": "@@ -0,0 +1,10 @@\n+version: 2\n+updates:\n+  - package-ecosystem: \"github-actions\"\n+    directory: \"/\"\n+    schedule:\n+      interval: \"daily\"\n+  - package-ecosystem: \"composer\"\n+    directory: \"/\"\n+    schedule:\n+      interval: \"daily\""
        },
        {
          "filename": ".github/workflows/dependencies",
          "status": "added",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -0,0 +1,3 @@\n+Variables:\n+  branch: auto\n+  repo: auto"
        },
        {
          "filename": ".github/workflows/mediawiki-tests.yml",
          "status": "added",
          "additions": 433,
          "deletions": 0,
          "patch": "@@ -0,0 +1,433 @@\n+name: Quibble and Phan\n+\n+on:\n+  push:\n+    branches: [ master ]\n+  pull_request:\n+    branches: [ master ]\n+\n+jobs:\n+  test:\n+    name: \"${{ matrix.mw }} | PHP ${{ matrix.php }} (${{ matrix.stage }})\"\n+\n+    strategy:\n+      matrix:\n+        include:\n+          # Latest stable MediaWiki - PHP 7.3 (phan)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phan\n+\n+          # Latest stable MediaWiki - PHP 7.4 (phan)\n+          - mw: 'REL1_36'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phan\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (phan)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: true\n+            stage: phan\n+\n+          # Latest MediaWiki release branch - PHP 7.4 (phan)\n+          - mw: 'REL1_37'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: true\n+            stage: phan\n+\n+          # Latest MediaWiki master - PHP 7.3 (phan)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: true\n+            stage: phan\n+\n+          # Latest MediaWiki master - PHP 7.4 (phan)\n+          - mw: 'master'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: true\n+            stage: phan\n+\n+          # Latest stable MediaWiki - PHP 7.3 (coverage)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: coverage\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (coverage)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: coverage\n+\n+          # Latest MediaWiki master - PHP 7.3 (coverage)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: coverage\n+\n+          # Latest stable MediaWiki - PHP 7.3 (phpunit-unit)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest stable MediaWiki - PHP 7.4 (phpunit-unit)\n+          - mw: 'REL1_36'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (phpunit-unit)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest MediaWiki release branch - PHP 7.4 (phpunit-unit)\n+          - mw: 'REL1_37'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest MediaWiki master - PHP 7.3 (phpunit-unit)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest MediaWiki master - PHP 7.4 (phpunit-unit)\n+          - mw: 'master'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit-unit\n+\n+          # Latest stable MediaWiki - PHP 7.3 (phpunit)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest stable MediaWiki - PHP 7.4 (phpunit)\n+          - mw: 'REL1_36'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (phpunit)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest MediaWiki release branch - PHP 7.4 (phpunit)\n+          - mw: 'REL1_37'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest MediaWiki master - PHP 7.3 (phpunit)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest MediaWiki master - PHP 7.4 (phpunit)\n+          - mw: 'master'\n+            php: 7.4\n+            php-docker: 74\n+            experimental: false\n+            stage: phpunit\n+\n+          # Latest stable MediaWiki - PHP 7.3 (selenium)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: selenium\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (selenium)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: selenium\n+\n+          # Latest MediaWiki master - PHP 7.3 (selenium)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: selenium\n+\n+          # Latest stable MediaWiki - PHP 7.3 (qunit)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: qunit\n+\n+          # Latest MediaWiki release branch - PHP 7.3 (qunit)\n+          - mw: 'REL1_37'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: qunit\n+\n+          # Latest MediaWiki master - PHP 7.3 (qunit)\n+          - mw: 'master'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: qunit\n+\n+          # Latest stable MediaWiki - PHP 7.3 (composer-test)\n+          - mw: 'REL1_36'\n+            php: 7.3\n+            php-docker: 73\n+            experimental: false\n+            stage: composer-test\n+\n+    runs-on: ubuntu-latest\n+\n+    env:\n+      DOCKER_REGISTRY: docker-registry.wikimedia.org\n+      DOCKER_ORG: releng\n+      QUIBBLE_DOCKER_IMAGE: quibble-buster-php${{ matrix.php-docker }}\n+      COVERAGE_DOCKER_IMAGE: quibble-buster-php${{ matrix.php-docker }}-coverage\n+      PHAN_DOCKER_IMAGE: mediawiki-phan-php${{ matrix.php-docker }}\n+\n+    steps:\n+      - name: Cancel Previous Runs\n+        uses: styfle/cancel-workflow-action@0.9.1\n+        with:\n+          access_token: ${{ github.token }}\n+\n+      - uses: actions/checkout@v2\n+\n+      # /home/runner/cache/                               Cache\n+      # /home/runner/src/                                 Mediawiki installation\n+      # /home/runner/src/extensions/EXTENSION_NAME/       Clone of the extension repository\n+      # /home/runner/docker-images/                       Docker images which exported with docker-save command\n+      # $GITHUB_WORKSPACE/.github/workflows/dependencies  Necessary dependencies - YAML syntax\n+      # $GITHUB_WORKSPACE/.github/workflows/globals.php   Add global configuration options for MediaWiki\n+      - name: Set up\n+        run: |\n+          echo MEDIAWIKI_VERSION=\"${{ matrix.mw }}\" >> $GITHUB_ENV\n+\n+          if [ \"${{ matrix.stage }}\" == 'phan' ]; then\n+            export DOCKER_IMAGE=\"${PHAN_DOCKER_IMAGE}\"\n+          elif [ \"${{ matrix.stage }}\" == coverage ]; then\n+            export DOCKER_IMAGE=\"${COVERAGE_DOCKER_IMAGE}\"\n+          else\n+            export DOCKER_IMAGE=\"${QUIBBLE_DOCKER_IMAGE}\"\n+          fi\n+          echo \"DOCKER_IMAGE=${DOCKER_IMAGE}\" >> $GITHUB_ENV\n+\n+          # Get the latest docker tag (Ref: https://github.com/thcipriani/dockerregistry)\n+          DOCKER_LATEST_TAG=\"$(curl -sL \"https://${DOCKER_REGISTRY}/v2/${DOCKER_ORG}/${DOCKER_IMAGE}/tags/list\" |\n+            python3 -c 'import json;print(\"\\n\".join(json.loads(input())[\"tags\"]))' |\n+            grep -v latest | sort -Vr | head -1)\"\n+          echo \"DOCKER_LATEST_TAG=${DOCKER_LATEST_TAG}\" >> $GITHUB_ENV\n+          if [ \"${{ matrix.stage }}\" == 'phan' ] || [ \"${{ matrix.stage }}\" == 'coverage' ]; then\n+            echo \"QUIBBLE_DOCKER_LATEST_TAG=$(curl -sL \"https://${DOCKER_REGISTRY}/v2/${DOCKER_ORG}/${QUIBBLE_DOCKER_IMAGE}/tags/list\" |\n+              python3 -c 'import json;print(\"\\n\".join(json.loads(input())[\"tags\"]))' |\n+              grep -v latest | sort -Vr | head -1)\" >> $GITHUB_ENV\n+          fi\n+\n+          # Resolve dependencies\n+          if [ -e .github/workflows/dependencies ] && [ \"${{ matrix.stage }}\" == 'phan' ]; then\n+            cd .github/workflows\n+            curl -sL https://raw.githubusercontent.com/wikimedia/integration-config/master/zuul/parameter_functions.py -o pf.py\n+            curl -sL https://raw.githubusercontent.com/Universal-Omega/scripts/master/mediawiki/resolve_dependencies.py -o rd.py\n+            echo \"DEPENDENCIES=$(python3 rd.py)\" >> $GITHUB_ENV\n+          fi\n+\n+      - name: Cache docker image\n+        uses: actions/cache@v2\n+        with:\n+          path: /home/runner/docker-images/${{ env.DOCKER_IMAGE }}\n+          key: ${{ env.DOCKER_IMAGE }}:${{ env.DOCKER_LATEST_TAG }}\n+\n+      - name: Load or pull docker image\n+        run: |\n+          docker load -i /home/runner/docker-images/\"${DOCKER_IMAGE}\" || \\\n+            docker pull \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${DOCKER_IMAGE}:${DOCKER_LATEST_TAG}\"\n+\n+      - name: Cache quibble docker image\n+        if: ${{ matrix.stage == 'coverage' || matrix.stage == 'phan' }}\n+        uses: actions/cache@v2\n+        with:\n+          path: /home/runner/docker-images/${{ env.QUIBBLE_DOCKER_IMAGE }}\n+          key: ${{ env.QUIBBLE_DOCKER_IMAGE }}:${{ env.QUIBBLE_DOCKER_LATEST_TAG }}\n+      - name: Load or pull quibble docker image\n+        if: ${{ matrix.stage == 'coverage' || matrix.stage == 'phan' }}\n+        run: |\n+          docker load -i /home/runner/docker-images/\"${QUIBBLE_DOCKER_IMAGE}\" || \\\n+            docker pull \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${QUIBBLE_DOCKER_IMAGE}:${QUIBBLE_DOCKER_LATEST_TAG}\"\n+\n+      - name: Download MediaWiki and extensions\n+        run: |\n+          cd /home/runner\n+          if [ ! -d src ]; then\n+            git clone -b \"${MEDIAWIKI_VERSION}\" --depth 1 https://gerrit.wikimedia.org/r/mediawiki/core src\n+            git clone --recurse-submodules -b \"${MEDIAWIKI_VERSION}\" --depth 1 https://gerrit.wikimedia.org/r/mediawiki/skins/Vector src/skins/Vector\n+            for dep in $DEPENDENCIES; do\n+              dependency=$(echo $dep | cut -d'|' -f1)\n+              repository=$(echo $dep | cut -sd'|' -f2)\n+              branch=$(echo $dep | rev | cut -sd'|' -f1 | rev)\n+\n+              if [ $repository == $branch ]; then\n+                repository=\"\"\n+              fi\n+\n+              git clone --recurse-submodules -b \"${branch:-${MEDIAWIKI_VERSION}}\" --depth 1 \"${repository:-https://gerrit.wikimedia.org/r/${dependency}}\" src/\"$(echo $dependency | cut -d'/' -f2,3)\"\n+            done\n+          fi\n+\n+          # REPLACE SETUP.PHP FOR CREATEWIKI DEPENDANT EXTENSIONS ON REL1_36.\n+          # FIXES A BUG PRESENT ON REL1_36, WHEN DOING DATABASE STUFF BEFORE THIS WAS DONE, REQUEST INFO WAS ALREADY SET FOR DBLoadBalancerFactory,\n+          # RESULTING IN \"LogicException: ChronologyProtector already initialized\". THIS HACK REMOVES\n+          # MediaWikiServices::getInstance()->getDBLoadBalancerFactory()->setRequestInfo(). THIS IS ALREADY FIXED FOR REL1_37 AND LATER.\n+          # WITH https://github.com/wikimedia/mediawiki/commit/29827d\n+\n+          if [ -d src/extensions/CreateWiki ] || [ \"${{ github.event.repository.name }}\" == 'CreateWiki' ] && [ \"${MEDIAWIKI_VERSION}\" == 'REL1_36' ]; then\n+            curl -sL https://raw.githubusercontent.com/Universal-Omega/scripts/master/mediawiki/hacks/Setup-REL1_36.php > src/includes/Setup.php\n+          fi\n+\n+          if [ -e \"$GITHUB_WORKSPACE\"/.github/workflows/globals.php ]; then\n+            echo 'require_once __DIR__ . \"/../extensions/${{ github.event.repository.name }}/.github/workflows/globals.php\";' >> src/includes/DevelopmentSettings.php\n+          fi\n+\n+          git -C src/ log -n 1 --format=\"%H\"\n+\n+      - name: Cache dependencies (composer and npm)\n+        uses: actions/cache@v2\n+        with:\n+          path: /home/runner/cache\n+          key: ${{ runner.os }}-${{ env.MEDIAWIKI_VERSION }}-${{ hashFiles('**/*.lock') }}\n+\n+      - name: Setup PHP Action\n+        if: ${{ matrix.stage == 'phan' }}\n+        uses: shivammathur/setup-php@v2\n+        with:\n+          php-version: ${{ matrix.php }}\n+          tools: composer:v2\n+\n+      - name: Composer install\n+        if: ${{ matrix.stage == 'phan' }}\n+        run: |\n+          if [ -e composer.json ]; then\n+            composer install --prefer-dist --no-progress --no-interaction\n+          fi\n+\n+      - name: Fix PHPCS violations\n+        continue-on-error: true\n+        if: ${{ github.event_name == 'pull_request' && matrix.stage == 'composer-test' }}\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        run: |\n+          if [ -e composer.json ]; then\n+            composer install --prefer-dist --no-progress --no-interaction\n+            composer fix\n+\n+            rm composer.lock\n+\n+            git config --global user.name \"github-actions\"\n+            git config --global user.email \"github-actions@users.noreply.github.com\"\n+            git remote set-url origin \"https://x-access-token:${GITHUB_TOKEN}@github.com/${GITHUB_REPOSITORY}.git\"\n+            git checkout -b ${GITHUB_HEAD_REF}\n+            git add .\n+            git commit -am \"CI: lint code to MediaWiki standards\" -m \"Check commit and GitHub actions for more details\" || echo \"No changes to commit\"\n+            git pull origin ${GITHUB_HEAD_REF} --rebase\n+            git push --set-upstream origin ${GITHUB_HEAD_REF}\n+          fi\n+\n+      - name: Main Test\n+        continue-on-error: ${{ matrix.experimental }}\n+        run: |\n+          cd /home/runner\n+          # Move our extension\n+          sudo cp -r \"${GITHUB_WORKSPACE}\" src/extensions/\n+          mkdir -p cache cover\n+          chmod 777 src cache cover\n+          sudo chown -R nobody:nogroup src cache\n+          sudo chown $(id -u):$(id -g) src cache\n+          # Composer install\n+          if [ \"${{ matrix.stage }}\" == 'phan' ] || [ \"${{ matrix.stage }}\" == 'coverage' ]; then\n+            docker run \\\n+              -e ZUUL_PROJECT=mediawiki/extensions/\"${{ github.event.repository.name }}\" \\\n+              -v \"$(pwd)\"/cache:/cache \\\n+              -v \"$(pwd)\"/src:/workspace/src \\\n+              \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${QUIBBLE_DOCKER_IMAGE}:${QUIBBLE_DOCKER_LATEST_TAG}\" \\\n+              --skip-zuul \\\n+              --packages-source composer \\\n+              --skip-install \\\n+              --skip all \\\n+              $DEPENDENCIES\n+          fi\n+\n+          if [ \"${{ matrix.stage }}\" == 'phan' ]; then\n+            docker run \\\n+              -e THING_SUBNAME=extensions/\"${{ github.event.repository.name }}\" \\\n+              -v \"$(pwd)\"/src:/mediawiki \\\n+              \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${DOCKER_IMAGE}:${DOCKER_LATEST_TAG}\" \\\n+              --color\n+          elif [ \"${{ matrix.stage }}\" == 'coverage' ] && [ -d src/extensions/\"${{ github.event.repository.name }}\"/tests/phpunit ]; then\n+            docker run \\\n+              -e ZUUL_PROJECT=mediawiki/extensions/\"${{ github.event.repository.name }}\" \\\n+              -v \"$(pwd)\"/cache:/cache \\\n+              -v \"$(pwd)\"/src:/workspace/src \\\n+              -v \"$(pwd)\"/cover:/workspace/cover \\\n+              \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${DOCKER_IMAGE}:${DOCKER_LATEST_TAG}\" \\\n+              --skip-zuul \\\n+              --skip-deps \\\n+              -c mwext-phpunit-coverage\n+          elif [ \"${{ matrix.stage }}\" != 'coverage' ]; then\n+            docker run \\\n+              -e ZUUL_PROJECT=mediawiki/extensions/\"${{ github.event.repository.name }}\" \\\n+              -v \"$(pwd)\"/cache:/cache \\\n+              -v \"$(pwd)\"/src:/workspace/src \\\n+              \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${DOCKER_IMAGE}:${DOCKER_LATEST_TAG}\" \\\n+              --skip-zuul \\\n+              --packages-source composer \\\n+              --run \"${{ matrix.stage }}\" \\\n+              $DEPENDENCIES\n+            fi\n+\n+      - name: Upload coverage to Codecov\n+        if: ${{ matrix.stage == 'coverage' }}\n+        uses: codecov/codecov-action@v2\n+        with:\n+          directory: /home/runner/cover\n+\n+      - name: Tear down\n+        run: |\n+          cd /home/runner\n+          sudo rm -rf src/extensions/\"${{ github.event.repository.name }}\"\n+          # See https://doc.wikimedia.org/quibble/index.html#remove-localsettings-php-between-runs\n+          rm \"$(pwd)\"/src/LocalSettings.php || true\n+          mkdir -p docker-images\n+          docker save -o \"$(pwd)/docker-images/${DOCKER_IMAGE}\" \\\n+            \"${DOCKER_REGISTRY}/${DOCKER_ORG}/${DOCKER_IMAGE}:${DOCKER_LATEST_TAG}\""
        },
        {
          "filename": ".gitignore",
          "status": "modified",
          "additions": 2,
          "deletions": 9,
          "patch": "@@ -1,10 +1,3 @@\n-/node_modules\n-/vendor\n /composer.lock\n-/.eslintcache\n-*.kate-swp\n-*~\n-.*.swp\n-.DS_Store\n-.svn\n-.idea\n+/vendor\n+.github/*"
        },
        {
          "filename": ".phan/config.php",
          "status": "modified",
          "additions": 16,
          "deletions": 33,
          "patch": "@@ -2,39 +2,22 @@\n \n $cfg = require __DIR__ . '/../vendor/mediawiki/mediawiki-phan-config/src/config.php';\n \n-$cfg['suppress_issue_types'] = array_merge( $cfg['suppress_issue_types'], [\n-\t'PhanUndeclaredInterface',\n-\t'PhanUndeclaredTypeParameter',\n-\t'PhanUndeclaredClassMethod',\n-\t'PhanUndeclaredFunction',\n-\t'PhanUndeclaredConstant',\n-\t'PhanUndeclaredTypeReturnType',\n-\t'PhanPossiblyUndeclaredVariable',\n-\t'PhanTypePossiblyInvalidDimOffset',\n-\t'PhanTypeInvalidDimOffset',\n-\t'PhanUndeclaredConstantOfClass',\n-\t'PhanUndeclaredExtendedClass',\n-\t'PhanTypeMismatchReturnNullable',\n-\t'PhanUndeclaredExtendedClass',\n-\t'PhanUndeclaredMethod',\n-\t'PhanUndeclaredProperty',\n-\t'PhanPluginDuplicateAdjacentStatement',\n-\t'PhanImpossibleCondition',\n-\t'PhanUndeclaredClassInstanceof',\n-\t'PhanTypeArraySuspiciousNullable',\n-\t'PhanParamTooMany',\n-\t'PhanPluginDuplicateConditionalNullCoalescing',\n-\t'PhanRedundantCondition',\n-\t'PhanPluginDuplicateConditionalTernaryDuplication',\n-\t'PhanTypeMismatchReturnProbablyReal',\n-\t'PhanUndeclaredVariableDim',\n-\t'PhanUndeclaredClass',\n-\t'PhanUnextractableAnnotation',\n-\t'PhanTypeSuspiciousStringExpression',\n-\t'PhanImpossibleTypeComparison',\n-\t'PhanTypeMismatchArgument'\n-] );\n+$cfg['directory_list'] = array_merge(\n+\t$cfg['directory_list'], [\n+\t\t'../../extensions/Variables',\n+\t]\n+);\n \n-$cfg['scalar_implicit_cast'] = true;\n+$cfg['exclude_analysis_directory_list'] = array_merge(\n+\t$cfg['exclude_analysis_directory_list'], [\n+\t\t'../../extensions/Variables',\n+\t]\n+);\n+\n+$cfg['suppress_issue_types'] = [\n+\t'SecurityCheck-ReDoS',\n+\t'SecurityCheck-LikelyFalsePositive',\n+\t'PhanAccessMethodInternal',\n+];\n \n return $cfg;"
        },
        {
          "filename": ".phpcs.xml",
          "status": "modified",
          "additions": 11,
          "deletions": 10,
          "patch": "@@ -1,16 +1,17 @@\n <?xml version=\"1.0\"?>\n <ruleset>\n-    <rule ref=\"./vendor/mediawiki/mediawiki-codesniffer/MediaWiki\">\n-\t\t<exclude name=\"Generic.Files.LineLength\" />\n+\t<file>.</file>\n+\t<rule ref=\"./vendor/mediawiki/mediawiki-codesniffer/MediaWiki\">\n+\t\t<exclude name=\"Generic.Files.LineLength.TooLong\" />\n \t\t<exclude name=\"MediaWiki.Commenting.FunctionComment\" />\n-\t\t<exclude name=\"MediaWiki.NamingConventions.LowerCamelFunctionsName\" />\n-\t\t<exclude name=\"MediaWiki.WhiteSpace.SpaceBeforeSingleLineComment\" />\n+\t\t<exclude name=\"MediaWiki.Commenting.MissingCovers.MissingCovers\" />\n+\t\t<exclude name=\"MediaWiki.NamingConventions.LowerCamelFunctionsName.FunctionName\" />\n+\t\t<exclude name=\"MediaWiki.WhiteSpace.SpaceBeforeSingleLineComment.NewLineComment\" />\n \t\t<exclude name=\"PSR2.Methods.MethodDeclaration.Underscore\" />\n+\t\t<exclude name=\"MediaWiki.ControlStructures.AssignmentInControlStructures.AssignmentInControlStructures\" />\n+\t\t<exclude name=\"PEAR.Functions.ValidDefaultValue.NotAtEnd\" />\n \t</rule>\n-\t<rule ref=\"Generic.NamingConventions.ConstructorName\">\n-\t\t<severity>3</severity>\n-\t</rule>\n-    <file>.</file>\n-    <arg name=\"extensions\" value=\"php,php5,inc\"/>\n-    <arg name=\"encoding\" value=\"UTF-8\"/>\n+\t<arg name=\"bootstrap\" value=\"./vendor/mediawiki/mediawiki-codesniffer/utils/bootstrap-ci.php\"/>\n+\t<arg name=\"extensions\" value=\"php\"/>\n+\t<arg name=\"encoding\" value=\"UTF-8\"/>\n </ruleset>"
        },
        {
          "filename": "CHANGELOG.md",
          "status": "modified",
          "additions": 6,
          "deletions": 0,
          "patch": "@@ -702,3 +702,9 @@ Many thanks to GreenReaper on GitHub for reporting and finding issues with core\n # Version 3.3.5\n * Fix syntax error in extension.json\n * 1.36.0 support\n+\n+# Version 3.3.6\n+* Major code cleanup\n+* Numerous bug fixes\n+* Now requires MediaWiki 1.36.0 or later\n+* 1.37.0 support"
        },
        {
          "filename": "COPYING",
          "status": "modified",
          "additions": 617,
          "deletions": 282,
          "patch": "@@ -1,281 +1,622 @@\n                     GNU GENERAL PUBLIC LICENSE\n-                       Version 2, June 1991\n+                       Version 3, 29 June 2007\n \n- Copyright (C) 1989, 1991 Free Software Foundation, Inc.,\n- 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA\n+ Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>\n  Everyone is permitted to copy and distribute verbatim copies\n  of this license document, but changing it is not allowed.\n \n                             Preamble\n \n-  The licenses for most software are designed to take away your\n-freedom to share and change it.  By contrast, the GNU General Public\n-License is intended to guarantee your freedom to share and change free\n-software--to make sure the software is free for all its users.  This\n-General Public License applies to most of the Free Software\n-Foundation's software and to any other program whose authors commit to\n-using it.  (Some other Free Software Foundation software is covered by\n-the GNU Lesser General Public License instead.)  You can apply it to\n+  The GNU General Public License is a free, copyleft license for\n+software and other kinds of works.\n+\n+  The licenses for most software and other practical works are designed\n+to take away your freedom to share and change the works.  By contrast,\n+the GNU General Public License is intended to guarantee your freedom to\n+share and change all versions of a program--to make sure it remains free\n+software for all its users.  We, the Free Software Foundation, use the\n+GNU General Public License for most of our software; it applies also to\n+any other work released this way by its authors.  You can apply it to\n your programs, too.\n \n   When we speak of free software, we are referring to freedom, not\n price.  Our General Public Licenses are designed to make sure that you\n have the freedom to distribute copies of free software (and charge for\n-this service if you wish), that you receive source code or can get it\n-if you want it, that you can change the software or use pieces of it\n-in new free programs; and that you know you can do these things.\n+them if you wish), that you receive source code or can get it if you\n+want it, that you can change the software or use pieces of it in new\n+free programs, and that you know you can do these things.\n \n-  To protect your rights, we need to make restrictions that forbid\n-anyone to deny you these rights or to ask you to surrender the rights.\n-These restrictions translate to certain responsibilities for you if you\n-distribute copies of the software, or if you modify it.\n+  To protect your rights, we need to prevent others from denying you\n+these rights or asking you to surrender the rights.  Therefore, you have\n+certain responsibilities if you distribute copies of the software, or if\n+you modify it: responsibilities to respect the freedom of others.\n \n   For example, if you distribute copies of such a program, whether\n-gratis or for a fee, you must give the recipients all the rights that\n-you have.  You must make sure that they, too, receive or can get the\n-source code.  And you must show them these terms so they know their\n-rights.\n-\n-  We protect your rights with two steps: (1) copyright the software, and\n-(2) offer you this license which gives you legal permission to copy,\n-distribute and/or modify the software.\n-\n-  Also, for each author's protection and ours, we want to make certain\n-that everyone understands that there is no warranty for this free\n-software.  If the software is modified by someone else and passed on, we\n-want its recipients to know that what they have is not the original, so\n-that any problems introduced by others will not reflect on the original\n-authors' reputations.\n-\n-  Finally, any free program is threatened constantly by software\n-patents.  We wish to avoid the danger that redistributors of a free\n-program will individually obtain patent licenses, in effect making the\n-program proprietary.  To prevent this, we have made it clear that any\n-patent must be licensed for everyone's free use or not licensed at all.\n+gratis or for a fee, you must pass on to the recipients the same\n+freedoms that you received.  You must make sure that they, too, receive\n+or can get the source code.  And you must show them these terms so they\n+know their rights.\n+\n+  Developers that use the GNU GPL protect your rights with two steps:\n+(1) assert copyright on the software, and (2) offer you this License\n+giving you legal permission to copy, distribute and/or modify it.\n+\n+  For the developers' and authors' protection, the GPL clearly explains\n+that there is no warranty for this free software.  For both users' and\n+authors' sake, the GPL requires that modified versions be marked as\n+changed, so that their problems will not be attributed erroneously to\n+authors of previous versions.\n+\n+  Some devices are designed to deny users access to install or run\n+modified versions of the software inside them, although the manufacturer\n+can do so.  This is fundamentally incompatible with the aim of\n+protecting users' freedom to change the software.  The systematic\n+pattern of such abuse occurs in the area of products for individuals to\n+use, which is precisely where it is most unacceptable.  Therefore, we\n+have designed this version of the GPL to prohibit the practice for those\n+products.  If such problems arise substantially in other domains, we\n+stand ready to extend this provision to those domains in future versions\n+of the GPL, as needed to protect the freedom of users.\n+\n+  Finally, every program is threatened constantly by software patents.\n+States should not allow patents to restrict development and use of\n+software on general-purpose computers, but in those that do, we wish to\n+avoid the special danger that patents applied to a free program could\n+make it effectively proprietary.  To prevent this, the GPL assures that\n+patents cannot be used to render the program non-free.\n \n   The precise terms and conditions for copying, distribution and\n modification follow.\n \n-                    GNU GENERAL PUBLIC LICENSE\n-   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n-\n-  0. This License applies to any program or other work which contains\n-a notice placed by the copyright holder saying it may be distributed\n-under the terms of this General Public License.  The \"Program\", below,\n-refers to any such program or work, and a \"work based on the Program\"\n-means either the Program or any derivative work under copyright law:\n-that is to say, a work containing the Program or a portion of it,\n-either verbatim or with modifications and/or translated into another\n-language.  (Hereinafter, translation is included without limitation in\n-the term \"modification\".)  Each licensee is addressed as \"you\".\n-\n-Activities other than copying, distribution and modification are not\n-covered by this License; they are outside its scope.  The act of\n-running the Program is not restricted, and the output from the Program\n-is covered only if its contents constitute a work based on the\n-Program (independent of having been made by running the Program).\n-Whether that is true depends on what the Program does.\n-\n-  1. You may copy and distribute verbatim copies of the Program's\n-source code as you receive it, in any medium, provided that you\n-conspicuously and appropriately publish on each copy an appropriate\n-copyright notice and disclaimer of warranty; keep intact all the\n-notices that refer to this License and to the absence of any warranty;\n-and give any other recipients of the Program a copy of this License\n-along with the Program.\n-\n-You may charge a fee for the physical act of transferring a copy, and\n-you may at your option offer warranty protection in exchange for a fee.\n-\n-  2. You may modify your copy or copies of the Program or any portion\n-of it, thus forming a work based on the Program, and copy and\n-distribute such modifications or work under the terms of Section 1\n-above, provided that you also meet all of these conditions:\n-\n-    a) You must cause the modified files to carry prominent notices\n-    stating that you changed the files and the date of any change.\n-\n-    b) You must cause any work that you distribute or publish, that in\n-    whole or in part contains or is derived from the Program or any\n-    part thereof, to be licensed as a whole at no charge to all third\n-    parties under the terms of this License.\n-\n-    c) If the modified program normally reads commands interactively\n-    when run, you must cause it, when started running for such\n-    interactive use in the most ordinary way, to print or display an\n-    announcement including an appropriate copyright notice and a\n-    notice that there is no warranty (or else, saying that you provide\n-    a warranty) and that users may redistribute the program under\n-    these conditions, and telling the user how to view a copy of this\n-    License.  (Exception: if the Program itself is interactive but\n-    does not normally print such an announcement, your work based on\n-    the Program is not required to print an announcement.)\n-\n-These requirements apply to the modified work as a whole.  If\n-identifiable sections of that work are not derived from the Program,\n-and can be reasonably considered independent and separate works in\n-themselves, then this License, and its terms, do not apply to those\n-sections when you distribute them as separate works.  But when you\n-distribute the same sections as part of a whole which is a work based\n-on the Program, the distribution of the whole must be on the terms of\n-this License, whose permissions for other licensees extend to the\n-entire whole, and thus to each and every part regardless of who wrote it.\n-\n-Thus, it is not the intent of this section to claim rights or contest\n-your rights to work written entirely by you; rather, the intent is to\n-exercise the right to control the distribution of derivative or\n-collective works based on the Program.\n-\n-In addition, mere aggregation of another work not based on the Program\n-with the Program (or with a work based on the Program) on a volume of\n-a storage or distribution medium does not bring the other work under\n-the scope of this License.\n-\n-  3. You may copy and distribute the Program (or a work based on it,\n-under Section 2) in object code or executable form under the terms of\n-Sections 1 and 2 above provided that you also do one of the following:\n-\n-    a) Accompany it with the complete corresponding machine-readable\n-    source code, which must be distributed under the terms of Sections\n-    1 and 2 above on a medium customarily used for software interchange; or,\n-\n-    b) Accompany it with a written offer, valid for at least three\n-    years, to give any third party, for a charge no more than your\n-    cost of physically performing source distribution, a complete\n-    machine-readable copy of the corresponding source code, to be\n-    distributed under the terms of Sections 1 and 2 above on a medium\n-    customarily used for software interchange; or,\n-\n-    c) Accompany it with the information you received as to the offer\n-    to distribute corresponding source code.  (This alternative is\n-    allowed only for noncommercial distribution and only if you\n-    received the program in object code or executable form with such\n-    an offer, in accord with Subsection b above.)\n-\n-The source code for a work means the preferred form of the work for\n-making modifications to it.  For an executable work, complete source\n-code means all the source code for all modules it contains, plus any\n-associated interface definition files, plus the scripts used to\n-control compilation and installation of the executable.  However, as a\n-special exception, the source code distributed need not include\n-anything that is normally distributed (in either source or binary\n-form) with the major components (compiler, kernel, and so on) of the\n-operating system on which the executable runs, unless that component\n-itself accompanies the executable.\n-\n-If distribution of executable or object code is made by offering\n-access to copy from a designated place, then offering equivalent\n-access to copy the source code from the same place counts as\n-distribution of the source code, even though third parties are not\n-compelled to copy the source along with the object code.\n-\n-  4. You may not copy, modify, sublicense, or distribute the Program\n-except as expressly provided under this License.  Any attempt\n-otherwise to copy, modify, sublicense or distribute the Program is\n-void, and will automatically terminate your rights under this License.\n-However, parties who have received copies, or rights, from you under\n-this License will not have their licenses terminated so long as such\n-parties remain in full compliance.\n-\n-  5. You are not required to accept this License, since you have not\n-signed it.  However, nothing else grants you permission to modify or\n-distribute the Program or its derivative works.  These actions are\n-prohibited by law if you do not accept this License.  Therefore, by\n-modifying or distributing the Program (or any work based on the\n-Program), you indicate your acceptance of this License to do so, and\n-all its terms and conditions for copying, distributing or modifying\n-the Program or works based on it.\n-\n-  6. Each time you redistribute the Program (or any work based on the\n-Program), the recipient automatically receives a license from the\n-original licensor to copy, distribute or modify the Program subject to\n-these terms and conditions.  You may not impose any further\n-restrictions on the recipients' exercise of the rights granted herein.\n-You are not responsible for enforcing compliance by third parties to\n+                       TERMS AND CONDITIONS\n+\n+  0. Definitions.\n+\n+  \"This License\" refers to version 3 of the GNU General Public License.\n+\n+  \"Copyright\" also means copyright-like laws that apply to other kinds of\n+works, such as semiconductor masks.\n+\n+  \"The Program\" refers to any copyrightable work licensed under this\n+License.  Each licensee is addressed as \"you\".  \"Licensees\" and\n+\"recipients\" may be individuals or organizations.\n+\n+  To \"modify\" a work means to copy from or adapt all or part of the work\n+in a fashion requiring copyright permission, other than the making of an\n+exact copy.  The resulting work is called a \"modified version\" of the\n+earlier work or a work \"based on\" the earlier work.\n+\n+  A \"covered work\" means either the unmodified Program or a work based\n+on the Program.\n+\n+  To \"propagate\" a work means to do anything with it that, without\n+permission, would make you directly or secondarily liable for\n+infringement under applicable copyright law, except executing it on a\n+computer or modifying a private copy.  Propagation includes copying,\n+distribution (with or without modification), making available to the\n+public, and in some countries other activities as well.\n+\n+  To \"convey\" a work means any kind of propagation that enables other\n+parties to make or receive copies.  Mere interaction with a user through\n+a computer network, with no transfer of a copy, is not conveying.\n+\n+  An interactive user interface displays \"Appropriate Legal Notices\"\n+to the extent that it includes a convenient and prominently visible\n+feature that (1) displays an appropriate copyright notice, and (2)\n+tells the user that there is no warranty for the work (except to the\n+extent that warranties are provided), that licensees may convey the\n+work under this License, and how to view a copy of this License.  If\n+the interface presents a list of user commands or options, such as a\n+menu, a prominent item in the list meets this criterion.\n+\n+  1. Source Code.\n+\n+  The \"source code\" for a work means the preferred form of the work\n+for making modifications to it.  \"Object code\" means any non-source\n+form of a work.\n+\n+  A \"Standard Interface\" means an interface that either is an official\n+standard defined by a recognized standards body, or, in the case of\n+interfaces specified for a particular programming language, one that\n+is widely used among developers working in that language.\n+\n+  The \"System Libraries\" of an executable work include anything, other\n+than the work as a whole, that (a) is included in the normal form of\n+packaging a Major Component, but which is not part of that Major\n+Component, and (b) serves only to enable use of the work with that\n+Major Component, or to implement a Standard Interface for which an\n+implementation is available to the public in source code form.  A\n+\"Major Component\", in this context, means a major essential component\n+(kernel, window system, and so on) of the specific operating system\n+(if any) on which the executable work runs, or a compiler used to\n+produce the work, or an object code interpreter used to run it.\n+\n+  The \"Corresponding Source\" for a work in object code form means all\n+the source code needed to generate, install, and (for an executable\n+work) run the object code and to modify the work, including scripts to\n+control those activities.  However, it does not include the work's\n+System Libraries, or general-purpose tools or generally available free\n+programs which are used unmodified in performing those activities but\n+which are not part of the work.  For example, Corresponding Source\n+includes interface definition files associated with source files for\n+the work, and the source code for shared libraries and dynamically\n+linked subprograms that the work is specifically designed to require,\n+such as by intimate data communication or control flow between those\n+subprograms and other parts of the work.\n+\n+  The Corresponding Source need not include anything that users\n+can regenerate automatically from other parts of the Corresponding\n+Source.\n+\n+  The Corresponding Source for a work in source code form is that\n+same work.\n+\n+  2. Basic Permissions.\n+\n+  All rights granted under this License are granted for the term of\n+copyright on the Program, and are irrevocable provided the stated\n+conditions are met.  This License explicitly affirms your unlimited\n+permission to run the unmodified Program.  The output from running a\n+covered work is covered by this License only if the output, given its\n+content, constitutes a covered work.  This License acknowledges your\n+rights of fair use or other equivalent, as provided by copyright law.\n+\n+  You may make, run and propagate covered works that you do not\n+convey, without conditions so long as your license otherwise remains\n+in force.  You may convey covered works to others for the sole purpose\n+of having them make modifications exclusively for you, or provide you\n+with facilities for running those works, provided that you comply with\n+the terms of this License in conveying all material for which you do\n+not control copyright.  Those thus making or running the covered works\n+for you must do so exclusively on your behalf, under your direction\n+and control, on terms that prohibit them from making any copies of\n+your copyrighted material outside their relationship with you.\n+\n+  Conveying under any other circumstances is permitted solely under\n+the conditions stated below.  Sublicensing is not allowed; section 10\n+makes it unnecessary.\n+\n+  3. Protecting Users' Legal Rights From Anti-Circumvention Law.\n+\n+  No covered work shall be deemed part of an effective technological\n+measure under any applicable law fulfilling obligations under article\n+11 of the WIPO copyright treaty adopted on 20 December 1996, or\n+similar laws prohibiting or restricting circumvention of such\n+measures.\n+\n+  When you convey a covered work, you waive any legal power to forbid\n+circumvention of technological measures to the extent such circumvention\n+is effected by exercising rights under this License with respect to\n+the covered work, and you disclaim any intention to limit operation or\n+modification of the work as a means of enforcing, against the work's\n+users, your or third parties' legal rights to forbid circumvention of\n+technological measures.\n+\n+  4. Conveying Verbatim Copies.\n+\n+  You may convey verbatim copies of the Program's source code as you\n+receive it, in any medium, provided that you conspicuously and\n+appropriately publish on each copy an appropriate copyright notice;\n+keep intact all notices stating that this License and any\n+non-permissive terms added in accord with section 7 apply to the code;\n+keep intact all notices of the absence of any warranty; and give all\n+recipients a copy of this License along with the Program.\n+\n+  You may charge any price or no price for each copy that you convey,\n+and you may offer support or warranty protection for a fee.\n+\n+  5. Conveying Modified Source Versions.\n+\n+  You may convey a work based on the Program, or the modifications to\n+produce it from the Program, in the form of source code under the\n+terms of section 4, provided that you also meet all of these conditions:\n+\n+    a) The work must carry prominent notices stating that you modified\n+    it, and giving a relevant date.\n+\n+    b) The work must carry prominent notices stating that it is\n+    released under this License and any conditions added under section\n+    7.  This requirement modifies the requirement in section 4 to\n+    \"keep intact all notices\".\n+\n+    c) You must license the entire work, as a whole, under this\n+    License to anyone who comes into possession of a copy.  This\n+    License will therefore apply, along with any applicable section 7\n+    additional terms, to the whole of the work, and all its parts,\n+    regardless of how they are packaged.  This License gives no\n+    permission to license the work in any other way, but it does not\n+    invalidate such permission if you have separately received it.\n+\n+    d) If the work has interactive user interfaces, each must display\n+    Appropriate Legal Notices; however, if the Program has interactive\n+    interfaces that do not display Appropriate Legal Notices, your\n+    work need not make them do so.\n+\n+  A compilation of a covered work with other separate and independent\n+works, which are not by their nature extensions of the covered work,\n+and which are not combined with it such as to form a larger program,\n+in or on a volume of a storage or distribution medium, is called an\n+\"aggregate\" if the compilation and its resulting copyright are not\n+used to limit the access or legal rights of the compilation's users\n+beyond what the individual works permit.  Inclusion of a covered work\n+in an aggregate does not cause this License to apply to the other\n+parts of the aggregate.\n+\n+  6. Conveying Non-Source Forms.\n+\n+  You may convey a covered work in object code form under the terms\n+of sections 4 and 5, provided that you also convey the\n+machine-readable Corresponding Source under the terms of this License,\n+in one of these ways:\n+\n+    a) Convey the object code in, or embodied in, a physical product\n+    (including a physical distribution medium), accompanied by the\n+    Corresponding Source fixed on a durable physical medium\n+    customarily used for software interchange.\n+\n+    b) Convey the object code in, or embodied in, a physical product\n+    (including a physical distribution medium), accompanied by a\n+    written offer, valid for at least three years and valid for as\n+    long as you offer spare parts or customer support for that product\n+    model, to give anyone who possesses the object code either (1) a\n+    copy of the Corresponding Source for all the software in the\n+    product that is covered by this License, on a durable physical\n+    medium customarily used for software interchange, for a price no\n+    more than your reasonable cost of physically performing this\n+    conveying of source, or (2) access to copy the\n+    Corresponding Source from a network server at no charge.\n+\n+    c) Convey individual copies of the object code with a copy of the\n+    written offer to provide the Corresponding Source.  This\n+    alternative is allowed only occasionally and noncommercially, and\n+    only if you received the object code with such an offer, in accord\n+    with subsection 6b.\n+\n+    d) Convey the object code by offering access from a designated\n+    place (gratis or for a charge), and offer equivalent access to the\n+    Corresponding Source in the same way through the same place at no\n+    further charge.  You need not require recipients to copy the\n+    Corresponding Source along with the object code.  If the place to\n+    copy the object code is a network server, the Corresponding Source\n+    may be on a different server (operated by you or a third party)\n+    that supports equivalent copying facilities, provided you maintain\n+    clear directions next to the object code saying where to find the\n+    Corresponding Source.  Regardless of what server hosts the\n+    Corresponding Source, you remain obligated to ensure that it is\n+    available for as long as needed to satisfy these requirements.\n+\n+    e) Convey the object code using peer-to-peer transmission, provided\n+    you inform other peers where the object code and Corresponding\n+    Source of the work are being offered to the general public at no\n+    charge under subsection 6d.\n+\n+  A separable portion of the object code, whose source code is excluded\n+from the Corresponding Source as a System Library, need not be\n+included in conveying the object code work.\n+\n+  A \"User Product\" is either (1) a \"consumer product\", which means any\n+tangible personal property which is normally used for personal, family,\n+or household purposes, or (2) anything designed or sold for incorporation\n+into a dwelling.  In determining whether a product is a consumer product,\n+doubtful cases shall be resolved in favor of coverage.  For a particular\n+product received by a particular user, \"normally used\" refers to a\n+typical or common use of that class of product, regardless of the status\n+of the particular user or of the way in which the particular user\n+actually uses, or expects or is expected to use, the product.  A product\n+is a consumer product regardless of whether the product has substantial\n+commercial, industrial or non-consumer uses, unless such uses represent\n+the only significant mode of use of the product.\n+\n+  \"Installation Information\" for a User Product means any methods,\n+procedures, authorization keys, or other information required to install\n+and execute modified versions of a covered work in that User Product from\n+a modified version of its Corresponding Source.  The information must\n+suffice to ensure that the continued functioning of the modified object\n+code is in no case prevented or interfered with solely because\n+modification has been made.\n+\n+  If you convey an object code work under this section in, or with, or\n+specifically for use in, a User Product, and the conveying occurs as\n+part of a transaction in which the right of possession and use of the\n+User Product is transferred to the recipient in perpetuity or for a\n+fixed term (regardless of how the transaction is characterized), the\n+Corresponding Source conveyed under this section must be accompanied\n+by the Installation Information.  But this requirement does not apply\n+if neither you nor any third party retains the ability to install\n+modified object code on the User Product (for example, the work has\n+been installed in ROM).\n+\n+  The requirement to provide Installation Information does not include a\n+requirement to continue to provide support service, warranty, or updates\n+for a work that has been modified or installed by the recipient, or for\n+the User Product in which it has been modified or installed.  Access to a\n+network may be denied when the modification itself materially and\n+adversely affects the operation of the network or violates the rules and\n+protocols for communication across the network.\n+\n+  Corresponding Source conveyed, and Installation Information provided,\n+in accord with this section must be in a format that is publicly\n+documented (and with an implementation available to the public in\n+source code form), and must require no special password or key for\n+unpacking, reading or copying.\n+\n+  7. Additional Terms.\n+\n+  \"Additional permissions\" are terms that supplement the terms of this\n+License by making exceptions from one or more of its conditions.\n+Additional permissions that are applicable to the entire Program shall\n+be treated as though they were included in this License, to the extent\n+that they are valid under applicable law.  If additional permissions\n+apply only to part of the Program, that part may be used separately\n+under those permissions, but the entire Program remains governed by\n+this License without regard to the additional permissions.\n+\n+  When you convey a copy of a covered work, you may at your option\n+remove any additional permissions from that copy, or from any part of\n+it.  (Additional permissions may be written to require their own\n+removal in certain cases when you modify the work.)  You may place\n+additional permissions on material, added by you to a covered work,\n+for which you have or can give appropriate copyright permission.\n+\n+  Notwithstanding any other provision of this License, for material you\n+add to a covered work, you may (if authorized by the copyright holders of\n+that material) supplement the terms of this License with terms:\n+\n+    a) Disclaiming warranty or limiting liability differently from the\n+    terms of sections 15 and 16 of this License; or\n+\n+    b) Requiring preservation of specified reasonable legal notices or\n+    author attributions in that material or in the Appropriate Legal\n+    Notices displayed by works containing it; or\n+\n+    c) Prohibiting misrepresentation of the origin of that material, or\n+    requiring that modified versions of such material be marked in\n+    reasonable ways as different from the original version; or\n+\n+    d) Limiting the use for publicity purposes of names of licensors or\n+    authors of the material; or\n+\n+    e) Declining to grant rights under trademark law for use of some\n+    trade names, trademarks, or service marks; or\n+\n+    f) Requiring indemnification of licensors and authors of that\n+    material by anyone who conveys the material (or modified versions of\n+    it) with contractual assumptions of liability to the recipient, for\n+    any liability that these contractual assumptions directly impose on\n+    those licensors and authors.\n+\n+  All other non-permissive additional terms are considered \"further\n+restrictions\" within the meaning of section 10.  If the Program as you\n+received it, or any part of it, contains a notice stating that it is\n+governed by this License along with a term that is a further\n+restriction, you may remove that term.  If a license document contains\n+a further restriction but permits relicensing or conveying under this\n+License, you may add to a covered work material governed by the terms\n+of that license document, provided that the further restriction does\n+not survive such relicensing or conveying.\n+\n+  If you add terms to a covered work in accord with this section, you\n+must place, in the relevant source files, a statement of the\n+additional terms that apply to those files, or a notice indicating\n+where to find the applicable terms.\n+\n+  Additional terms, permissive or non-permissive, may be stated in the\n+form of a separately written license, or stated as exceptions;\n+the above requirements apply either way.\n+\n+  8. Termination.\n+\n+  You may not propagate or modify a covered work except as expressly\n+provided under this License.  Any attempt otherwise to propagate or\n+modify it is void, and will automatically terminate your rights under\n+this License (including any patent licenses granted under the third\n+paragraph of section 11).\n+\n+  However, if you cease all violation of this License, then your\n+license from a particular copyright holder is reinstated (a)\n+provisionally, unless and until the copyright holder explicitly and\n+finally terminates your license, and (b) permanently, if the copyright\n+holder fails to notify you of the violation by some reasonable means\n+prior to 60 days after the cessation.\n+\n+  Moreover, your license from a particular copyright holder is\n+reinstated permanently if the copyright holder notifies you of the\n+violation by some reasonable means, this is the first time you have\n+received notice of violation of this License (for any work) from that\n+copyright holder, and you cure the violation prior to 30 days after\n+your receipt of the notice.\n+\n+  Termination of your rights under this section does not terminate the\n+licenses of parties who have received copies or rights from you under\n+this License.  If your rights have been terminated and not permanently\n+reinstated, you do not qualify to receive new licenses for the same\n+material under section 10.\n+\n+  9. Acceptance Not Required for Having Copies.\n+\n+  You are not required to accept this License in order to receive or\n+run a copy of the Program.  Ancillary propagation of a covered work\n+occurring solely as a consequence of using peer-to-peer transmission\n+to receive a copy likewise does not require acceptance.  However,\n+nothing other than this License grants you permission to propagate or\n+modify any covered work.  These actions infringe copyright if you do\n+not accept this License.  Therefore, by modifying or propagating a\n+covered work, you indicate your acceptance of this License to do so.\n+\n+  10. Automatic Licensing of Downstream Recipients.\n+\n+  Each time you convey a covered work, the recipient automatically\n+receives a license from the original licensors, to run, modify and\n+propagate that work, subject to this License.  You are not responsible\n+for enforcing compliance by third parties with this License.\n+\n+  An \"entity transaction\" is a transaction transferring control of an\n+organization, or substantially all assets of one, or subdividing an\n+organization, or merging organizations.  If propagation of a covered\n+work results from an entity transaction, each party to that\n+transaction who receives a copy of the work also receives whatever\n+licenses to the work the party's predecessor in interest had or could\n+give under the previous paragraph, plus a right to possession of the\n+Corresponding Source of the work from the predecessor in interest, if\n+the predecessor has it or can get it with reasonable efforts.\n+\n+  You may not impose any further restrictions on the exercise of the\n+rights granted or affirmed under this License.  For example, you may\n+not impose a license fee, royalty, or other charge for exercise of\n+rights granted under this License, and you may not initiate litigation\n+(including a cross-claim or counterclaim in a lawsuit) alleging that\n+any patent claim is infringed by making, using, selling, offering for\n+sale, or importing the Program or any portion of it.\n+\n+  11. Patents.\n+\n+  A \"contributor\" is a copyright holder who authorizes use under this\n+License of the Program or a work on which the Program is based.  The\n+work thus licensed is called the contributor's \"contributor version\".\n+\n+  A contributor's \"essential patent claims\" are all patent claims\n+owned or controlled by the contributor, whether already acquired or\n+hereafter acquired, that would be infringed by some manner, permitted\n+by this License, of making, using, or selling its contributor version,\n+but do not include claims that would be infringed only as a\n+consequence of further modification of the contributor version.  For\n+purposes of this definition, \"control\" includes the right to grant\n+patent sublicenses in a manner consistent with the requirements of\n this License.\n \n-  7. If, as a consequence of a court judgment or allegation of patent\n-infringement or for any other reason (not limited to patent issues),\n-conditions are imposed on you (whether by court order, agreement or\n+  Each contributor grants you a non-exclusive, worldwide, royalty-free\n+patent license under the contributor's essential patent claims, to\n+make, use, sell, offer for sale, import and otherwise run, modify and\n+propagate the contents of its contributor version.\n+\n+  In the following three paragraphs, a \"patent license\" is any express\n+agreement or commitment, however denominated, not to enforce a patent\n+(such as an express permission to practice a patent or covenant not to\n+sue for patent infringement).  To \"grant\" such a patent license to a\n+party means to make such an agreement or commitment not to enforce a\n+patent against the party.\n+\n+  If you convey a covered work, knowingly relying on a patent license,\n+and the Corresponding Source of the work is not available for anyone\n+to copy, free of charge and under the terms of this License, through a\n+publicly available network server or other readily accessible means,\n+then you must either (1) cause the Corresponding Source to be so\n+available, or (2) arrange to deprive yourself of the benefit of the\n+patent license for this particular work, or (3) arrange, in a manner\n+consistent with the requirements of this License, to extend the patent\n+license to downstream recipients.  \"Knowingly relying\" means you have\n+actual knowledge that, but for the patent license, your conveying the\n+covered work in a country, or your recipient's use of the covered work\n+in a country, would infringe one or more identifiable patents in that\n+country that you have reason to believe are valid.\n+\n+  If, pursuant to or in connection with a single transaction or\n+arrangement, you convey, or propagate by procuring conveyance of, a\n+covered work, and grant a patent license to some of the parties\n+receiving the covered work authorizing them to use, propagate, modify\n+or convey a specific copy of the covered work, then the patent license\n+you grant is automatically extended to all recipients of the covered\n+work and works based on it.\n+\n+  A patent license is \"discriminatory\" if it does not include within\n+the scope of its coverage, prohibits the exercise of, or is\n+conditioned on the non-exercise of one or more of the rights that are\n+specifically granted under this License.  You may not convey a covered\n+work if you are a party to an arrangement with a third party that is\n+in the business of distributing software, under which you make payment\n+to the third party based on the extent of your activity of conveying\n+the work, and under which the third party grants, to any of the\n+parties who would receive the covered work from you, a discriminatory\n+patent license (a) in connection with copies of the covered work\n+conveyed by you (or copies made from those copies), or (b) primarily\n+for and in connection with specific products or compilations that\n+contain the covered work, unless you entered into that arrangement,\n+or that patent license was granted, prior to 28 March 2007.\n+\n+  Nothing in this License shall be construed as excluding or limiting\n+any implied license or other defenses to infringement that may\n+otherwise be available to you under applicable patent law.\n+\n+  12. No Surrender of Others' Freedom.\n+\n+  If conditions are imposed on you (whether by court order, agreement or\n otherwise) that contradict the conditions of this License, they do not\n-excuse you from the conditions of this License.  If you cannot\n-distribute so as to satisfy simultaneously your obligations under this\n-License and any other pertinent obligations, then as a consequence you\n-may not distribute the Program at all.  For example, if a patent\n-license would not permit royalty-free redistribution of the Program by\n-all those who receive copies directly or indirectly through you, then\n-the only way you could satisfy both it and this License would be to\n-refrain entirely from distribution of the Program.\n-\n-If any portion of this section is held invalid or unenforceable under\n-any particular circumstance, the balance of the section is intended to\n-apply and the section as a whole is intended to apply in other\n-circumstances.\n-\n-It is not the purpose of this section to induce you to infringe any\n-patents or other property right claims or to contest validity of any\n-such claims; this section has the sole purpose of protecting the\n-integrity of the free software distribution system, which is\n-implemented by public license practices.  Many people have made\n-generous contributions to the wide range of software distributed\n-through that system in reliance on consistent application of that\n-system; it is up to the author/donor to decide if he or she is willing\n-to distribute software through any other system and a licensee cannot\n-impose that choice.\n-\n-This section is intended to make thoroughly clear what is believed to\n-be a consequence of the rest of this License.\n-\n-  8. If the distribution and/or use of the Program is restricted in\n-certain countries either by patents or by copyrighted interfaces, the\n-original copyright holder who places the Program under this License\n-may add an explicit geographical distribution limitation excluding\n-those countries, so that distribution is permitted only in or among\n-countries not thus excluded.  In such case, this License incorporates\n-the limitation as if written in the body of this License.\n-\n-  9. The Free Software Foundation may publish revised and/or new versions\n-of the General Public License from time to time.  Such new versions will\n+excuse you from the conditions of this License.  If you cannot convey a\n+covered work so as to satisfy simultaneously your obligations under this\n+License and any other pertinent obligations, then as a consequence you may\n+not convey it at all.  For example, if you agree to terms that obligate you\n+to collect a royalty for further conveying from those to whom you convey\n+the Program, the only way you could satisfy both those terms and this\n+License would be to refrain entirely from conveying the Program.\n+\n+  13. Use with the GNU Affero General Public License.\n+\n+  Notwithstanding any other provision of this License, you have\n+permission to link or combine any covered work with a work licensed\n+under version 3 of the GNU Affero General Public License into a single\n+combined work, and to convey the resulting work.  The terms of this\n+License will continue to apply to the part which is the covered work,\n+but the special requirements of the GNU Affero General Public License,\n+section 13, concerning interaction through a network will apply to the\n+combination as such.\n+\n+  14. Revised Versions of this License.\n+\n+  The Free Software Foundation may publish revised and/or new versions of\n+the GNU General Public License from time to time.  Such new versions will\n be similar in spirit to the present version, but may differ in detail to\n address new problems or concerns.\n \n-Each version is given a distinguishing version number.  If the Program\n-specifies a version number of this License which applies to it and \"any\n-later version\", you have the option of following the terms and conditions\n-either of that version or of any later version published by the Free\n-Software Foundation.  If the Program does not specify a version number of\n-this License, you may choose any version ever published by the Free Software\n-Foundation.\n-\n-  10. If you wish to incorporate parts of the Program into other free\n-programs whose distribution conditions are different, write to the author\n-to ask for permission.  For software which is copyrighted by the Free\n-Software Foundation, write to the Free Software Foundation; we sometimes\n-make exceptions for this.  Our decision will be guided by the two goals\n-of preserving the free status of all derivatives of our free software and\n-of promoting the sharing and reuse of software generally.\n-\n-                            NO WARRANTY\n-\n-  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n-FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n-OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n-PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n-OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n-MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n-TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n-PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n-REPAIR OR CORRECTION.\n-\n-  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n-REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n-INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n-OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n-YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n-PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n-POSSIBILITY OF SUCH DAMAGES.\n+  Each version is given a distinguishing version number.  If the\n+Program specifies that a certain numbered version of the GNU General\n+Public License \"or any later version\" applies to it, you have the\n+option of following the terms and conditions either of that numbered\n+version or of any later version published by the Free Software\n+Foundation.  If the Program does not specify a version number of the\n+GNU General Public License, you may choose any version ever published\n+by the Free Software Foundation.\n+\n+  If the Program specifies that a proxy can decide which future\n+versions of the GNU General Public License can be used, that proxy's\n+public statement of acceptance of a version permanently authorizes you\n+to choose that version for the Program.\n+\n+  Later license versions may give you additional or different\n+permissions.  However, no additional obligations are imposed on any\n+author or copyright holder as a result of your choosing to follow a\n+later version.\n+\n+  15. Disclaimer of Warranty.\n+\n+  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\n+APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\n+HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\n+OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\n+THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\n+IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\n+ALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n+\n+  16. Limitation of Liability.\n+\n+  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\n+THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\n+GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\n+USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\n+DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\n+PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\n+EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\n+SUCH DAMAGES.\n+\n+  17. Interpretation of Sections 15 and 16.\n+\n+  If the disclaimer of warranty and limitation of liability provided\n+above cannot be given local legal effect according to their terms,\n+reviewing courts shall apply local law that most closely approximates\n+an absolute waiver of all civil liability in connection with the\n+Program, unless a warranty or assumption of liability accompanies a\n+copy of the Program in return for a fee.\n \n                      END OF TERMS AND CONDITIONS\n \n@@ -287,53 +628,47 @@ free software which everyone can redistribute and change under these terms.\n \n   To do so, attach the following notices to the program.  It is safest\n to attach them to the start of each source file to most effectively\n-convey the exclusion of warranty; and each file should have at least\n+state the exclusion of warranty; and each file should have at least\n the \"copyright\" line and a pointer to where the full notice is found.\n \n     <one line to give the program's name and a brief idea of what it does.>\n     Copyright (C) <year>  <name of author>\n \n-    This program is free software; you can redistribute it and/or modify\n+    This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n-    the Free Software Foundation; either version 2 of the License, or\n+    the Free Software Foundation, either version 3 of the License, or\n     (at your option) any later version.\n \n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     GNU General Public License for more details.\n \n-    You should have received a copy of the GNU General Public License along\n-    with this program; if not, write to the Free Software Foundation, Inc.,\n-    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+    You should have received a copy of the GNU General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n Also add information on how to contact you by electronic and paper mail.\n \n-If the program is interactive, make it output a short notice like this\n-when it starts in an interactive mode:\n+  If the program does terminal interaction, make it output a short\n+notice like this when it starts in an interactive mode:\n \n-    Gnomovision version 69, Copyright (C) year name of author\n-    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n+    <program>  Copyright (C) <year>  <name of author>\n+    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n     This is free software, and you are welcome to redistribute it\n     under certain conditions; type `show c' for details.\n \n The hypothetical commands `show w' and `show c' should show the appropriate\n-parts of the General Public License.  Of course, the commands you use may\n-be called something other than `show w' and `show c'; they could even be\n-mouse-clicks or menu items--whatever suits your program.\n-\n-You should also get your employer (if you work as a programmer) or your\n-school, if any, to sign a \"copyright disclaimer\" for the program, if\n-necessary.  Here is a sample; alter the names:\n-\n-  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n-  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n-\n-  <signature of Ty Coon>, 1 April 1989\n-  Ty Coon, President of Vice\n-\n-This General Public License does not permit incorporating your program into\n-proprietary programs.  If your program is a subroutine library, you may\n-consider it more useful to permit linking proprietary applications with the\n-library.  If this is what you want to do, use the GNU Lesser General\n-Public License instead of this License.\n+parts of the General Public License.  Of course, your program's commands\n+might be different; for a GUI interface, you would use an \"about box\".\n+\n+  You should also get your employer (if you work as a programmer) or school,\n+if any, to sign a \"copyright disclaimer\" for the program, if necessary.\n+For more information on this, and how to apply and follow the GNU GPL, see\n+<http://www.gnu.org/licenses/>.\n+\n+  The GNU General Public License does not permit incorporating your program\n+into proprietary programs.  If your program is a subroutine library, you\n+may consider it more useful to permit linking proprietary applications with\n+the library.  If this is what you want to do, use the GNU Lesser General\n+Public License instead of this License.  But first, please read\n+<http://www.gnu.org/philosophy/why-not-lgpl.html>."
        },
        {
          "filename": "README.md",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -11,7 +11,7 @@ Complex look ups can result in computationally expensive database queries.  Howe\n * Manual and Complete Documentation: [Documentation at Gamepedia Help Wiki](https://help.gamepedia.com/Extension:DPL3/Manual)\n * Source Code: [Source code at Gitlab](https://gitlab.com/hydrawiki/extensions/DynamicPageList)\n * Bugs and Feature Requests: [Issues at Gitlab](https://gitlab.com/hydrawiki/extensions/DynamicPageList/issues)\n-* Licensing: DynamicPageList3 is released under [GNU General Public License, version 2](https://opensource.org/licenses/GPL-2.0).\n+* Licensing: DynamicPageList3 is released under [GNU General Public License, version 3](https://opensource.org/licenses/GPL-3.0).\n \n \n ## Installation"
        },
        {
          "filename": "composer.json",
          "status": "modified",
          "additions": 12,
          "deletions": 11,
          "patch": "@@ -3,7 +3,7 @@\n \t\"type\": \"mediawiki-extension\",\n \t\"description\": \"The DynamicPageList3 extension allows creating lists\u00a0of other articles based on their\u00a0category, namespace, title, references\u00a0or\u00a0template usage\u00a0and\u00a0include contents\u00a0or arguments of template calls of those articles into your page.\",\n \t\"homepage\": \"https://www.mediawiki.org/wiki/Extension:DynamicPageList3\",\n-\t\"license\": \"GPL-2.0-or-later\",\n+\t\"license\": \"GPL-3.0-or-later\",\n \t\"require\": {\n \t\t\"composer/installers\": \">=1.0.1\"\n \t},\n@@ -12,22 +12,23 @@\n \t\t\"optimize-autoloader\": true\n \t},\n \t\"require-dev\": {\n-\t\t\"mediawiki/mediawiki-codesniffer\": \"35.0.0\",\n-\t\t\"mediawiki/mediawiki-phan-config\": \"0.10.6\",\n+\t\t\"mediawiki/mediawiki-codesniffer\": \"37.0.0\",\n+\t\t\"mediawiki/mediawiki-phan-config\": \"0.11.0\",\n \t\t\"mediawiki/minus-x\": \"1.1.1\",\n \t\t\"php-parallel-lint/php-console-highlighter\": \"0.5.0\",\n-\t\t\"php-parallel-lint/php-parallel-lint\": \"1.2.0\"\n+\t\t\"php-parallel-lint/php-parallel-lint\": \"1.3.1\"\n \t},\n \t\"scripts\": {\n-\t\t\"test\": [\n-\t\t\t\"parallel-lint . --exclude vendor --exclude node_modules\",\n-\t\t\t\"minus-x check .\",\n-\t\t\t\"phpcs -p -s\"\n-\t\t],\n \t\t\"fix\": [\n \t\t\t\"minus-x fix .\",\n-\t\t\t\"phpcbf\"\n+\t\t\t\"phpcbf; if [ $? -eq 1 ]; then exit 0; fi\"\n+\t\t],\n+\t\t\"test\": [\n+\t\t\t\"parallel-lint . --exclude node_modules --exclude vendor\",\n+\t\t\t\"minus-x check .\",\n+\t\t\t\"@phpcs\"\n \t\t],\n-\t\t\"phan\": \"phan -d . --long-progress-bar\"\n+\t\t\"phan\": \"phan -d . --long-progress-bar\",\n+\t\t\"phpcs\": \"phpcs -sp --cache\"\n \t}\n }"
        },
        {
          "filename": "extension.json",
          "status": "modified",
          "additions": 10,
          "deletions": 8,
          "patch": "@@ -1,17 +1,17 @@\n {\n \t\"name\": \"DynamicPageList3\",\n-\t\"version\": \"3.3.5\",\n+\t\"version\": \"3.3.6\",\n \t\"author\": [\n \t\t\"Alexia E. Smith\",\n \t\t\"[https://meta.miraheze.org/wiki/User:Universal_Omega Universal Omega]\",\n \t\t\"[https://de.wikipedia.org/wiki/Benutzer:Algorithmix Gero Scholz]\"\n \t],\n \t\"url\": \"https://www.mediawiki.org/wiki/Extension:DynamicPageList3\",\n \t\"descriptionmsg\": \"dpl-desc\",\n-\t\"license-name\": \"GPL-2.0-or-later\",\n+\t\"license-name\": \"GPL-3.0-or-later\",\n \t\"type\": \"parserhook\",\n \t\"requires\": {\n-\t\t\"MediaWiki\": \">= 1.35.0\"\n+\t\t\"MediaWiki\": \">= 1.36.0\"\n \t},\n \t\"GroupPermissions\": {\n \t\t\"sysop\": {\n@@ -29,7 +29,7 @@\n \t\t]\n \t},\n \t\"ExtensionMessagesFiles\": {\n-\t\t\"DynamicPageListMagic\": \"DynamicPageList.i18n.magic.php\"\n+\t\t\"DynamicPageListMagic\": \"includes/DynamicPageListMagic.php\"\n \t},\n \t\"AutoloadClasses\": {\n \t\t\"DPL\\\\Article\": \"includes/Article.php\",\n@@ -57,14 +57,17 @@\n \t\t\"DPL\\\\Query\": \"includes/Query.php\",\n \t\t\"DPL\\\\UpdateArticle\": \"includes/UpdateArticle.php\",\n \t\t\"DPL\\\\Variables\": \"includes/Variables.php\",\n-\t\t\"DynamicPageListHooks\": \"DynamicPageListHooks.php\"\n+\t\t\"DPL\\\\RevisionJoinBuilder\": \"includes/RevisionJoinBuilder.php\",\n+\t\t\"DPL\\\\UserQueryBuilder\": \"includes/UserQueryBuilder.php\",\n+\t\t\"DPL\\\\DynamicPageListHooks\": \"includes/DynamicPageListHooks.php\",\n+\t\t\"DPL\\\\DPLIntegrationTestCase\": \"tests/phpunit/DPLIntegrationTestCase.php\"\n \t},\n \t\"Hooks\": {\n \t\t\"ParserFirstCallInit\": [\n-\t\t\t\"DynamicPageListHooks::onParserFirstCallInit\"\n+\t\t\t\"DPL\\\\DynamicPageListHooks::onParserFirstCallInit\"\n \t\t],\n \t\t\"LoadExtensionSchemaUpdates\": [\n-\t\t\t\"DynamicPageListHooks::onLoadExtensionSchemaUpdates\"\n+\t\t\t\"DPL\\\\DynamicPageListHooks::onLoadExtensionSchemaUpdates\"\n \t\t]\n \t},\n \t\"config\": {\n@@ -95,6 +98,5 @@\n \t\t\"dplchapter-parserfunc-tracking-category\",\n \t\t\"dplmatrix-parserfunc-tracking-category\"\n \t],\n-\t\"callback\": \"DynamicPageListHooks::onRegistration\",\n \t\"manifest_version\": 1\n }"
        },
        {
          "filename": "i18n/af.json",
          "status": "removed",
          "additions": 0,
          "deletions": 10,
          "patch": "@@ -1,10 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Naudefj\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Fout: Te veel kategorie\u00eb!\",\n-    \"intersection_toofewcats\": \"Fout: Te min kategorie\u00eb!\",\n-    \"intersection_noresults\": \"Fout: Geen resultate!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/an.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Juanpabl\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Preduz una lista d'os elementos m\u00e1s rezients que bi ha en una categor\u00eda u a uni\u00f3n de barios categor\u00edas\",\n-    \"intersection_toomanycats\": \"Error: Masiadas categor\u00edas!\",\n-    \"intersection_toofewcats\": \"Error: numero insufizient de categor\u00edas!\",\n-    \"intersection_noresults\": \"Error: No bi ha garra resultau!\",\n-    \"intersection_noincludecats\": \"Error: Ha d'encluyir \u00e1 lo menos una categor\u00eda u endicar un espazio de nombres!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ar.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Meno25\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u064a\u062e\u0631\u062c \u0642\u0627\u0626\u0645\u0629 \u0645\u0639\u0644\u0645\u0629 \u0628\u0623\u062d\u062f\u062b \u0627\u0644\u0645\u062f\u062e\u0644\u0627\u062a \u0627\u0644\u0633\u0627\u0643\u0646\u0629 \u0641\u064a \u062a\u0635\u0646\u064a\u0641\u060c \u0623\u0648 \u0627\u062a\u062d\u0627\u062f \u0639\u062f\u0629 \u062a\u0635\u0646\u064a\u0641\u0627\u062a\",\n-    \"intersection_toomanycats\": \"\u062e\u0637\u0623: \u062a\u0635\u0646\u064a\u0641\u0627\u062a \u0643\u062b\u064a\u0631\u0629 \u062c\u062f\u0627!\",\n-    \"intersection_toofewcats\": \"\u062e\u0637\u0623: \u062a\u0635\u0646\u064a\u0641\u0627\u062a \u0642\u0644\u064a\u0644\u0629 \u062c\u062f\u0627!\",\n-    \"intersection_noresults\": \"\u062e\u0637\u0623: \u0644\u0627 \u0646\u062a\u0627\u0626\u062c!\",\n-    \"intersection_noincludecats\": \"\u062e\u0637\u0623: \u064a\u0646\u0628\u063a\u064a \u0623\u0646 \u062a\u0636\u0645\u0646 \u062a\u0635\u0646\u064a\u0641\u0627 \u0648\u0627\u062d\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644\u060c \u0623\u0648 \u062a\u062d\u062f\u062f \u0646\u0637\u0627\u0642\u0627!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/arz.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Meno25\",\n-            \"Ramsis II\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0628\u064a\u0637\u0644\u0639 \u0644\u0633\u062a\u0629 \u0645\u062a\u0631\u0642\u0645\u0629 \u0644\u0627\u062d\u062f\u062b \u0627\u0644\u062d\u0627\u062c\u0627\u062a \u0627\u0644\u0645\u0648\u062c\u0648\u062f\u0629 \u0641\u0649 \u062a\u0635\u0646\u064a\u0641,\u0627\u0648 \u0627\u062a\u062d\u0627\u062f \u0627\u0643\u062a\u0631 \u0645\u0646 \u062a\u0635\u0646\u064a\u0641\",\n-    \"intersection_toomanycats\": \"\u063a\u0644\u0637:\u062a\u0635\u0627\u0646\u064a\u0641 \u0643\u062a\u064a\u0631\u0629 \u062e\u0627\u0644\u0635!\",\n-    \"intersection_toofewcats\": \"\u063a\u0644\u0637:\u062a\u0635\u0627\u0646\u064a\u0641 \u0642\u0644\u064a\u0644\u0629 \u062e\u0627\u0644\u0635!\",\n-    \"intersection_noresults\": \"\u063a\u0644\u0637:\u0645\u0627\u0641\u064a\u0634 \u0646\u062a\u0627\u064a\u062c!\",\n-    \"intersection_noincludecats\": \"\u063a\u0644\u0637: \u0644\u0627\u0632\u0645 \u062a\u062d\u0637 \u062a\u0635\u0646\u064a\u0641 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644\u060c \u0623\u0648 \u062a\u062d\u062f\u062f \u0646\u0637\u0627\u0642!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ast.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Esbardu\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Amuesa una llista de los elementos m\u00e1s reci\u00e9n que tenga una categor\u00eda o una xuntanza de varies categor\u00edes\",\n-    \"intersection_toomanycats\": \"Error: \u00a1Demasiaes categor\u00edes!\",\n-    \"intersection_toofewcats\": \"Error: \u00a1Demasiaes poques categor\u00edes!\",\n-    \"intersection_noresults\": \"Error: \u00a1Nun hai resultaos!\",\n-    \"intersection_noincludecats\": \"Error: \u00a1Necesites amiestar a lo menos una categor\u00eda, o especificar un espaciu de nomes!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/bcc.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Mostafadaneshvar\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"DynamicPageList: \u0628\u0627\u0632\u06af\u06cc\u0646 \u062f\u0633\u062a\u0647 \u062c\u0627\u062a!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u0628\u0627\u0632 \u06a9\u0645\u06cc\u0646 \u062f\u0633\u062a\u0647 \u062c\u0627\u062a!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u0647\u0686 \u0646\u062a\u06cc\u062c\u0647 \u0627\u06cc\",\n-    \"intersection_noincludecats\": \"\u0644\u06cc\u0633\u062a \u0635\u0641\u062d\u0627\u062a \u062f\u06cc\u0646\u0627\u0645\u06cc\u06a9\u06cc: \u0634\u0645\u0627 \u0644\u0627\u0632\u0645\u0646\u062a \u062d\u062f\u0627\u0642\u0644 \u06cc\u06a9 \u062f\u0633\u062a\u0647 \u0647\u0648\u0631 \u06a9\u0646\u06cc\u062a \u06cc\u0627 \u06cc\u06a9 \u0646\u0627\u0645 \u0641\u0636\u0627\u06cc\u06cc \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062a!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/be-tarask.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"EugeneZelenko\",\n-            \"Jim-by\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0412\u044b\u0432\u043e\u0434\u0437\u0456\u0446\u044c \u0443 \u043c\u0430\u0440\u043a\u0456\u0440\u0430\u0432\u0430\u043d\u044b \u0441\u044c\u043f\u0456\u0441 \u0430\u043f\u043e\u0448\u043d\u0456\u044f \u0434\u0430\u0431\u0430\u045e\u043b\u0435\u043d\u044c\u043d\u0456 \u0434\u0430 \u043a\u0430\u0442\u044d\u0433\u043e\u0440\u044b\u0456 \u0430\u043b\u044c\u0431\u043e \u0430\u0431'\u044f\u0434\u043d\u043e\u045e\u0432\u0430\u0435 \u043d\u0435\u043a\u0430\u043b\u044c\u043a\u0456 \u043a\u0430\u0442\u044d\u0433\u043e\u0440\u044b\u044f\u045e\",\n-    \"intersection_toomanycats\": \"\u041f\u0430\u043c\u044b\u043b\u043a\u0430: \u0417\u0430\u0448\u043c\u0430\u0442 \u043a\u0430\u0442\u044d\u0433\u043e\u0440\u044b\u044f\u045e!\",\n-    \"intersection_toofewcats\": \"\u041f\u0430\u043c\u044b\u043b\u043a\u0430: \u0417\u0430\u043d\u0430\u0434\u0442\u0430 \u043c\u0430\u043b\u0430 \u043a\u0430\u0442\u044d\u0433\u043e\u0440\u044b\u044f\u045e!\",\n-    \"intersection_noresults\": \"\u041f\u0430\u043c\u044b\u043b\u043a\u0430: \u041d\u044f\u043c\u0430 \u0432\u044b\u043d\u0456\u043a\u0430\u045e!\",\n-    \"intersection_noincludecats\": \"\u041f\u0430\u043c\u044b\u043b\u043a\u0430: \u0412\u0430\u043c \u043d\u0435\u0430\u0431\u0445\u043e\u0434\u043d\u0430 \u045e\u043a\u043b\u044e\u0447\u044b\u0446\u044c \u0445\u0430\u0446\u044f \u0431 \u0430\u0434\u043d\u0443 \u043a\u0430\u0442\u044d\u0433\u043e\u0440\u044b\u044e \u0430\u043b\u044c\u0431\u043e \u045e\u043a\u0430\u0437\u0430\u0446\u044c \u043f\u0440\u0430\u0441\u0442\u043e\u0440\u0443 \u043d\u0430\u0437\u0432\u0430\u045e!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/bg.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"DCLXVI\",\n-            \"Spiritia\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0418\u0437\u0432\u0435\u0436\u0434\u0430 \u0441\u043f\u0438\u0441\u044a\u043a \u043d\u0430 \u043d\u0430\u0439-\u0441\u043a\u043e\u0440\u043e\u0448\u043d\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0434\u0430\u0434\u0435\u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0438\u043b\u0438 \u0441\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u043d\u044f\u043a\u043e\u043b\u043a\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438\",\n-    \"intersection_toomanycats\": \"Error: \u0422\u0432\u044a\u0440\u0434\u0435 \u043c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438!\",\n-    \"intersection_toofewcats\": \"Error: \u0422\u0432\u044a\u0440\u0434\u0435 \u043c\u0430\u043b\u043a\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438!\",\n-    \"intersection_noresults\": \"Error: \u041d\u044f\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u0442\u0430\u0442\u0438!\",\n-    \"intersection_noincludecats\": \"Error: \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0435 \u0434\u0430 \u0441\u0435 \u0432\u043a\u043b\u044e\u0447\u0438 \u043f\u043e\u043d\u0435 \u0435\u0434\u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0438\u043b\u0438 \u0434\u0430 \u0441\u0435 \u043f\u043e\u0441\u043e\u0447\u0438 \u0438\u043c\u0435\u043d\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/bn.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Bellayet\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: \u0985\u09a8\u09c7\u0995 \u09ac\u09c7\u09b6\u09bf \u09ac\u09bf\u09b7\u09af\u09bc\u09b6\u09cd\u09b0\u09c7\u09a3\u09c0!\",\n-    \"intersection_toofewcats\": \"Error: \u0985\u09a8\u09c7\u0995 \u0995\u09ae \u09ac\u09bf\u09b7\u09af\u09bc\u09b6\u09cd\u09b0\u09c7\u09a3\u09c0!\",\n-    \"intersection_noresults\": \"Error: \u09ab\u09b2\u09be\u09ab\u09b2 \u09a8\u09be\u0987!\",\n-    \"intersection_noincludecats\": \"\u09a4\u09cd\u09b0\u09c1\u099f\u09bf:\u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09a8\u09cd\u09a4\u09a4 \u098f\u0995\u099f\u09bf \u09ac\u09bf\u09b7\u09af\u09bc\u09b6\u09cd\u09b0\u09c7\u09a3\u09c0 \u09af\u09c1\u0995\u09cd\u09a4 \u0995\u09b0\u09a4\u09c7, \u0985\u09a5\u09ac\u09be \u098f\u0995\u099f\u09bf \u09a8\u09c7\u09ae\u09b8\u09cd\u09aa\u09c7\u09b8 \u09a6\u09bf\u09a4\u09c7 \u09b9\u09ac\u09c7!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/br.json",
          "status": "removed",
          "additions": 0,
          "deletions": 10,
          "patch": "@@ -1,10 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Fulup\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: Re a rummado\u00f9 !\",\n-    \"intersection_toofewcats\": \"Error: Re nebeut a rummado\u00f9 !\",\n-    \"intersection_noresults\": \"Error: Disoc'h ebet !\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/bs.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"CERminator\",\n-            \"Seha\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Izbacuje listu naj\u010de\u0161\u0107ih ta\u010daka koje se nalaze u kategoriji ili u sekciji nekoliko kategorija.\",\n-    \"intersection_toomanycats\": \"Gre\u0161ka: Previ\u0161e kategorija!\",\n-    \"intersection_toofewcats\": \"Gre\u0161ka: Premalo kategorija!\",\n-    \"intersection_noresults\": \"Gre\u0161ka: Nema rezultata!\",\n-    \"intersection_noincludecats\": \"Gre\u0161ka: Potrebno je da uklju\u010dite najmanje jednu kategoriju ili odredite imenski prostor!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ca.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Paucabot\",\n-            \"SMP\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Genera una llista d'elements recents en una categoria o en la intersecci\u00f3 de diverses.\",\n-    \"intersection_toomanycats\": \"Error: Massa categories!\",\n-    \"intersection_toofewcats\": \"Error: Massa poques categories!\",\n-    \"intersection_noresults\": \"Error: Cap resultat!\",\n-    \"intersection_noincludecats\": \"Error: Heu d'incloure almenys una categoria o especificar un espai de noms!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/cs.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Li-sung\",\n-            \"Mat\u011bj Grabovsk\u00fd\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Vyp\u00ed\u0161e seznam nejnov\u011bj\u0161\u00edch polo\u017eek v kategorii nebo sjednot\u00ed n\u011bkolik kategori\u00ed\",\n-    \"intersection_toomanycats\": \"Error: P\u0159\u00edli\u0161 mnoho kategori\u00ed!\",\n-    \"intersection_toofewcats\": \"Error: M\u00e1lo kategori\u00ed!\",\n-    \"intersection_noresults\": \"Error: \u017d\u00e1dn\u00e9 v\u00fdsledky!\",\n-    \"intersection_noincludecats\": \"Error: Mus\u00edte zahrnout alespo\u0148 jednu kategorii nebo ur\u010dit jmenn\u00fd prostor!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/de.json",
          "status": "removed",
          "additions": 0,
          "deletions": 49,
          "patch": "@@ -1,49 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Gero Scholz\",\n-            \"MarkusRost\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Ausgabe einer Liste der aktuellsten Eintr\u00e4ge in einer Kategorie, oder der Schnittmenge mehrerer Kategorien\",\n-    \"intersection_toomanycats\": \"Fehler: Zu viele Kategorien!\",\n-    \"intersection_toofewcats\": \"Fehler: Zu wenige Kategorien!\",\n-    \"intersection_noresults\": \"Fehler: Kein Ergebnis!\",\n-    \"intersection_noincludecats\": \"Fehler: Es muss mindestens eine Kategorie eingebunden werden oder ein Namensraum angegeben sein!\",\n-    \"dpl_log_1\": \"Fehler: bei \u201e$1\u201c Parameter: \u201e$2\u201c! Hilfe:  <code>$1= <i>(leer)</i> (Hauptnamensraum)$3</code>.\",\n-    \"dpl_log_2\": \"Fehler: bei \u201e$1\u201c Parameter: \u201e$2\u201c! Hilfe:  <code>$1= <i>vollst\u00e4ndiger Seitenname</i></code>.\",\n-    \"dpl_log_3\": \"Fehler: Zu viele Kategorien! Maximum: $1.\",\n-    \"dpl_log_4\": \"Fehler: Zu wenige Kategorien! Minimum: $1.\",\n-    \"dpl_log_5\": \"Fehler: Keine Auswahlkriterien angegeben! Mindestens einer der folgenden Parameter ist erforderlich: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby oder die \u201enot\u201c-Varianten davon.\",\n-    \"dpl_log_6\": \"Fehler: Sie m\u00fcssen mindestens eine Kategorie angeben, wenn Sie \u201eaddfirstcategorydate=true\u201c oder \u201eordermethod=categoryadd\u201c benutzen.\",\n-    \"dpl_log_7\": \"Fehler: Wenn Sie mehr als eine Kategorie angeben, k\u00f6nnen Sie \u201eaddfirstcategorydate=true\u201c oder \u201eordermethod=categoryadd\u201c nicht benutzen.\",\n-    \"dpl_log_8\": \"Fehler: Es ist nur eine einzige Art der Datumsangabe gleichzeitig m\u00f6glich.\",\n-    \"dpl_log_9\": \"Fehler: Der Parameter \u201e$1\u201c muss in Verbindung mit \u201eordermethod=[ $2 ]\u201c benutzt werden.\",\n-    \"dpl_log_10\": \"Fehler: Die Indexangabe bei \u201edominantsection\u201c muss zwischen 1 und  der Anzahl der Argumente von \u201eincludepage\u201c liegen ($0 in diesem Fall).\",\n-    \"dpl_log_11\": \"Fehler: Kann keine logischen Operationen an nicht kategorisierten Seiten ausf\u00fchren (z.&nbsp;B. mit dem \u201ecategory\u201c Parameter) weil die \u201e$0\u201c-Ansicht nicht in der Datenbank vorhanden ist!\",\n-    \"dpl_log_12\": \"Fehler: Die Angabe von \u201eopenreferences\u201c ist nicht vereinbar mit anderen angegegeben Optionen. Entferne die anderen Optionen oder \u201eopenreferences\u201c. Details dazu stehen im DPL-Manual.\",\n-    \"dpl_log_13\": \"Warnung: Der unbekannte Parameter \u201e$1\u201c wurde ignoriert. Hilfe: Verf\u00fcgbare Parameter: <code>$2</code>.\",\n-    \"dpl_log_14\": \"Warnung: \u00dcberspringe die ung\u00fcltige Option \u201e$2\u201c f\u00fcr den Parameter \u201e$1\u201c.\",\n-    \"dpl_log_15\": \"Warnung: Falscher \u201e$1\u201c-Parameter: \u201e$2\u201c! Standardwert wird verwendet: \u201e$3\u201c (unbegrenzt). Hilfe: <code>$1= <i>(leer)</i> (unbegrenzt) | n</code>, wobei <code>n</code> eine positive Ganzzahl sein muss.\",\n-    \"dpl_log_16\": \"Warnung: Keine Ergebnisse.\",\n-    \"dpl_log_17\": \"Warnung: Add* Parameter (\u201eadduser\u201c, \u201eaddeditdate\u201c, usw.) und \u201eincludepage\u201c haben keinen Effekt in Verbindung mit \u201emode=category\u201c. Es kann nur der Seitentitel und Namensraum angezeigt werden.\",\n-    \"dpl_log_18\": \"Warnung: \u201eheadingmode=$1\u201c hat keinen Effekt, wenn \u201eordermethod\u201c sich auf eine einzelne Komponente bezieht. Es wird \u201e$2\u201c verwendet. Hilfe: Sie k\u00f6nnen not-$1 \u201eheadingmode\u201c Werte in Verbindung mit \u201eordermethod\u201c f\u00fcr mehrfache Komponenten verwenden. Die erste Konponente wird f\u00fcr Gruppen verwendet. Z.&nbsp;B. \u201eordermethod=category,<i>comp</i>\u201c (<i>comp</i> ist eine andere Komponente) f\u00fcr Kategorie-Gruppen.\",\n-    \"dpl_log_19\": \"Warnung: \u201edebug=$1\u201c steht nicht an erster Stelle in der DPL-Anweisung. Die Einstellung wird erst wirksam, nachdem die vorausgehenden Parameter gepr\u00fcft und verarbeitet sind.\",\n-    \"dpl_log_20\": \"Warnung: Endlosschleife beim Einbinden von Inhalten der Seite \u201e$0\u201c.\",\n-    \"dpl_log_21\": \"Datenbank-Abfrage: <code>$0</code>\",\n-    \"dpl_log_22\": \"Warnung: Keine Parameter-Option angegeben f\u00fcr \u201e$1\u201c. (\u201e=\u201c fehlt)\",\n-    \"dpl_articlecount\": \"Diese Gruppe enth\u00e4lt {{PLURAL:$1|einen|$1}} Artikel.\",\n-    \"action-dpl_param_update_rules\": \"um den Parameter \u201eupdaterules\u201c zu nutzen\",\n-    \"action-dpl_param_delete_rules\": \"um den Parameter \u201edeleterules\u201c zu nutzen\",\n-    \"dpl_query_error\": \"Die DPL-Erweiterung (Version $1) produzierte ein SQL-Statement, was zu einem Datenbank-Fehler f\u00fchrte.<br/>Der Grund k\u00f6nnte ein interner Fehler von DPL sein oder ein Fehler deinerseits; besonders beim Nutzen von Parametern wie \u201ecategoryregexp\u201c oder \u201etitleregexp\u201c.  Die Verwendung von non-greedy *? matching patterns werden nicht unterst\u00fctzt.<br/>Fehlermeldung:<br/><code>$2</code>\",\n-    \"dpl-tag-tracking-category\": \"Seiten, die DynamicPageList parser tag nutzen\",\n-    \"dpl-intersection-tracking-category\": \"Seiten, die DynamicPageList Intersection parser tag nutzen\",\n-    \"dpl-parserfunc-tracking-category\": \"Seiten, die DynamicPageList parser function nutzen\",\n-    \"dplnum-parserfunc-tracking-category\": \"Seiten, die DynamicPageList dplnum parser function nutzen\",\n-    \"dplvar-parserfunc-tracking-category\": \"Seiten, die DynamicPageList dplvar parser function nutzen\",\n-    \"dplreplace-parserfunc-tracking-category\": \"Seiten, die DynamicPageList dplreplace parser function nutzen\",\n-    \"dplchapter-parserfunc-tracking-category\": \"Seiten, die DynamicPageList dplchapter parser function nutzen\",\n-    \"dplmatrix-parserfunc-tracking-category\": \"Seiten, die DynamicPageList dplmatrix parser function nutzen\",\n-    \"right-dpl_param_delete_rules\": \"Massenl\u00f6schungen von Seiten, die DPL nutzen\",\n-    \"right-dpl_param_update_rules\": \"Massen\u00e4nderungen von Seiten, die DPL nutzen\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/dsb.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Michawiki\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Wudawa lis\u0107ina nejaktualnjej\u0161ych zapiskow w kategoriji abo zgromadneje m\u0142ogos\u0107i n\u011bkotarych kategorijow\",\n-    \"intersection_toomanycats\": \"Zm\u00f3lka: P\u015bewjele kategorijow!\",\n-    \"intersection_toofewcats\": \"Zm\u00f3lka: P\u015bema\u0142o kategorijow!\",\n-    \"intersection_noresults\": \"Zm\u00f3lka: \u017dedne wusl\u011bdki!\",\n-    \"intersection_noincludecats\": \"Zm\u00f3lka: Musy\u0161 nanejmjenjej jadnu kategoriju zap\u015b\u011bgnu\u015b abo mjenjowy rum p\u00f3da\u015b!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/el.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Dead3y3\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0388\u03c7\u03b5\u03b9 \u03c9\u03c2 \u03ad\u03be\u03bf\u03b4\u03bf \u03bc\u03b9\u03b1 \u03bc\u03b7 \u03b1\u03c1\u03b9\u03b8\u03bc\u03b7\u03bc\u03ad\u03bd\u03b7 \u03bb\u03af\u03c3\u03c4\u03b1 \u03c4\u03c9\u03bd \u03c0\u03b9\u03bf \u03c0\u03c1\u03cc\u03c3\u03c6\u03b1\u03c4\u03c9\u03bd \u03c3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03c9\u03bd \u03c3\u03b5 \u03bc\u03b9\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1, \u03ae \u03bc\u03b9\u03b1 \u03c4\u03bf\u03bc\u03ae \u03bc\u03b5\u03c1\u03b9\u03ba\u03ce\u03bd \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03b9\u03ce\u03bd\",\n-    \"intersection_toomanycats\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a0\u03ac\u03c1\u03b1 \u03c0\u03bf\u03bb\u03bb\u03ad\u03c2 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b5\u03c2!\",\n-    \"intersection_toofewcats\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a0\u03bf\u03bb\u03cd \u03bb\u03af\u03b3\u03b5\u03c2 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b5\u03c2!\",\n-    \"intersection_noresults\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b1\u03c0\u03bf\u03c4\u03b5\u03bb\u03ad\u03c3\u03bc\u03b1\u03c4\u03b1!\",\n-    \"intersection_noincludecats\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c0\u03b5\u03c1\u03b9\u03bb\u03ac\u03b2\u03b5\u03c4\u03b5 \u03c4\u03bf\u03c5\u03bb\u03ac\u03c7\u03b9\u03c3\u03c4\u03bf\u03bd \u03bc\u03af\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1, \u03ae \u03bd\u03b1 \u03bf\u03c1\u03af\u03c3\u03b5\u03c4\u03b5 \u03bc\u03b9\u03b1 \u03c0\u03b5\u03c1\u03b9\u03bf\u03c7\u03ae \u03bf\u03bd\u03bf\u03bc\u03ac\u03c4\u03c9\u03bd!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/en.json",
          "status": "modified",
          "additions": 50,
          "deletions": 49,
          "patch": "@@ -1,50 +1,51 @@\n {\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"m:User:Dangerman <cyril.dangerville@gmail.com>\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Outputs a bulleted list of the most recent items residing in a category, or an intersection of several categories\",\n-    \"intersection_toomanycats\": \"Error: Too many categories!\",\n-    \"intersection_toofewcats\": \"Error: Too few categories!\",\n-    \"intersection_noresults\": \"Error: No results!\",\n-    \"intersection_noincludecats\": \"Error: You need to include at least one category, or specify a namespace!\",\n-    \"dpl-desc\": \"A highly flexible report generator for MediaWikis\",\n-    \"dpl_log_1\": \"Error: Wrong '$1' parameter: '$2'! Help:  <code>$1= <i>empty string</i> (Main)$3</code>.\",\n-    \"dpl_log_2\": \"Error: Wrong '$1' parameter: '$2'! Help:  <code>$1= <i>full pagename</i></code>.\",\n-    \"dpl_log_3\": \"Error: Too many categories! Maximum: $1. Help: increase <code>$wgDplSettings['maxCategoryCount']</code> to specify more categories or set <code>$wgDplSettings['allowUnlimitedCategories'] = true;</code> for no limitation. (Set the variable in the wiki's <code>LocalSettings.php</code> configuration file.)\",\n-    \"dpl_log_4\": \"Error: Too few categories! Minimum: $1. Help: decrease <code>$wgDplSettings['minCategoryCount']</code> to specify fewer categories. (Set the variable in the wiki's <code>LocalSettings.php</code> configuration file.)\",\n-    \"dpl_log_5\": \"Error: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"Error: At least one category must be chosen if to use 'addfirstcategorydate=true' or 'ordermethod=categoryadd'.\",\n-    \"dpl_log_7\": \"Error: If you include more than one category, you cannot use 'addfirstcategorydate=true' or 'ordermethod=categoryadd'.\",\n-    \"dpl_log_8\": \"Error: Only one date type can be added at a time.\",\n-    \"dpl_log_9\": \"Error: The paramater '$1' must be used with 'ordermethod=[ $2 ]'\",\n-    \"dpl_log_10\": \"Error: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"Error: Cannot perform logical operations on the Uncategorized pages (f.e. with the 'category' parameter) because the $0 view does not exist on the database! Help: have the database administrator execute this query: <code>$1</code>.\",\n-    \"dpl_log_12\": \"Error: specifying \\\"openreferences\\\" is incompatible with another option specified.  Please remove that other option or \\\"openreferences\\\".  See the manual for details.\",\n-    \"dpl_log_13\": \"Warning: Unknown parameter '$1' was ignored. Help: available parameters: <code>$2</code>.\",\n-    \"dpl_log_14\": \"Warning: Skipping bad option '$2' for parameter '$1'.\",\n-    \"dpl_log_15\": \"Warning: Wrong '$1' parameter: '$2'! Using default: '$3' (no limit). Help: <code>$1= <i>empty string</i> (no limit) | n</code>, with <code>n</code> a positive integer.\",\n-    \"dpl_log_16\": \"Warning: No results.\",\n-    \"dpl_log_17\": \"Warning: Add* parameters ('adduser', 'addeditdate', etc.)' and 'includepage' have no effect with 'mode=category'. Only the page namespace/title can be viewed in this mode.\",\n-    \"dpl_log_18\": \"Warning: 'headingmode=$1' has no effect with 'ordermethod' on a single component. Using: '$2'. Help: you can use not-$2 'headingmode' values with 'ordermethod' on multiple components. The first component is used for headings. E.g. 'ordermethod=category,<i>comp</i>' (<i>comp</i> is another component) for category headings.\",\n-    \"dpl_log_19\": \"Warning: 'debug=$1' is not in first position in the DPL element. The new debug settings are not applied before all previous parameters have been parsed and checked.\",\n-    \"dpl_log_20\": \"Warning: An infinite transclusion loop is created by page '$0'.\",\n-    \"dpl_log_21\": \"Query: <code>$0</code>\",\n-    \"dpl_log_22\": \"Warning: No parameter option supplied for '$1'. (Missing '=')\",\n-    \"dpl_articlecount\": \"There {{PLURAL:$1|is one article|are $1 articles}} in this heading.\",\n-    \"dpl_description\": \"A flexible report generator for MediaWiki. See [http://semeb.com/dpldemo] for the manual and examples\",\n-    \"action-dpl_param_update_rules\": \"to use the parameter 'updaterules'\",\n-    \"action-dpl_param_delete_rules\": \"to use the parameter 'deleterules'\",\n-    \"dpl_query_error\": \"The DPL extension (version $1) produced a SQL statement which led to a Database error.<br/>The reason may be an internal error of DPL or an error which you made; especially when using parameters like 'categoryregexp' or 'titleregexp'.  Usage of non-greedy *? matching patterns are not supported.<br/>Error message was:<br/><tt>$2</tt>\",\n-    \"dpl-tag-tracking-category\": \"Pages using DynamicPageList parser tag\",\n-    \"dpl-intersection-tracking-category\": \"Pages using DynamicPageList Intersection parser tag\",\n-    \"dpl-parserfunc-tracking-category\": \"Pages using DynamicPageList parser function\",\n-    \"dplnum-parserfunc-tracking-category\": \"Pages using DynamicPageList dplnum parser function\",\n-    \"dplvar-parserfunc-tracking-category\": \"Pages using DynamicPageList dplvar parser function\",\n-    \"dplreplace-parserfunc-tracking-category\": \"Pages using DynamicPageList dplreplace parser function\",\n-    \"dplchapter-parserfunc-tracking-category\": \"Pages using DynamicPageList dplchapter parser function\",\n-    \"dplmatrix-parserfunc-tracking-category\": \"Pages using DynamicPageList dplmatrix parser function\",\n-    \"right-dpl_param_delete_rules\": \"Mass deletion of pages using DPL\",\n-    \"right-dpl_param_update_rules\": \"Mass update of pages using DPL\"\n-}\n\\ No newline at end of file\n+\t\"@metadata\": {\n+\t\t\"authors\": [\n+\t\t\t\"Dangerman\",\n+\t\t\t\"Universal Omega\"\n+\t\t]\n+\t},\n+\t\"intersection-desc\": \"Outputs a bulleted list of the most recent items residing in a category, or an intersection of several categories\",\n+\t\"intersection_toomanycats\": \"Error: Too many categories!\",\n+\t\"intersection_toofewcats\": \"Error: Too few categories!\",\n+\t\"intersection_noresults\": \"Error: No results!\",\n+\t\"intersection_noincludecats\": \"Error: You need to include at least one category, or specify a namespace!\",\n+\t\"dpl-desc\": \"A highly flexible report generator for MediaWikis\",\n+\t\"dpl_log_1\": \"Error: Wrong '$1' parameter: '$2'! Help: <code>$1= <i>empty string</i> (Main)$3</code>.\",\n+\t\"dpl_log_2\": \"Error: Wrong '$1' parameter: '$2'! Help: <code>$1= <i>full pagename</i></code>.\",\n+\t\"dpl_log_3\": \"Error: Too many categories! Maximum: $1. Help: increase <code>$wgDplSettings['maxCategoryCount']</code> to specify more categories or set <code>$wgDplSettings['allowUnlimitedCategories'] = true;</code> for no limitation. (Set the variable in the wiki's <code>LocalSettings.php</code> configuration file.)\",\n+\t\"dpl_log_4\": \"Error: Too few categories! Minimum: $1. Help: decrease <code>$wgDplSettings['minCategoryCount']</code> to specify fewer categories. (Set the variable in the wiki's <code>LocalSettings.php</code> configuration file.)\",\n+\t\"dpl_log_5\": \"Error: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n+\t\"dpl_log_6\": \"Error: At least one category must be chosen if to use 'addfirstcategorydate=true' or 'ordermethod=categoryadd'.\",\n+\t\"dpl_log_7\": \"Error: If you include more than one category, you cannot use 'addfirstcategorydate=true' or 'ordermethod=categoryadd'.\",\n+\t\"dpl_log_8\": \"Error: Only one date type can be added at a time.\",\n+\t\"dpl_log_9\": \"Error: The paramater '$1' must be used with 'ordermethod=[ $2 ]'\",\n+\t\"dpl_log_10\": \"Error: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n+\t\"dpl_log_11\": \"Error: Cannot perform logical operations on the Uncategorized pages (f.e. with the 'category' parameter) because the $0 view does not exist on the database! Help: have the database administrator execute this query: <code>$1</code>.\",\n+\t\"dpl_log_12\": \"Error: specifying \\\"openreferences\\\" is incompatible with another option specified. Please remove that other option or \\\"openreferences\\\". See the manual for details.\",\n+\t\"dpl_log_13\": \"Warning: Unknown parameter '$1' was ignored. Help: available parameters: <code>$2</code>.\",\n+\t\"dpl_log_14\": \"Warning: Skipping bad option '$2' for parameter '$1'.\",\n+\t\"dpl_log_15\": \"Warning: Wrong '$1' parameter: '$2'! Using default: '$3' (no limit). Help: <code>$1= <i>empty string</i> (no limit) | n</code>, with <code>n</code> a positive integer.\",\n+\t\"dpl_log_16\": \"Warning: No results.\",\n+\t\"dpl_log_17\": \"Warning: Add* parameters ('adduser', 'addeditdate', etc.)' and 'includepage' have no effect with 'mode=category'. Only the page namespace/title can be viewed in this mode.\",\n+\t\"dpl_log_18\": \"Warning: 'headingmode=$1' has no effect with 'ordermethod' on a single component. Using: '$2'. Help: you can use not-$2 'headingmode' values with 'ordermethod' on multiple components. The first component is used for headings. E.g. 'ordermethod=category,<i>comp</i>' (<i>comp</i> is another component) for category headings.\",\n+\t\"dpl_log_19\": \"Warning: 'debug=$1' is not in first position in the DPL element. The new debug settings are not applied before all previous parameters have been parsed and checked.\",\n+\t\"dpl_log_20\": \"Warning: An infinite transclusion loop is created by page '$0'.\",\n+\t\"dpl_log_21\": \"Query: <code>$0</code>\",\n+\t\"dpl_log_22\": \"Warning: No parameter option supplied for '$1'. (Missing '=')\",\n+\t\"dpl_articlecount\": \"There {{PLURAL:$1|is one article|are $1 articles}} in this heading.\",\n+\t\"dpl_description\": \"A flexible report generator for MediaWiki. See [http://semeb.com/dpldemo] for the manual and examples\",\n+\t\"action-dpl_param_update_rules\": \"to use the parameter 'updaterules'\",\n+\t\"action-dpl_param_delete_rules\": \"to use the parameter 'deleterules'\",\n+\t\"dpl_query_error\": \"The DPL extension (version $1) produced a SQL statement which led to a Database error.<br/>The reason may be an internal error of DPL or an error which you made; especially when using parameters like 'categoryregexp' or 'titleregexp'. Usage of non-greedy *? matching patterns are not supported.<br/>Error message was:<br/><tt>$2</tt>\",\n+\t\"dpl-tag-tracking-category\": \"Pages using DynamicPageList parser tag\",\n+\t\"dpl-intersection-tracking-category\": \"Pages using DynamicPageList Intersection parser tag\",\n+\t\"dpl-parserfunc-tracking-category\": \"Pages using DynamicPageList parser function\",\n+\t\"dplnum-parserfunc-tracking-category\": \"Pages using DynamicPageList dplnum parser function\",\n+\t\"dplvar-parserfunc-tracking-category\": \"Pages using DynamicPageList dplvar parser function\",\n+\t\"dplreplace-parserfunc-tracking-category\": \"Pages using DynamicPageList dplreplace parser function\",\n+\t\"dplchapter-parserfunc-tracking-category\": \"Pages using DynamicPageList dplchapter parser function\",\n+\t\"dplmatrix-parserfunc-tracking-category\": \"Pages using DynamicPageList dplmatrix parser function\",\n+\t\"right-dpl_param_delete_rules\": \"Mass deletion of pages using DPL\",\n+\t\"right-dpl_param_update_rules\": \"Mass update of pages using DPL\"\n+}"
        },
        {
          "filename": "i18n/eo.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Yekrats\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Eligas bulpunktitan liston de la plej lastaj kategorianoj, a\u016d unuigo de pluraj kategorioj\",\n-    \"intersection_toomanycats\": \"Eraro: Tro da kategorioj!\",\n-    \"intersection_toofewcats\": \"Error: Tro malmultaj da kategorioj!\",\n-    \"intersection_noresults\": \"Error: Neniom da rezultoj!\",\n-    \"intersection_noincludecats\": \"Error: Vi devas inkluzivi almena\u016d unu kategorion, a\u016d specifigu nomspacon!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/es.json",
          "status": "removed",
          "additions": 0,
          "deletions": 14,
          "patch": "@@ -1,14 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Aleator\",\n-            \"Remember the dot\",\n-            \"Sanbec\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Devuelve una lista de los elementos m\u00e1s recientes que est\u00e1n en una categor\u00eda o en una intersecci\u00f3n de varias categor\u00edas\",\n-    \"intersection_toomanycats\": \"\u00a1Error: Demasiadas categor\u00edas!\",\n-    \"intersection_toofewcats\": \"Error: \u00a1Muy pocas categor\u00edas!\",\n-    \"intersection_noresults\": \"Error: \u00a1Sin resultados!\",\n-    \"intersection_noincludecats\": \"Error: \u00a1Necesita incluir al menos una categor\u00eda, o especificar un espacio de nombres!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/eu.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"An13sa\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Errorea: Kategoria gehiegi!\",\n-    \"intersection_toofewcats\": \"Errorea: Kategoria gutxiegi!\",\n-    \"intersection_noresults\": \"Errorea: Emaitzarik ez!\",\n-    \"intersection_noincludecats\": \"Errorea: Gutxienez kategoria bat gehitu edo izen bat zehaztu behar duzu!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/fa.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Huji\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0641\u0647\u0631\u0633\u062a \u06af\u0644\u0648\u0644\u0647\u200c\u0627\u06cc \u0627\u0632 \u0635\u0641\u062d\u0647\u200c\u0647\u0627\u06cc\u06cc \u0628\u0647 \u0646\u0645\u0627\u06cc\u0634 \u062f\u0631 \u0645\u06cc\u200c\u0622\u0648\u0631\u062f \u06a9\u0647 \u0628\u0647 \u062a\u0627\u0632\u06af\u06cc \u062f\u0631 \u06cc\u06a9 \u06cc\u0627 \u0686\u0646\u062f \u0631\u062f\u0647 \u0648\u0627\u0631\u062f \u0634\u062f\u0647\u200c\u0627\u0646\u062f\",\n-    \"intersection_toomanycats\": \"DynamicPageList: \u062a\u0639\u062f\u0627\u062f \u0631\u062f\u0647\u200c\u0647\u0627 \u0632\u06cc\u0627\u062f \u0627\u0633\u062a!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u062a\u0639\u062f\u0627\u062f \u0631\u062f\u0647\u200c\u0647\u0627 \u06a9\u0645 \u0627\u0633\u062a!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u0646\u062a\u06cc\u062c\u0647\u200c\u0627\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: \u0634\u0645\u0627 \u062d\u062f\u0627\u0642\u0644 \u0628\u0627\u06cc\u062f \u06cc\u06a9 \u0631\u062f\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f\u060c \u06cc\u0627 \u06cc\u06a9 \u0641\u0636\u0627\u06cc \u0646\u0627\u0645 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/fi.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Nike\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Tulostaa listan luokassa tai useamman luokan yhdisteess\u00e4 olevista sivuista.\",\n-    \"intersection_toomanycats\": \"Error: Liian monta luokkaa.\",\n-    \"intersection_toofewcats\": \"Error: Liian v\u00e4h\u00e4n luokkia.\",\n-    \"intersection_noresults\": \"Error: Ei tuloksia.\",\n-    \"intersection_noincludecats\": \"Error: Lis\u00e4\u00e4 v\u00e4hint\u00e4\u00e4n yksi luokka tai m\u00e4\u00e4rit\u00e4 nimiavaruus.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/fr.json",
          "status": "removed",
          "additions": 0,
          "deletions": 36,
          "patch": "@@ -1,36 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Grondin\",\n-            \"Urhixidur\",\n-            \"Verdy p\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Affiche une liste, \u00e0 puces, des articles les plus r\u00e9cents dans une cat\u00e9gorie, ou \u00e0 partir d\u2019une combinaison de plusieurs cat\u00e9gories.\",\n-    \"intersection_toomanycats\": \"DynamicPageList : trop de cat\u00e9gories !\",\n-    \"intersection_toofewcats\": \"DynamicPageList : pas assez de cat\u00e9gories !\",\n-    \"intersection_noresults\": \"DynamicPageList : aucun r\u00e9sultat !\",\n-    \"intersection_noincludecats\": \"Error : vous devez inclure au moins une cat\u00e9gorie, ou pr\u00e9ciser un nom d\u2019espace !\",\n-    \"dpl_log_1\": \"ERREUR : Mauvais param\u00e8tre '$0' : '$1'! Aide :  <code>$0= <i>cha\u00eene vide</i> (Principal)$3</code>. (Les \u00e9quivalents avec des mots magiques sont aussi autoris\u00e9s.)\",\n-    \"dpl_log_2\": \"ERREUR : Mauvais param\u00e8tre '$0' : '$1'! Aide :  <code>$0= <i>Nom complet de la page</i></code>. (Les mots magiques sont autoris\u00e9s.)\",\n-    \"dpl_log_3\": \"ERREUR : Trop de cat\u00e9gories ! Maximum : $0. Aide : accro\u00eetre <code>DynamicPageListHooks::$maxCategoryCount</code> pour autoriser plus de cat\u00e9gories ou r\u00e9gler <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> pour aucune limite. (\u00c0 r\u00e9gler dans <code>LocalSettings.php</code>, apr\u00e8s avoir inclus <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"ERREUR : Pas assez de cat\u00e9gories ! Minimum : $0. Aide : d\u00e9cro\u00eetre <code>DynamicPageListHooks::$minCategoryCount</code> pour autoriser moins de cat\u00e9gories. (\u00c0 r\u00e9gler dans <code>LocalSettings.php</code> de pr\u00e9f\u00e9rence, apr\u00e8s avoir inclus <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"ERREUR : Vous devez inclure au moins une cat\u00e9gorie si vous voulez utiliser 'addfirstcategorydate=true' ou 'ordermethod=categoryadd' !\",\n-    \"dpl_log_7\": \"ERREUR : Si vous incluez plus d\u2019une cat\u00e9gorie, vous ne pouvez pas utiliser 'addfirstcategorydate=true' ou 'ordermethod=categoryadd' !\",\n-    \"dpl_log_8\": \"ERREUR : Vous ne pouvez pas utiliser plus d\u2019un type de date \u00e0 la fois !\",\n-    \"dpl_log_9\": \"ERREUR : Vous ne pouvez utiliser '$0' qu\u2019avec 'ordermethod=[...,]$1' !\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"ERREUR : Ne peut pas effectuer d\u2019op\u00e9rations logiques sur les pages sans cat\u00e9gories (avec la param\u00e8tre 'category') car la vue $0 n\u2019existe pas dans la base de donn\u00e9es ! Aide : demander \u00e0 un administrateur de la base de donn\u00e9es d'effectuer : <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"AVERTISSEMENT : Le param\u00e8tre inconnu '$1' est ignor\u00e9. Aide : param\u00e8tres disponibles : <code>$2</code>.\",\n-    \"dpl_log_14\": \"AVERTISSEMENT : Mauvais param\u00e8tre '$0' : '$1'! Utilisation de la valeur par d\u00e9faut : '$2'. Aide : <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"AVERTISSEMENT : Mauvais param\u00e8tre '$0' : '$1'! Utilisattion de la valeur par d\u00e9faut : '$2' (aucune limite). Aide : <code>$0= <i>cha\u00eene vide</i> (aucune limite) | n</code>, avec <code>n</code> un entier positif.\",\n-    \"dpl_log_16\": \"AVERTISSEMENT : Aucun r\u00e9sultat !\",\n-    \"dpl_log_17\": \"AVERTISSEMENT : Les param\u00e8tres Add* ('adduser', 'addeditdate', etc.)' et 'includepage' n\u2019ont aucun effet avec 'mode=category'. Seuls l\u2019espace de nom et le titre de la page peuvent \u00eatre vus dans ce mode..\",\n-    \"dpl_log_18\": \"AVERTISSEMENT : 'headingmode=$0' n'a aucun effet avec 'ordermethod' sur une simple composante. Utiliser : '$1'. Aide : vous pouvez utiliser not-$1  sur les valeurs de 'headingmode' avec 'ordermethod' sur plusieurs composantes.  La premi\u00e8re composante est utilis\u00e9e pour les en-t\u00eates. Exemple : 'ordermethod=category,<i>comp</i>' (<i>comp</i> est une autre composante) pour les en-t\u00eates de cat\u00e9gorie.\",\n-    \"dpl_log_19\": \"AVERTISSEMENT : 'debug=$0' n\u2019est pas en premi\u00e8re position dans l\u2019\u00e9l\u00e9ment DPL. Les nouveaux r\u00e9glages de d\u00e9bogage ne seront appliqu\u00e9s qu\u2019apr\u00e8s que les param\u00e8tres pr\u00e9c\u00e9dents aient \u00e9t\u00e9 v\u00e9rifi\u00e9s.\",\n-    \"dpl_log_20\": \"AVERTISSEMENT : Une boucle d\u2019inclusion infinie est cr\u00e9\u00e9e par la page '$0'.\",\n-    \"dpl_log_21\": \"REQU\u00caTE : <code>$0</code>\",\n-    \"dpl_articlecount\": \"Il y a {{PLURAL:$1|un article|$1 articles}} dans cette section.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/frp.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"ChrisPtDe\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Afiche una lista de puges des articllos los ples nov\u00e9ls dens una cat\u00e8gorie, ou ben d\u00eas una combin\u00e8son de plusiors cat\u00e8gories.\",\n-    \"intersection_toomanycats\": \"Error : trop de cat\u00e8gories !\",\n-    \"intersection_toofewcats\": \"Error : pas prod de cat\u00e8gories !\",\n-    \"intersection_noresults\": \"Error : nion r\u00e8sultat !\",\n-    \"intersection_noincludecats\": \"Error : vos av\u00e9d f\u00f4ta d\u2019encllure u muens yona cat\u00e8gorie, ou ben de sp\u00e8cefiar un \u00e8sp\u00e2\u00e7o de nom !\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/gl.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Toli\u00f1o\",\n-            \"Xos\u00e9\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Devolve unha lista punteada dos elementos m\u00e1is recentes que est\u00e1n nunha categor\u00eda ou nunha uni\u00f3n de varias categor\u00edas\",\n-    \"intersection_toomanycats\": \"Erro: demasiadas categor\u00edas!\",\n-    \"intersection_toofewcats\": \"Erro: moi poucas categor\u00edas!\",\n-    \"intersection_noresults\": \"Erro: ning\u00fan resultado!\",\n-    \"intersection_noincludecats\": \"Erro: ten que inclu\u00edr unha categor\u00eda polo menos ou especificar un espazo de nomes!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/grc.json",
          "status": "removed",
          "additions": 0,
          "deletions": 9,
          "patch": "@@ -1,9 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Omnipaedista\"\n-        ]\n-    },\n-    \"intersection_noresults\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03bf\u1f50\u03b4\u1f72\u03bd \u1f00\u03c0\u03bf\u03c4\u03ad\u03bb\u03b5\u03c3\u03bc\u03b1\",\n-    \"intersection_noincludecats\": \"\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u1f1c\u03be\u03b5\u03c3\u03c4\u03af \u03c3\u03bf\u03b9 \u03c0\u03b5\u03c1\u03b9\u03bb\u03b1\u03bc\u03b2\u03ac\u03bd\u03b5\u03b9\u03bd \u03bc\u03af\u03b1\u03bd \u03c4\u03bf\u1f50\u03bb\u03ac\u03c7\u03b9\u03c3\u03c4\u03bf\u03bd \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03bd, \u1f22 \u03ba\u03b1\u03b8\u03bf\u03c1\u03af\u03b6\u03b5\u03b9\u03bd \u1f40\u03bd\u03bf\u03bc\u03b1\u03c4\u03b5\u1fd6\u03bf\u03bd \u03c4\u03b9!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/gsw.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Als-Holder\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Usgabe vun ere Lischt vu dr aktu\u00e4llschte Yytr\u00e4g in ere Kategorii, oder vu dr Schnittm\u00e4ngi vu mehrere Kategorie\",\n-    \"intersection_toomanycats\": \"F\u00e4hler: Zvyyl Kategorie!\",\n-    \"intersection_toofewcats\": \"F\u00e4hler: Zwenig Kategorie!\",\n-    \"intersection_noresults\": \"F\u00e4hler: Kei Ergebnis!\",\n-    \"intersection_noincludecats\": \"F\u00e4hler: S muess zmindescht ei Kategorii yybunde w\u00e4re oder gib e Namensruum aa!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/he.json",
          "status": "removed",
          "additions": 0,
          "deletions": 34,
          "patch": "@@ -1,34 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Rotem Liss\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u05e8\u05e9\u05d9\u05de\u05d4 \u05e2\u05dd \u05ea\u05d1\u05dc\u05d9\u05d8\u05d9\u05dd \u05e9\u05dc \u05d4\u05e4\u05e8\u05d9\u05d8\u05d9\u05dd \u05d4\u05d0\u05d7\u05e8\u05d5\u05e0\u05d9\u05dd \u05d4\u05de\u05e6\u05d5\u05d9\u05d9\u05dd \u05d1\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4, \u05d0\u05d5 \u05d1\u05de\u05e1\u05e4\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea\",\n-    \"intersection_toomanycats\": \"DynamicPageList: \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea \u05e8\u05d1\u05d5\u05ea \u05de\u05d3\u05d9!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea \u05de\u05e2\u05d8\u05d5\u05ea \u05de\u05d3\u05d9!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u05d0\u05d9\u05df \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: \u05e2\u05dc\u05d9\u05db\u05dd \u05dc\u05db\u05dc\u05d5\u05dc \u05dc\u05e4\u05d7\u05d5\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d0\u05d7\u05ea, \u05d0\u05d5 \u05dc\u05e6\u05d9\u05d9\u05df \u05de\u05e8\u05d7\u05d1 \u05e9\u05dd!\",\n-    \"dpl_log_1\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e4\u05e8\u05de\u05d8\u05e8 '$0' \u05e9\u05d2\u05d5\u05d9: '$1'! \u05e2\u05d6\u05e8\u05d4: <code>$0= <i>\u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05e8\u05d9\u05e7\u05d4</i> (\u05e8\u05d0\u05e9\u05d9)$3</code>. (\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d2\u05dd \u05d1\u05e9\u05d5\u05d5\u05d9 \u05e2\u05e8\u05da \u05d1\u05d0\u05de\u05e6\u05e2\u05d5\u05ea \u05de\u05d9\u05dc\u05d5\u05ea \u05e7\u05e1\u05dd.)\",\n-    \"dpl_log_2\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e4\u05e8\u05de\u05d8\u05e8 '$0' \u05e9\u05d2\u05d5\u05d9: '$1'! \u05e2\u05d6\u05e8\u05d4: <code>$0= <i>\u05e9\u05dd \u05d4\u05d3\u05e3 \u05d4\u05de\u05dc\u05d0</i></code>. (\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05de\u05d9\u05dc\u05d5\u05ea \u05e7\u05e1\u05dd.)\",\n-    \"dpl_log_3\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea \u05e8\u05d1\u05d5\u05ea \u05de\u05d3\u05d9! \u05de\u05e7\u05e1\u05d9\u05de\u05d5\u05dd: $0. \u05e2\u05d6\u05e8\u05d4: \u05d4\u05e2\u05dc\u05d5 \u05d0\u05ea <code>DynamicPageListHooks::$maxCategoryCount</code> \u05db\u05d3\u05d9 \u05dc\u05e6\u05d9\u05d9\u05df \u05e2\u05d5\u05d3 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea \u05d0\u05d5 \u05d4\u05d2\u05d3\u05d9\u05e8\u05d5 <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u05db\u05d3\u05d9 \u05dc\u05d1\u05d8\u05dc \u05d0\u05ea \u05d4\u05d4\u05d2\u05d1\u05dc\u05d4. (\u05d4\u05d2\u05d9\u05d3\u05e8\u05d5 \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05e0\u05d4 \u05d1\u05e7\u05d5\u05d1\u05e5 <code>LocalSettings.php</code>, \u05dc\u05d0\u05d7\u05e8 \u05d4\u05db\u05dc\u05dc\u05ea <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea \u05de\u05e2\u05d8\u05d5\u05ea \u05de\u05d3\u05d9! \u05de\u05d9\u05e0\u05d9\u05de\u05d5\u05dd: $0. \u05e2\u05d6\u05e8\u05d4: \u05d4\u05d5\u05e8\u05d9\u05d3\u05d5 \u05d0\u05ea <code>DynamicPageListHooks::$minCategoryCount</code> \u05db\u05d3\u05d9 \u05dc\u05e6\u05d9\u05d9\u05df \u05e4\u05d7\u05d5\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea. (\u05d4\u05d2\u05d9\u05d3\u05e8\u05d5 \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05e0\u05d4 \u05d1\u05e7\u05d5\u05d1\u05e5 <code>LocalSettings.php</code>, \u05dc\u05d0\u05d7\u05e8 \u05d4\u05db\u05dc\u05dc\u05ea <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e2\u05dc\u05d9\u05db\u05dd \u05dc\u05d4\u05db\u05dc\u05d9\u05dc \u05dc\u05e4\u05d7\u05d5\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d0\u05d7\u05ea \u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05db\u05dd \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05be'addfirstcategorydate=true' \u05d0\u05d5 \u05d1\u05be'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05d0\u05dd \u05d0\u05ea\u05dd \u05de\u05db\u05dc\u05d9\u05dc\u05d9\u05dd \u05d9\u05d5\u05ea\u05e8 \u05de\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d0\u05d7\u05ea, \u05d0\u05d9\u05e0\u05db\u05dd \u05d9\u05db\u05d5\u05dc\u05d9\u05dd \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05be'addfirstcategorydate=true' \u05d0\u05d5 \u05d1\u05be'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05d0\u05d9\u05e0\u05db\u05dd \u05d9\u05db\u05d5\u05dc\u05d9\u05dd \u05dc\u05d4\u05d5\u05e1\u05d9\u05e3 \u05d9\u05d5\u05ea\u05e8 \u05de\u05e1\u05d5\u05d2 \u05d0\u05d7\u05d3 \u05e9\u05dc \u05ea\u05d0\u05e8\u05d9\u05da \u05d1\u05d5 \u05d6\u05de\u05e0\u05d9\u05ea!\",\n-    \"dpl_log_9\": \"?????: ????????? ?????? ??'$0' ?? 'ordermethod=[...,]$1' ????!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"\u05e9\u05d2\u05d9\u05d0\u05d4: \u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05e6\u05e2 \u05e4\u05e2\u05d5\u05dc\u05d5\u05ea \u05dc\u05d5\u05d2\u05d9\u05d5\u05ea \u05e2\u05dc \u05d3\u05e4\u05d9\u05dd \u05dc\u05dc\u05d0 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea (\u05dc\u05de\u05e9\u05dc, \u05e2\u05dd \u05d4\u05e4\u05e8\u05de\u05d8\u05e8 '\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4') \u05db\u05d9\u05d5\u05d5\u05df \u05e9\u05ea\u05e6\u05d5\u05d2\u05ea $0 \u05d0\u05d9\u05e0\u05d4 \u05e7\u05d9\u05d9\u05de\u05ea \u05d1\u05de\u05e1\u05d3 \u05d4\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd! \u05e2\u05d6\u05e8\u05d4: \u05de\u05e0\u05d4\u05dc \u05de\u05e1\u05d3 \u05d4\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05e8\u05d9\u05e5 \u05d0\u05ea \u05d4\u05e9\u05d0\u05d9\u05dc\u05ea\u05d4: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05d1\u05d5\u05e6\u05e2\u05d4 \u05d4\u05ea\u05e2\u05dc\u05de\u05d5\u05ea \u05de\u05d4\u05e4\u05e8\u05de\u05d8\u05e8 \u05d4\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2 '$1'. \u05e2\u05d6\u05e8\u05d4: \u05e4\u05e8\u05de\u05d8\u05e8\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd: <code>$2</code>.\",\n-    \"dpl_log_14\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05e4\u05e8\u05de\u05d8\u05e8 '$0' \u05e9\u05d2\u05d5\u05d9: '$1'! \u05de\u05e9\u05ea\u05de\u05e9 \u05d1\u05d1\u05e8\u05d9\u05e8\u05ea \u05d4\u05de\u05d7\u05d3\u05dc: '$2'. \u05e2\u05d6\u05e8\u05d4: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05e4\u05e8\u05de\u05d8\u05e8 '$0' \u05e9\u05d2\u05d5\u05d9: '$1'! \u05de\u05e9\u05ea\u05de\u05e9 \u05d1\u05d1\u05e8\u05d9\u05e8\u05ea \u05d4\u05de\u05d7\u05d3\u05dc: '$2' (\u05dc\u05dc\u05d0 \u05d4\u05d2\u05d1\u05dc\u05d4). \u05e2\u05d6\u05e8\u05d4: <code>$0= <i>\u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05e8\u05d9\u05e7\u05d4</i> (\u05dc\u05dc\u05d0 \u05d4\u05d2\u05d1\u05dc\u05d4) | n</code>, \u05e2\u05dd <code>n</code> \u05db\u05de\u05e1\u05e4\u05e8 \u05e9\u05dc\u05dd \u05d5\u05d7\u05d9\u05d5\u05d1\u05d9.\",\n-    \"dpl_log_16\": \"?????: ??? ??????!\",\n-    \"dpl_log_17\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05dc\u05d4\u05d5\u05e1\u05e4\u05ea* \u05d4\u05e4\u05e8\u05de\u05d8\u05e8\u05d9\u05dd ('adduser',\u200f 'addeditdate' \u05d5\u05db\u05d3\u05d5\u05de\u05d4) \u05d5\u05db\u05df \u05dc\u05be'includepage' \u05d0\u05d9\u05df \u05d4\u05e9\u05e4\u05e2\u05d4 \u05e2\u05dd 'mode=category'. \u05e0\u05d9\u05ea\u05df \u05dc\u05e6\u05e4\u05d5\u05ea \u05e8\u05e7 \u05d1\u05de\u05e8\u05d7\u05d1 \u05d4\u05e9\u05dd \u05d0\u05d5 \u05d1\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05d3\u05e3 \u05d1\u05de\u05e6\u05d1 \u05d6\u05d4.\",\n-    \"dpl_log_18\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05dc\u05be'headingmode=$0' \u05d0\u05d9\u05df \u05d4\u05e9\u05e4\u05e2\u05d4 \u05e2\u05dd 'ordermethod' \u05e2\u05dc \u05e4\u05e8\u05d9\u05d8 \u05d9\u05d7\u05d9\u05d3. \u05de\u05e9\u05ea\u05de\u05e9 \u05d1: '$1'. \u05e2\u05d6\u05e8\u05d4: \u05d1\u05d0\u05e4\u05e9\u05e8\u05d5\u05ea\u05db\u05dd \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05e2\u05e8\u05db\u05d9\u05dd \u05e9\u05dc 'headingmode' \u05e9\u05d0\u05d9\u05e0\u05dd $1 \u05e2\u05dd 'ordermethod' \u05e2\u05dc \u05e4\u05e8\u05d9\u05d8\u05d9\u05dd \u05de\u05e8\u05d5\u05d1\u05d9\u05dd. \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05d1\u05e4\u05e8\u05d9\u05d8 \u05d4\u05e8\u05d0\u05e9\u05d5\u05df \u05dc\u05db\u05d5\u05ea\u05e8\u05ea. \u05dc\u05de\u05e9\u05dc, 'ordermethod=category,<i>comp</i>' (<i>comp</i> \u05d4\u05d5\u05d0 \u05e4\u05e8\u05d9\u05d8 \u05d0\u05d7\u05e8) \u05dc\u05db\u05d5\u05ea\u05e8\u05d5\u05ea \u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4.\",\n-    \"dpl_log_19\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: 'debug=$0w \u05d4\u05d5\u05d0 \u05dc\u05d0 \u05d1\u05de\u05e7\u05d5\u05dd \u05d4\u05e8\u05d0\u05e9\u05d5\u05df \u05d1\u05e8\u05db\u05d9\u05d1 \u05d4\u05beDPL. \u05d4\u05d2\u05d3\u05e8\u05d5\u05ea \u05e0\u05d9\u05e4\u05d5\u05d9 \u05d4\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea \u05d4\u05d7\u05d3\u05e9\u05d5\u05ea \u05dc\u05d0 \u05d9\u05d7\u05d5\u05dc\u05d5 \u05dc\u05e4\u05e0\u05d9 \u05e9\u05db\u05dc \u05d4\u05e4\u05e8\u05de\u05d8\u05e8\u05d9\u05dd \u05d4\u05e7\u05d5\u05d3\u05de\u05d9\u05dd \u05d9\u05e0\u05d5\u05ea\u05d7\u05d5 \u05d5\u05d9\u05d9\u05d1\u05d3\u05e7\u05d5.\",\n-    \"dpl_log_20\": \"\u05d0\u05d6\u05d4\u05e8\u05d4: \u05dc\u05d5\u05dc\u05d0\u05ea \u05d4\u05db\u05dc\u05dc\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea \u05e0\u05d5\u05e6\u05e8\u05d4 \u05d1\u05d3\u05e3 '$0'.\",\n-    \"dpl_log_21\": \"\u05e9\u05d0\u05d9\u05dc\u05ea\u05d4: <code>$0</code>\",\n-    \"dpl_articlecount\": \"{{PLURAL:$1|\u05d9\u05e9\u05e0\u05dd $1 \u05d3\u05e4\u05d9\u05dd|\u05d9\u05e9\u05e0\u05d5 \u05d3\u05e3 \u05d0\u05d7\u05d3}} \u05ea\u05d7\u05ea \u05db\u05d5\u05ea\u05e8\u05ea \u05d6\u05d5.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/hi.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Kaustubh\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u090f\u0915 \u0936\u094d\u0930\u0947\u0923\u0940 \u092f\u093e \u0936\u094d\u0930\u0947\u0923\u0940\u0938\u092e\u0942\u0939\u092e\u0947\u0902 \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0935\u0940\u0928\u0924\u092e \u0932\u0947\u0916 \u0926\u0930\u094d\u0936\u093e\u092f\u0947\u0902\u0964\",\n-    \"intersection_toomanycats\": \"Error: \u092c\u0939\u0941\u0924 \u091c\u094d\u092f\u093e\u0926\u093e \u0936\u094d\u0930\u0947\u0923\u0940\u092f\u093e\u0902!\",\n-    \"intersection_toofewcats\": \"Error: \u092c\u0939\u0941\u0924 \u0915\u092e \u0936\u094d\u0930\u0947\u0923\u0940\u092f\u093e\u0902!\",\n-    \"intersection_noresults\": \"Error: \u0930\u093f\u091c\u093c\u0932\u094d\u091f \u0928\u0939\u0940\u0902!\",\n-    \"intersection_noincludecats\": \"Error: \u0915\u092e\u0938\u0947 \u0915\u092e \u090f\u0915 \u0936\u094d\u0930\u0947\u0923\u0940 \u092f\u093e \u0928\u093e\u092e\u0938\u094d\u0925\u093e\u0928 \u0926\u0947\u0928\u093e \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948\u0902!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/hr.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Dalibor Bosits\",\n-            \"Dnik\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Omogu\u0107ava popis najnovijih stranica ili datoteka iz kategorije, ili presjeka nekoliko kategorija\",\n-    \"intersection_toomanycats\": \"Error: Previ\u0161e kategorija!\",\n-    \"intersection_toofewcats\": \"Error: Premalo kategorija!\",\n-    \"intersection_noresults\": \"Error: Nema rezultata!\",\n-    \"intersection_noincludecats\": \"Error: Morate uklju\u010diti bar jednu kategoriju, ili odabrati imenski prostor!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/hsb.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Michawiki\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Wuda\u0107e lis\u0107iny najaktualni\u0161ich zapiskow w jednej kategoriji abo w skupinje kategorijow\",\n-    \"intersection_toomanycats\": \"Error: P\u0159ewjele kategorijow!\",\n-    \"intersection_toofewcats\": \"Error: P\u0159ema\u0142o kategorijow!\",\n-    \"intersection_noresults\": \"Error: \u017dane wusl\u011bdki!\",\n-    \"intersection_noincludecats\": \"Error: Dyrbi\u0161 znajmje\u0144\u0161a kednu kategoriju zap\u0159ije\u0107 abo mjenowy rum poda\u0107!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/hu.json",
          "status": "removed",
          "additions": 0,
          "deletions": 14,
          "patch": "@@ -1,14 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Dani\",\n-            \"Gondnok\",\n-            \"KossuthRad\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Megjelen\u00edti egy adott kateg\u00f3ri\u00e1ban, vagy kateg\u00f3ri\u00e1k uni\u00f3j\u00e1ban l\u00e9v\u0151 leg\u00fajabb sz\u00f3cikkek list\u00e1j\u00e1t\",\n-    \"intersection_toomanycats\": \"Hiba: T\u00fal sok kateg\u00f3ria!\",\n-    \"intersection_toofewcats\": \"Hiba: T\u00fal kev\u00e9s kateg\u00f3ria!\",\n-    \"intersection_noresults\": \"Hiba: Nincs eredm\u00e9ny!\",\n-    \"intersection_noincludecats\": \"Hiba: Legal\u00e1bb egy list\u00e1zand\u00f3 kateg\u00f3ri\u00e1t meg kell adnod, vagy pedig egy n\u00e9vteret!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ia.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"McDutchie\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Face un lista a punctos del elementos le plus recente in un categoria, o un union de plure categorias\",\n-    \"intersection_toomanycats\": \"Error: Troppo de categorias!\",\n-    \"intersection_toofewcats\": \"Error: Non bastante categorias!\",\n-    \"intersection_noresults\": \"Error: Nulle resultatos!\",\n-    \"intersection_noincludecats\": \"Error: Tu debe includer al minus un categoria, o specificar un spatio de nomines!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/id.json",
          "status": "removed",
          "additions": 0,
          "deletions": 34,
          "patch": "@@ -1,34 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"IvanLanin\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Menghasilkan suatu daftar item terbaru pada suatu kategori atau gabungan beberapa kategori\",\n-    \"intersection_toomanycats\": \"DynamicPageList: Terlalu banyak kategori!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: Terlalu sedikit kategori!\",\n-    \"intersection_noresults\": \"DynamicPageList: Tak ada hasil yang sesuai!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: Anda perlu mencantumkan paling tidak satu kategori, atau menyebutkan satu ruang nama!\",\n-    \"dpl_log_1\": \"KESALAHAN: Parameter '$0' salah: '$1'! Bantuan: <code>$0= <i>string kosong</i> (Utama)$3</code>. (Ekivalen kata kunci juga diizinkan.)\",\n-    \"dpl_log_2\": \"KESALAHAN: Parameter '$0' salah: '$1'! Bantuan:  <code>$0= <i>nama lengkap halaman</i></code>. (Kata kunci diizinkan.)\",\n-    \"dpl_log_3\": \"KESALAHAN: Kategori terlalu banyak! Maksimum: $0. Bantuan: perbesar <code>DynamicPageListHooks::$maxCategoryCount</code> untuk memberikan lebih banyak kategori atau atur  <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> untuk menghapus batasan. (Atur variabel tersebut di <code>LocalSettings.php</code>, setelah mencantumkan <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"KESALAHAN: Kategori terlalu sedikit! Minimum: $0. Bantuan: kurangi <code>DynamicPageListHooks::$minCategoryCount</code> untuk mengurangi kategori. (Atur variabel tersebut di <code>LocalSettings.php</code>, setelah mencantumkan <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"KESALAHAN: Anda harus memberikan paling tidak satu kategori jika menggunakan 'addfirstcategorydate=true' atau 'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"KESALAHAN: Jika Anda memberikan lebih dari satu kategori, Anda tidak dapat menggunakan 'addfirstcategorydate=true' atau 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"KESALAHAN: Anda tidak dapat memberikan lebih dari satu jenis tanggal dalam satu waktu!\",\n-    \"dpl_log_9\": \"KESALAHAN: Anda dapat menggunakan '$0' hanya dengan 'ordermethod=[...,]$1'!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"KESALAHAN: Tidak dapat melakukan operasi logika pada halaman yang tak terkategori (misalnya dengan parameter 'kategori') karena view $0 tidak ada di basis data! Bantuan: mintalah admin basis data untuk menjalankan kueri berikut: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"KESALAHAN: Paramater yang tak dikenal '$1' diabaikan. Bantuan: parameter yang tersedia: <code>$2</code>.\",\n-    \"dpl_log_14\": \"KESALAHAN: Parameter '$0' salah: '$1'! Menggunakan konfigurasi baku: '$2'. Bantuan: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"KESALAHAN: Parameter '$0' salah: '$1'! Menggunakan konfigurasi baku: '$2' (tanpa limitasi). Bantuan: <code>$0= <i>string kosong</i> (tanpa limitasi) | n</code>, dengan <code>n</code> suatu bilangan positif.\",\n-    \"dpl_log_16\": \"KESALAHAN: Hasil tak ditemukan!\",\n-    \"dpl_log_17\": \"KESALAHAN: Menambahkan * parameter ('adduser', 'addeditdate', dll.)' dan 'includepage' tidak berpengaruh pada 'mode=category'. Hanya ruang nama/judul halaman yang dapat ditampilkan dengan mode ini.\",\n-    \"dpl_log_18\": \"KESALAHAN: 'headingmode=$0' tidak berpengaruh dengan 'ordermethod' pada suatu komponen tunggal. Menggunakan: '$1'. Bantuan: Anda dapat menggunakan nilai not-$1 'headingmode' dengan 'ordermethod' terhadap beberapa komponen. Komponen pertama digunakan sebagai judul. Misalnya 'ordermethod=category,<i>comp</i>' (<i>comp</i> adalah komponen lain) untuk judul kategori.\",\n-    \"dpl_log_19\": \"KESALAHAN: 'debug=$0' tidak pada posisi pertama pada elemen DPL. Aturan debug tidak diterapkan sebelum semua variabel sebelumnya telah diparsing dan dicek.\",\n-    \"dpl_log_20\": \"KESALAHAN: Suatu lingkaran transklusi tak hingga ditimbulkan oleh halaman '$0'.\",\n-    \"dpl_log_21\": \"KUERI: <code>$0</code>\",\n-    \"dpl_articlecount\": \"Terdapat {{PLURAL:$1|artikel|artikel}} dalam judul ini.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/io.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Malafaya\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Eroro: Tro multa kategorii!\",\n-    \"intersection_toofewcats\": \"Eroro: Tro poka kategorii!\",\n-    \"intersection_noresults\": \"Eroro: Nula rezultaji!\",\n-    \"intersection_noincludecats\": \"Eroro: Vu mustas inkluzar adminime un kategorio, o specigez nomaro!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/it.json",
          "status": "removed",
          "additions": 0,
          "deletions": 34,
          "patch": "@@ -1,34 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"BrokenArrow\",\n-            \"Darth Kule\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Visualizza un elenco puntato con gli elementi pi\u00f9 recenti inseriti in una categoria o nell'unione di pi\u00f9 categorie\",\n-    \"intersection_toomanycats\": \"Errore: Numero di categorie eccessivo.\",\n-    \"intersection_toofewcats\": \"Errore: Numero di categorie insufficiente.\",\n-    \"intersection_noresults\": \"Errore: Nessun risultato.\",\n-    \"intersection_noincludecats\": \"Errore: \u00c8 necessario includere almeno una categoria oppure specificare un namespace.\",\n-    \"dpl_log_1\": \"ERRORE nel parametro '$0': '$1'. Suggerimento:  <code>$0= <i>stringa vuota</i> (Principale)$3</code>.\",\n-    \"dpl_log_2\": \"ERRORE nel parametro '$0': '$1'. Suggerimento:  <code>$0= <i>nome completo della pagina</i></code>.\",\n-    \"dpl_log_3\": \"ERRORE: Categorie sovrabbondanti (massimo $0). Suggerimento: aumentare il valore di <code>DynamicPageListHooks::$maxCategoryCount</code> per indicare un numero maggiore di categorie, oppure impostare <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> per non avere alcun limite. (Impostare le variabili nel file <code>LocalSettings.php</code>, dopo l'inclusione di <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"ERRORE: Categorie insufficienti (minimo $0). Suggerimento: diminuire il valore di <code>DynamicPageListHooks::$minCategoryCount</code> per indicare un numero minore di categorie. (Impostare la variabile nel file <code>LocalSettings.php</code>, dopo l'inclusione di <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"ERRORE: L'uso dei parametri 'addfirstcategorydate=true' e 'ordermethod=categoryadd' richiede l'inserimento di una o pi\u00f9 categorie.\",\n-    \"dpl_log_7\": \"ERRORE: L'inserimento di pi\u00f9 categorie impedisce l'uso dei parametri 'addfirstcategorydate=true' e 'ordermethod=categoryadd'.\",\n-    \"dpl_log_8\": \"ERRORE: Non \u00e8 consentito l'uso contemporaneo di pi\u00f9 tipi di data.\",\n-    \"dpl_log_9\": \"ERRORE: L'uso del parametro '$0' \u00e8 consentito unicamente con 'ordermethod=[...,]$1'.\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"ERRORE: Impossibile effettuare operazioni logiche sulle pagine prive di categoria (ad es. con il parametro 'category') in quanto il database non contiene la vista $0. Suggerimento: chiedere all'amministratore del database di eseguire la seguente query: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"ATTENZIONE: Il parametro non riconosciuto '$1' \u00e8 stato ignorato. Suggerimento: i parametri disponibili sono: <code>$2</code>.\",\n-    \"dpl_log_14\": \"ATTENZIONE: Errore nel parametro '$0': '$1'. \u00c8 stato usato il valore predefinito '$2'. Suggerimento: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"ATTENZIONE: errore nel parametro '$0': '$1'. \u00c8 stato usato il valore predefinito '$2' (nessun limite). Suggerimento: <code>$0= <i>stringa vuota</i> (nessun limite) | n</code>, con <code>n</code> intero positivo.\",\n-    \"dpl_log_16\": \"ATTENZIONE: Nessun risultato.\",\n-    \"dpl_log_17\": \"ATTENZIONE: I parametri add* ('adduser', 'addeditdate', ecc.)' non hanno alcun effetto quando \u00e8 specificato 'mode=category'. In tale modalit\u00e0 vengono visualizzati unicamente il namespace e il titolo della pagina.\",\n-    \"dpl_log_18\": \"ATTENZIONE: Il parametro 'headingmode=$0' non ha alcun effetto quando \u00e8 specificato 'ordermethod' su un solo componente. Verr\u00e0 utilizzato il valore '$1'. Suggerimento: \u00e8 posibile utilizzare i valori diversi da $1 per il parametro 'headingmode' nel caso di 'ordermethod' su pi\u00f9 componenti. Il primo componente viene usato per generare i titoli di sezione. Ad es. 'ordermethod=category,<i>comp</i>' (dove <i>comp</i> \u00e8 un altro componente) per avere titoli di sezione basati sulla categoria.\",\n-    \"dpl_log_19\": \"ATTENZIONE: Il parametro 'debug=$0' non \u00e8 il primo elemento della sezione DPL. Le nuove impostazioni di debug non verranno applicate prima di aver completato il parsing e la verifica di tutti i parametri che lo precedono.\",\n-    \"dpl_log_21\": \"QUERY: <code>$0</code>\",\n-    \"dpl_articlecount\": \"Questa sezione contiene {{PLURAL:$1|una voce|$1 voci}}.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ja.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Fryed-peach\",\n-            \"JtFuruhata\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u5358\u4e00\u30ab\u30c6\u30b4\u30ea\u5185\u307e\u305f\u306f\u8907\u6570\u30ab\u30c6\u30b4\u30ea\u5185\u306b\u304a\u3044\u3066\u6700\u8fd1\u66f4\u65b0\u3055\u308c\u305f\u9805\u76ee\u3092\u7b87\u6761\u66f8\u304d\u3067\u8868\u793a\u3059\u308b\",\n-    \"intersection_toomanycats\": \"\u30a8\u30e9\u30fc: \u30ab\u30c6\u30b4\u30ea\u6307\u5b9a\u304c\u591a\u3059\u304e\u307e\u3059\uff01\",\n-    \"intersection_toofewcats\": \"\u30a8\u30e9\u30fc: \u30ab\u30c6\u30b4\u30ea\u6307\u5b9a\u304c\u5c11\u306a\u3059\u304e\u307e\u3059\uff01\",\n-    \"intersection_noresults\": \"\u30a8\u30e9\u30fc: \u6700\u8fd1\u66f4\u65b0\u3055\u308c\u305f\u9805\u76ee\u306f\u3042\u308a\u307e\u305b\u3093\uff01\",\n-    \"intersection_noincludecats\": \"\u30a8\u30e9\u30fc: 1\u3064\u4ee5\u4e0a\u306e\u30ab\u30c6\u30b4\u30ea\u3001\u307e\u305f\u306f\u540d\u524d\u7a7a\u9593\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff01\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/jut.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Husl\u00e5ke\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Outputs en bulleted liste der senestste itemer r\u00e6sidende i en klynge, \u00e6ller \u00e6 unje der sever\u00e6l klynger\",\n-    \"intersection_toomanycats\": \"Error: \u00c5verf\u00f8l klynger!\",\n-    \"intersection_toofewcats\": \"Error: \u00c5verw\u00e6neg klynger!\",\n-    \"intersection_noresults\": \"Error: Ekke r\u00e6sult\u00e5ter!\",\n-    \"intersection_noincludecats\": \"Error: Du n\u00f8dst til inklud\u00e6r til mendst en klynge, \u00e6ller sp\u00e6sifi\u00e6r en navnerum!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/jv.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Meursault2004\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Ngasilak\u00e9 sawijining daftar item paling anyar ing sawijining kategori utawa gabungan sawetara kategori\",\n-    \"intersection_toomanycats\": \"Error: Kak\u00e8han kategori!\",\n-    \"intersection_toofewcats\": \"Error: Kesithikan kategori!\",\n-    \"intersection_noresults\": \"Error: Ora ana pituwas\u00e9 (kasil\u00e9)!\",\n-    \"intersection_noincludecats\": \"Error: Panjenengan perlu minimal m\u00e8n\u00e8hi kategori sawiji, utawa sp\u00e9sifikasi bilik nama sawiji!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/km.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Chhorran\",\n-            \"Thearith\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"\u1780\u17c6\u17a0\u17bb\u179f\u200b\u17d6 \u1785\u17c6\u178e\u17b6\u178f\u17cb\u1790\u17d2\u1793\u17b6\u1780\u17cb\u1780\u17d2\u179a\u17bb\u1798\u200b\u1785\u17d2\u179a\u17be\u1793\u1796\u17c1\u1780\u200b!\",\n-    \"intersection_toofewcats\": \"\u1780\u17c6\u17a0\u17bb\u179f\u200b\u17d6 \u1785\u17c6\u178e\u17b6\u178f\u17cb\u1790\u17d2\u1793\u17b6\u1780\u17cb\u1780\u17d2\u179a\u17bb\u1798\u200b\u178f\u17b7\u1785\u1796\u17c1\u1780\u200b!\",\n-    \"intersection_noresults\": \"\u1780\u17c6\u17a0\u17bb\u179f\u200b\u17d6 \u1782\u17d2\u1798\u17b6\u1793\u200b\u179b\u1791\u17d2\u1792\u1795\u179b\u200b!\",\n-    \"intersection_noincludecats\": \"\u1780\u17c6\u17a0\u17bb\u179f\u200b\u17d6 \u17a2\u17d2\u1793\u1780\u200b\u178f\u17d2\u179a\u17bc\u179c\u178f\u17c2\u200b\u1798\u17b6\u1793\u200b\u1785\u17c6\u178e\u17b6\u178f\u17cb\u1790\u17d2\u1793\u17b6\u1780\u17cb\u1780\u17d2\u179a\u17bb\u1798\u200b\u1798\u17bd\u1799\u1799\u17c9\u17b6\u1784\u178f\u17b7\u1785 \u17ac \u179f\u17c6\u178a\u17c5\u200b\u1798\u17bd\u1799\u200b\u179b\u17c6\u17a0\u1788\u17d2\u1798\u17c4\u17c7\u200b!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ko.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Kwj2772\",\n-            \"Yknok29\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"\uc5d0\ub7ec: \ubd84\ub958\uac00 \ub108\ubb34 \ub9ce\uc2b5\ub2c8\ub2e4!\",\n-    \"intersection_toofewcats\": \"\uc5d0\ub7ec: \ubd84\ub958\uac00 \ub108\ubb34 \uc801\uc2b5\ub2c8\ub2e4!\",\n-    \"intersection_noresults\": \"\uc624\ub958: \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!\",\n-    \"intersection_noincludecats\": \"\uc5d0\ub7ec: \ucd5c\uc18c\ud55c \ud558\ub098\uc758 \ubd84\ub958\uc5d0 \ud3ec\ud568\uc2dc\ucf1c \uc8fc\uc2dc\uac70\ub098 \uc774\ub984\uacf5\uac04\uc744 \uba85\ud655\ud788 \uc801\uc5b4 \uc8fc\uc138\uc694!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ksh.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Purodha\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Zeij_en Li\u00df met de neuste Enndr\u00e4\u00e4sch en en Saachjrupp, udder de neuste Enndr\u00e4\u00e4sch, die en alle Jruppe uss_enem Knubbel fun Saachjrupp dren sin.\",\n-    \"intersection_toomanycats\": \"<i lang=\\\"en\\\">DynamicPageList</i> h\u00e4t ene F\u00e4\u00e4ler jefonge: Dat sinn_er zo vill Saachjroppe!\",\n-    \"intersection_toofewcats\": \"<i lang=\\\"en\\\">DynamicPageList</i> h\u00e4t ene F\u00e4\u00e4ler jefonge: Dat sin ze winnisch Saachjruppe!\",\n-    \"intersection_noresults\": \"<i lang=\\\"en\\\">DynamicPageList</i> h\u00e4t ene F\u00e4\u00e4ler jefonge: Do kohm nix bei erus!\",\n-    \"intersection_noincludecats\": \"<i lang=\\\"en\\\">DynamicPageList</i> h\u00e4t ene F\u00e4\u00e4ler jefonge: Mer bruch winnisch\u00dfdens ein Saachjrupp. S\u00f6ns jivv e Appachtemang aan!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/lb.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Robby\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Gener\u00e9iert eng L\u00ebscht mat de rezentesten Androungen an eng Kategorie, oder an eng Intersektioun vu m\u00e9i Kategorien\",\n-    \"intersection_toomanycats\": \"Dynamesch S\u00e4ite-L\u00ebscht: Zevill Kategorien!\",\n-    \"intersection_toofewcats\": \"Dynamesch S\u00e4ite-L\u00ebscht: Ze w\u00e9ineg Kategorien!\",\n-    \"intersection_noresults\": \"Dynamesch S\u00e4ite-L\u00ebscht: Kee Resultat!\",\n-    \"intersection_noincludecats\": \"Dynamesch S\u00e4ite-L\u00ebscht: Dir musst mindestens eng Kategorie abannen, oder de Nummraum uginn!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/li.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Matthias\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Geeft als uitvoer een ongenummerde lijst met de meest recent toegevoegde items in een categorie, of een combinatie van categorie\u00eb\",\n-    \"intersection_toomanycats\": \"Error: Te veel categorie\u00eb!\",\n-    \"intersection_toofewcats\": \"Error: Te weinig categorie\u00eb!\",\n-    \"intersection_noresults\": \"Error: Gein resultate!\",\n-    \"intersection_noincludecats\": \"Error: U moet tenminste een categorie of een naamruimte opgeve!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/lt.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Matasg\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: Per daug kategorij\u0173!\",\n-    \"intersection_toofewcats\": \"Error: Per ma\u017eai kategorij\u0173!\",\n-    \"intersection_noresults\": \"Error: N\u0117ra rezultat\u0173!\",\n-    \"intersection_noincludecats\": \"Error: Jums reikia \u012ftraukti bent vien\u0105 kategorij\u0105, arba nurodyti vard\u0173 srit\u012f!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/lv.json",
          "status": "removed",
          "additions": 0,
          "deletions": 9,
          "patch": "@@ -1,9 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Xil\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"K\u013c\u016bda: p\u0101r\u0101k daudz kategoriju!\",\n-    \"intersection_toofewcats\": \"K\u013c\u016bda: p\u0101r\u0101k maz kategoriju!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/mg.json",
          "status": "removed",
          "additions": 0,
          "deletions": 8,
          "patch": "@@ -1,8 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Jagwar\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"DynamicPageList : Be laotra ny sokajy\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ml.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Shijualex\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0d12\u0d30\u0d41 \u0d15\u0d3e\u0d31\u0d4d\u0d31\u0d17\u0d31\u0d3f\u0d2f\u0d3f\u0d32\u0d4d\u200d \u0d2a\u0d41\u0d24\u0d3f\u0d2f\u0d24\u0d3e\u0d2f\u0d3f \u0d35\u0d28\u0d4d\u0d28 \u0d07\u0d28\u0d19\u0d4d\u0d19\u0d33\u0d41\u0d1f\u0d46 \u0d2c\u0d41\u0d33\u0d4d\u0d33\u0d31\u0d4d\u0d31\u0d4d \u0d2a\u0d1f\u0d4d\u0d1f\u0d3f\u0d15\u0d2f\u0d4b, \u0d05\u0d32\u0d4d\u0d32\u0d46\u0d19\u0d4d\u0d15\u0d3f\u0d32\u0d4d\u200d \u0d28\u0d3f\u0d30\u0d35\u0d27\u0d3f \u0d15\u0d3e\u0d31\u0d4d\u0d31\u0d17\u0d31\u0d3f\u0d15\u0d33\u0d41\u0d1f\u0d46 \u0d15\u0d42\u0d1f\u0d4d\u0d1f\u0d24\u0d4d\u0d24\u0d46\u0d2f\u0d4b \u0d14\u0d1f\u0d4d\u0d1f\u0d4d \u0d2a\u0d41\u0d1f\u0d4d\u0d1f\u0d3e\u0d2f\u0d3f \u0d15\u0d3f\u0d1f\u0d4d\u0d1f\u0d41\u0d28\u0d4d\u0d28\u0d41.\",\n-    \"intersection_toomanycats\": \"Error: \u0d35\u0d33\u0d30\u0d46\u0d2f\u0d27\u0d3f\u0d15\u0d02 \u0d15\u0d3e\u0d31\u0d4d\u0d31\u0d17\u0d31\u0d3f\u0d15\u0d33\u0d4d\u200d!\",\n-    \"intersection_toofewcats\": \"Error: \u0d35\u0d33\u0d30\u0d46 \u0d15\u0d41\u0d31\u0d1a\u0d4d\u0d1a\u0d4d \u0d15\u0d3e\u0d31\u0d4d\u0d31\u0d17\u0d31\u0d3f\u0d15\u0d33\u0d4d\u200d!\",\n-    \"intersection_noresults\": \"Error: \u0d2b\u0d32\u0d19\u0d4d\u0d19\u0d33\u0d4d\u200d \u0d12\u0d28\u0d4d\u0d28\u0d41\u0d2e\u0d3f\u0d32\u0d4d\u0d32!\",\n-    \"intersection_noincludecats\": \"Error: \u0d1a\u0d41\u0d30\u0d41\u0d19\u0d4d\u0d19\u0d3f\u0d2f\u0d24\u0d4d \u0d12\u0d30\u0d41 \u0d15\u0d3e\u0d31\u0d4d\u0d31\u0d17\u0d31\u0d3f\u0d2f\u0d46\u0d19\u0d4d\u0d15\u0d3f\u0d32\u0d41\u0d02 \u0d09\u0d33\u0d4d\u200d\u0d2a\u0d4d\u0d2a\u0d46\u0d1f\u0d41\u0d24\u0d4d\u0d24\u0d41\u0d15\u0d2f\u0d4b \u0d05\u0d32\u0d4d\u0d32\u0d46\u0d19\u0d4d\u0d15\u0d3f\u0d32\u0d4d\u200d \u0d12\u0d30\u0d41 \u0d28\u0d47\u0d02\u0d38\u0d4d\u0d2a\u0d47\u0d38\u0d4d \u0d0e\u0d19\u0d4d\u0d15\u0d3f\u0d32\u0d41\u0d02 \u0d28\u0d3f\u0d37\u0d4d\u0d15\u0d30\u0d4d\u200d\u0d37\u0d3f\u0d1a\u0d4d\u0d1a\u0d3f\u0d30\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d15\u0d2f\u0d4b \u0d35\u0d47\u0d23\u0d02!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/mr.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Kaustubh\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u090f\u0916\u093e\u0926\u094d\u092f\u093e \u0935\u0930\u094d\u0917\u093e\u0924\u0940\u0932 \u0905\u0925\u0935\u093e \u0935\u0930\u094d\u0917\u0938\u092e\u0942\u0939\u093e\u0924\u0940\u0932 \u0928\u0935\u0940\u0928\u0924\u092e \u0932\u0947\u0916 \u0926\u0930\u094d\u0936\u0935\u093f\u0924\u094b.\",\n-    \"intersection_toomanycats\": \"Error: \u0916\u0942\u092a \u091c\u093e\u0938\u094d\u0924 \u0935\u0930\u094d\u0917!\",\n-    \"intersection_toofewcats\": \"Error: \u0916\u0942\u092a \u0915\u092e\u0940 \u0935\u0930\u094d\u0917!\",\n-    \"intersection_noresults\": \"Error: \u0928\u093f\u0915\u093e\u0932 \u0928\u093e\u0939\u0940\u0924!\",\n-    \"intersection_noincludecats\": \"Error: \u0915\u092e\u0940\u0924\u0915\u092e\u0940 \u090f\u0915 \u0935\u0930\u094d\u0917 \u0905\u0925\u0935\u093e \u0928\u093e\u092e\u0935\u093f\u0936\u094d\u0935 \u0926\u0947\u0923\u0947 \u0917\u0930\u091c\u0947\u091a\u0947 \u0906\u0939\u0947!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ms.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Aviator\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Mengoutput senarai item terkini dalam sesebuah kategori atau kesatuan beberapa buah kategori\",\n-    \"intersection_toomanycats\": \"Error: Kategori terlalu banyak!\",\n-    \"intersection_toofewcats\": \"Error: Kategori terlalu sedikit!\",\n-    \"intersection_noresults\": \"Error: Tiada hasil!\",\n-    \"intersection_noincludecats\": \"Error: Anda hendaklah memasukkan sekurang-kurangnya sebuah kategori atau menyatakan sebuah ruang nama!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/nb.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Jon Harald S\u00f8by\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Gir en punktliste over de nyeste elementene i en kategori, eller elementer som er felles i flere kategorier\",\n-    \"intersection_toomanycats\": \"Dynamisk sideliste: For mange kategorier!\",\n-    \"intersection_toofewcats\": \"Dynamisk sidelist: For f\u00e5 kategorier!\",\n-    \"intersection_noresults\": \"Dynamisk sideliste: Ingen resultater!\",\n-    \"intersection_noincludecats\": \"Dynamisk sideliste: Du m\u00e5 inkludere minst \u00e9n kategori, eller oppgi et navnerom!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/nds.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Slomox\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Wiest en List mit de aktuellsten Indr\u00e4\u00e4g in en Kategorie, oder de Snittmengd vun mehr Kategorien\",\n-    \"intersection_toomanycats\": \"Fehler: Toveel Kategorien!\",\n-    \"intersection_toofewcats\": \"Fehler: To wenig Kategorien!\",\n-    \"intersection_noresults\": \"Fehler: Nix funnen!\",\n-    \"intersection_noincludecats\": \"Fehler: Dor mutt opminnst een Kategorie angeven warrn! ODer geev en Naamruum an.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/nl.json",
          "status": "removed",
          "additions": 0,
          "deletions": 30,
          "patch": "@@ -1,30 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"SPQRobin\",\n-            \"Siebrand\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Geeft als uitvoer een ongenummerde lijst met de meest recent toegevoegde items in een categorie, of een combinatie van categorie\u00ebn\",\n-    \"intersection_toomanycats\": \"Fout: Te veel categorie\u00ebn!\",\n-    \"intersection_toofewcats\": \"Fout: Te weinig categorie\u00ebn!\",\n-    \"intersection_noresults\": \"Fout: Geen resultaten!\",\n-    \"intersection_noincludecats\": \"Fout: U moet tenminste een categorie of een naamruimte opgeven!\",\n-    \"dpl_log_1\": \"FOUT: Verkeerde parameter '$0': '$1'! Hulp:  <code>$0= <i>lege string</i> (Main)$3</code>.\",\n-    \"dpl_log_2\": \"FOUT: Te veel categori\u00ebn! Maximum: $0. Hulp: verhoog <code>DynamicPageListHooks::$maxCategoryCount</code> om meer categorie\u00ebn op te kunnen geven of stel geen limiet in met <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code>. (Neem deze variabele op in <code>LocalSettings.php</code>, na het toevoegen van <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_3\": \"FOUT: Te weinig categorie\u00ebn! Minimum: $0. Hulp: verlaag <code>DynamicPageListHooks::$minCategoryCount</code> om minder categorie\u00ebn aan te hoeven geven. (Stel de variabele bij voorkeur in via <code>LocalSettings.php</code>, na het toevoegen van <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_5\": \"FOUT: U dient tenminste \u00e9\u00e9n categorie op te nemen als u 'addfirstcategorydate=true' of 'ordermethod=categoryadd' wilt gebruiken!\",\n-    \"dpl_log_6\": \"FOUT: Als u meer dan \u00e9\u00e9n categorie opneemt, kunt u 'addfirstcategorydate=true' of 'ordermethod=categoryadd' niet gebruiken!\",\n-    \"dpl_log_8\": \"FOUT: U kunt niet meer dan \u00e9\u00e9n type of datum tegelijk gebruiken!\",\n-    \"dpl_log_9\": \"FOUT: U kunt '$0' alleen met 'ordermethod=[...,]$1' gebruiken!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_14\": \"WAARSCHUWING: Verkeerde parameter '$0': '$1'! Nu wordt de standaard gebruikt: '$2'. Hulp: <code>$0= $3</code>.\",\n-    \"dpl_log_16\": \"WAARSCHUWING: Geen resultaten!\",\n-    \"dpl_log_17\": \"WAARSCHUWING: Add* parameters ('adduser', 'addeditdate', etc.)' heeft geen effect bij 'mode=category'. Alleen de paginanaamruimte/titel is in deze modus te bekijken.\",\n-    \"dpl_log_18\": \"WAARSCHUWING: 'headingmode=$0' heeft geen effect met 'ordermethod' op een enkele component. Nu wordt gebruikt: '$1'. Hulp: u kunt een niet-$1 'headingmode'-waarde gebruiken met 'ordermethod' op meerdere componenten. De eerste component wordt gebruikt als kop. Bijvoorbeeld 'ordermethod=category,<i>comp</i>' (<i>comp</i> is een ander component) voor categoriekoppen.\",\n-    \"dpl_log_19\": \"WAARSCHUWING: 'debug=$0' is niet de eerste positie in het DPL-element. De nieuwe debuginstellingen zijn niet toegepast voor alle voorgaande parameters zijn verwerkt en gecontroleerd.\",\n-    \"dpl_log_21\": \"QUERY: <code>$0</code>\",\n-    \"dpl_articlecount\": \"Er {{PLURAL:$1|is \u00e9\u00e9n pagina|zijn $1 pagina's}} onder deze kop.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/nn.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Harald Khan\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Gjev ei punktlista over dei nyaste elementa i ein kategori, eller element som er felles i fleire kategoriar\",\n-    \"intersection_toomanycats\": \"Feil: For mange kategoriar!\",\n-    \"intersection_toofewcats\": \"Feil: For f\u00e5 kategoriar!\",\n-    \"intersection_noresults\": \"Feil: Ingen resultat!\",\n-    \"intersection_noincludecats\": \"Feil: Du m\u00e5 inkludera minst \u00e9in kategori, eller oppgje eit namnerom!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/oc.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Cedric31\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Aficha una lista, amb de piuses, dels articles mai recents dins una categoria, o a partir d\u2019una combinason de mantuna categoria.\",\n-    \"intersection_toomanycats\": \"Error : Tr\u00f2p de categorias !\",\n-    \"intersection_toofewcats\": \"Error : Pas pro de categorias !\",\n-    \"intersection_noresults\": \"Error : Pas cap de resultat !\",\n-    \"intersection_noincludecats\": \"Error : av\u00e8tz besonh d\u2019inclure almens una categoria, o de precisar un nom d\u2019espaci !\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/os.json",
          "status": "removed",
          "additions": 0,
          "deletions": 8,
          "patch": "@@ -1,8 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Amikeco\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"\u0420\u00e6\u0434\u044b\u0434: \u00e6\u0433\u00e6\u0440 \u0431\u0438\u0440\u00e6 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0442\u00e6!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/pl.json",
          "status": "removed",
          "additions": 0,
          "deletions": 52,
          "patch": "@@ -1,52 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Sp5uhe\",\n-            \"Rail\",\n-            \"Frisk\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Zwraca list\u0119 wypunktowan\u0105 najnowszych element\u00f3w w kategorii lub grupie kilku kategorii\",\n-    \"intersection_toomanycats\": \"B\u0142\u0105d \u2013 zbyt wiele kategorii!\",\n-    \"intersection_toofewcats\": \"B\u0142\u0105d \u2013 zbyt ma\u0142o kategorii!\",\n-    \"intersection_noresults\": \"B\u0142\u0105d \u2013 brak wynik\u00f3w!\",\n-    \"intersection_noincludecats\": \"B\u0142\u0105d \u2013 musisz za\u0142\u0105czy\u0107 co najmniej jedn\u0105 kategori\u0119 lub okre\u015bli\u0107 przestrze\u0144 nazw!\",\n-    \"dpl-desc\": \"Wysoce elastyczny generator raport\u00f3w w MediaWiki\",\n-    \"dpl_log_1\": \"B\u0142\u0105d \u2013 B\u0142\u0119dny parametr \u201e$1\u201d: \u201e$2\u201d! Pomoc: <code>$1= <i>empty string</i> (Main)$3</code>.\",\n-    \"dpl_log_2\": \"B\u0142\u0105d \u2013 B\u0142\u0119dny parametr \u201e$1\u201d: \u201e$2\u201d! Pomoc: <code>$1= <i>full pagename</i></code>.\",\n-    \"dpl_log_3\": \"B\u0142\u0105d \u2013 zbyt wiele kategorii! Maksymalnie $1. Pomoc: zwi\u0119ksz warto\u015b\u0107 <code>$wgDplSettings['maxCategoryCount']</code> aby okre\u015bli\u0107 wi\u0119cej kategorii lub ustaw <code>$wgDplSettings['allowUnlimitedCategories'] = true;</code> w celu wy\u0142\u0105czeniu limitu (ustaw zmienn\u0105 w pliku konfiguracyjnym <code>LocalSettings.php</code> wiki).\",\n-    \"dpl_log_4\": \"B\u0142\u0105d \u2013 zbyt ma\u0142o kategorii! Minimalnie $1. Pomoc: zmniejsz warto\u015b\u0107 decrease <code>$wgDplSettings['minCategoryCount']</code> aby okre\u015bli\u0107 mniej kategorii (ustaw zmienn\u0105 w pliku konfiguracyjnym <code>LocalSettings.php</code> wiki).\",\n-    \"dpl_log_5\": \"B\u0142\u0105d \u2013 nie odnaleziono kryteri\u00f3w wyboru! Musisz u\u017cy\u0107 przynajmniej jednego z poni\u017cszych parametr\u00f3w: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby lub ich wariant\u00f3w \u201enot\u201d.\",\n-    \"dpl_log_6\": \"B\u0142\u0105d \u2013 musisz wybra\u0107 przynajmniej jedn\u0105 kategori\u0119 aby u\u017cy\u0107 \u201eaddfirstcategorydate=true\u201d lub \u201eordermethod=categoryadd\u201d.\",\n-    \"dpl_log_7\": \"B\u0142\u0105d \u2013 nie mo\u017cesz u\u017cy\u0107 \u201eaddfirstcategorydate=true\u201d lub \u201eordermethod=categoryadd\u201d je\u015bli podasz wi\u0119cej ni\u017c jedn\u0105 kategori\u0119.\",\n-    \"dpl_log_8\": \"B\u0142\u0105d \u2013 mo\u017cna doda\u0107 tylko jeden typ daty na raz.\",\n-    \"dpl_log_9\": \"B\u0142\u0105d \u2013 parametr \u201e$1\u201d musi by\u0107 u\u017cywany wraz z \u201eordermethod=[ $2 ]\u201d.\",\n-    \"dpl_log_10\": \"B\u0142\u0105d \u2013 indeksem dominuj\u0105cej sekcji musi by\u0107 liczba pomi\u0119dzy 1 a liczb\u0105 argument\u00f3w parametru \u201eincludepage\u201d ($0 w tym przypadku).\",\n-    \"dpl_log_11\": \"B\u0142\u0105d \u2013 nie mo\u017cna wykonywa\u0107 logicznych operacji na nieskategoryzowanych stronach (np. z parametrem \u201ecategory\u201d), poniewa\u017c podgl\u0105d $0 nie istnieje w bazie danych! Pomoc: administrator bazy danych musi wykona\u0107 to zapytanie: <code>$1</code>.\",\n-    \"dpl_log_12\": \"B\u0142\u0105d \u2013 podawanie parametru \u201eopenreferences\u201d jest niekompatybilne z inn\u0105 podan\u0105 opcj\u0105. Usu\u0144 prosz\u0119 t\u0119 inn\u0105 opcj\u0119 lub \u201eopenreferences\u201d. Zobacz poradnik aby dowiedzie\u0107 si\u0119 wi\u0119cej.\",\n-    \"dpl_log_13\": \"Ostrze\u017cenie \u2013 nieznany parametr \u201e$1\u201d zosta\u0142 zignorowany. Pomoc: dost\u0119pne parametry \u2013 <code>$2</code>.\",\n-    \"dpl_log_14\": \"Ostrze\u017cenie \u2013 pomini\u0119to z\u0142\u0105 opcj\u0119 \u201e$2\u201d dla parametru \u201e$1\u201d.\",\n-    \"dpl_log_15\": \"Ostrze\u017cenie \u2013 z\u0142y parametr \u201e$1\u201d: \u201e$2\u201d! U\u017cyto domy\u015blnego \u2013 \u201e$3\u201d (brak limitu). Pomoc: <code>$1= <i>empty string</i> (no limit) | n</code> z <code>n</code> jako liczb\u0105 dodatni\u0105.\",\n-    \"dpl_log_16\": \"Ostrze\u017cenie \u2013 brak wynik\u00f3w.\",\n-    \"dpl_log_17\": \"Ostrze\u017cenie \u2013 podane parametry (\u201eadduser\u201d, \u201eaddeditdate\u201d, itd.) oraz \u201eincludepage\u201d nie przynios\u0105 zamierzonego efektu wraz z \u201emode=category\u201d. W tym trybie wida\u0107 tylko tytu\u0142 oraz przestrze\u0144 nazw strony.\",\n-    \"dpl_log_18\": \"Ostrze\u017cenie \u2013 \u201eheadingmode=$1\u201d nie przyniesie zamierzonego efektu z \u201eordermethod\u201d na pojedynczym komponencie. U\u017cyto \u201e$2\u201d. Pomoc: mo\u017cesz u\u017cy\u0107 warto\u015bci innych ni\u017c $2 dla \u201eheadingmode\u201d na wielu komponentach. Pierwszy komponent jest u\u017cywany w nag\u0142\u00f3wkach. Np. \u201eordermethod=category,<i>comp</i>\u201d (gdzie <i>comp</i> jest kolejnym komponentem) dla nag\u0142\u00f3wk\u00f3w kategorii.\",\n-    \"dpl_log_19\": \"Ostrze\u017cenie \u2013 \u201edebug=$1\u201d nie jest w pierwszej pozycji w elemencie DPL. Nowe ustawienia debugowania nie s\u0105 aplikowane przed sprawdzeniem i sparsowaniem wszystkich poprzednich parametr\u00f3w.\",\n-    \"dpl_log_20\": \"Ostrze\u017cenie \u2013 strona \u201e$0\u201d tworzy niesko\u0144czon\u0105 p\u0119tl\u0119 transkluzji.\",\n-    \"dpl_log_21\": \"Zapytanie \u2013 <code>$0</code>\",\n-    \"dpl_log_22\": \"Ostrze\u017cenie \u2013 nie podano opcji parametru dla \u201e$1\u201d (brakuj\u0105cy znak \u201e=\u201d).\",\n-    \"dpl_articlecount\": \"W tym nag\u0142\u00f3wku {{PLURAL:$1|znajduje si\u0119 jeden artyku\u0142|znajduj\u0105 si\u0119 $1 artyku\u0142y|znajduje si\u0119 $1 artyku\u0142\u00f3w}}.\",\n-    \"dpl_description\": \"Wysoce elastyczny generator raport\u00f3w w MediaWiki. Zobacz http://semeb.com/dpldemo po poradnik i przyk\u0142ady\",\n-    \"action-dpl_param_update_rules\": \"u\u017cywania parametru \u201eupdaterules\u201d\",\n-    \"action-dpl_param_delete_rules\": \"u\u017cywania parametru \u201edeleterules\u201d\",\n-    \"dpl_query_error\": \"Rozszerzenie DPL (wersja $1) wyprodukowa\u0142o wyra\u017cenie SQL kt\u00f3re doprowadzi\u0142o do b\u0142\u0119du bazy danych.<br />Powodem mo\u017ce by\u0107 wewn\u0119trzny b\u0142\u0105d DPL lub problem spowodowany przez Ciebie; szczeg\u00f3lnie podczas u\u017cywania takich parametr\u00f3w jak \u201ecategoryregexp\u201d lub \u201etitleregexp\u201d. U\u017cywanie wzorc\u00f3w dopasowywania takich jak *? nie jest wspierane.<br />Komunikat b\u0142\u0119du:<br /><code>$2</code>\",\n-    \"dpl-tag-tracking-category\": \"Strony u\u017cywaj\u0105ce znacznika parsera DynamicPageList\",\n-    \"dpl-intersection-tracking-category\": \"Strony u\u017cywaj\u0105ce znacznika parsera DynamicPageList Intersection\",\n-    \"dpl-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList\",\n-    \"dplnum-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList dplnum\",\n-    \"dplvar-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList dplvar\",\n-    \"dplreplace-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList dplreplace\",\n-    \"dplchapter-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList dplchapter\",\n-    \"dplmatrix-parserfunc-tracking-category\": \"Strony u\u017cywaj\u0105ce funkcji parsera DynamicPageList dplmatrix\",\n-    \"right-dpl_param_delete_rules\": \"Masowe usuwanie stron u\u017cywaj\u0105cych DPL\",\n-    \"right-dpl_param_update_rules\": \"Masowe aktualizowanie stron u\u017cywaj\u0105cych DPL\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/pt-br.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Eduardo.mps\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Exibe uma lista pontuada dos itens mais recentes presentes numa categoria, ou uma intersec\u00e7\u00e3o de v\u00e1rias categorias\",\n-    \"intersection_toomanycats\": \"Erro: Categorias demais!\",\n-    \"intersection_toofewcats\": \"Erro: Poucas categorias!\",\n-    \"intersection_noresults\": \"Erro: Sem resultados!\",\n-    \"intersection_noincludecats\": \"Erro: \u00c9 necess\u00e1rio incluir no m\u00ednimo uma categoria ou especificar um espa\u00e7o nominal!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/pt.json",
          "status": "removed",
          "additions": 0,
          "deletions": 13,
          "patch": "@@ -1,13 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"555\",\n-            \"Malafaya\"\n-        ]\n-    },\n-    \"intersection-desc\": \"constr\u00f3i uma lista pontuada dos itens mais recentes presentes numa categoria, ou uma uni\u00e3o de v\u00e1rias categorias\",\n-    \"intersection_toomanycats\": \"Error: Categorias em excesso!\",\n-    \"intersection_toofewcats\": \"Error: Poucas categorias!\",\n-    \"intersection_noresults\": \"Error: Sem resultados!\",\n-    \"intersection_noincludecats\": \"Error: \u00c9 necess\u00e1rio incluir no m\u00ednimo uma categoria ou especificar um espa\u00e7o nominal!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/qqq.json",
          "status": "removed",
          "additions": 0,
          "deletions": 8,
          "patch": "@@ -1,8 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Purodha\"\n-        ]\n-    },\n-    \"intersection-desc\": \"{{desc}}\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ro.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Mihai\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u00centoarce o lista celor mai recen\u0163i itemi care fac parte dintr-o categorie, sau intersec\u0163ia a mai multor categorii\",\n-    \"intersection_toomanycats\": \"Eroare: Prea multe categorii!\",\n-    \"intersection_toofewcats\": \"Eroare: Prea pu\u0163ine categorii!\",\n-    \"intersection_noresults\": \"Eroare: Niciun rezultat!\",\n-    \"intersection_noincludecats\": \"Eroare: Trebuie s\u0103 incluzi cel pu\u0163in o categorie, sau s\u0103 specifici un spa\u0163iu de nume!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/roa-tara.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Joetaras\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Fa ass\u00e8 'na liste cu le palle de le urteme urteme artichele ca stonne jndr'\u00e0 'na categorije, o 'n'interseziona de cchi\u00f9 categorije\",\n-    \"intersection_toomanycats\": \"Errore: Troppe categorije!\",\n-    \"intersection_toofewcats\": \"Errore: Troppe picche categorije!\",\n-    \"intersection_noresults\": \"Errore: Nisciune resultete!\",\n-    \"intersection_noincludecats\": \"Errore: Tu \u00e8 abbesogne de 'ngludere ninde ninde 'na categorije, o specific\u00e0 'nu namespace!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/ru.json",
          "status": "removed",
          "additions": 0,
          "deletions": 31,
          "patch": "@@ -1,31 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0421\u0438\u0433\u0430\u0447\u0451\u0432\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u0432 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439\",\n-    \"intersection_toomanycats\": \"Error: \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439!\",\n-    \"intersection_toofewcats\": \"Error: \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439!\",\n-    \"intersection_noresults\": \"Error: \u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432!\",\n-    \"intersection_noincludecats\": \"Error: \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0438\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u0438\u043c\u0451\u043d!\",\n-    \"dpl_log_1\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u00ab$0\u00bb-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440: \u00ab$1\u00bb! \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430:  <code>$0= <i>\u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430</i> (\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435)$3</code>.\",\n-    \"dpl_log_3\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439! \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c: $0. \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0443\u0432\u0435\u043b\u0438\u0447\u0442\u0435 <code>DynamicPageListHooks::$maxCategoryCount</code> \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0438\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u0434\u043b\u044f \u0441\u043d\u044f\u0442\u0438\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f. (\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0432 <code>LocalSettings.php</code>, \u043f\u043e\u0441\u043b\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439! \u041c\u0438\u043d\u0438\u043c\u0443\u043c: $0. \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 <code>DynamicPageListHooks::$minCategoryCount</code> \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439. (\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0432 <code>LocalSettings.php</code>, \u043f\u043e\u0441\u043b\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u00abaddfirstcategorydate=true\u00bb \u0438\u043b\u0438 \u00abordermethod=categoryadd\u00bb!\",\n-    \"dpl_log_7\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0435\u0441\u043b\u0438 \u0432\u044b \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438, \u0442\u043e \u0432\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u00abaddfirstcategorydate=true\u00bb \u0438\u043b\u0438 \u00abordermethod=categoryadd\u00bb!\",\n-    \"dpl_log_8\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0432\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0437\u0430 \u0440\u0430\u0437!\",\n-    \"dpl_log_9\": \"\u041e\u0428\u0418\u0411\u041a\u0410: \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u00ab$0\u00bb \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u00abordermethod=[...,]$1\u00bb!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u00ab$1\u00bb \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d. \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: <code>$2</code>.\",\n-    \"dpl_log_14\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u00ab$0\u00bb: \u00ab$1\u00bb! \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: \u00ab$2\u00bb. \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u00ab$0\u00bb: \u00ab$1\u00bb! \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: \u00ab$2\u00bb (\u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439). \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: <code>$0= <i>\u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430</i> (\u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439) | n</code>, \u0441 <code>n</code> \u0440\u0430\u0432\u043d\u044b\u043c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c\u0443 \u0446\u0435\u043b\u043e\u043c\u0443 \u0447\u0438\u0441\u043b\u0443.\",\n-    \"dpl_log_16\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!\",\n-    \"dpl_log_17\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435* \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 (\u00abadduser\u00bb, \u00abaddeditdate\u00bb, \u0438 \u0434\u0440.) \u043d\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b \u0441 \u00abmode=category\u00bb. \u0422\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430 \u0438\u043c\u0451\u043d \u0438\u043b\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u044d\u0442\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.\",\n-    \"dpl_log_18\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u00abheadingmode=$0\u00bb \u043d\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u0441 \u00abordermethod\u00bb \u0432 \u043e\u0434\u043d\u043e\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435: \u00ab$1\u00bb. \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430: \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044ce \u043d\u0435-$1 \u00abheadingmode\u00bb \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441 \u00abordermethod\u00bb \u0432\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432. \u041f\u0435\u0440\u0432\u044b\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u00abordermethod=category,<i>comp</i>\u00bb (<i>comp</i> \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u0440\u0443\u0433\u0438\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u043c) \u0434\u043b\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439.\",\n-    \"dpl_log_19\": \"\u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u0415: \u00abdebug=$0\u00bb \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0432 DPL-\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0435. \u041d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u043e\u043a\u0430 \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u044b \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u044b.\",\n-    \"dpl_log_21\": \"\u0417\u0410\u041f\u0420\u041e\u0421: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u0412 \u044d\u0442\u043e\u043c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 $1 {{PLURAL:$1|\u0441\u0442\u0430\u0442\u044c\u044f|\u0441\u0442\u0430\u0442\u044c\u0438|\u0441\u0442\u0430\u0442\u0435\u0439}}.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sah.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"HalanTul\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043b\u0430\u0440\u0433\u0430 \u0431\u04af\u0442\u044d\u04bb\u0438\u043a \u044d\u0431\u0438\u0438\u043b\u044d\u0440\u0438 \u044d\u0431\u044d\u0442\u044d\u0440 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043b\u0430\u0440 \u0445\u043e\u043b\u0431\u043e\u043d\u0443\u0443\u043b\u0430\u0440\u044b\u043d \u0431\u044d\u043b\u0438\u044d\u043b\u044d\u044d\u0445 (\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u0439) \u0438\u0441\u043f\u0438\u0438\u04bb\u044d\u043a \u043a\u0443\u0440\u0434\u0443\u043a \u0442\u0430\u04bb\u0430\u0430\u0440\u0430\u0440\",\n-    \"intersection_toomanycats\": \"Error: \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439\u0430\u0442\u0430 \u043d\u0430\u04bb\u0430\u0430 \u044d\u043b\u0431\u044d\u0445!\",\n-    \"intersection_toofewcats\": \"Error: \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0442\u0430 \u043d\u0430\u04bb\u0430\u0430 \u0430\u0495\u044b\u0439\u0430\u0445\",\n-    \"intersection_noresults\": \"Error: \u0422\u04af\u043c\u04af\u043a \u0441\u0443\u043e\u0445!\",\n-    \"intersection_noincludecats\": \"Error: \u0411\u0438\u0438\u0440 \u044d\u043c\u0438\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043d\u044b \u044d\u0431\u044d\u0442\u044d\u0440 \u0430\u0430\u0442\u044b (\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u0438\u043c\u0435\u043d) \u0442\u0430\u043b\u044b\u0430\u0445\u0442\u0430\u0430\u0445\u0445\u044b\u043d!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sk.json",
          "status": "removed",
          "additions": 0,
          "deletions": 33,
          "patch": "@@ -1,33 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Helix84\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Vyp\u00ed\u0161e zoznam najnov\u0161\u00edch polo\u017eiek v kateg\u00f3rii alebo zjednoten\u00ed nieko\u013ek\u00fdch kateg\u00f3ri\u00ed\",\n-    \"intersection_toomanycats\": \"Error: Pr\u00edli\u0161 ve\u013ea kateg\u00f3ri\u00ed!\",\n-    \"intersection_toofewcats\": \"Error: Pr\u00edli\u0161 m\u00e1lo kateg\u00f3ri\u00ed!\",\n-    \"intersection_noresults\": \"Error: \u017diadne v\u00fdsledky!\",\n-    \"intersection_noincludecats\": \"Error: Mus\u00edte uvies\u0165 aspo\u0148 jednu kateg\u00f3riu alebo menn\u00fd priestor!\",\n-    \"dpl_log_1\": \"CHYBA: nespr\u00e1vny parameter '$0': '$1'! Pomocn\u00edk <code>$0= <i>pr\u00e1zdny retazec</i> (Hlavn\u00fd)$3<code>.\",\n-    \"dpl_log_2\": \"CHYBA: Zl\u00fd parameter '$0': '$1'! Pomocn\u00edk <code>$0= <i>pln\u00fd n\u00e1zov str\u00e1nky</i></code>.\",\n-    \"dpl_log_3\": \"CHYBA: Pr\u00edli\u009a vela kateg\u00f3ri\u00ed! Maximum: $0. Pomocn\u00edk: zv\u00e4c\u009aite <code>DynamicPageListHooks::$maxCategoryCount</code>, aby ste mohli \u009apecifikovat viac kateg\u00f3ri\u00ed alebo nastavte <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> pre vypnutie limitu. (Premenn\u00fa nastatavte v <code>LocalSettings.php</code>, potom ako bol includovan\u00fd <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"CHYBA: Pr\u00edli\u009a m\u00e1lo kateg\u00f3ri\u00ed! Minimum: $0. Pomocn\u00edk: zn\u00ed\u009ete <code>DynamicPageListHooks::$minCategoryCount</code>, aby ste mohli \u009apecifikovat menej kateg\u00f3ri\u00ed. (Premenn\u00fa nastavte najlep\u009aie v <code>LocalSettings.php</code> potom, ako v nom bol includovan\u00fd <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"CHYBA: Mus\u00edte uviest aspon jednu kateg\u00f3riu ak chcete pou\u009eit 'addfirstcategorydate=true' alebo 'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"CHYBA: Ak zahrniete viac ako jednu kateg\u00f3riu, nem\u00f4\u009eete pou\u009eit 'addfirstcategorydate=true' alebo 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"CHYBA: Nem\u00f4\u009eete naraz pridat viac ako jeden typ d\u00e1tumu!\",\n-    \"dpl_log_9\": \"CHYBA: '$0' m\u00f4\u009eete pou\u009eit iba s 'ordermethod=[...,]$1'!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"CHYBA: Nie je momo\u009en\u00e9 vykon\u00e1vat logick\u00e9 oper\u00e1cie na nekategorizovan\u00fdch kateg\u00f3ri\u00e1ch (napr. s parametrom 'Kateg\u00f3ria') lebo neexistuje na datab\u00e1zu pohlad $0! Pomocn\u00edk: nech admin datab\u00e1zy vykon\u00e1 tento dotaz: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"VAROVANIE: Nezn\u00e1my parameter '$1' ignorovan\u00fd. Pomocn\u00edk: dostupn\u00e9 parametre: <code>$2</code>.\",\n-    \"dpl_log_14\": \"VAROVANIE: Nespr\u00e1vny '$0' parameter: '$1'! Pou\u009e\u00edvam \u009atandardn\u00fd '$2'. Pomocn\u00edk: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"VAROVANIE: Nespr\u00e1vny parameter  '$0': '$1'! Pou\u009e\u00edvam \u009atandardn\u00fd: '$2' (bez obmedzenia). Pomocn\u00edk: <code>$0= <i>pr\u00e1zdny retazec</i> (bez obmedzenia) | n</code>, s kladn\u00fdm cel\u00fdm c\u00edslom <code>n</code>.\",\n-    \"dpl_log_16\": \"VAROVANIE: No results!\",\n-    \"dpl_log_17\": \"VAROVANIE: Parametre Add* ('adduser', 'addeditdate', atd' nepracuj\u00fa s mode=category'. V tomto re\u009eime je mo\u009en\u00e9 prehliadat iba menn\u00e1 priestor/titulok str\u00e1nky.\",\n-    \"dpl_log_18\": \"VAROVANIE: 'headingmode=$0' nepracuje s 'ordermethod' na jednom komponente. Pou\u009eitie: '$1'. Pomocn\u00edk: m\u00f4\u009eete pou\u009eit not-$1 hodnoty 'headingmode' s 'ordermethod' na viacer\u00e9 komponenty. Prv\u00fd komponent sa pou\u009e\u00edva na nadpisy. Napr. 'ordermethod=category,<i>comp</i>' (<i>comp</i> je in\u00fd komponent) pre nadpisy kateg\u00f3ri\u00ed.\",\n-    \"dpl_log_19\": \"VAROVANIE: 'debug=$0' nie je na prvej poz\u00edcii v prvku DPL. Nov\u00e9 ladiacie nastavenia nebud\u00fa pou\u009e\u00edt\u00e9 sk\u00f4r ne\u009e bud\u00fa parsovan\u00e9 a skontrolovan\u00e9 v\u009aetky predch\u00e1dzaj\u00face.\",\n-    \"dpl_log_21\": \"DOTAZ: <code>$0</code>\",\n-    \"dpl_articlecount\": \"V tomto nadpise {{PLURAL:$1|je jeden cl\u00e1nok|s\u00fa $1 cl\u00e1nky|je $1 cl\u00e1nkov}}.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sr-ec.json",
          "status": "removed",
          "additions": 0,
          "deletions": 34,
          "patch": "@@ -1,34 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Millosh\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0414\u0430\u0458\u0435 \u0440\u0435\u0434\u043d\u0438 \u0441\u043f\u0438\u0441\u0430\u043a \u043d\u0430\u0458\u0441\u043a\u043e\u0440\u0438\u0458\u0435 \u0434\u043e\u0434\u0430\u0442\u0438\u0445 \u0447\u043b\u0430\u043d\u0430\u043a\u0430 \u0443 \u0458\u0435\u0434\u043d\u0443 \u0438\u043b\u0438 \u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430.\",\n-    \"intersection_toomanycats\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041f\u0440\u0435\u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430!\",\n-    \"intersection_toofewcats\": \"\u0413\u0440\u0435\u0448\u043a\u0430:\u041f\u0440\u0435\u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430!\",\n-    \"intersection_noresults\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041d\u0435\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u0430\u0442\u0430\u0442\u0430!\",\n-    \"intersection_noincludecats\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041f\u043e\u0442\u0440\u0435\u0431\u043d\u043e \u0458\u0435 \u0443\u043a\u0459\u0443\u0447\u0438\u0442\u0438 \u0431\u0430\u0440 \u0458\u0435\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0443 \u0438\u043b\u0438 \u043e\u0434\u0440\u0435\u0434\u0438\u0442\u0438 \u0438\u043c\u0435\u043d\u0441\u043a\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0440!\",\n-    \"dpl_log_1\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u043e\u0433\u0440\u0435\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041f\u043e\u043c\u043e\u045b:  <code>$0= <i>\u043f\u043e\u0433\u0440\u0435\u0448\u0430\u043d \u0441\u0442\u0440\u0438\u043d\u0433</i> (\u0413\u043b\u0430\u0432\u043d\u043e)$3</code>. (\u0415\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u0438 \u0441\u0430 \u043c\u0430\u0433\u0438\u0447\u043d\u0438\u043c \u0440\u0435\u0447\u0438\u043c\u0430 \u0441\u0443 \u0442\u0430\u043a\u043e\u0452\u0435 \u0434\u043e\u0437\u0432\u043e\u0459\u0435\u043d\u0438.)\",\n-    \"dpl_log_2\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041f\u043e\u043c\u043e\u045b:  <code>$0= <i>\u043f\u0443\u043d\u043e \u0438\u043c\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435</i></code>. (\u041c\u0430\u0433\u0438\u0447\u043d\u0435 \u0440\u0435\u0447\u0438 \u0441\u0443 \u0434\u043e\u0437\u0432\u043e\u0459\u0435\u043d\u0435.)\",\n-    \"dpl_log_3\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u0440\u0435\u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430! \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0458\u0435: $0. \u041f\u043e\u043c\u043e\u045b: \u043f\u043e\u0432\u0435\u045b\u0430\u0458\u0442\u0435 <code>DynamicPageListHooks::$maxCategoryCount</code> \u043a\u0430\u043a\u043e \u0431\u0438\u0441\u0442\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430 \u0438\u043b\u0438 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u0437\u0430 \u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0430. (\u041f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0458\u0430\u0431\u043b\u0443 \u0443 <code>LocalSettings.php</code>, \u043d\u0430\u043a\u043e\u043d \u0443\u043a\u0459\u0443\u0447\u0438\u0432\u0430\u045a\u0430 <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u0440\u0435\u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430! \u041c\u0438\u043d\u0438\u043c\u0443\u043c \u0458\u0435: $0. \u041f\u043e\u043c\u043e\u045b: \u043f\u043e\u0432\u0435\u045b\u0430\u0458\u0442\u0435 <code>DynamicPageListHooks::$minCategoryCount</code> \u043a\u0430\u043a\u043e \u0431\u0438\u0441\u0442\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u043c\u0430\u045a\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430. (\u041f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0458\u0430\u0431\u043b\u0443 \u0443 <code>LocalSettings.php</code>, \u043d\u0430\u043a\u043e\u043d \u0443\u043a\u0459\u0443\u0447\u0438\u0432\u0430\u045a\u0430 <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041c\u043e\u0440\u0430\u0442\u0435 \u0443\u043a\u0459\u0443\u0447\u0438\u0442\u0438 \u0431\u0430\u0440 \u0458\u0435\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0443 \u0443\u043a\u043e\u043b\u0438\u043a\u043e \u0436\u0435\u043b\u0438\u0442\u0435 \u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0435 'addfirstcategorydate=true' \u0438\u043b\u0438 'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u0423\u043a\u043e\u043b\u0438\u043a\u043e \u0443\u043a\u0459\u0443\u0447\u0443\u0458\u0435\u0442\u0435 \u0432\u0438\u0448\u0435 \u043e\u0434 \u0458\u0435\u0434\u043d\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0435, \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438 'addfirstcategorydate=true' \u0438\u043b\u0438 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u0432\u0438\u0448\u0435 \u043e\u0434 \u0458\u0435\u0434\u043d\u043e\u0433 \u0442\u0438\u043f\u0430 \u0434\u0430\u0442\u0443\u043c\u0430!\",\n-    \"dpl_log_9\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438 '$0' \u0441\u0430 'ordermethod=[...,]$1' \u0438\u0441\u043a\u0459\u0443\u0447\u0438\u0432\u043e!\",\n-    \"dpl_log_10\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041d\u0435\u043c\u043e\u0433\u0443\u045b\u0435 \u0438\u0437\u0432\u0440\u0448\u0438\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0458\u0443 \u043d\u0430 \u043d\u0435\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0438\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c\u0430 (\u043d\u043f\u0440. \u0441\u0430 'category' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c) \u0437\u0430\u0442\u043e \u0448\u0442\u043e $0 \u043f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0435 \u043f\u043e\u0441\u0442\u043e\u0458\u0438 \u0443 \u0431\u0430\u0437\u0438 \u043f\u043e\u0434\u0430\u0442\u0430\u043a\u0430! \u041f\u043e\u043c\u043e\u045b: \u043d\u0435\u043a\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0431\u0430\u0437\u0435 \u0438\u0437\u0432\u0440\u0448\u0438 \u043e\u0432\u0430\u0458 \u0443\u043f\u0438\u0442: <code>$1</code>.\",\n-    \"dpl_log_11\": \"ERROR: Cannot perform logical operations on the Uncategorized pages (f.e. with the 'category' parameter) because the $0 view does not exist on the database! Help: have the database administrator execute this query: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u041f\u0410\u0416\u040a\u0410: \u041d\u0435\u043f\u043e\u0437\u043d\u0430\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440 '$1' \u0458\u0435 \u0438\u0433\u043d\u043e\u0440\u0438\u0441\u0430\u043d. \u041f\u043e\u043c\u043e\u045b: \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438 \u0441\u0443: <code>$2</code>.\",\n-    \"dpl_log_14\": \"\u041f\u0410\u0416\u040a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u0438: '$2'. \u041f\u043e\u043c\u043e\u045b: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"\u041f\u0410\u0416\u040a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u0438: '$2' (\u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0435). \u041f\u043e\u043c\u043e\u045b: <code>$0= <i>\u043f\u0440\u0430\u0437\u0430\u043d \u0441\u0442\u0440\u0438\u043d\u0433</i> (\u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0435) | n</code>, \u0441 <code>n</code> \u0458\u0435 \u043f\u043e\u0437\u0438\u0442\u0438\u0432\u0430\u043d \u0438\u043d\u0442\u0435\u0433\u0435\u0440.\",\n-    \"dpl_log_16\": \"\u041f\u0410\u0416\u040a\u0410: \u041d\u0435\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u0442\u0430\u0442\u0430!\",\n-    \"dpl_log_17\": \"\u041f\u0410\u0416\u040a\u0410: \u0414\u043e\u0434\u0430\u0432\u0430\u045a\u0435* \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440\u0430 ('adduser', 'addeditdate', \u0438\u0442\u0434.)' \u0438 'includepage' \u043d\u0435\u043c\u0430 \u0435\u0444\u0435\u043a\u0442\u0430 \u0441\u0430 'mode=category'. \u0418\u0441\u043a\u0459\u0443\u0447\u0438\u0432\u043e \u0438\u043c\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435/\u0438\u043c\u0435\u043d\u0441\u043a\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0440 \u043c\u043e\u0433\u0443 \u0434\u0430 \u0441\u0435 \u0432\u0438\u0434\u0435 \u0443 \u043e\u0432\u043e\u043c \u043c\u043e\u0434\u0443.\",\n-    \"dpl_log_18\": \"\u041f\u0410\u0416\u040a\u0410: 'headingmode=$0' \u043d\u0435\u043c\u0430 \u0435\u0444\u0435\u043a\u0442\u0430 \u0441\u0430 'ordermethod' \u043d\u0430 \u0458\u0435\u0434\u043d\u043e\u0458 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438. \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435: '$1'. \u041f\u043e\u043c\u043e\u045b: \u043d\u0435 \u043c\u043e\u0440\u0430\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438-$1 'headingmode' \u043f\u043e\u0434\u0430\u0442\u043a\u0435 'ordermethod' \u043d\u0430 \u0432\u0438\u0448\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438. \u041f\u0440\u0432\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0441\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 \u0437\u0430 \u043d\u0430\u0441\u043b\u043e\u0432. \u041d\u043f\u0440. 'ordermethod=category,<i>\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430</i>' (<i>\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430</i> \u0458\u0435 \u0434\u0440\u0443\u0433\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430) \u0437\u0430 \u043d\u0430\u0441\u043b\u043e\u0432\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430.\",\n-    \"dpl_log_29\": \"\u041f\u0410\u0416\u040a\u0410: 'debug=$0' \u043d\u0438\u0458\u0435 \u043d\u0430 \u043f\u0440\u0432\u043e\u043c \u043c\u0435\u0441\u0442\u0443 \u0443 DPL \u0435\u043b\u0435\u043c\u0435\u043d\u0442\u0443. \u041d\u043e\u0432\u0430 \u0434\u0435\u0431\u0430\u0433 \u043f\u043e\u0434\u0435\u0448\u0430\u0432\u0430\u045a\u0430 \u043d\u0438\u0441\u0443 \u043f\u0440\u0438\u043c\u0435\u045a\u0435\u043d\u0430 \u043f\u0440\u0435 \u0441\u0432\u0438\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440\u0430 \u043a\u043e\u0458\u0438 \u0441\u0443 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u0438\",\n-    \"dpl_log_20\": \"\u041f\u0410\u0416\u040a\u0410: \u0411\u0435\u0441\u043a\u043e\u043d\u0430\u0447\u043d\u0430 \u043f\u0435\u0442\u0459\u0430\u0441\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 '$0'.\",\n-    \"dpl_log_21\": \"\u0423\u041f\u0418\u0422: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u0423 \u043e\u0432\u043e\u043c \u043d\u0430\u0441\u043b\u043e\u0432\u0443 \u0441\u0435 \u0442\u0440\u0435\u043d\u0443\u0442\u043d\u043e \u043d\u0430\u043b\u0430\u0437\u0438 {{PLURAL:$1|\u0458\u0435\u0434\u0430\u043d \u0447\u043b\u0430\u043d\u0430\u043a|$1 \u0447\u043b\u0430\u043d\u043a\u0430|$1 \u0447\u043b\u0430\u043d\u0430\u043a\u0430}}.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sr-el.json",
          "status": "removed",
          "additions": 0,
          "deletions": 29,
          "patch": "@@ -1,29 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Millosh\"\n-        ]\n-    },\n-    \"dpl_log_1\": \"GRE\u0160KA: Pogrean '$0' parametar: '$1'! Pomo\u0107:  <code>$0= <i>pogre\u0161an string</i> (Glavno)$3</code>. (Ekvivalenti sa magi\u010dnim re\u010dima su tako\u0111e dozvoljeni.)\",\n-    \"dpl_log_2\": \"GRE\u0160KA: Pogre\u0161an '$0' parametar: '$1'! Pomo\u0107:  <code>$0= <i>puno ime stranice</i></code>. (Magi\u010dne re\u010di su dozvoljene.)\",\n-    \"dpl_log_3\": \"GRE\u0160KA: Previ\u0161e kategorija! Maksimum je: $0. Pomo\u0107: pove\u0107ajte <code>DynamicPageListHooks::$maxCategoryCount</code> kako biste postavili vi\u0161e kategorija ili promenite <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> za bez granica. (Podesite varijablu u <code>LocalSettings.php</code>, nakon uklju\u010divanja <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"GRE\u0160KA: Premalo kategorija! Minimum je: $0. Pomo\u0107: pove\u0107ajte <code>DynamicPageListHooks::$minCategoryCount</code> kako biste postavili manje kategorija. (Podesite varijablu u <code>LocalSettings.php</code>, nakon uklju\u010divanja <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"GRE\u0160KA: Morate uklju\u010diti bar jednu kategoriju ukoliko \u017eelite da koristite 'addfirstcategorydate=true' ili 'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"GRE\u0160KA: Ukoliko uklju\u010dujete vi\u0161e od jedne kategorije, ne mo\u017eete koristiti 'addfirstcategorydate=true' ili 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"GRE\u0160KA: Ne mo\u017eete dodati vi\u0161e od jednog tipa datuma!\",\n-    \"dpl_log_9\": \"GRE\u0160KA: Mo\u017eete koristiti '$0' sa 'ordermethod=[...,]$1' isklju\u010divo!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_11\": \"GRE\u0160KA: Nemogu\u0107e izvr\u0161iti operaciju na nekategorizovanim stranicama (npr. sa 'category' parametrom) zato \u0161to $0 pregled ne postoji u bazi podataka! Pomo\u0107: neka administrator baze izvr\u0161i ovaj upit: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"PA\u017dNJA: Nepoznat parametar '$1' je ignorisan. Pomo\u0107: dostupni parametri su: <code>$2</code>.\",\n-    \"dpl_log_14\": \"PA\u017dNJA: Pogre\u0161an '$0' parametar: '$1'! Koristi se osnovni: '$2'. Pomo\u0107: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"PA\u017dNJA: Pogre\u0161an '$0' parametar: '$1'! Koristi se osnovni: '$2' (bez granice). Pomo\u0107: <code>$0= <i>prazan string</i> (bez granice) | n</code>, s <code>n</code> je pozitivan integer.\",\n-    \"dpl_log_16\": \"PA\u017dNJA: Nema rezultata!\",\n-    \"dpl_log_17\": \"PA\u017dNJA: Dodavanje* parametara ('adduser', 'addeditdate', itd.)' i 'includepage' nema efekta sa 'mode=category'. Isklju\u010divo ime stranice/imenski prostor mogu da se vide u ovom modu.\",\n-    \"dpl_log_18\": \"PA\u017dNJA: 'headingmode=$0' nema efekta sa 'ordermethod' na jednoj komponenti. Koristi se: '$1'. Pomo\u0107: ne morate koristiti-$1 'headingmode' podatke 'ordermethod' na vi\u0161e komponenti. Prva komponenta se koristi za naslov. Npr. 'ordermethod=category,<i>komponenta</i>' (<i>komponenta</i> je druga komponenta) za naslove kategorija.\",\n-    \"dpl_log_19\": \"PA\u017dNJA: 'debug=$0' nije na prvom mestu u DPL elementu. Nova debag pode\u0161avanja nisu primenjena pre svih parametara koji su provereni\",\n-    \"dpl_log_20\": \"PA\u017dNJA: Beskona\u010dna petljasa stranice '$0'.\",\n-    \"dpl_log_21\": \"UPIT: <code>$0</code>\",\n-    \"dpl_articlecount\": \"U ovom naslovu se trenutno nalazi {{PLURAL:$1|jedan \u010dlanak|$1 \u010dlanka|$1 \u010dlanaka}}\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sr.json",
          "status": "removed",
          "additions": 0,
          "deletions": 34,
          "patch": "@@ -1,34 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Millosh\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0414\u0430\u0458\u0435 \u0440\u0435\u0434\u043d\u0438 \u0441\u043f\u0438\u0441\u0430\u043a \u043d\u0430\u0458\u0441\u043a\u043e\u0440\u0438\u0458\u0435 \u0434\u043e\u0434\u0430\u0442\u0438\u0445 \u0447\u043b\u0430\u043d\u0430\u043a\u0430 \u0443 \u0458\u0435\u0434\u043d\u0443 \u0438\u043b\u0438 \u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430.\",\n-    \"intersection_toomanycats\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041f\u0440\u0435\u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430!\",\n-    \"intersection_toofewcats\": \"\u0413\u0440\u0435\u0448\u043a\u0430:\u041f\u0440\u0435\u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430!\",\n-    \"intersection_noresults\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041d\u0435\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u0430\u0442\u0430\u0442\u0430!\",\n-    \"intersection_noincludecats\": \"\u0413\u0440\u0435\u0448\u043a\u0430: \u041f\u043e\u0442\u0440\u0435\u0431\u043d\u043e \u0458\u0435 \u0443\u043a\u0459\u0443\u0447\u0438\u0442\u0438 \u0431\u0430\u0440 \u0458\u0435\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0443 \u0438\u043b\u0438 \u043e\u0434\u0440\u0435\u0434\u0438\u0442\u0438 \u0438\u043c\u0435\u043d\u0441\u043a\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0440!\",\n-    \"dpl_log_1\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u043e\u0433\u0440\u0435\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041f\u043e\u043c\u043e\u045b:  <code>$0= <i>\u043f\u043e\u0433\u0440\u0435\u0448\u0430\u043d \u0441\u0442\u0440\u0438\u043d\u0433</i> (\u0413\u043b\u0430\u0432\u043d\u043e)$3</code>. (\u0415\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u0438 \u0441\u0430 \u043c\u0430\u0433\u0438\u0447\u043d\u0438\u043c \u0440\u0435\u0447\u0438\u043c\u0430 \u0441\u0443 \u0442\u0430\u043a\u043e\u0452\u0435 \u0434\u043e\u0437\u0432\u043e\u0459\u0435\u043d\u0438.)\",\n-    \"dpl_log_2\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041f\u043e\u043c\u043e\u045b:  <code>$0= <i>\u043f\u0443\u043d\u043e \u0438\u043c\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435</i></code>. (\u041c\u0430\u0433\u0438\u0447\u043d\u0435 \u0440\u0435\u0447\u0438 \u0441\u0443 \u0434\u043e\u0437\u0432\u043e\u0459\u0435\u043d\u0435.)\",\n-    \"dpl_log_3\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u0440\u0435\u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430! \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0458\u0435: $0. \u041f\u043e\u043c\u043e\u045b: \u043f\u043e\u0432\u0435\u045b\u0430\u0458\u0442\u0435 <code>DynamicPageListHooks::$maxCategoryCount</code> \u043a\u0430\u043a\u043e \u0431\u0438\u0441\u0442\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0432\u0438\u0448\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430 \u0438\u043b\u0438 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u0437\u0430 \u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0430. (\u041f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0458\u0430\u0431\u043b\u0443 \u0443 <code>LocalSettings.php</code>, \u043d\u0430\u043a\u043e\u043d \u0443\u043a\u0459\u0443\u0447\u0438\u0432\u0430\u045a\u0430 <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_4\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041f\u0440\u0435\u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430! \u041c\u0438\u043d\u0438\u043c\u0443\u043c \u0458\u0435: $0. \u041f\u043e\u043c\u043e\u045b: \u043f\u043e\u0432\u0435\u045b\u0430\u0458\u0442\u0435 <code>DynamicPageListHooks::$minCategoryCount</code> \u043a\u0430\u043a\u043e \u0431\u0438\u0441\u0442\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u043c\u0430\u045a\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430. (\u041f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0458\u0430\u0431\u043b\u0443 \u0443 <code>LocalSettings.php</code>, \u043d\u0430\u043a\u043e\u043d \u0443\u043a\u0459\u0443\u0447\u0438\u0432\u0430\u045a\u0430 <code>DynamicPageList.php</code>.)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041c\u043e\u0440\u0430\u0442\u0435 \u0443\u043a\u0459\u0443\u0447\u0438\u0442\u0438 \u0431\u0430\u0440 \u0458\u0435\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0443 \u0443\u043a\u043e\u043b\u0438\u043a\u043e \u0436\u0435\u043b\u0438\u0442\u0435 \u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0435 'addfirstcategorydate=true' \u0438\u043b\u0438 'ordermethod=categoryadd'!\",\n-    \"dpl_log_7\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u0423\u043a\u043e\u043b\u0438\u043a\u043e \u0443\u043a\u0459\u0443\u0447\u0443\u0458\u0435\u0442\u0435 \u0432\u0438\u0448\u0435 \u043e\u0434 \u0458\u0435\u0434\u043d\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0435, \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438 'addfirstcategorydate=true' \u0438\u043b\u0438 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u0432\u0438\u0448\u0435 \u043e\u0434 \u0458\u0435\u0434\u043d\u043e\u0433 \u0442\u0438\u043f\u0430 \u0434\u0430\u0442\u0443\u043c\u0430!\",\n-    \"dpl_log_9\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438 '$0' \u0441\u0430 'ordermethod=[...,]$1' \u0438\u0441\u043a\u0459\u0443\u0447\u0438\u0432\u043e!\",\n-    \"dpl_log_10\": \"\u0413\u0420\u0415\u0428\u041a\u0410: \u041d\u0435\u043c\u043e\u0433\u0443\u045b\u0435 \u0438\u0437\u0432\u0440\u0448\u0438\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0458\u0443 \u043d\u0430 \u043d\u0435\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0438\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c\u0430 (\u043d\u043f\u0440. \u0441\u0430 'category' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c) \u0437\u0430\u0442\u043e \u0448\u0442\u043e $0 \u043f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0435 \u043f\u043e\u0441\u0442\u043e\u0458\u0438 \u0443 \u0431\u0430\u0437\u0438 \u043f\u043e\u0434\u0430\u0442\u0430\u043a\u0430! \u041f\u043e\u043c\u043e\u045b: \u043d\u0435\u043a\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0431\u0430\u0437\u0435 \u0438\u0437\u0432\u0440\u0448\u0438 \u043e\u0432\u0430\u0458 \u0443\u043f\u0438\u0442: <code>$1</code>.\",\n-    \"dpl_log_11\": \"ERROR: Cannot perform logical operations on the Uncategorized pages (f.e. with the 'category' parameter) because the $0 view does not exist on the database! Help: have the database administrator execute this query: <code>$1</code>.\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u041f\u0410\u0416\u040a\u0410: \u041d\u0435\u043f\u043e\u0437\u043d\u0430\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440 '$1' \u0458\u0435 \u0438\u0433\u043d\u043e\u0440\u0438\u0441\u0430\u043d. \u041f\u043e\u043c\u043e\u045b: \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438 \u0441\u0443: <code>$2</code>.\",\n-    \"dpl_log_14\": \"\u041f\u0410\u0416\u040a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u0438: '$2'. \u041f\u043e\u043c\u043e\u045b: <code>$0= $3</code>.\",\n-    \"dpl_log_15\": \"\u041f\u0410\u0416\u040a\u0410: \u041f\u043e\u0433\u0440\u0435\u0448\u0430\u043d '$0' \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440: '$1'! \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u0438: '$2' (\u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0435). \u041f\u043e\u043c\u043e\u045b: <code>$0= <i>\u043f\u0440\u0430\u0437\u0430\u043d \u0441\u0442\u0440\u0438\u043d\u0433</i> (\u0431\u0435\u0437 \u0433\u0440\u0430\u043d\u0438\u0446\u0435) | n</code>, \u0441 <code>n</code> \u0458\u0435 \u043f\u043e\u0437\u0438\u0442\u0438\u0432\u0430\u043d \u0438\u043d\u0442\u0435\u0433\u0435\u0440.\",\n-    \"dpl_log_16\": \"\u041f\u0410\u0416\u040a\u0410: \u041d\u0435\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u0442\u0430\u0442\u0430!\",\n-    \"dpl_log_17\": \"\u041f\u0410\u0416\u040a\u0410: \u0414\u043e\u0434\u0430\u0432\u0430\u045a\u0435* \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440\u0430 ('adduser', 'addeditdate', \u0438\u0442\u0434.)' \u0438 'includepage' \u043d\u0435\u043c\u0430 \u0435\u0444\u0435\u043a\u0442\u0430 \u0441\u0430 'mode=category'. \u0418\u0441\u043a\u0459\u0443\u0447\u0438\u0432\u043e \u0438\u043c\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435/\u0438\u043c\u0435\u043d\u0441\u043a\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0440 \u043c\u043e\u0433\u0443 \u0434\u0430 \u0441\u0435 \u0432\u0438\u0434\u0435 \u0443 \u043e\u0432\u043e\u043c \u043c\u043e\u0434\u0443.\",\n-    \"dpl_log_18\": \"\u041f\u0410\u0416\u040a\u0410: 'headingmode=$0' \u043d\u0435\u043c\u0430 \u0435\u0444\u0435\u043a\u0442\u0430 \u0441\u0430 'ordermethod' \u043d\u0430 \u0458\u0435\u0434\u043d\u043e\u0458 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438. \u041a\u043e\u0440\u0438\u0441\u0442\u0438 \u0441\u0435: '$1'. \u041f\u043e\u043c\u043e\u045b: \u043d\u0435 \u043c\u043e\u0440\u0430\u0442\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438\u0442\u0438-$1 'headingmode' \u043f\u043e\u0434\u0430\u0442\u043a\u0435 'ordermethod' \u043d\u0430 \u0432\u0438\u0448\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438. \u041f\u0440\u0432\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0441\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 \u0437\u0430 \u043d\u0430\u0441\u043b\u043e\u0432. \u041d\u043f\u0440. 'ordermethod=category,<i>\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430</i>' (<i>\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430</i> \u0458\u0435 \u0434\u0440\u0443\u0433\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430) \u0437\u0430 \u043d\u0430\u0441\u043b\u043e\u0432\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0458\u0430.\",\n-    \"dpl_log_29\": \"\u041f\u0410\u0416\u040a\u0410: 'debug=$0' \u043d\u0438\u0458\u0435 \u043d\u0430 \u043f\u0440\u0432\u043e\u043c \u043c\u0435\u0441\u0442\u0443 \u0443 DPL \u0435\u043b\u0435\u043c\u0435\u043d\u0442\u0443. \u041d\u043e\u0432\u0430 \u0434\u0435\u0431\u0430\u0433 \u043f\u043e\u0434\u0435\u0448\u0430\u0432\u0430\u045a\u0430 \u043d\u0438\u0441\u0443 \u043f\u0440\u0438\u043c\u0435\u045a\u0435\u043d\u0430 \u043f\u0440\u0435 \u0441\u0432\u0438\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0430\u0440\u0430 \u043a\u043e\u0458\u0438 \u0441\u0443 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u0438\",\n-    \"dpl_log_20\": \"\u041f\u0410\u0416\u040a\u0410: \u0411\u0435\u0441\u043a\u043e\u043d\u0430\u0447\u043d\u0430 \u043f\u0435\u0442\u0459\u0430\u0441\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 '$0'.\",\n-    \"dpl_log_21\": \"\u0423\u041f\u0418\u0422: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u0423 \u043e\u0432\u043e\u043c \u043d\u0430\u0441\u043b\u043e\u0432\u0443 \u0441\u0435 \u0442\u0440\u0435\u043d\u0443\u0442\u043d\u043e \u043d\u0430\u043b\u0430\u0437\u0438 {{PLURAL:$1|\u0458\u0435\u0434\u0430\u043d \u0447\u043b\u0430\u043d\u0430\u043a|$1 \u0447\u043b\u0430\u043d\u043a\u0430|$1 \u0447\u043b\u0430\u043d\u0430\u043a\u0430}}.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/stq.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Pyt\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Uutgoawe fon ne Lieste fon do aktu\u00e4lste Iendraage in ne Kategorie, of n Truchsnit fon moorere Kategorien.\",\n-    \"intersection_toomanycats\": \"Error: Toufuul Kategorien!\",\n-    \"intersection_toofewcats\": \"Error: Toumin Kategorien!\",\n-    \"intersection_noresults\": \"Error: Neen Resultoat!\",\n-    \"intersection_noincludecats\": \"Error: Der mout mindestens een Kategorie ienbuunen weese of reek n Noomensruum oun!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/sv.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Lejonel\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Skapar punktlistor \u00f6ver de nyaste sidorna i en eller flera kategorier\",\n-    \"intersection_toomanycats\": \"Fel: F\u00f6r m\u00e5nga kategorier!\",\n-    \"intersection_toofewcats\": \"Fel: F\u00f6r f\u00e5 kategorier!\",\n-    \"intersection_noresults\": \"Fel: Inga resultat!\",\n-    \"intersection_noincludecats\": \"Fel: Du m\u00e5ste inkludera minst en kategori eller ange en namnrymd!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/te.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Veeven\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: \u0c1a\u0c3e\u0c32\u0c3e \u0c0e\u0c15\u0c4d\u0c15\u0c41\u0c35 \u0c35\u0c30\u0c4d\u0c17\u0c3e\u0c32\u0c41!\",\n-    \"intersection_toofewcats\": \"Error: \u0c2e\u0c30\u0c40 \u0c24\u0c15\u0c4d\u0c15\u0c41\u0c35 \u0c35\u0c30\u0c4d\u0c17\u0c3e\u0c32\u0c41!\",\n-    \"intersection_noresults\": \"Error: \u0c2b\u0c32\u0c3f\u0c24\u0c3e\u0c32\u0c41 \u0c32\u0c47\u0c35\u0c41!\",\n-    \"intersection_noincludecats\": \"Error: \u0c2e\u0c40\u0c30\u0c41 \u0c15\u0c28\u0c40\u0c38\u0c02 \u0c12\u0c15\u0c4d\u0c15 \u0c35\u0c30\u0c4d\u0c17\u0c3e\u0c28\u0c4d\u0c28\u0c48\u0c28\u0c3e \u0c1a\u0c47\u0c30\u0c4d\u0c1a\u0c3e\u0c32\u0c3f, \u0c32\u0c47\u0c26\u0c3e \u0c13 \u0c28\u0c47\u0c2e\u0c4d&zwnj;\u0c38\u0c4d\u0c2a\u0c47\u0c38\u0c41\u0c28\u0c48\u0c28\u0c3e \u0c07\u0c35\u0c4d\u0c35\u0c3e\u0c32\u0c3f!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/tg-cyrl.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Ibrahim\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0424\u0435\u04b3\u0440\u0438\u0441\u0442\u0438 \u0433\u0443\u043b\u0443\u043b\u0430\u0435 \u0430\u0437 \u0441\u0430\u04b3\u0438\u0444\u0430\u04b3\u043e\u0435 \u0431\u0430 \u043d\u0430\u043c\u043e\u0438\u0448 \u0434\u0430\u0440 \u043c\u0435\u043e\u044f\u0434, \u043a\u0438 \u0431\u0430 \u0442\u043e\u0437\u0430\u0433\u04e3 \u0434\u0430\u0440 \u044f\u043a \u0451 \u0447\u0430\u043d\u0434 \u0433\u0443\u0440\u04ef\u04b3 \u0432\u043e\u0440\u0438\u0434 \u0448\u0443\u0434\u0430\u0430\u043d\u0434\",\n-    \"intersection_toomanycats\": \"Error: \u0422\u0435\u044a\u0434\u043e\u0434\u0438 \u0433\u0443\u0440\u04ef\u04b3\u04b3\u043e \u0437\u0438\u0451\u0434 \u0430\u0441\u0442!\",\n-    \"intersection_toofewcats\": \"Error: \u0422\u0435\u044a\u0434\u043e\u0434\u0438 \u0433\u0443\u0440\u04ef\u04b3\u04b3\u043e \u043a\u0430\u043c \u0430\u0441\u0442!\",\n-    \"intersection_noresults\": \"Error: \u041d\u0430\u0442\u0438\u04b7\u0430\u0435 \u0432\u0443\u04b7\u0443\u0434 \u043d\u0430\u0434\u043e\u0440\u0430\u0434!\",\n-    \"intersection_noincludecats\": \"Error: \u0428\u0443\u043c\u043e \u04b3\u0430\u0434\u0434\u0438 \u0430\u049b\u0430\u043b \u0431\u043e\u044f\u0434 \u044f\u043a \u0433\u0443\u0440\u04ef\u04b3\u0440\u043e \u0432\u043e\u0440\u0438\u0434 \u043a\u0443\u043d\u0435\u0434, \u0451 \u044f\u043a \u0444\u0430\u0437\u043e\u0438 \u043d\u043e\u043c\u0440\u043e \u043c\u0443\u0448\u0430\u0445\u0445\u0430\u0441 \u043a\u0443\u043d\u0435\u0434!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/tl.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"AnakngAraw\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Naglalabas ng isang tinuldukang talaan ng pinakakamakailang mga bagay-bagay na naninirahan sa loob ng isang kaurian, o isang pinagsangahang daanan ng ilang mga kaurian\",\n-    \"intersection_toomanycats\": \"Kamalian: Napakaraming mga kaurian!\",\n-    \"intersection_toofewcats\": \"Kamalian: Napakakaunti ng mga kaurian!\",\n-    \"intersection_noresults\": \"Kaurian: Walang mga kinalabasan/resulta!\",\n-    \"intersection_noincludecats\": \"Kamalian: Kinakailangan mong magsama ng kahit na isang kaurian, o tumukoy ng isang espasyo ng pangalan!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/tr.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Joseph\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Bir kategoride, yada bir\u00e7ok kategorinin kesi\u015fiminde bulunan en son \u00f6\u011felerin, madde i\u015faretli listesini \u00fcretir\",\n-    \"intersection_toomanycats\": \"Hata: \u00c7ok fazla kategori!\",\n-    \"intersection_toofewcats\": \"Hata: \u00c7ok az kategori!\",\n-    \"intersection_noresults\": \"Hata: Sonu\u00e7 yok!\",\n-    \"intersection_noincludecats\": \"Hata: En az bir kategori eklemeli, ya da bir ad alan\u0131 belirtmelisiniz!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/uk.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Ahonc\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u0412\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u0443 \u043c\u0430\u0440\u043a\u043e\u0432\u0430\u043d\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0441\u0442\u0430\u043d\u043d\u0456 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u0434\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0430\u0431\u043e \u043e\u0431'\u0454\u0434\u043d\u0430\u043d\u043d\u044f \u043a\u0456\u043b\u044c\u043a\u043e\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0439\",\n-    \"intersection_toomanycats\": \"Error: \u0434\u0443\u0436\u0435 \u0431\u0430\u0433\u0430\u0442\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0439!\",\n-    \"intersection_toofewcats\": \"Error: \u0434\u0443\u0436\u0435 \u043c\u0430\u043b\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0439!\",\n-    \"intersection_noresults\": \"Error: \u043d\u0435\u043c\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432!\",\n-    \"intersection_noincludecats\": \"Error: \u0432\u0438 \u043f\u043e\u0432\u0438\u043d\u043d\u0456 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0445\u043e\u0447\u0430 \u0431 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0430\u0431\u043e \u0437\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u043f\u0440\u043e\u0441\u0442\u0456\u0440 \u043d\u0430\u0437\u0432!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/vec.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Candalua\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Mostra un elenco puntato coi elementi piass\u00e8 re\u00e7enti inser\u00eci in te na categoria o ne l'union de pi\u00f9 categorie\",\n-    \"intersection_toomanycats\": \"Error: Ghe xe massa categorie!\",\n-    \"intersection_toofewcats\": \"Error: Ghe xe massa p\u00f3che categorie!\",\n-    \"intersection_noresults\": \"Error: Nissun risultato!\",\n-    \"intersection_noincludecats\": \"Error: Te gh\u00e8 da incl\u00f9dar almanco na categoria opure specificar un namespace.\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/vep.json",
          "status": "removed",
          "additions": 0,
          "deletions": 10,
          "patch": "@@ -1,10 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"\u0418\u0433\u043e\u0440\u044c \u0411\u0440\u043e\u0434\u0441\u043a\u0438\u0439\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: \u00e4jahk kategorijoid!\",\n-    \"intersection_toofewcats\": \"Error: V\u00e4h\u00e4hk kategorijoid!\",\n-    \"intersection_noresults\": \"Error: Ei ole rezul'tatoid!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/vi.json",
          "status": "removed",
          "additions": 0,
          "deletions": 12,
          "patch": "@@ -1,12 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Minh Nguyen\"\n-        ]\n-    },\n-    \"intersection-desc\": \"Cho ra danh s\u00e1ch nh\u1eefng kho\u1ea3n g\u1ea7n \u0111\u00e2y nh\u1ea5t \u0111\u01b0\u1ee3c x\u1ebfp v\u00e0o m\u1ed9t th\u1ec3 lo\u1ea1i hay h\u1ee3p c\u1ee7a h\u01a1n m\u1ed9t th\u1ec3 lo\u1ea1i\",\n-    \"intersection_toomanycats\": \"Error: Nhi\u1ec1u th\u1ec3 lo\u1ea1i qu\u00e1!\",\n-    \"intersection_toofewcats\": \"Error: \u00cdt th\u1ec3 lo\u1ea1i qu\u00e1!\",\n-    \"intersection_noresults\": \"Error: Kh\u00f4ng t\u00ecm th\u1ea5y trang n\u00e0o!\",\n-    \"intersection_noincludecats\": \"Error: C\u1ea7n ph\u1ea3i bao g\u1ed3m \u00edt nh\u1ea5t m\u1ed9t th\u1ec3 lo\u1ea1i hay \u0111\u1ecbnh r\u00f5 m\u1ed9t kh\u00f4ng gian t\u00ean!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/vo.json",
          "status": "removed",
          "additions": 0,
          "deletions": 11,
          "patch": "@@ -1,11 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Smeira\"\n-        ]\n-    },\n-    \"intersection_toomanycats\": \"Error: Klads tu m\u00f6diks!\",\n-    \"intersection_toofewcats\": \"Error: Klads tu nem\u00f6diks!\",\n-    \"intersection_noresults\": \"Error: Seks nonik!\",\n-    \"intersection_noincludecats\": \"Error: Nedol v\u00e4l\u00f6n kladi pu bali, u nemaspadi!\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/yue.json",
          "status": "removed",
          "additions": 0,
          "deletions": 32,
          "patch": "@@ -1,32 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Shinjiman\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u8f38\u51fa\u4e00\u500b\u9ede\u5217\u6700\u8fd1\u97ff\u5206\u985e\u5605\u9805\u76ee\uff0c\u6216\u8005\u4fc2\u5e7e\u500b\u5206\u985e\u5605\u4e00\u500b\u806f\u7e6b\",\n-    \"intersection_toomanycats\": \"DynamicPageList: \u592a\u591a\u5206\u985e!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u592a\u5c11\u5206\u985e!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u7121\u7d50\u679c!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: \u4f60\u9700\u8981\u53bb\u5305\u542b\u6700\u5c11\u4e00\u500b\u5206\u985e\uff0c\u6216\u8005\u6307\u5b9a\u4e00\u500b\u7a7a\u9593\u540d!\",\n-    \"dpl-desc\": \"\u4e00\u500b\u7540MediaWiki\u5605\u9ad8\u5f48\u6027\u5831\u544a\u7522\u751f\u5668\",\n-    \"dpl_log_1\": \"\u932f\u8aa4: \u932f\u5605 '$0' \u53c3\u6578: '$1'! \u5e6b\u52a9:  <code>$0= <i>\u7a7a\u5b57\u4e32</i> (\u4e3b)$3</code>\u3002\",\n-    \"dpl_log_3\": \"\u932f\u8aa4: \u592a\u591a\u5206\u985e! \u6700\u5927\u503c: $0\u3002 \u5e6b\u52a9: \u589e\u52a0 <code>DynamicPageListHooks::$maxCategoryCount</code> \u5605\u503c\u53bb\u6307\u5b9a\u66f4\u591a\u5605\u5206\u985e\u6216\u8005\u8a2d\u5b9a <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u4ee5\u89e3\u9664\u9650\u5236\u3002 (\u7576\u52a0\u4e0a <code>DynamicPageList.php</code>\u4e4b\u5f8c\uff0c\u97ff<code>LocalSettings.php</code>\u5ea6\u8a2d\u5b9a\u8b8a\u6578\u3002)\",\n-    \"dpl_log_4\": \"\u932f\u8aa4: \u592a\u5c11\u5206\u985e! \u6700\u5c0f\u503c: $0. \u5e6b\u52a9: \u6e1b\u5c11 <code>DynamicPageListHooks::$minCategoryCount</code> \u5605\u503c\u53bb\u6307\u5b9a\u66f4\u5c11\u5605\u5206\u985e\u3002 (\u7576\u52a0\u4e0a <code>DynamicPageList.php</code>\u4e4b\u5f8c\uff0c\u97ff<code>LocalSettings.php</code>\u5ea6\u8a2d\u5b9a\u4e00\u500b\u5408\u9069\u5605\u8b8a\u6578\u3002)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u932f\u8aa4: \u5982\u679c\u4f60\u60f3\u53bb\u7528 'addfirstcategorydate=true' \u6216\u8005 'ordermethod=categoryadd' \uff0c\u4f60\u9700\u8981\u5305\u542b\u6700\u5c11\u4e00\u500b\u5206\u985e!\",\n-    \"dpl_log_7\": \"\u932f\u8aa4: \u5982\u679c\u4f60\u5305\u542b\u591a\u904e\u4e00\u500b\u5206\u985e\uff0c\u4f60\u5514\u53ef\u4ee5\u7528 'addfirstcategorydate=true' \u6216\u8005 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u932f\u8aa4: \u4f60\u5514\u53ef\u4ee5\u97ff\u4e00\u500b\u6642\u9593\u5ea6\u52a0\u5165\u591a\u500b\u4e00\u7a2e\u5605\u65e5\u671f!\",\n-    \"dpl_log_9\": \"\u932f\u8aa4: \u4f60\u53ea\u53ef\u4ee5\u7528 'ordermethod=[...,]$1' \u97ff '$0' \u4e0a!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u8b66\u544a: \u4e0d\u660e\u5605\u53c3\u6578 '$1' \u88ab\u5ffd\u7565\u3002 \u5e6b\u52a9: \u53ef\u7528\u5605\u53c3\u6578: <code>$2</code>\u3002\",\n-    \"dpl_log_14\": \"\u8b66\u544a: \u932f\u8aa4\u5605 '$0' \u53c3\u6578: '$1'! \u7528\u7dca\u9810\u8a2d\u5605: '$2'\u3002 \u5e6b\u52a9: <code>$0= $3</code>\u3002\",\n-    \"dpl_log_15\": \"\u8b66\u544a: \u932f\u8aa4\u5605 '$0' \u53c3\u6578: '$1'! \u7528\u7dca\u9810\u8a2d\u5605: '$2' (\u5187\u4e0a\u9650)\u3002 \u5e6b\u52a9: <code>$0= <i>\u7a7a\u5b57\u4e32</i> (\u5187\u4e0a\u9650) | n</code>, <code>n</code>\u4fc2\u4e00\u500b\u6b63\u6574\u6578\u3002\",\n-    \"dpl_log_16\": \"\u8b66\u544a: \u7121\u7d50\u679c!\",\n-    \"dpl_log_17\": \"\u8b66\u544a: \u52a0\u5165* \u53c3\u6578 ('adduser', 'addeditdate', \u7b49)' \u4fc2\u5c0d 'mode=category' \u5187\u4f5c\u7528\u5605\u3002\u53ea\u6709\u9801\u7a7a\u9593\u540d\uff0f\u6a19\u984c\u81f3\u53ef\u4ee5\u97ff\u5462\u500b\u6a21\u5f0f\u5ea6\u7747\u5230\u3002\",\n-    \"dpl_log_18\": \"\u8b66\u544a: \u97ff\u55ae\u4e00\u90e8\u4ef6\u4e2d\uff0c 'ordermethod' \u5ea6\u7528 'headingmode=$0' \u4fc2\u5187\u4f5c\u7528\u5605\u3002 \u7528\u7dca: '$1'\u3002 \u5e6b\u52a9: \u4f60\u53ef\u4ee5\u7528\u975e$1 'headingmode' \u6578\u503c\uff0c\u97ff\u591a\u500b\u90e8\u4ef6\u4e2d\u7528 'ordermethod' \u3002\u7b2c\u4e00\u500b\u90e8\u4ef6\u4fc2\u7528\u569f\u505a\u6a19\u984c\u3002\u4f8b\u5982\u97ff\u5206\u985e\u6a19\u984c\u5ea6\u7528 'ordermethod=category,<i>comp</i>' (<i>comp</i>\u4fc2\u53e6\u5916\u4e00\u500b\u90e8\u4ef6) \u3002\",\n-    \"dpl_log_19\": \"\u8b66\u544a: 'debug=$0' \u5514\u4fc2\u7b2c\u4e00\u500b\u97ffDPL\u5143\u7d20\u5605\u7b2c\u4e00\u4f4d\u3002\u65b0\u5605\u9664\u932f\u8a2d\u5b9a\u97ff\u6240\u6709\u53c3\u6578\u90fd\u80fd\u5920\u8655\u7406\u540c\u6aa2\u67e5\u4e4b\u524d\u90fd\u5514\u6703\u61c9\u7528\u3002\",\n-    \"dpl_log_21\": \"\u67e5\u8a3d: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u97ff\u5462\u500b\u6a19\u984c\u5ea6\u6709$1\u7bc7\u6587\u3002\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/zh-hans.json",
          "status": "removed",
          "additions": 0,
          "deletions": 32,
          "patch": "@@ -1,32 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Shinjiman\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u8f93\u51fa\u4e00\u4e2a\u70b9\u5217\u6700\u8fd1\u5728\u5206\u7c7b\u4e2d\u7684\u9879\u76ee\uff0c\u6216\u8005\u7cfb\u6570\u4e2a\u5206\u7c7b\u7684\u4e00\u4e2a\u8054\u7cfb\",\n-    \"intersection_toomanycats\": \"DynamicPageList: \u592a\u591a\u5206\u7c7b!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u592a\u5c11\u5206\u7c7b!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u6ca1\u6709\u7ed3\u679c!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: \u60a8\u9700\u8981\u53bb\u5305\u542b\u6700\u5c11\u4e00\u4e2a\u5206\u7c7b\uff0c\u6216\u8005\u6307\u5b9a\u4e00\u4e2a\u7a7a\u95f4\u540d!\",\n-    \"dpl-desc\": \"\u4e00\u4e2a\u7ed9MediaWiki\u7684\u9ad8\u5f39\u6027\u62a5\u544a\u4ea7\u751f\u5668\",\n-    \"dpl_log_1\": \"\u9519\u8bef: \u9519\u8bef\u7684 '$0' \u53c2\u6570: '$1'! \u5e2e\u52a9:  <code>$0= <i>\u7a7a\u767d\u5b57\u7b26\u4e32</i> (\u4e3b)$3</code>\u3002\",\n-    \"dpl_log_3\": \"\u9519\u8bef: \u8fc7\u591a\u5206\u7c7b! \u6700\u5927\u503c: $0\u3002 \u5e2e\u52a9: \u589e\u52a0 <code>DynamicPageListHooks::$maxCategoryCount</code> \u7684\u503c\u53bb\u6307\u5b9a\u66f4\u591a\u7684\u5206\u7c7b\u6216\u8bbe\u5b9a <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u4ee5\u89e3\u9664\u9650\u5236\u3002 (\u5f53\u52a0\u4e0a <code>DynamicPageList.php</code>\u540e\uff0c\u5728<code>LocalSettings.php</code>\u4e2d\u8bbe\u5b9a\u53d8\u91cf\u3002)\",\n-    \"dpl_log_4\": \"\u9519\u8bef: \u8fc7\u5c11\u5206\u7c7b! \u6700\u5c0f\u503c: $0\u3002 \u5e2e\u52a9: \u51cf\u5c11 <code>DynamicPageListHooks::$minCategoryCount</code> \u7684\u503c\u53bb\u6307\u5b9a\u66f4\u5c11\u7684\u5206\u7c7b\u3002 (\u5f53\u52a0\u4e0a <code>DynamicPageList.php</code>\u540e\uff0c\u5728<code>LocalSettings.php</code>\u4e2d\u8bbe\u5b9a\u4e00\u4e2a\u5408\u9002\u7684\u53d8\u91cf\u3002)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u9519\u8bef: \u5982\u679c\u60a8\u60f3\u7528 'addfirstcategorydate=true' \u6216 'ordermethod=categoryadd' \uff0c\u60a8\u9700\u8981\u5305\u542b\u6700\u5c11\u4e00\u4e2a\u5206\u7c7b!\",\n-    \"dpl_log_7\": \"\u9519\u8bef: \u5982\u679c\u60a8\u5305\u542b\u591a\u4e00\u4e2a\u5206\u7c7b\uff0c\u60a8\u4e0d\u53ef\u4ee5\u7528 'addfirstcategorydate=true' \u6216 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u9519\u8bef: \u60a8\u4e0d\u53ef\u4ee5\u5728\u4e00\u4e2a\u65f6\u95f4\u91cc\u52a0\u5165\u591a\u4e8e\u4e00\u79cd\u7684\u65e5\u671f!\",\n-    \"dpl_log_9\": \"\u9519\u8bef: \u4f60\u53ea\u53ef\u4ee5\u7528 'ordermethod=[...,]$1' \u5728 '$0' \u4e0a!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u8b66\u544a: \u4e0d\u660e\u7684\u53c2\u6570 '$1' \u88ab\u5ffd\u7565\u3002 \u5e2e\u52a9: \u53ef\u7528\u7684\u53c2\u6570: <code>$2</code>\u3002\",\n-    \"dpl_log_14\": \"\u8b66\u544a: \u9519\u8bef\u7684 '$0' \u53c2\u6570: '$1'! \u6b63\u5728\u4f7f\u7528\u9ed8\u8ba4\u503c: '$2'\u3002 \u5e2e\u52a9: <code>$0= $3</code>\u3002\",\n-    \"dpl_log_15\": \"\u8b66\u544a: \u9519\u8bef\u7684 '$0' \u53c2\u6570: '$1'! \u6b63\u5728\u4f7f\u7528\u9ed8\u8ba4\u503c: '$2' (\u6ca1\u6709\u4e0a\u9650)\u3002 \u5e2e\u52a9: <code>$0= <i>\u7a7a\u767d\u5b57\u7b26\u4e32</i> (\u6ca1\u6709\u4e0a\u9650) | n</code>, <code>n</code>\u662f\u4e00\u4e2a\u6b63\u6574\u6570\u3002\",\n-    \"dpl_log_16\": \"\u8b66\u544a: \u65e0\u7ed3\u679c!\",\n-    \"dpl_log_17\": \"\u8b66\u544a: \u52a0\u5165* \u53c2\u6570 ('adduser', 'addeditdate', \u7b49)' \u662f\u5bf9 'mode=category' \u6ca1\u6709\u4f5c\u7528\u3002\u53ea\u6709\u9875\u9762\u7a7a\u95f4\u540d\uff0f\u6807\u9898\u624d\u53ef\u4ee5\u5728\u8fd9\u4e2a\u6a21\u5f0f\u5ea6\u770b\u5230\u3002\",\n-    \"dpl_log_18\": \"\u8b66\u544a: \u5728\u5355\u4e00\u90e8\u4ef6\u4e2d\uff0c 'ordermethod' \u7528 'headingmode=$0' \u662f\u6ca1\u6709\u4f5c\u7528\u7684\u3002 \u6b63\u5728\u4f7f\u7528: '$1'\u3002 \u5e2e\u52a9: \u4f60\u53ef\u4ee5\u7528\u975e$1 'headingmode' \u6570\u503c\uff0c\u5728\u591a\u4e2a\u90e8\u4ef6\u4e2d\u7528 'ordermethod' \u3002\u7b2c\u4e00\u4e2a\u90e8\u662f\u7528\u6765\u4f5c\u6807\u9898\u3002\u4f8b\u5982\u5728\u5206\u7c7b\u6807\u9898\u4e2d\u7528 'ordermethod=category,<i>comp</i>' (<i>comp</i>\u662f\u53e6\u5916\u4e00\u4e2a\u90e8\u4ef6) \u3002\",\n-    \"dpl_log_19\": \"\u8b66\u544a: 'debug=$0' \u4e0d\u662f\u7b2c\u4e00\u4e2a\u5728DPL\u5143\u7d20\u5605\u7b2c\u4e00\u4f4d\u7f6e\u3002\u65b0\u7684\u9664\u9519\u8bbe\u5b9a\u5728\u6240\u6709\u53c2\u6570\u90fd\u80fd\u5904\u7406\u548c\u68c0\u67e5\u524d\u90fd\u4e0d\u4f1a\u5e94\u7528\u3002\",\n-    \"dpl_log_21\": \"\u67e5\u8a3d: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u5728\u8fd9\u4e2a\u6807\u9898\u4e2d\u6709$1\u7bc7\u6761\u76ee\u3002\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "i18n/zh-hant.json",
          "status": "removed",
          "additions": 0,
          "deletions": 32,
          "patch": "@@ -1,32 +0,0 @@\n-{\n-    \"@metadata\": {\n-        \"authors\": [\n-            \"Shinjiman\"\n-        ]\n-    },\n-    \"intersection-desc\": \"\u8f38\u51fa\u4e00\u500b\u9ede\u5217\u6700\u8fd1\u5728\u5206\u985e\u4e2d\u7684\u9805\u76ee\uff0c\u6216\u8005\u4fc2\u6578\u500b\u5206\u985e\u7684\u4e00\u500b\u806f\u7e6b\",\n-    \"intersection_toomanycats\": \"DynamicPageList: \u592a\u591a\u5206\u985e!\",\n-    \"intersection_toofewcats\": \"DynamicPageList: \u592a\u5c11\u5206\u985e!\",\n-    \"intersection_noresults\": \"DynamicPageList: \u6c92\u6709\u7d50\u679c!\",\n-    \"intersection_noincludecats\": \"DynamicPageList: \u60a8\u9700\u8981\u53bb\u5305\u542b\u6700\u5c11\u4e00\u500b\u5206\u985e\uff0c\u6216\u8005\u6307\u5b9a\u4e00\u500b\u7a7a\u9593\u540d!\",\n-    \"dpl-desc\": \"\u4e00\u500b\u7d66MediaWiki\u7684\u9ad8\u5f48\u6027\u5831\u544a\u7522\u751f\u5668\",\n-    \"dpl_log_1\": \"\u932f\u8aa4: \u932f\u8aa4\u7684 '$0' \u53c3\u6578: '$1'! \u8aaa\u660e:  <code>$0= <i>\u7a7a\u767d\u5b57\u4e32</i> (\u4e3b)$3</code>\u3002\",\n-    \"dpl_log_3\": \"\u932f\u8aa4: \u904e\u591a\u5206\u985e! \u6700\u5927\u503c: $0\u3002 \u8aaa\u660e: \u589e\u52a0 <code>DynamicPageListHooks::$maxCategoryCount</code> \u7684\u503c\u53bb\u6307\u5b9a\u66f4\u591a\u7684\u5206\u985e\u6216\u8a2d\u5b9a <code>DynamicPageListHooks::$allowUnlimitedCategories=true</code> \u4ee5\u89e3\u9664\u9650\u5236\u3002 (\u7576\u52a0\u4e0a <code>DynamicPageList.php</code>\u5f8c\uff0c\u5728<code>LocalSettings.php</code>\u4e2d\u8a2d\u5b9a\u8b8a\u6578\u3002)\",\n-    \"dpl_log_4\": \"\u932f\u8aa4: \u904e\u5c11\u5206\u985e! \u6700\u5c0f\u503c: $0\u3002 \u8aaa\u660e: \u6e1b\u5c11 <code>DynamicPageListHooks::$minCategoryCount</code> \u7684\u503c\u53bb\u6307\u5b9a\u66f4\u5c11\u7684\u5206\u985e\u3002 (\u7576\u52a0\u4e0a <code>DynamicPageList.php</code>\u5f8c\uff0c\u5728<code>LocalSettings.php</code>\u4e2d\u8a2d\u5b9a\u4e00\u500b\u5408\u9069\u7684\u8b8a\u6578\u3002)\",\n-    \"dpl_log_5\": \"ERROR: No selection criteria found! You must use at least one of the following parameters: category, namespace, titlematch, linksto, uses, createdby, modifiedby, lastmodifiedby, or their 'not' variants\",\n-    \"dpl_log_6\": \"\u932f\u8aa4: \u5982\u679c\u60a8\u60f3\u7528 'addfirstcategorydate=true' \u6216 'ordermethod=categoryadd' \uff0c\u60a8\u9700\u8981\u5305\u542b\u6700\u5c11\u4e00\u500b\u5206\u985e!\",\n-    \"dpl_log_7\": \"\u932f\u8aa4: \u5982\u679c\u60a8\u5305\u542b\u591a\u4e00\u500b\u5206\u985e\uff0c\u60a8\u4e0d\u53ef\u4ee5\u7528 'addfirstcategorydate=true' \u6216 'ordermethod=categoryadd'!\",\n-    \"dpl_log_8\": \"\u932f\u8aa4: \u60a8\u4e0d\u53ef\u4ee5\u5728\u4e00\u500b\u6642\u9593\u88e1\u52a0\u5165\u591a\u65bc\u4e00\u7a2e\u7684\u65e5\u671f!\",\n-    \"dpl_log_9\": \"\u932f\u8aa4: \u4f60\u53ea\u53ef\u4ee5\u7528 'ordermethod=[...,]$1' \u5728 '$0' \u4e0a!\",\n-    \"dpl_log_10\": \"ERROR: the index for the dominant section must be between 1 and the number of arguments of includepage ($0 in this case)\",\n-    \"dpl_log_12\": \"ERROR: specifying \\\"openreferences\\\" is incompatible with some other option you specified. See the manual for details.\",\n-    \"dpl_log_13\": \"\u8b66\u544a: \u4e0d\u660e\u7684\u53c3\u6578 '$1' \u88ab\u5ffd\u7565\u3002 \u8aaa\u660e: \u53ef\u7528\u7684\u53c3\u6578: <code>$2</code>\u3002\",\n-    \"dpl_log_14\": \"\u8b66\u544a: \u932f\u8aa4\u7684 '$0' \u53c3\u6578: '$1'! \u6b63\u5728\u4f7f\u7528\u9810\u8a2d\u503c: '$2'\u3002 \u8aaa\u660e: <code>$0= $3</code>\u3002\",\n-    \"dpl_log_15\": \"\u8b66\u544a: \u932f\u8aa4\u7684 '$0' \u53c3\u6578: '$1'! \u6b63\u5728\u4f7f\u7528\u9810\u8a2d\u503c: '$2' (\u6c92\u6709\u4e0a\u9650)\u3002 \u8aaa\u660e: <code>$0= <i>\u7a7a\u767d\u5b57\u4e32</i> (\u6c92\u6709\u4e0a\u9650) | n</code>, <code>n</code>\u662f\u4e00\u500b\u6b63\u6574\u6578\u3002\",\n-    \"dpl_log_16\": \"\u8b66\u544a: \u7121\u7d50\u679c!\",\n-    \"dpl_log_17\": \"\u8b66\u544a: \u52a0\u5165* \u53c3\u6578 ('adduser', 'addeditdate', \u7b49)' \u662f\u5c0d 'mode=category' \u6c92\u6709\u4f5c\u7528\u3002\u53ea\u6709\u9801\u9762\u7a7a\u9593\u540d\uff0f\u6a19\u984c\u624d\u53ef\u4ee5\u5728\u9019\u500b\u6a21\u5f0f\u5ea6\u770b\u5230\u3002\",\n-    \"dpl_log_18\": \"\u8b66\u544a: \u5728\u55ae\u4e00\u90e8\u4ef6\u4e2d\uff0c 'ordermethod' \u7528 'headingmode=$0' \u662f\u6c92\u6709\u4f5c\u7528\u7684\u3002 \u6b63\u5728\u4f7f\u7528: '$1'\u3002 \u8aaa\u660e: \u4f60\u53ef\u4ee5\u7528\u975e$1 'headingmode' \u6578\u503c\uff0c\u5728\u591a\u500b\u90e8\u4ef6\u4e2d\u7528 'ordermethod' \u3002\u7b2c\u4e00\u500b\u90e8\u662f\u7528\u4f86\u4f5c\u6a19\u984c\u3002\u4f8b\u5982\u5728\u5206\u985e\u6a19\u984c\u4e2d\u7528 'ordermethod=category,<i>comp</i>' (<i>comp</i>\u662f\u53e6\u5916\u4e00\u500b\u90e8\u4ef6) \u3002\",\n-    \"dpl_log_19\": \"\u8b66\u544a: 'debug=$0' \u4e0d\u662f\u7b2c\u4e00\u500b\u5728DPL\u5143\u7d20\u5605\u7b2c\u4e00\u4f4d\u7f6e\u3002\u65b0\u7684\u9664\u932f\u8a2d\u5b9a\u5728\u6240\u6709\u53c3\u6578\u90fd\u80fd\u8655\u7406\u548c\u6aa2\u67e5\u524d\u90fd\u4e0d\u6703\u61c9\u7528\u3002\",\n-    \"dpl_log_21\": \"\u67e5\u8a3d: <code>$0</code>\",\n-    \"dpl_articlecount\": \"\u5728\u9019\u500b\u6a19\u984c\u4e2d\u6709$1\u7bc7\u689d\u76ee\u3002\"\n-}\n\\ No newline at end of file"
        },
        {
          "filename": "includes/Article.php",
          "status": "modified",
          "additions": 66,
          "deletions": 80,
          "patch": "@@ -1,31 +1,22 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Article Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith, Universal Omega\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL;\n \n use MediaWiki\\MediaWikiServices;\n-use User;\n+use Title;\n \n class Article {\n \t/**\n \t * Title\n \t *\n-\t * @var object\n+\t * @var Title\n \t */\n-\tpublic $mTitle = null;\n+\tpublic $mTitle;\n \n \t/**\n \t * Namespace ID\n \t *\n-\t * @var string\n+\t * @var int\n \t */\n \tpublic $mNamespace = -1;\n \n@@ -46,7 +37,7 @@ class Article {\n \t/**\n \t * Selected namespace ID of initial page.\n \t *\n-\t * @var string\n+\t * @var int\n \t */\n \tpublic $mSelNamespace = -1;\n \n@@ -116,7 +107,7 @@ class Article {\n \t/**\n \t * Timestamp depending on the user's request (can be first/last edit, page_touched, ...)\n \t *\n-\t * @var string\n+\t * @var string|int\n \t */\n \tpublic $mDate = null;\n \n@@ -184,96 +175,94 @@ class Article {\n \tprivate static $headings = [];\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTitle\n-\t * @param\tinteger\tNamespace\n-\t * @return\tvoid\n+\t * @param Title $title\n+\t * @param int $namespace\n \t */\n-\tpublic function __construct( $title, $namespace ) {\n-\t\t$this->mTitle     = $title;\n+\tpublic function __construct( Title $title, $namespace ) {\n+\t\t$this->mTitle = $title;\n \t\t$this->mNamespace = $namespace;\n \t}\n \n \t/**\n \t * Initialize a new instance from a database row.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tDatabase Row\n-\t * @param\tobject\t\\DPL\\Parameters Object\n-\t * @param\tobject\tMediawiki Title Object\n-\t * @param\tinteger\tPage Namespace ID\n-\t * @param\tstring\tPage Title as Selected from Query\n-\t * @return\tobject\t\\DPL\\Article Object\n+\t * @param array\t$row\n+\t * @param Parameters $parameters\n+\t * @param Title\t$title\n+\t * @param int $pageNamespace\n+\t * @param string $pageTitle\n+\t * @return Article\n \t */\n-\tpublic static function newFromRow( $row, Parameters $parameters, \\Title $title, $pageNamespace, $pageTitle ) {\n+\tpublic static function newFromRow( $row, Parameters $parameters, Title $title, $pageNamespace, $pageTitle ) {\n \t\tglobal $wgLang;\n \n-\t\t$article = new Article( $title, $pageNamespace );\n+\t\t$contentLanguage = MediaWikiServices::getInstance()->getContentLanguage();\n \n-\t\t$revActorName = null;\n-\t\tif ( isset( $row['revactor_actor'] ) ) {\n-\t\t\t$revActorName = User::newFromActorId( $row['revactor_actor'] )->getName();\n-\t\t}\n+\t\t$article = new Article( $title, $pageNamespace );\n \n \t\t$titleText = $title->getText();\n \t\tif ( $parameters->getParameter( 'shownamespace' ) === true ) {\n \t\t\t$titleText = $title->getPrefixedText();\n \t\t}\n+\n \t\t$replaceInTitle = $parameters->getParameter( 'replaceintitle' );\n \t\tif ( is_array( $replaceInTitle ) && count( $replaceInTitle ) === 2 ) {\n \t\t\t$titleText = preg_replace( $replaceInTitle[0], $replaceInTitle[1], $titleText );\n \t\t}\n \n-\t\t//Chop off title if longer than the 'titlemaxlen' parameter.\n+\t\t// Chop off title if longer than the 'titlemaxlen' parameter.\n \t\tif ( $parameters->getParameter( 'titlemaxlen' ) !== null && strlen( $titleText ) > $parameters->getParameter( 'titlemaxlen' ) ) {\n \t\t\t$titleText = substr( $titleText, 0, $parameters->getParameter( 'titlemaxlen' ) ) . '...';\n \t\t}\n+\n \t\tif ( $parameters->getParameter( 'showcurid' ) === true && isset( $row['page_id'] ) ) {\n \t\t\t$articleLink = '[' . $title->getLinkURL( [ 'curid' => $row['page_id'] ] ) . ' ' . htmlspecialchars( $titleText ) . ']';\n \t\t} else {\n \t\t\t$articleLink = '[[' . ( $parameters->getParameter( 'escapelinks' ) && ( $pageNamespace == NS_CATEGORY || $pageNamespace == NS_FILE ) ? ':' : '' ) . $title->getFullText() . '|' . htmlspecialchars( $titleText ) . ']]';\n \t\t}\n \n \t\t$article->mLink = $articleLink;\n-\t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n \n-\t\t//get first char used for category-style output\n+\t\t$languageConverter = MediaWikiServices::getInstance()\n+\t\t\t->getLanguageConverterFactory()\n+\t\t\t->getLanguageConverter();\n+\n+\t\t// get first char used for category-style output\n \t\tif ( isset( $row['sortkey'] ) ) {\n-\t\t\t$article->mStartChar = $contLang->convert( $contLang->firstChar( $row['sortkey'] ) );\n+\t\t\t$article->mStartChar = $languageConverter->convert( $contentLanguage->firstChar( $row['sortkey'] ) );\n \t\t} else {\n-\t\t\t$article->mStartChar = $contLang->convert( $contLang->firstChar( $pageTitle ) );\n+\t\t\t$article->mStartChar = $languageConverter->convert( $contentLanguage->firstChar( $pageTitle ) );\n \t\t}\n \n \t\t$article->mID = intval( $row['page_id'] );\n \n-\t\t//External link\n+\t\t// External link\n \t\tif ( isset( $row['el_to'] ) ) {\n \t\t\t$article->mExternalLink = $row['el_to'];\n \t\t}\n \n-\t\t//SHOW PAGE_COUNTER\n+\t\t// SHOW PAGE_COUNTER\n \t\tif ( isset( $row['page_counter'] ) ) {\n \t\t\t$article->mCounter = intval( $row['page_counter'] );\n \t\t}\n \n-\t\t//SHOW PAGE_SIZE\n+\t\t// SHOW PAGE_SIZE\n \t\tif ( isset( $row['page_len'] ) ) {\n \t\t\t$article->mSize = intval( $row['page_len'] );\n \t\t}\n-\t\t//STORE initially selected PAGE\n+\n+\t\t// STORE initially selected PAGE\n \t\tif ( is_array( $parameters->getParameter( 'linksto' ) ) && ( count( $parameters->getParameter( 'linksto' ) ) || count( $parameters->getParameter( 'linksfrom' ) ) ) ) {\n \t\t\tif ( !isset( $row['sel_title'] ) ) {\n-\t\t\t\t$article->mSelTitle     = 'unknown page';\n+\t\t\t\t$article->mSelTitle = 'unknown page';\n \t\t\t\t$article->mSelNamespace = 0;\n \t\t\t} else {\n-\t\t\t\t$article->mSelTitle     = $row['sel_title'];\n+\t\t\t\t$article->mSelTitle = $row['sel_title'];\n \t\t\t\t$article->mSelNamespace = $row['sel_ns'];\n \t\t\t}\n \t\t}\n \n-\t\t//STORE selected image\n+\t\t// STORE selected image\n \t\tif ( is_array( $parameters->getParameter( 'imageused' ) ) && count( $parameters->getParameter( 'imageused' ) ) > 0 ) {\n \t\t\tif ( !isset( $row['image_sel_title'] ) ) {\n \t\t\t\t$article->mImageSelTitle = 'unknown image';\n@@ -283,76 +272,76 @@ public static function newFromRow( $row, Parameters $parameters, \\Title $title,\n \t\t}\n \n \t\tif ( $parameters->getParameter( 'goal' ) != 'categories' ) {\n-\t\t\t//REVISION SPECIFIED\n+\t\t\t// REVISION SPECIFIED\n \t\t\tif ( $parameters->getParameter( 'lastrevisionbefore' ) || $parameters->getParameter( 'allrevisionsbefore' ) || $parameters->getParameter( 'firstrevisionsince' ) || $parameters->getParameter( 'allrevisionssince' ) ) {\n-\t\t\t\t$article->mRevision = $row['revactor_rev'];\n-\t\t\t\t$article->mUser     = $revActorName;\n-\t\t\t\t$article->mDate     = $row['revactor_timestamp'];\n+\t\t\t\t$article->mRevision = $row['rev_id'];\n+\t\t\t\t$article->mUser = $row['rev_user_text'];\n+\t\t\t\t$article->mDate = $row['rev_timestamp'];\n+\t\t\t\t$article->mComment = $row['rev_comment'];\n \t\t\t}\n \n-\t\t\t//SHOW \"PAGE_TOUCHED\" DATE, \"FIRSTCATEGORYDATE\" OR (FIRST/LAST) EDIT DATE\n+\t\t\t// SHOW \"PAGE_TOUCHED\" DATE, \"FIRSTCATEGORYDATE\" OR (FIRST/LAST) EDIT DATE\n \t\t\tif ( $parameters->getParameter( 'addpagetoucheddate' ) ) {\n \t\t\t\t$article->mDate = $row['page_touched'];\n \t\t\t} elseif ( $parameters->getParameter( 'addfirstcategorydate' ) ) {\n \t\t\t\t$article->mDate = $row['cl_timestamp'];\n-\t\t\t} elseif ( $parameters->getParameter( 'addeditdate' ) && isset( $row['revactor_timestamp'] ) ) {\n-\t\t\t\t$article->mDate = $row['revactor_timestamp'];\n+\t\t\t} elseif ( $parameters->getParameter( 'addeditdate' ) && isset( $row['rev_timestamp'] ) ) {\n+\t\t\t\t$article->mDate = $row['rev_timestamp'];\n \t\t\t} elseif ( $parameters->getParameter( 'addeditdate' ) && isset( $row['page_touched'] ) ) {\n \t\t\t\t$article->mDate = $row['page_touched'];\n \t\t\t}\n \n-\t\t\t//Time zone adjustment\n+\t\t\t// Time zone adjustment\n \t\t\tif ( $article->mDate ) {\n \t\t\t\t$article->mDate = $wgLang->userAdjust( $article->mDate );\n \t\t\t}\n \n \t\t\tif ( $article->mDate && $parameters->getParameter( 'userdateformat' ) ) {\n-\t\t\t\t//Apply the userdateformat\n-\t\t\t\t$article->myDate = gmdate( $parameters->getParameter( 'userdateformat' ), wfTimeStamp( TS_UNIX, $article->mDate ) );\n+\t\t\t\t// Apply the userdateformat\n+\t\t\t\t$article->myDate = gmdate( $parameters->getParameter( 'userdateformat' ), (int)wfTimestamp( TS_UNIX, $article->mDate ) );\n \t\t\t}\n+\n \t\t\t// CONTRIBUTION, CONTRIBUTOR\n \t\t\tif ( $parameters->getParameter( 'addcontribution' ) ) {\n \t\t\t\t$article->mContribution = $row['contribution'];\n-\t\t\t\t$article->mContributor  = User::newFromActorId( $row['contributor'] )->getName();\n-\t\t\t\t$article->mContrib      = substr( '*****************', 0, (int)round( log( $row['contribution'] ) ) );\n+\t\t\t\t$article->mContributor = $row['contributor'];\n+\t\t\t\t$article->mContrib = substr( '*****************', 0, (int)round( log( $row['contribution'] ) ) );\n \t\t\t}\n \n-\t\t\t//USER/AUTHOR(S)\n+\t\t\t// USER/AUTHOR(S)\n \t\t\t// because we are going to do a recursive parse at the end of the output phase\n \t\t\t// we have to generate wiki syntax for linking to a user\u00b4s homepage\n \t\t\tif ( $parameters->getParameter( 'adduser' ) || $parameters->getParameter( 'addauthor' ) || $parameters->getParameter( 'addlasteditor' ) ) {\n-\t\t\t\t$article->mUserLink = '[[User:' . $revActorName . '|' . $revActorName . ']]';\n-\t\t\t\t$article->mUser     = $revActorName;\n+\t\t\t\t$article->mUserLink = '[[User:' . $row['rev_user_text'] . '|' . $row['rev_user_text'] . ']]';\n+\t\t\t\t$article->mUser = $row['rev_user_text'];\n \t\t\t}\n \n-\t\t\t//CATEGORY LINKS FROM CURRENT PAGE\n+\t\t\t// CATEGORY LINKS FROM CURRENT PAGE\n \t\t\tif ( $parameters->getParameter( 'addcategories' ) && ( $row['cats'] ) ) {\n \t\t\t\t$artCatNames = explode( ' | ', $row['cats'] );\n \t\t\t\tforeach ( $artCatNames as $artCatName ) {\n \t\t\t\t\t$article->mCategoryLinks[] = '[[:Category:' . $artCatName . '|' . str_replace( '_', ' ', $artCatName ) . ']]';\n \t\t\t\t\t$article->mCategoryTexts[] = str_replace( '_', ' ', $artCatName );\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t// PARENT HEADING (category of the page, editor (user) of the page, etc. Depends on ordermethod param)\n \t\t\tif ( $parameters->getParameter( 'headingmode' ) != 'none' ) {\n \t\t\t\tswitch ( $parameters->getParameter( 'ordermethod' )[0] ) {\n \t\t\t\t\tcase 'category':\n-\t\t\t\t\t\t//Count one more page in this heading\n+\t\t\t\t\t\t// Count one more page in this heading\n \t\t\t\t\t\tself::$headings[$row['cl_to']] = ( isset( self::$headings[$row['cl_to']] ) ? self::$headings[$row['cl_to']] + 1 : 1 );\n \t\t\t\t\t\tif ( $row['cl_to'] == '' ) {\n-\t\t\t\t\t\t\t//uncategorized page (used if ordermethod=category,...)\n+\t\t\t\t\t\t\t// uncategorized page (used if ordermethod=category,...)\n \t\t\t\t\t\t\t$article->mParentHLink = '[[:Special:Uncategorizedpages|' . wfMessage( 'uncategorizedpages' ) . ']]';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$article->mParentHLink = '[[:Category:' . $row['cl_to'] . '|' . str_replace( '_', ' ', $row['cl_to'] ) . ']]';\n \t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase 'user':\n-\t\t\t\t\t\tself::$headings[$revActorName] = ( isset( self::$headings[$revActorName] ) ? self::$headings[$revActorName] + 1 : 1 );\n-\t\t\t\t\t\tif ( $row['revactor_actor'] == 0 ) { //anonymous user\n-\t\t\t\t\t\t\t$article->mParentHLink = '[[User:' . $revActorName . '|' . $revActorName . ']]';\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t$article->mParentHLink = '[[User:' . $revActorName . '|' . $revActorName . ']]';\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\tself::$headings[$row['rev_user_text']] = ( isset( self::$headings[$row['rev_user_text']] ) ? self::$headings[$row['rev_user_text']] + 1 : 1 );\n+\n+\t\t\t\t\t\t$article->mParentHLink = '[[User:' . $row['rev_user_text'] . '|' . $row['rev_user_text'] . ']]';\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t}\n@@ -364,8 +353,7 @@ public static function newFromRow( $row, Parameters $parameters, \\Title $title,\n \t/**\n \t * Returns all heading information processed from all newly instantiated article objects.\n \t *\n-\t * @access\tpublic\n-\t * @return\tarray\tHeadings\n+\t * @return array\n \t */\n \tpublic static function getHeadings() {\n \t\treturn self::$headings;\n@@ -375,9 +363,6 @@ public static function getHeadings() {\n \t * Reset the headings to their initial state.\n \t * Ideally this Article class should not exist and be handled by the built in MediaWiki class.\n \t * Bug: https://jira/browse/HYD-913\n-\t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n \t */\n \tpublic static function resetHeadings() {\n \t\tself::$headings = [];\n@@ -386,16 +371,17 @@ public static function resetHeadings() {\n \t/**\n \t * Get the formatted date for this article if available.\n \t *\n-\t * @access\tpublic\n-\t * @return\tmixed\tFormatted string or null for none set.\n+\t * @return mixed Formatted string or null for none set.\n \t */\n \tpublic function getDate() {\n \t\tglobal $wgLang;\n+\n \t\tif ( $this->myDate !== null ) {\n \t\t\treturn $this->myDate;\n \t\t} elseif ( $this->mDate !== null ) {\n-\t\t\treturn $wgLang->timeanddate( $article->mDate, true );\n+\t\t\treturn $wgLang->timeanddate( $this->mDate, true );\n \t\t}\n+\n \t\treturn null;\n \t}\n }"
        },
        {
          "filename": "includes/Config.php",
          "status": "modified",
          "additions": 12,
          "deletions": 23,
          "patch": "@@ -1,15 +1,9 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Config Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n+use MWException;\n+\n class Config {\n \t/**\n \t * Configuration Settings\n@@ -21,15 +15,13 @@ class Config {\n \t/**\n \t * Initialize the static object with settings.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tSettings to initialize for DPL.\n-\t * @return\tvoid\n+\t * @param array|false $settings\n \t */\n \tpublic static function init( $settings = false ) {\n \t\tif ( $settings === false ) {\n \t\t\tglobal $wgDplSettings;\n \n-\t\t\t$settings = $wgDplSettings;\n+\t\t\t$settings = $wgDplSettings ?? false;\n \t\t}\n \n \t\tif ( !is_array( $settings ) ) {\n@@ -42,19 +34,17 @@ public static function init( $settings = false ) {\n \t/**\n \t * Return a single setting.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tSetting Key\n-\t * @return\tmixed\tThe setting's actual setting or null if it does not exist.\n+\t * @param string $setting\n+\t * @return mixed|null\n \t */\n \tpublic static function getSetting( $setting ) {\n-\t\treturn ( array_key_exists( $setting, self::$settings ) ? self::$settings[$setting] : null );\n+\t\treturn ( self::$settings[$setting] ?? null );\n \t}\n \n \t/**\n \t * Return a all settings.\n \t *\n-\t * @access\tpublic\n-\t * @return\tarray\tAll settings\n+\t * @return array\n \t */\n \tpublic static function getAllSettings() {\n \t\treturn self::$settings;\n@@ -63,15 +53,14 @@ public static function getAllSettings() {\n \t/**\n \t * Set a single setting.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tSetting Key\n-\t * @param\tmixed\t[Optional] Appropriate value for the setting key.\n-\t * @return\tvoid\n+\t * @param string $setting\n+\t * @param mixed|null $value\n \t */\n \tpublic static function setSetting( $setting, $value = null ) {\n \t\tif ( empty( $setting ) || !is_string( $setting ) ) {\n \t\t\tthrow new MWException( __METHOD__ . \": Setting keys can not be blank.\" );\n \t\t}\n+\n \t\tself::$settings[$setting] = $value;\n \t}\n }"
        },
        {
          "filename": "includes/DynamicPageListHooks.php",
          "status": "renamed",
          "additions": 158,
          "deletions": 169,
          "patch": "@@ -1,130 +1,96 @@\n <?php\n-/**\n- *\n- * @file\n- * @ingroup Extensions\n- * @link http://www.mediawiki.org/wiki/Extension:DynamicPageList3 Documentation\n- * @author n:en:User:IlyaHaykinson\n- * @author n:en:User:Amgine\n- * @author w:de:Benutzer:Unendlich\n- * @author m:User:Dangerman <cyril.dangerville@gmail.com>\n- * @author m:User:Algorithmix <gero.scholz@gmx.de>\n- * @license GPL-2.0-or-later\n- *\n- */\n \n-class DynamicPageListHooks {\n-\t// FATAL\n-\tconst FATAL_WRONGNS = 1001;\t// $1: 'namespace' or 'notnamespace'\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: wrong parameter given by user\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $3: list of possible titles of namespaces (except pseudo-namespaces: Media, Special)\n-\n-\tconst FATAL_WRONGLINKSTO = 1002;\t// $1: linksto'\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: the wrong parameter given by user\n-\n-\tconst FATAL_TOOMANYCATS = 1003;\t// $1: max number of categories that can be included\n+namespace DPL;\n \n-\tconst FATAL_TOOFEWCATS = 1004;\t// $1: min number of categories that have to be included\n+use DatabaseUpdater;\n+use Parser;\n+use PPFrame;\n \n-\tconst FATAL_NOSELECTION = 1005;\n+class DynamicPageListHooks {\n \n-\tconst FATAL_CATDATEBUTNOINCLUDEDCATS = 1006;\n+\tpublic const FATAL_WRONGNS = 1001;\n \n-\tconst FATAL_CATDATEBUTMORETHAN1CAT = 1007;\n+\tpublic const FATAL_WRONGLINKSTO = 1002;\n \n-\tconst FATAL_MORETHAN1TYPEOFDATE = 1008;\n+\tpublic const FATAL_TOOMANYCATS = 1003;\n \n-\tconst FATAL_WRONGORDERMETHOD = 1009;\t// $1: param=val that is possible only with $1 as last 'ordermethod' parameter\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: last 'ordermethod' parameter required for $0\n+\tpublic const FATAL_TOOFEWCATS = 1004;\n \n-\tconst FATAL_DOMINANTSECTIONRANGE = 1010;\t// $1: the number of arguments in includepage\n+\tpublic const FATAL_NOSELECTION = 1005;\n \n-\tconst FATAL_OPENREFERENCES = 1012;\n+\tpublic const FATAL_CATDATEBUTNOINCLUDEDCATS = 1006;\n \n-\tconst FATAL_MISSINGPARAMFUNCTION = 1022;\n+\tpublic const FATAL_CATDATEBUTMORETHAN1CAT = 1007;\n \n-\tconst FATAL_NOTPROTECTED = 1023;\n+\tpublic const FATAL_MORETHAN1TYPEOFDATE = 1008;\n \n-\tconst FATAL_SQLBUILDERROR = 1024;\n+\tpublic const FATAL_WRONGORDERMETHOD = 1009;\n \n-\t// ERROR\n+\tpublic const FATAL_DOMINANTSECTIONRANGE = 1010;\n \n-\t// WARN\n+\tpublic const FATAL_OPENREFERENCES = 1012;\n \n-\tconst WARN_UNKNOWNPARAM = 2013;\t// $1: unknown parameter given by user\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: list of DPL available parameters separated by ', '\n+\tpublic const FATAL_MISSINGPARAMFUNCTION = 1022;\n \n-\tconst WARN_PARAMNOOPTION = 2022;\t// $1: Parameter given by user\n+\tpublic const FATAL_NOTPROTECTED = 1023;\n \n-\tconst WARN_WRONGPARAM = 2014;\t// $3: list of valid param values separated by ' | '\n+\tpublic const FATAL_SQLBUILDERROR = 1024;\n \n-\tconst WARN_WRONGPARAM_INT = 2015;\t// $1: param name\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: wrong param value given by user\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $3: default param value used instead by program\n+\tpublic const WARN_UNKNOWNPARAM = 2013;\n \n-\tconst WARN_NORESULTS = 2016;\n+\tpublic const WARN_PARAMNOOPTION = 2022;\n \n-\tconst WARN_CATOUTPUTBUTWRONGPARAMS = 2017;\n+\tpublic const WARN_WRONGPARAM = 2014;\n \n-\tconst WARN_HEADINGBUTSIMPLEORDERMETHOD = 2018;\t// $1: 'headingmode' value given by user\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $2: value used instead by program (which means no heading)\n+\tpublic const WARN_WRONGPARAM_INT = 2015;\n \n-\tconst WARN_DEBUGPARAMNOTFIRST = 2019;\t// $1: 'log' value\n+\tpublic const WARN_NORESULTS = 2016;\n \n-\tconst WARN_TRANSCLUSIONLOOP = 2020;\t// $1: title of page that creates an infinite transclusion loop\n+\tpublic const WARN_CATOUTPUTBUTWRONGPARAMS = 2017;\n \n-\t// INFO\n+\tpublic const WARN_HEADINGBUTSIMPLEORDERMETHOD = 2018;\n \n-\t// DEBUG\n+\tpublic const WARN_DEBUGPARAMNOTFIRST = 2019;\n \n-\tconst DEBUG_QUERY = 3021;\t// $1: SQL query executed to generate the dynamic page list\n+\tpublic const WARN_TRANSCLUSIONLOOP = 2020;\n \n-\t// TRACE\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Output formatting\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// $1: number of articles\n+\tpublic const DEBUG_QUERY = 3021;\n \n+\t/** @var array */\n \tpublic static $fixedCategories = [];\n \n-\tpublic static $createdLinks; // the links created by DPL are collected here;\n-\t\t\t\t\t\t\t\t // they can be removed during the final ouput\n-\t\t\t\t\t\t\t\t // phase of the MediaWiki parser\n+\t/** @var array */\n+\tpublic static $createdLinks;\n \n-\t/**\n-\t * DPL acting like Extension:Intersection\n-\t *\n-\t * @var bool\n-\t */\n+\t/** @var bool */\n \tprivate static $likeIntersection = false;\n \n-\t/**\n-\t * Debugging Level\n-\t *\n-\t * @var int\n-\t */\n+\t/** @var int */\n \tprivate static $debugLevel = 0;\n \n \t/**\n-\t * Handle special on extension registration bits.\n-\t *\n-\t * @return void\n+\t * @return string\n \t */\n-\tpublic static function onRegistration() {\n-\t\tif ( !defined( 'DPL_VERSION' ) ) {\n-\t\t\tdefine( 'DPL_VERSION', '3.3.5' );\n+\tpublic static function getVersion(): string {\n+\t\tstatic $version = null;\n+\n+\t\tif ( $version === null ) {\n+\t\t\t$version = json_decode( file_get_contents( __DIR__ . '/../extension.json' ) )->version;\n \t\t}\n+\n+\t\treturn $version;\n \t}\n \n \t/**\n \t * Sets up this extension's parser functions.\n \t *\n-\t * @param object Parser object passed as a reference.\n-\t * @return bool\ttrue\n+\t * @param Parser $parser\n \t */\n-\tpublic static function onParserFirstCallInit( Parser &$parser ) {\n+\tpublic static function onParserFirstCallInit( Parser $parser ) {\n \t\tself::init();\n \n-\t\t//DPL offers the same functionality as Intersection.  So we register the <DynamicPageList> tag in case LabeledSection Extension is not installed so that the section markers are removed.\n-\t\tif ( \\DPL\\Config::getSetting( 'handleSectionTag' ) ) {\n+\t\t// DPL offers the same functionality as Intersection. So we register the <DynamicPageList> tag in case LabeledSection Extension is not installed so that the section markers are removed.\n+\t\tif ( Config::getSetting( 'handleSectionTag' ) ) {\n \t\t\t$parser->setHook( 'section', [ __CLASS__, 'dplTag' ] );\n \t\t}\n \n@@ -137,33 +103,25 @@ public static function onParserFirstCallInit( Parser &$parser ) {\n \t\t$parser->setFunctionHook( 'dplreplace', [ __CLASS__, 'dplReplaceParserFunction' ] );\n \t\t$parser->setFunctionHook( 'dplchapter', [ __CLASS__, 'dplChapterParserFunction' ] );\n \t\t$parser->setFunctionHook( 'dplmatrix', [ __CLASS__, 'dplMatrixParserFunction' ] );\n-\n-\t\treturn true;\n \t}\n \n \t/**\n \t * Sets up this extension's parser functions for migration from Intersection.\n \t *\n-\t * @param object Parser object passed as a reference.\n-\t * @returnbool true\n+\t * @param Parser $parser\n \t */\n-\tpublic static function setupMigration( Parser &$parser ) {\n+\tpublic static function setupMigration( Parser $parser ) {\n \t\t$parser->setHook( 'Intersection', [ __CLASS__, 'intersectionTag' ] );\n \t\t$parser->addTrackingCategory( 'dpl-intersection-tracking-category' );\n \n \t\tself::init();\n-\n-\t\treturn true;\n \t}\n \n \t/**\n \t * Common initializer for usage from parser entry points.\n-\t *\n-\t * @private\n-\t * @return void\n \t */\n \tprivate static function init() {\n-\t\t\\DPL\\Config::init();\n+\t\tConfig::init();\n \n \t\tif ( !isset( self::$createdLinks ) ) {\n \t\t\tself::$createdLinks = [\n@@ -180,9 +138,7 @@ private static function init() {\n \t/**\n \t * Set to behave like intersection.\n \t *\n-\t * @private\n-\t * @param bool\tBehave Like Intersection\n-\t * @return void\n+\t * @param bool $mode\n \t */\n \tprivate static function setLikeIntersection( $mode = false ) {\n \t\tself::$likeIntersection = $mode;\n@@ -191,7 +147,7 @@ private static function setLikeIntersection( $mode = false ) {\n \t/**\n \t * Is like intersection?\n \t *\n-\t * @return bool\tBehaving Like Intersection\n+\t * @return bool\n \t */\n \tpublic static function isLikeIntersection() {\n \t\treturn (bool)self::$likeIntersection;\n@@ -200,70 +156,77 @@ public static function isLikeIntersection() {\n \t/**\n \t * Tag <section> entry point.\n \t *\n-\t * @param string Raw User Input\n-\t * @param array Arguments on the tag.\n-\t * @param object Parser object.\n-\t * @param object PPFrame object.\n-\t * @return string HTML\n+\t * @param string $input\n+\t * @param array $args\n+\t * @param Parser $parser\n+\t * @param PPFrame $frame\n+\t * @return string\n \t */\n \tpublic static function intersectionTag( $input, array $args, Parser $parser, PPFrame $frame ) {\n \t\tself::setLikeIntersection( true );\n+\n \t\treturn self::executeTag( $input, $args, $parser, $frame );\n \t}\n \n \t/**\n \t * Tag <dpl> entry point.\n \t *\n-\t * @param string Raw User Input\n-\t * @param array Arguments on the tag.\n-\t * @param object Parser object.\n-\t * @param object PPFrame object.\n-\t * @return string HTML\n+\t * @param string $input\n+\t * @param array $args\n+\t * @param Parser $parser\n+\t * @param PPFrame $frame\n+\t * @return string\n \t */\n \tpublic static function dplTag( $input, array $args, Parser $parser, PPFrame $frame ) {\n \t\tself::setLikeIntersection( false );\n \t\t$parser->addTrackingCategory( 'dpl-tag-tracking-category' );\n+\n \t\treturn self::executeTag( $input, $args, $parser, $frame );\n \t}\n \n \t/**\n \t * The callback function wrapper for converting the input text to HTML output\n \t *\n-\t * @param string Raw User Input\n-\t * @param array Arguments on the tag.(While not used, it is left here for future compatibility.)\n-\t * @param object Parser object.\n-\t * @param object PPFrame object.\n-\t * @return string HTML\n+\t * @param string $input\n+\t * @param array $args\n+\t * @param Parser $parser\n+\t * @param PPFrame $frame\n+\t * @return string\n \t */\n \tprivate static function executeTag( $input, array $args, Parser $parser, PPFrame $frame ) {\n-\t\t// entry point for user tag <dpl>  or  <DynamicPageList>\n+\t\t// entry point for user tag <dpl> or <DynamicPageList>\n \t\t// create list and do a recursive parse of the output\n \n-\t\t$parse = new \\DPL\\Parse();\n-\t\tif ( \\DPL\\Config::getSetting( 'recursiveTagParse' ) ) {\n+\t\t$parse = new Parse();\n+\t\tif ( Config::getSetting( 'recursiveTagParse' ) ) {\n \t\t\t$input = $parser->recursiveTagParse( $input, $frame );\n \t\t}\n \n \t\t$text = $parse->parse( $input, $parser, $reset, $eliminate, true );\n \n-\t\tif ( isset( $reset['templates'] ) && $reset['templates'] ) {\t// we can remove the templates by save/restore\n+\t\tif ( $reset['templates'] ?? false ) { // we can remove the templates by save/restore\n \t\t\t$saveTemplates = $parser->getOutput()->mTemplates;\n \t\t}\n-\t\tif ( isset( $reset['categories'] ) && $reset['categories'] ) {\t// we can remove the categories by save/restore\n+\n+\t\tif ( $reset['categories'] ?? false ) { // we can remove the categories by save/restore\n \t\t\t$saveCategories = $parser->getOutput()->mCategories;\n \t\t}\n-\t\tif ( isset( $reset['images'] ) && $reset['images'] ) {\t// we can remove the images by save/restore\n+\n+\t\tif ( $reset['images'] ?? false ) { // we can remove the images by save/restore\n \t\t\t$saveImages = $parser->getOutput()->mImages;\n \t\t}\n+\n \t\t$parsedDPL = $parser->recursiveTagParse( $text );\n-\t\tif ( isset( $reset['templates'] ) && $reset['templates'] ) {\n-\t\t\t$parser->getOutput()->mTemplates = $saveTemplates;\n+\t\tif ( $reset['templates'] ?? false ) {\n+\t\t\t$parser->getOutput()->mTemplates = $saveTemplates ?? [];\n \t\t}\n-\t\tif ( isset( $reset['categories'] ) && $reset['categories'] ) {\n-\t\t\t$parser->getOutput()->mCategories = $saveCategories;\n+\n+\t\tif ( $reset['categories'] ?? false ) {\n+\t\t\t$parser->getOutput()->mCategories = $saveCategories ?? [];\n \t\t}\n-\t\tif ( isset( $reset['images'] ) && $reset['images'] ) {\n-\t\t\t$parser->getOutput()->mImages = $saveImages;\n+\n+\t\tif ( $reset['images'] ?? false ) {\n+\t\t\t$parser->getOutput()->mImages = $saveImages ?? [];\n \t\t}\n \n \t\treturn $parsedDPL;\n@@ -272,48 +235,54 @@ private static function executeTag( $input, array $args, Parser $parser, PPFrame\n \t/**\n \t * The #dpl parser tag entry point.\n \t *\n-\t * @param object Parser object passed as a reference.\n-\t * @return string Wiki Text\n+\t * @param Parser $parser\n+\t * @return array|string\n \t */\n-\tpublic static function dplParserFunction( &$parser ) {\n+\tpublic static function dplParserFunction( $parser ) {\n \t\tself::setLikeIntersection( false );\n \n \t\t$parser->addTrackingCategory( 'dpl-parserfunc-tracking-category' );\n \n-\t\t// callback for the parser function {{#dpl:\t  or   {{DynamicPageList::\n+\t\t// callback for the parser function {{#dpl: or {{DynamicPageList::\n \t\t$input = \"\";\n \n \t\t$numargs = func_num_args();\n \t\tif ( $numargs < 2 ) {\n \t\t\t$input = \"#dpl: no arguments specified\";\n+\n \t\t\treturn str_replace( '\u00a7', '<', '\u00a7pre>\u00a7nowiki>' . $input . '\u00a7/nowiki>\u00a7/pre>' );\n \t\t}\n \n \t\t// fetch all user-provided arguments (skipping $parser)\n \t\t$arg_list = func_get_args();\n \t\tfor ( $i = 1; $i < $numargs; $i++ ) {\n \t\t\t$p1 = $arg_list[$i];\n+\n \t\t\t$input .= str_replace( \"\\n\", \"\", $p1 ) . \"\\n\";\n \t\t}\n \n-\t\t$parse = new \\DPL\\Parse();\n+\t\t$parse = new Parse();\n \t\t$dplresult = $parse->parse( $input, $parser, $reset, $eliminate, false );\n-\t\treturn [ // parser needs to be coaxed to do further recursive processing\n-\t\t\t$parser->getPreprocessor()->preprocessToObj( $dplresult, Parser::PTD_FOR_INCLUSION ),\n+\n+\t\treturn [\n+\t\t\t// @phan-suppress-next-line PhanPluginMixedKeyNoKey\n+\t\t\t$parser->getPreprocessor()->preprocessToObj( $dplresult, 1 ),\n \t\t\t'isLocalObj' => true,\n \t\t\t'title' => $parser->getTitle()\n \t\t];\n \t}\n \n \t/**\n \t * The #dplnum parser tag entry point.\n-\t * From the old documentation: \"Tries to guess a number that is buried in the text.  Uses a set of heuristic rules which may work or not.  The idea is to extract the number so that it can be used as a sorting value in the column of a DPL table output.\"\n+\t * From the old documentation: \"Tries to guess a number that is buried in the text. Uses a set of heuristic rules which may work or not. The idea is to extract the number so that it can be used as a sorting value in the column of a DPL table output.\"\n \t *\n-\t * @param object Parser object passed as a reference.\n-\t * @return string Wiki Text\n+\t * @param Parser $parser\n+\t * @param string $text\n+\t * @return string\n \t */\n-\tpublic static function dplNumParserFunction( &$parser, $text = '' ) {\n+\tpublic static function dplNumParserFunction( $parser, $text = '' ) {\n \t\t$parser->addTrackingCategory( 'dplnum-parserfunc-tracking-category' );\n+\n \t\t$num = str_replace( '&#160;', ' ', $text );\n \t\t$num = str_replace( '&nbsp;', ' ', $text );\n \t\t$num = preg_replace( '/([0-9])([.])([0-9][0-9]?[^0-9,])/', '\\1,\\3', $num );\n@@ -328,34 +297,41 @@ public static function dplNumParserFunction( &$parser, $text = '' ) {\n \t\t$num = preg_replace( '/[. ]/', '', $num );\n \t\t$num = preg_replace( '/^[^0-9]+/', '', $num );\n \t\t$num = preg_replace( '/[^0-9].*/', '', $num );\n+\n \t\treturn $num;\n \t}\n \n \tpublic static function dplVarParserFunction( &$parser, $cmd ) {\n \t\t$parser->addTrackingCategory( 'dplvar-parserfunc-tracking-category' );\n \t\t$args = func_get_args();\n+\n \t\tif ( $cmd == 'set' ) {\n-\t\t\treturn \\DPL\\Variables::setVar( $args );\n+\t\t\treturn Variables::setVar( $args );\n \t\t} elseif ( $cmd == 'default' ) {\n-\t\t\treturn \\DPL\\Variables::setVarDefault( $args );\n+\t\t\treturn Variables::setVarDefault( $args );\n \t\t}\n-\t\treturn \\DPL\\Variables::getVar( $cmd );\n+\n+\t\treturn Variables::getVar( $cmd );\n \t}\n \n \tprivate static function isRegexp( $needle ) {\n \t\tif ( strlen( $needle ) < 3 ) {\n \t\t\treturn false;\n \t\t}\n+\n \t\tif ( ctype_alnum( $needle[0] ) ) {\n \t\t\treturn false;\n \t\t}\n+\n \t\t$nettoNeedle = preg_replace( '/[ismu]*$/', '', $needle );\n \t\tif ( strlen( $nettoNeedle ) < 2 ) {\n \t\t\treturn false;\n \t\t}\n+\n \t\tif ( $needle[0] == $nettoNeedle[strlen( $nettoNeedle ) - 1] ) {\n \t\t\treturn true;\n \t\t}\n+\n \t\treturn false;\n \t}\n \n@@ -364,48 +340,56 @@ public static function dplReplaceParserFunction( &$parser, $text, $pat = '', $re\n \t\tif ( $text == '' || $pat == '' ) {\n \t\t\treturn '';\n \t\t}\n-\t\t# convert \\n to a real newline character\n+\n+\t\t// convert \\n to a real newline character\n \t\t$repl = str_replace( '\\n', \"\\n\", $repl );\n \n \t\t# replace\n \t\tif ( !self::isRegexp( $pat ) ) {\n \t\t\t$pat = '`' . str_replace( '`', '\\`', $pat ) . '`';\n \t\t}\n \n+\t\t// phpcs:ignore Generic.PHP.NoSilencedErrors.Discouraged\n \t\treturn @preg_replace( $pat, $repl, $text );\n \t}\n \n \tpublic static function dplChapterParserFunction( &$parser, $text = '', $heading = ' ', $maxLength = -1, $page = '?page?', $link = 'default', $trim = false ) {\n \t\t$parser->addTrackingCategory( 'dplchapter-parserfunc-tracking-category' );\n-\t\t$output = \\DPL\\LST::extractHeadingFromText( $parser, $page, '?title?', $text, $heading, '', $sectionHeading, true, $maxLength, $link, $trim );\n+\t\t$output = LST::extractHeadingFromText( $parser, $page, '?title?', $text, $heading, '', $sectionHeading, true, $maxLength, $link, $trim );\n \t\treturn $output[0];\n \t}\n \n \tpublic static function dplMatrixParserFunction( &$parser, $name = '', $yes = '', $no = '', $flip = '', $matrix = '' ) {\n \t\t$parser->addTrackingCategory( 'dplmatrix-parserfunc-tracking-category' );\n-\t\t$lines   = explode( \"\\n\", $matrix );\n-\t\t$m       = [];\n+\t\t$lines = explode( \"\\n\", $matrix );\n+\t\t$m = [];\n \t\t$sources = [];\n \t\t$targets = [];\n-\t\t$from    = '';\n-\t\t$to      = '';\n-\t\tif ( $flip == '' | $flip == 'normal' ) {\n+\t\t$from = '';\n+\t\t$to = '';\n+\n+\t\tif ( $flip == '' || $flip == 'normal' ) {\n \t\t\t$flip = false;\n \t\t} else {\n \t\t\t$flip = true;\n \t\t}\n+\n \t\tif ( $name == '' ) {\n \t\t\t$name = '&#160;';\n \t\t}\n+\n \t\tif ( $yes == '' ) {\n \t\t\t$yes = ' x ';\n \t\t}\n+\n \t\tif ( $no == '' ) {\n \t\t\t$no = '&#160;';\n \t\t}\n+\n \t\tif ( $no[0] == '-' ) {\n \t\t\t$no = \" $no \";\n \t\t}\n+\n \t\tforeach ( $lines as $line ) {\n \t\t\tif ( strlen( $line ) <= 0 ) {\n \t\t\t\tcontinue;\n@@ -419,18 +403,23 @@ public static function dplMatrixParserFunction( &$parser, $name = '', $yes = '',\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$sources[$from[0]] = $from[1];\n \t\t\t\t\t}\n+\n \t\t\t\t\t$m[$from[0]] = [];\n \t\t\t\t}\n \t\t\t} elseif ( trim( $line ) != '' ) {\n \t\t\t\t$to = preg_split( ' *\\~\\~ *', trim( $line ), 2 );\n+\n \t\t\t\tif ( count( $to ) < 2 || $to[1] == '' ) {\n \t\t\t\t\t$targets[$to[0]] = $to[0];\n \t\t\t\t} else {\n \t\t\t\t\t$targets[$to[0]] = $to[1];\n \t\t\t\t}\n+\n+\t\t\t\t// @phan-suppress-next-line PhanTypeInvalidDimOffset\n \t\t\t\t$m[$from[0]][$to[0]] = true;\n \t\t\t}\n \t\t}\n+\n \t\tksort( $targets );\n \n \t\t$header = \"\\n\";\n@@ -439,39 +428,46 @@ public static function dplMatrixParserFunction( &$parser, $name = '', $yes = '',\n \t\t\tforeach ( $sources as $from => $fromName ) {\n \t\t\t\t$header .= \"![[$from|\" . $fromName . \"]]\\n\";\n \t\t\t}\n+\n \t\t\tforeach ( $targets as $to => $toName ) {\n \t\t\t\t$targets[$to] = \"[[$to|$toName]]\";\n+\n \t\t\t\tforeach ( $sources as $from => $fromName ) {\n \t\t\t\t\tif ( array_key_exists( $to, $m[$from] ) ) {\n \t\t\t\t\t\t$targets[$to] .= \"\\n|$yes\";\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$targets[$to] .= \"\\n|$no\";\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t$targets[$to] .= \"\\n|--\\n\";\n \t\t\t}\n+\n \t\t\treturn \"{|class=dplmatrix\\n|$name\" . \"\\n\" . $header . \"|--\\n!\" . implode( \"\\n!\", $targets ) . \"\\n|}\";\n \t\t} else {\n \t\t\tforeach ( $targets as $to => $toName ) {\n \t\t\t\t$header .= \"![[$to|\" . $toName . \"]]\\n\";\n \t\t\t}\n+\n \t\t\tforeach ( $sources as $from => $fromName ) {\n \t\t\t\t$sources[$from] = \"[[$from|$fromName]]\";\n+\n \t\t\t\tforeach ( $targets as $to => $toName ) {\n \t\t\t\t\tif ( array_key_exists( $to, $m[$from] ) ) {\n \t\t\t\t\t\t$sources[$from] .= \"\\n|$yes\";\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$sources[$from] .= \"\\n|$no\";\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t$sources[$from] .= \"\\n|--\\n\";\n \t\t\t}\n+\n \t\t\treturn \"{|class=dplmatrix\\n|$name\" . \"\\n\" . $header . \"|--\\n!\" . implode( \"\\n!\", $sources ) . \"\\n|}\";\n \t\t}\n \t}\n \n \tprivate static function dumpParsedRefs( $parser, $label ) {\n-\t\t// if (!preg_match(\"/Query Q/\",$parser->mTitle->getText())) return '';\n \t\techo '<pre>parser mLinks: ';\n \t\tob_start();\n \t\tvar_dump( $parser->getOutput()->mLinks );\n@@ -502,9 +498,7 @@ public static function fixCategory( $cat ) {\n \t/**\n \t * Set Debugging Level\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tDebug Level\n-\t * @return\tvoid\n+\t * @param int|string $level\n \t */\n \tpublic static function setDebugLevel( $level ) {\n \t\tself::$debugLevel = intval( $level );\n@@ -513,87 +507,82 @@ public static function setDebugLevel( $level ) {\n \t/**\n \t * Return Debugging Level\n \t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n+\t * @return int\n \t */\n \tpublic static function getDebugLevel() {\n \t\treturn self::$debugLevel;\n \t}\n \n-\t// reset everything; some categories may have been fixed, however via  fixcategory=\n-\tpublic static function endReset( &$parser, $text ) {\n+\t// reset everything; some categories may have been fixed, however via fixcategory=\n+\tpublic static function endReset( $parser, $text ) {\n \t\tif ( !self::$createdLinks['resetdone'] ) {\n \t\t\tself::$createdLinks['resetdone'] = true;\n+\n \t\t\tforeach ( $parser->getOutput()->mCategories as $key => $val ) {\n \t\t\t\tif ( array_key_exists( $key, self::$fixedCategories ) ) {\n \t\t\t\t\tself::$fixedCategories[$key] = $val;\n \t\t\t\t}\n \t\t\t}\n-\t\t\t// $text .= self::dumpParsedRefs($parser,\"before final reset\");\n+\n \t\t\tif ( self::$createdLinks['resetLinks'] ) {\n \t\t\t\t$parser->getOutput()->mLinks = [];\n \t\t\t}\n+\n \t\t\tif ( self::$createdLinks['resetCategories'] ) {\n \t\t\t\t$parser->getOutput()->mCategories = self::$fixedCategories;\n \t\t\t}\n+\n \t\t\tif ( self::$createdLinks['resetTemplates'] ) {\n \t\t\t\t$parser->getOutput()->mTemplates = [];\n \t\t\t}\n+\n \t\t\tif ( self::$createdLinks['resetImages'] ) {\n \t\t\t\t$parser->getOutput()->mImages = [];\n \t\t\t}\n-\t\t\t// $text .= self::dumpParsedRefs( $parser, 'after final reset' );\n+\n \t\t\tself::$fixedCategories = [];\n \t\t}\n-\t\treturn true;\n \t}\n \n-\tpublic static function endEliminate( &$parser, &$text ) {\n+\tpublic static function endEliminate( $parser, &$text ) {\n \t\t// called during the final output phase; removes links created by DPL\n \t\tif ( isset( self::$createdLinks ) ) {\n-\t\t\t// self::dumpParsedRefs($parser,\"before final eliminate\");\n \t\t\tif ( array_key_exists( 0, self::$createdLinks ) ) {\n \t\t\t\tforeach ( $parser->getOutput()->getLinks() as $nsp => $link ) {\n \t\t\t\t\tif ( !array_key_exists( $nsp, self::$createdLinks[0] ) ) {\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n-\t\t\t\t\t// echo (\"<pre> elim: created Links [$nsp] = \". count(DynamicPageListHooks::$createdLinks[0][$nsp]).\"</pre>\\n\");\n-\t\t\t\t\t// echo (\"<pre> elim: parser  Links [$nsp] = \". count($parser->getOutput()->mLinks[$nsp])\t\t\t .\"</pre>\\n\");\n+\n \t\t\t\t\t$parser->getOutput()->mLinks[$nsp] = array_diff_assoc( $parser->getOutput()->mLinks[$nsp], self::$createdLinks[0][$nsp] );\n-\t\t\t\t\t// echo (\"<pre> elim: parser  Links [$nsp] nachher = \". count($parser->getOutput()->mLinks[$nsp])\t  .\"</pre>\\n\");\n+\n \t\t\t\t\tif ( count( $parser->getOutput()->mLinks[$nsp] ) == 0 ) {\n \t\t\t\t\t\tunset( $parser->getOutput()->mLinks[$nsp] );\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( isset( self::$createdLinks ) && array_key_exists( 1, self::$createdLinks ) ) {\n \t\t\t\tforeach ( $parser->getOutput()->mTemplates as $nsp => $tpl ) {\n \t\t\t\t\tif ( !array_key_exists( $nsp, self::$createdLinks[1] ) ) {\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n-\t\t\t\t\t// echo (\"<pre> elim: created Tpls [$nsp] = \". count(DynamicPageListHooks::$createdLinks[1][$nsp]).\"</pre>\\n\");\n-\t\t\t\t\t// echo (\"<pre> elim: parser  Tpls [$nsp] = \". count($parser->getOutput()->mTemplates[$nsp])\t\t\t.\"</pre>\\n\");\n+\n \t\t\t\t\t$parser->getOutput()->mTemplates[$nsp] = array_diff_assoc( $parser->getOutput()->mTemplates[$nsp], self::$createdLinks[1][$nsp] );\n-\t\t\t\t\t// echo (\"<pre> elim: parser  Tpls [$nsp] nachher = \". count($parser->getOutput()->mTemplates[$nsp])\t .\"</pre>\\n\");\n+\n \t\t\t\t\tif ( count( $parser->getOutput()->mTemplates[$nsp] ) == 0 ) {\n \t\t\t\t\t\tunset( $parser->getOutput()->mTemplates[$nsp] );\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( isset( self::$createdLinks ) && array_key_exists( 2, self::$createdLinks ) ) {\n \t\t\t\t$parser->getOutput()->mCategories = array_diff_assoc( $parser->getOutput()->mCategories, self::$createdLinks[2] );\n \t\t\t}\n+\n \t\t\tif ( isset( self::$createdLinks ) && array_key_exists( 3, self::$createdLinks ) ) {\n \t\t\t\t$parser->getOutput()->mImages = array_diff_assoc( $parser->getOutput()->mImages, self::$createdLinks[3] );\n \t\t\t}\n-\t\t\t// $text .= self::dumpParsedRefs($parser,\"after final eliminate\".$parser->mTitle->getText());\n \t\t}\n-\n-\t\t/* self::$createdLinks = [\n-\t\t\t\t'resetLinks'=> false, 'resetTemplates' => false,\n-\t\t\t\t'resetCategories' => false, 'resetImages' => false, 'resetdone' => false\n-\t\t]; */\n-\t\treturn true;\n \t}\n \n \t/**"
        },
        {
          "filename": "includes/DynamicPageListMagic.php",
          "status": "renamed",
          "additions": 0,
          "deletions": 9,
          "patch": "@@ -1,13 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * Magic Words\n- *\n- * @author Alexia E. Smith\n- * @license GPL-2.0-or-later\n- * @package DynamicPageList3\n- *\n- */\n \n $magicWords = [];\n "
        },
        {
          "filename": "includes/LST.php",
          "status": "modified",
          "additions": 176,
          "deletions": 83,
          "patch": "@@ -29,35 +29,44 @@\n \n use DPL\\Lister\\Lister;\n use MediaWiki\\MediaWikiServices;\n+use Parser;\n+use Title;\n \n class LST {\n-\t##############################################################\n+\t# #############################################################\n \t# To do transclusion from an extension, we need to interact with the parser\n \t# at a low level. This is the general transclusion functionality\n \t##############################################################\n \n \t/**\n \t * Register what we're working on in the parser, so we don't fall into a trap.\n-\t * @param $parser Parser\n+\t *\n+\t * @param Parser $parser\n \t * @param $part1\n \t * @return bool\n+\t *\n+\t * @suppress PhanUndeclaredProperty Use of Parser::mTemplatePath\n \t */\n \tpublic static function open( $parser, $part1 ) {\n \t\t// Infinite loop test\n \t\tif ( isset( $parser->mTemplatePath[$part1] ) ) {\n \t\t\twfDebug( __METHOD__ . \": template loop broken at '$part1'\\n\" );\n+\n \t\t\treturn false;\n \t\t} else {\n \t\t\t$parser->mTemplatePath[$part1] = 1;\n+\n \t\t\treturn true;\n \t\t}\n \t}\n \n \t/**\n \t * Finish processing the function.\n-\t * @param $parser Parser\n+\t *\n+\t * @param Parser $parser\n \t * @param $part1\n-\t * @return bool\n+\t *\n+\t * @suppress PhanUndeclaredProperty Use of Parser::mTemplatePath\n \t */\n \tpublic static function close( $parser, $part1 ) {\n \t\t// Infinite loop test\n@@ -72,7 +81,7 @@ public static function close( $parser, $part1 ) {\n \t * Handle recursive substitution here, so we can break cycles, and set up\n \t * return values so that edit sections will resolve correctly.\n \t */\n-\tprivate static function parse( $parser, $title, $text, $part1, $skiphead = 0, $recursionCheck = true, $maxLength = -1, $link = '', $trim = false, $skipPattern = [] ) {\n+\tprivate static function parse( $parser, $text, $part1, $skiphead = 0, $recursionCheck = true, $maxLength = -1, $link = '', $trim = false, $skipPattern = [] ) {\n \t\t// if someone tries something like<section begin=blah>lst only</section>\n \t\t// text, may as well do the right thing.\n \t\t$text = str_replace( '</section>', '', $text );\n@@ -84,9 +93,9 @@ private static function parse( $parser, $title, $text, $part1, $skiphead = 0, $r\n \n \t\tif ( self::open( $parser, $part1 ) ) {\n \n-\t\t\t//Handle recursion here, so we can break cycles.\n+\t\t\t// Handle recursion here, so we can break cycles.\n \t\t\tif ( $recursionCheck == false ) {\n-\t\t\t\t$text = $parser->preprocess( $text, $parser->mTitle, $parser->mOptions );\n+\t\t\t\t$text = $parser->preprocess( $text, $parser->getTitle(), $parser->getOptions() );\n \t\t\t\tself::close( $parser, $part1 );\n \t\t\t}\n \n@@ -99,11 +108,11 @@ private static function parse( $parser, $title, $text, $part1, $skiphead = 0, $r\n \t\t\t\treturn $text;\n \t\t\t}\n \t\t} else {\n-\t\t\treturn \"[[\" . $title->getPrefixedText() . \"]]\" . \"<!-- WARNING: LST loop detected -->\";\n+\t\t\treturn \"[[\" . $parser->getTitle()->getPrefixedText() . \"]]\" . \"<!-- WARNING: LST loop detected -->\";\n \t\t}\n \t}\n \n-\t##############################################################\n+\t# #############################################################\n \t# And now, the labeled section transclusion\n \t##############################################################\n \n@@ -114,16 +123,17 @@ private static function parse( $parser, $title, $text, $part1, $skiphead = 0, $r\n \t * @param string $in\n \t * @param array $assocArgs\n \t * @param Parser $parser\n-\t * @return string HTML output\n+\t * @return string\n \t */\n \tprivate static function noop( $in, $assocArgs = [], $parser = null ) {\n \t\treturn '';\n \t}\n \n-\t///Generate a regex to match the section(s) we're interested in.\n+\t// Generate a regex to match the section(s) we're interested in.\n \tprivate static function createSectionPattern( $sec, $to, &$any ) {\n-\t\t$any    = false;\n+\t\t$any = false;\n \t\t$to_sec = ( $to == '' ) ? $sec : $to;\n+\n \t\tif ( $sec[0] == '*' ) {\n \t\t\t$any = true;\n \t\t\tif ( $sec == '**' ) {\n@@ -134,6 +144,7 @@ private static function createSectionPattern( $sec, $to, &$any ) {\n \t\t} else {\n \t\t\t$sec = preg_quote( $sec, '/' );\n \t\t}\n+\n \t\tif ( $to_sec[0] == '*' ) {\n \t\t\tif ( $to_sec == '**' ) {\n \t\t\t\t$to_sec = '[^\\/>\"' . \"']+\";\n@@ -143,27 +154,29 @@ private static function createSectionPattern( $sec, $to, &$any ) {\n \t\t} else {\n \t\t\t$to_sec = preg_quote( $to_sec, '/' );\n \t\t}\n-\t\t$ws = \"(?:\\s+[^>]+)?\"; //was like $ws=\"\\s*\"\n+\n+\t\t$ws = \"(?:\\s+[^>]+)?\";\n+\n \t\treturn \"/<section$ws\\s+(?i:begin)=['\\\"]?\" . \"($sec)\" . \"['\\\"]?$ws\\/?>(.*?)\\n?<section$ws\\s+(?:[^>]+\\s+)?(?i:end)=\" . \"['\\\"]?\\\\1['\\\"]?\" . \"$ws\\/?>/s\";\n \t}\n \n \t/**\n \t * Count headings in skipped text.\n \t *\n-\t * Count skipped headings, so parser (as of r18218) can skip them, to\n-\t * prevent wrong heading links (see bug 6563).\n+\t * Count skipped headings, so parser can skip them, to\n+\t * prevent wrong heading links.\n \t *\n \t * @param string $text\n-\t * @param int $limit Cutoff point in the text to stop searching\n-\t * @return int Number of matches\n-\t * @private\n+\t * @param int $limit\n+\t * @return int\n \t */\n \tprivate static function countHeadings( $text, $limit ) {\n \t\t$pat = '^(={1,6}).+\\1\\s*$()';\n \n \t\t$count = 0;\n \t\t$offset = 0;\n \t\t$m = [];\n+\n \t\twhile ( preg_match( \"/$pat/im\", $text, $m, PREG_OFFSET_CAPTURE, $offset ) ) {\n \t\t\tif ( $m[2][1] > $limit ) {\n \t\t\t\tbreak;\n@@ -177,7 +190,7 @@ private static function countHeadings( $text, $limit ) {\n \t}\n \n \tpublic static function text( $parser, $page, &$title, &$text ) {\n-\t\t$title = \\Title::newFromText( $page );\n+\t\t$title = Title::newFromText( $page );\n \n \t\tif ( $title === null ) {\n \t\t\t$text = '';\n@@ -186,7 +199,7 @@ public static function text( $parser, $page, &$title, &$text ) {\n \t\t\t$text = $parser->fetchTemplateAndTitle( $title )[0];\n \t\t}\n \n-\t\t//if article doesn't exist, return a red link.\n+\t\t// if article doesn't exist, return a red link.\n \t\tif ( $text == false ) {\n \t\t\t$text = \"[[\" . $title->getPrefixedText() . \"]]\";\n \t\t\treturn false;\n@@ -195,26 +208,30 @@ public static function text( $parser, $page, &$title, &$text ) {\n \t\t}\n \t}\n \n-\t///section inclusion - include all matching sections\n+\t// section inclusion - include all matching sections\n \tpublic static function includeSection( $parser, $page = '', $sec = '', $to = '', $recursionCheck = true, $trim = false, $skipPattern = [] ) {\n \t\t$output = [];\n+\n \t\tif ( self::text( $parser, $page, $title, $text ) == false ) {\n \t\t\t$output[] = $text;\n \t\t\treturn $output;\n \t\t}\n+\n \t\t$any = false;\n \t\t$pat = self::createSectionPattern( $sec, $to, $any );\n \n \t\tpreg_match_all( $pat, $text, $m, PREG_PATTERN_ORDER );\n \n \t\tforeach ( $m[2] as $nr => $piece ) {\n-\t\t\t$piece = self::parse( $parser, $title, $piece, \"#lst:${page}|${sec}\", 0, $recursionCheck, $trim, $skipPattern );\n+\t\t\t$piece = self::parse( $parser, $piece, \"#lst:${page}|${sec}\", 0, $recursionCheck, $trim, $skipPattern );\n+\n \t\t\tif ( $any ) {\n \t\t\t\t$output[] = $m[1][$nr] . '::' . $piece;\n \t\t\t} else {\n \t\t\t\t$output[] = $piece;\n \t\t\t}\n \t\t}\n+\n \t\treturn $output;\n \t}\n \n@@ -225,10 +242,12 @@ public static function includeSection( $parser, $page = '', $sec = '', $to = '',\n \t * ... it is balanced in terms of braces, brackets and tags\n \t * ... it is cut at a word boundary (white space) if possible\n \t * ... can be used as content of a wikitable field without spoiling the whole surrounding wikitext structure\n-\t * @param  $lim     limit of character count for the result\n-\t * @param  $text    the wikitext to be truncated\n-\t * @param  $link    an optional link which will be appended to the text if it was truncatedt\n-\t * @return the truncated text;\n+\t *\n+\t * @param $text the wikitext to be truncated\n+\t * @param $limit limit of character count for the result\n+\t * @param $link an optional link which will be appended to the text if it was truncated\n+\t *\n+\t * @return string the truncated text;\n \t *         note that the returned text may be longer than the limit if this is necessary\n \t *         to return something at all. We do not want to return an empty string if the input is not empty\n \t *         if the text is already shorter than the limit, the text\n@@ -249,24 +268,29 @@ public static function limitTranscludedText( $text, $limit, $link = '' ) {\n \t\t// search latest position with balanced brackets/braces\n \t\t// store also the position of the last preceding space\n \n-\t\t$brackets  = 0;\n+\t\t$brackets = 0;\n \t\t$cbrackets = 0;\n-\t\t$n0        = -1;\n-\t\t$nb        = 0;\n+\t\t$n0 = -1;\n+\t\t$nb = 0;\n+\n \t\tfor ( $i = 0; $i < $limit; $i++ ) {\n \t\t\t$c = $text[$i];\n \t\t\tif ( $c == '[' ) {\n \t\t\t\t$brackets++;\n \t\t\t}\n+\n \t\t\tif ( $c == ']' ) {\n \t\t\t\t$brackets--;\n \t\t\t}\n+\n \t\t\tif ( $c == '{' ) {\n \t\t\t\t$cbrackets++;\n \t\t\t}\n+\n \t\t\tif ( $c == '}' ) {\n \t\t\t\t$cbrackets--;\n \t\t\t}\n+\n \t\t\t// we store the position if it is valid in terms of parentheses balancing\n \t\t\tif ( $brackets == 0 && $cbrackets == 0 ) {\n \t\t\t\t$n0 = $i;\n@@ -279,9 +303,11 @@ public static function limitTranscludedText( $text, $limit, $link = '' ) {\n \t\t// if there is a valid cut-off point we use it; it will be the largest one which is not above the limit\n \t\tif ( $n0 >= 0 ) {\n \t\t\t// we try to cut off at a word boundary, this may lead to a shortening of max. 15 chars\n+\t\t\t// @phan-suppress-next-line PhanSuspiciousValueComparison\n \t\t\tif ( $nb > 0 && $nb + 15 > $n0 ) {\n \t\t\t\t$n0 = $nb;\n \t\t\t}\n+\n \t\t\t$cut = substr( $text, 0, $n0 + 1 );\n \n \t\t\t// an open html comment would be fatal, but this should not happen as we already have\n@@ -293,9 +319,9 @@ public static function limitTranscludedText( $text, $limit, $link = '' ) {\n \t\t\t// currently we ignore the nesting, i.e. all closing tags are appended at the end.\n \t\t\t// This simple approach may fail in some cases ...\n \n-\t\t\t$matches   = [];\n+\t\t\t$matches = [];\n \t\t\t$noMatches = preg_match_all( '#<\\s*(/?ref|/?pre|/?nowiki)(\\s+[^>]*?)*>#im', $cut, $matches );\n-\t\t\t$tags      = [\n+\t\t\t$tags = [\n \t\t\t\t'ref' => 0,\n \t\t\t\t'pre' => 0,\n \t\t\t\t'nowiki' => 0\n@@ -310,19 +336,23 @@ public static function limitTranscludedText( $text, $limit, $link = '' ) {\n \t\t\t\t\t\t$tags[$mm]++;\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t// append missing closing tags - should the tags be ordered by precedence ?\n \t\t\t\tforeach ( $tags as $tagName => $level ) {\n+\t\t\t\t\t// @phan-suppress-next-line PhanPluginLoopVariableReuse\n \t\t\t\t\twhile ( $level > 0 ) {\n \t\t\t\t\t\t// avoid empty ref tag\n \t\t\t\t\t\tif ( $tagName == 'ref' && substr( $cut, strlen( $cut ) - 5 ) == '<ref>' ) {\n \t\t\t\t\t\t\t$cut = substr( $cut, 0, strlen( $cut ) - 5 );\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$cut .= '</' . $tagName . '>';\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$level--;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\treturn $cut . $link;\n \t\t} elseif ( $limit == 0 ) {\n \t\t\treturn $link;\n@@ -335,43 +365,57 @@ public static function limitTranscludedText( $text, $limit, $link = '' ) {\n \t}\n \n \tpublic static function includeHeading( $parser, $page = '', $sec = '', $to = '', &$sectionHeading, $recursionCheck = true, $maxLength = -1, $link = 'default', $trim = false, $skipPattern = [] ) {\n+\t\t// @phan-suppress-previous-line PhanParamReqAfterOpt\n+\n \t\t$output = [];\n+\n \t\tif ( self::text( $parser, $page, $title, $text ) == false ) {\n \t\t\t$output[0] = $text;\n+\n \t\t\treturn $output;\n \t\t}\n-\t\t/* throw away comments */\n+\n+\t\t// throw away comments\n \t\t$text = preg_replace( '/<!--.*?-->/s', '', $text );\n+\n \t\treturn self::extractHeadingFromText( $parser, $page, $title, $text, $sec, $to, $sectionHeading, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n \t}\n \n-\t//section inclusion - include all matching sections (return array)\n+\t// section inclusion - include all matching sections (return array)\n \tpublic static function extractHeadingFromText( $parser, $page, $title, $text, $sec = '', $to = '', &$sectionHeading, $recursionCheck = true, $maxLength = -1, $cLink = 'default', $trim = false, $skipPattern = [] ) {\n+\t\t// @phan-suppress-previous-line PhanParamReqAfterOpt\n+\n \t\t$continueSearch = true;\n-\t\t$n              = 0;\n-\t\t$output[$n]     = '';\n-\t\t$nr             = 0;\n+\t\t$output = [];\n+\n+\t\t$n = 0;\n+\t\t$output[$n] = '';\n+\t\t$nr = 0;\n+\n \t\t// check if we are going to fetch the n-th section\n \t\tif ( preg_match( '/^%-?[1-9][0-9]*$/', $sec ) ) {\n \t\t\t$nr = substr( $sec, 1 );\n \t\t}\n+\n \t\tif ( preg_match( '/^%0$/', $sec ) ) {\n \t\t\t$nr = -2; // transclude text before the first section\n \t\t}\n \n \t\t// if the section name starts with a # or with a @ we use it as regexp, otherwise as plain string\n \t\t$isPlain = true;\n+\n \t\tif ( $sec != '' && ( $sec[0] == '#' || $sec[0] == '@' ) ) {\n-\t\t\t$sec     = substr( $sec, 1 );\n+\t\t\t$sec = substr( $sec, 1 );\n \t\t\t$isPlain = false;\n \t\t}\n+\n \t\tdo {\n-\t\t\t//Generate a regex to match the === classical heading section(s) === we're\n+\t\t\t// Generate a regex to match the === classical heading section(s) === we're\n \t\t\t//interested in.\n \t\t\t$headLine = '';\n+\t\t\t$begin_off = 0;\n \t\t\tif ( $sec == '' ) {\n-\t\t\t\t$begin_off = 0;\n-\t\t\t\t$head_len  = 6;\n+\t\t\t\t$head_len = 6;\n \t\t\t} else {\n \t\t\t\tif ( $nr != 0 ) {\n \t\t\t\t\t$pat = '^(={1,6})\\s*[^=\\s\\n][^\\n=]*\\s*\\1\\s*($)';\n@@ -380,19 +424,21 @@ public static function extractHeadingFromText( $parser, $page, $title, $text, $s\n \t\t\t\t} else {\n \t\t\t\t\t$pat = '^(={1,6})\\s*' . str_replace( '/', '\\/', $sec ) . '\\s*\\1\\s*($)';\n \t\t\t\t}\n+\n \t\t\t\tif ( preg_match( \"/$pat/im\", $text, $m, PREG_OFFSET_CAPTURE ) ) {\n-\t\t\t\t\t$mata           = [];\n+\t\t\t\t\t$mata = [];\n \t\t\t\t\t$no_parenthesis = preg_match_all( '/\\(/', $pat, $mata );\n-\t\t\t\t\t$begin_off      = $m[$no_parenthesis][1];\n-\t\t\t\t\t$head_len       = strlen( $m[1][0] );\n-\t\t\t\t\t$headLine       = trim( $m[0][0], \"\\n =\\t\" );\n+\t\t\t\t\t$begin_off = $m[$no_parenthesis][1];\n+\t\t\t\t\t$head_len = strlen( $m[1][0] );\n+\t\t\t\t\t$headLine = trim( $m[0][0], \"\\n =\\t\" );\n \t\t\t\t} elseif ( $nr == -2 ) {\n \t\t\t\t\t$m[1][1] = strlen( $text ) + 1; // take whole article if no heading found\n \t\t\t\t} else {\n \t\t\t\t\t// match failed\n \t\t\t\t\treturn $output;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t// create a link symbol (arrow, img, ...) in case we have to cut the text block to maxLength\n \t\t\t$link = $cLink;\n \t\t\tif ( $link == 'default' ) {\n@@ -404,33 +450,40 @@ public static function extractHeadingFromText( $parser, $page, $title, $text, $s\n \t\t\t} else {\n \t\t\t\t$link = str_replace( '%SECTION%', $page . '#' . $headLine, $link );\n \t\t\t}\n+\n \t\t\tif ( $nr == -2 ) {\n \t\t\t\t// output text before first section and done\n-\t\t\t\t$piece     = substr( $text, 0, $m[1][1] - 1 );\n-\t\t\t\t$output[0] = self::parse( $parser, $title, $piece, \"#lsth:${page}|${sec}\", 0, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n+\t\t\t\t$piece = substr( $text, 0, $m[1][1] - 1 );\n+\t\t\t\t$output[0] = self::parse( $parser, $piece, \"#lsth:${page}|${sec}\", 0, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n+\n \t\t\t\treturn $output;\n \t\t\t}\n \n \t\t\tif ( isset( $end_off ) ) {\n \t\t\t\tunset( $end_off );\n \t\t\t}\n+\n \t\t\tif ( $to != '' ) {\n-\t\t\t\t//if $to is supplied, try and match it.  If we don't match, just ignore it.\n+\t\t\t\t// if $to is supplied, try and match it. If we don't match, just ignore it.\n \t\t\t\tif ( $isPlain ) {\n \t\t\t\t\t$pat = '^(={1,6})\\s*' . preg_quote( $to, '/' ) . '\\s*\\1\\s*$';\n \t\t\t\t} else {\n \t\t\t\t\t$pat = '^(={1,6})\\s*' . str_replace( '/', '\\/', $to ) . '\\s*\\1\\s*$';\n \t\t\t\t}\n+\n \t\t\t\tif ( preg_match( \"/$pat/im\", $text, $mm, PREG_OFFSET_CAPTURE, $begin_off ) ) {\n \t\t\t\t\t$end_off = $mm[0][1] - 1;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( !isset( $end_off ) ) {\n \t\t\t\tif ( $nr != 0 ) {\n \t\t\t\t\t$pat = '^(={1,6})\\s*[^\\s\\n=][^\\n=]*\\s*\\1\\s*$';\n \t\t\t\t} else {\n+\t\t\t\t\t// @phan-suppress-next-line PhanPossiblyUndeclaredVariable\n \t\t\t\t\t$pat = '^(={1,' . $head_len . '})(?!=)\\s*.*?\\1\\s*$';\n \t\t\t\t}\n+\n \t\t\t\tif ( preg_match( \"/$pat/im\", $text, $mm, PREG_OFFSET_CAPTURE, $begin_off ) ) {\n \t\t\t\t\t$end_off = $mm[0][1] - 1;\n \t\t\t\t} elseif ( $sec == '' ) {\n@@ -439,20 +492,22 @@ public static function extractHeadingFromText( $parser, $page, $title, $text, $s\n \t\t\t}\n \n \t\t\t$nhead = self::countHeadings( $text, $begin_off );\n+\n \t\t\twfDebug( \"LSTH: head offset = $nhead\" );\n \n \t\t\tif ( isset( $end_off ) ) {\n \t\t\t\tif ( $end_off == -1 ) {\n \t\t\t\t\treturn $output;\n \t\t\t\t}\n+\n \t\t\t\t$piece = substr( $text, $begin_off, $end_off - $begin_off );\n \t\t\t\tif ( $sec == '' ) {\n \t\t\t\t\t$continueSearch = false;\n \t\t\t\t} else {\n \t\t\t\t\t$text = substr( $text, $end_off );\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\t$piece          = substr( $text, $begin_off );\n+\t\t\t\t$piece = substr( $text, $begin_off );\n \t\t\t\t$continueSearch = false;\n \t\t\t}\n \n@@ -464,27 +519,25 @@ public static function extractHeadingFromText( $parser, $page, $title, $text, $s\n \n \t\t\tif ( isset( $m[0][0] ) ) {\n \t\t\t\t$sectionHeading[$n] = $headLine;\n-\t\t\t\t//$sectionHeading[$n]=preg_replace(\"/^=+\\s*/\",\"\",$m[0][0]);\n-\t\t\t\t//$sectionHeading[$n]=preg_replace(\"/\\s*=+\\s*$/\",\"\",$sectionHeading[$n]);\n \t\t\t} else {\n-\t\t\t\t// $sectionHeading[$n] = '';\n \t\t\t\t$sectionHeading[0] = $headLine;\n \t\t\t}\n \n \t\t\tif ( $nr == 1 ) {\n \t\t\t\t// output n-th section and done\n-\t\t\t\t$output[0] = self::parse( $parser, $title, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n+\t\t\t\t$output[0] = self::parse( $parser, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n \t\t\t\tbreak;\n \t\t\t}\n+\n \t\t\tif ( $nr == -1 ) {\n \t\t\t\tif ( !isset( $end_off ) ) {\n \t\t\t\t\t// output last section and done\n-\t\t\t\t\t$output[0] = self::parse( $parser, $title, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n+\t\t\t\t\t$output[0] = self::parse( $parser, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\t// output section by name and continue search for another section with the same name\n-\t\t\t\t$output[$n++] = self::parse( $parser, $title, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n+\t\t\t\t$output[$n++] = self::parse( $parser, $piece, \"#lsth:${page}|${sec}\", $nhead, $recursionCheck, $maxLength, $link, $trim, $skipPattern );\n \t\t\t}\n \t\t} while ( $continueSearch );\n \n@@ -497,34 +550,41 @@ public static function extractHeadingFromText( $parser, $page, $title, $text, $s\n \t// and do NOT match the condition \"$mustNotMatch\" (if specified)\n \t// we use a callback function to format retrieved parameters, accessible via $lister->formatTemplateArg()\n \tpublic static function includeTemplate( $parser, Lister $lister, $dplNr, $article, $template1 = '', $template2 = '', $defaultTemplate, $mustMatch, $mustNotMatch, $matchParsed, $catlist ) {\n-\t\t$page  = $article->mTitle->getPrefixedText();\n-\t\t$date  = $article->myDate;\n-\t\t$user  = $article->mUserLink;\n-\t\t$title = \\Title::newFromText( $page );\n-\t\t/* get text and throw away html comments */\n+\t\t// @phan-suppress-previous-line PhanParamReqAfterOpt\n+\n+\t\t$page = $article->mTitle->getPrefixedText();\n+\t\t$date = $article->myDate;\n+\t\t$user = $article->mUserLink;\n+\t\t$title = Title::newFromText( $page );\n+\n+\t\t// get text and throw away html comments\n \t\t$text = preg_replace( '/<!--.*?-->/s', '', $parser->fetchTemplateAndTitle( $title )[0] );\n \n \t\tif ( $template1 != '' && $template1[0] == '#' ) {\n \t\t\t// --------------------------------------------- looking for a parser function call\n-\t\t\t$template1       = substr( $template1, 1 );\n-\t\t\t$template2       = substr( $template2, 1 );\n+\t\t\t$template1 = substr( $template1, 1 );\n+\t\t\t$template2 = substr( $template2, 1 );\n \t\t\t$defaultTemplate = substr( $defaultTemplate, 1 );\n+\n \t\t\t// when looking for parser function calls we accept regexp search patterns\n-\t\t\t$text2           = preg_replace( \"/\\{\\{\\s*#(\" . $template1 . ')(\\s*[:}])/i', '\u00b0\u00b3\u00b2|%PFUNC%=\\1\\2|', $text );\n-\t\t\t$tCalls          = preg_split( '/\u00b0\u00b3\u00b2/', ' ' . $text2 );\n+\t\t\t$text2 = preg_replace( \"/\\{\\{\\s*#(\" . $template1 . ')(\\s*[:}])/i', '\u00b0\u00b3\u00b2|%PFUNC%=\\1\\2|', $text );\n+\t\t\t$tCalls = preg_split( '/\u00b0\u00b3\u00b2/', ' ' . $text2 );\n+\n \t\t\tforeach ( $tCalls as $i => $tCall ) {\n \t\t\t\tif ( ( $n = strpos( $tCall, ':' ) ) !== false ) {\n \t\t\t\t\t$tCalls[$i][$n] = ' ';\n \t\t\t\t}\n \t\t\t}\n \t\t} elseif ( $template1 != '' && $template1[0] == '~' ) {\n \t\t\t// --------------------------------------------- looking for an xml-tag extension call\n-\t\t\t$template1       = substr( $template1, 1 );\n-\t\t\t$template2       = substr( $template2, 1 );\n+\t\t\t$template1 = substr( $template1, 1 );\n+\t\t\t$template2 = substr( $template2, 1 );\n \t\t\t$defaultTemplate = substr( $defaultTemplate, 1 );\n+\n \t\t\t// looking for tags\n-\t\t\t$text2           = preg_replace( '/\\<\\s*(' . $template1 . ')\\s*\\>/i', '\u00b0\u00b3\u00b2|%TAG%=\\1|%TAGBODY%=', $text );\n-\t\t\t$tCalls          = preg_split( '/\u00b0\u00b3\u00b2/', ' ' . $text2 );\n+\t\t\t$text2 = preg_replace( '/\\<\\s*(' . $template1 . ')\\s*\\>/i', '\u00b0\u00b3\u00b2|%TAG%=\\1|%TAGBODY%=', $text );\n+\t\t\t$tCalls = preg_split( '/\u00b0\u00b3\u00b2/', ' ' . $text2 );\n+\n \t\t\tforeach ( $tCalls as $i => $tCall ) {\n \t\t\t\t$tCalls[$i] = preg_replace( '/\\<\\s*\\/' . $template1 . '\\s*\\>.*/is', '}}', $tCall );\n \t\t\t}\n@@ -536,7 +596,8 @@ public static function includeTemplate( $parser, Lister $lister, $dplNr, $articl\n \t\t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n \n \t\t\t$nsNames = $contLang->getNamespaces();\n-\t\t\t$tCalls  = preg_split( '/\\{\\{\\s*(Template:|' . $nsNames[10] . ':)?' . self::spaceOrUnderscore( preg_quote( $template1, '/' ) ) . '\\s*[|}]/i', ' ' . $text );\n+\t\t\t$tCalls = preg_split( '/\\{\\{\\s*(Template:|' . $nsNames[10] . ':)?' . self::spaceOrUnderscore( preg_quote( $template1, '/' ) ) . '\\s*[|}]/i', ' ' . $text );\n+\n \t\t\t// We restore the first separator symbol (we had to include that symbol into the SPLIT, because we must make\n \t\t\t// sure that we only accept exact matches of the complete template name\n \t\t\t// (e.g. when looking for \"foo\" we must not accept \"foo xyz\")\n@@ -549,7 +610,7 @@ public static function includeTemplate( $parser, Lister $lister, $dplNr, $articl\n \t\t\t}\n \t\t}\n \n-\t\t$output      = [];\n+\t\t$output = [];\n \t\t$extractParm = [];\n \n \t\t// check if we want to extract parameters directly from the call\n@@ -565,6 +626,7 @@ public static function includeTemplate( $parser, Lister $lister, $dplNr, $articl\n \t\t\t\t// if parameters are required directly: return empty columns\n \t\t\t\tif ( count( $extractParm ) > 1 ) {\n \t\t\t\t\t$output[0] = $lister->formatTemplateArg( '', $dplNr, 0, true, -1, $article );\n+\n \t\t\t\t\tfor ( $i = 1; $i < count( $extractParm ); $i++ ) {\n \t\t\t\t\t\t$output[0] .= \"\\n|\" . $lister->formatTemplateArg( '', $dplNr, $i, true, -1, $article );\n \t\t\t\t\t}\n@@ -573,141 +635,172 @@ public static function includeTemplate( $parser, Lister $lister, $dplNr, $articl\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\t// put a red link into the output\n-\t\t\t\t$output[0] = $parser->preprocess( '{{' . $defaultTemplate . '|%PAGE%=' . $page . '|%TITLE%=' . $title->getText() . '|%DATE%=' . $date . '|%USER%=' . $user . '}}', $parser->mTitle, $parser->mOptions );\n+\t\t\t\t$output[0] = $parser->preprocess( '{{' . $defaultTemplate . '|%PAGE%=' . $page . '|%TITLE%=' . $title->getText() . '|%DATE%=' . $date . '|%USER%=' . $user . '}}', $parser->getTitle(), $parser->getOptions() );\n \t\t\t}\n+\n \t\t\tunset( $title );\n+\n \t\t\treturn $output;\n \t\t}\n \n \t\t$output[0] = '';\n-\t\t$n         = -2;\n+\t\t$n = -2;\n+\n \t\t// loop for all template invocations\n \t\t$firstCall = true;\n+\n \t\tforeach ( $tCalls as $iii => $tCall ) {\n \t\t\tif ( $n == -2 ) {\n \t\t\t\t$n++;\n \t\t\t\tcontinue;\n \t\t\t}\n+\n \t\t\t$c = $tCall[0];\n \t\t\t// normally we construct a call for template2 with the parameters of template1\n \t\t\tif ( count( $extractParm ) == 0 ) {\n \t\t\t\t// find the end of the call: bracket level must be zero\n-\t\t\t\t$cbrackets    = 0;\n+\t\t\t\t$cbrackets = 0;\n \t\t\t\t$templateCall = '{{' . $template2 . $tCall;\n-\t\t\t\t$size         = strlen( $templateCall );\n+\t\t\t\t$size = strlen( $templateCall );\n \n \t\t\t\tfor ( $i = 0; $i < $size; $i++ ) {\n \t\t\t\t\t$c = $templateCall[$i];\n \t\t\t\t\tif ( $c == '{' ) {\n \t\t\t\t\t\t$cbrackets++;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $c == '}' ) {\n \t\t\t\t\t\t$cbrackets--;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $cbrackets == 0 ) {\n \t\t\t\t\t\t// if we must match a condition: test against it\n \t\t\t\t\t\tif ( ( $mustMatch == '' || preg_match( $mustMatch, substr( $templateCall, 0, $i - 1 ) ) ) && ( $mustNotMatch == '' || !preg_match( $mustNotMatch, substr( $templateCall, 0, $i - 1 ) ) ) ) {\n \t\t\t\t\t\t\t$invocation = substr( $templateCall, 0, $i - 1 );\n-\t\t\t\t\t\t\t$argChain   = $invocation . '|%PAGE%=' . $page . '|%TITLE%=' . $title->getText();\n+\t\t\t\t\t\t\t$argChain = $invocation . '|%PAGE%=' . $page . '|%TITLE%=' . $title->getText();\n+\n \t\t\t\t\t\t\tif ( $catlist != '' ) {\n \t\t\t\t\t\t\t\t$argChain .= \"|%CATLIST%=$catlist\";\n \t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t$argChain .= '|%DATE%=' . $date . '|%USER%=' . $user . '|%ARGS%=' . str_replace( '|', '\u00a7', preg_replace( '/[}]+/', '}', preg_replace( '/[{]+/', '{', substr( $invocation, strlen( $template2 ) + 2 ) ) ) ) . '}}';\n-\t\t\t\t\t\t\t$output[++$n] = $parser->preprocess( $argChain, $parser->mTitle, $parser->mOptions );\n+\t\t\t\t\t\t\t$output[++$n] = $parser->preprocess( $argChain, $parser->getTitle(), $parser->getOptions() );\n \t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\t// if the user wants parameters directly from the call line of template1 we return just those\n-\t\t\t\t$cbrackets    = 2;\n+\t\t\t\t$cbrackets = 2;\n \t\t\t\t$templateCall = $tCall;\n-\t\t\t\t$size         = strlen( $templateCall );\n-\t\t\t\t$parms        = [];\n-\t\t\t\t$parm         = '';\n-\t\t\t\t$hasParm      = false;\n+\t\t\t\t$size = strlen( $templateCall );\n+\t\t\t\t$parms = [];\n+\t\t\t\t$parm = '';\n+\t\t\t\t$hasParm = false;\n \n \t\t\t\tfor ( $i = 0; $i < $size; $i++ ) {\n \t\t\t\t\t$c = $templateCall[$i];\n+\n \t\t\t\t\tif ( $c == '{' || $c == '[' ) {\n \t\t\t\t\t\t$cbrackets++; // we count both types of brackets\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $c == '}' || $c == ']' ) {\n \t\t\t\t\t\t$cbrackets--;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $cbrackets == 2 && $c == '|' ) {\n \t\t\t\t\t\t$parms[] = trim( $parm );\n \t\t\t\t\t\t$hasParm = true;\n-\t\t\t\t\t\t$parm    = '';\n+\t\t\t\t\t\t$parm = '';\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$parm .= $c;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $cbrackets == 0 ) {\n \t\t\t\t\t\tif ( $hasParm ) {\n \t\t\t\t\t\t\t$parms[] = trim( substr( $parm, 0, strlen( $parm ) - 2 ) );\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tarray_splice( $parms, 0, 1 ); // remove artifact;\n+\n+\t\t\t\t\t\tarray_splice( $parms, 0, 1 );\n \t\t\t\t\t\t// if we must match a condition: test against it\n \t\t\t\t\t\t$callText = substr( $templateCall, 0, $i - 1 );\n+\n \t\t\t\t\t\tif ( ( $mustMatch == '' || ( ( $matchParsed && preg_match( $mustMatch, $parser->recursiveTagParse( $callText ) ) ) || ( !$matchParsed && preg_match( $mustMatch, $callText ) ) ) ) && ( $mustNotMatch == '' || ( ( $matchParsed && !preg_match( $mustNotMatch, $parser->recursiveTagParse( $callText ) ) ) || ( !$matchParsed && !preg_match( $mustNotMatch, $callText ) ) ) ) ) {\n \t\t\t\t\t\t\t$output[++$n] = '';\n-\t\t\t\t\t\t\t$second       = false;\n+\t\t\t\t\t\t\t$second = false;\n+\n \t\t\t\t\t\t\tforeach ( $extractParm as $exParmKey => $exParm ) {\n \t\t\t\t\t\t\t\t$maxlen = -1;\n \t\t\t\t\t\t\t\tif ( ( $limpos = strpos( $exParm, '[' ) ) > 0 && $exParm[strlen( $exParm ) - 1] == ']' ) {\n \t\t\t\t\t\t\t\t\t$maxlen = intval( substr( $exParm, $limpos + 1, strlen( $exParm ) - $limpos - 2 ) );\n \t\t\t\t\t\t\t\t\t$exParm = substr( $exParm, 0, $limpos );\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\tif ( $second ) {\n+\t\t\t\t\t\t\t\t\t// @phan-suppress-next-line PhanTypeInvalidDimOffset\n \t\t\t\t\t\t\t\t\tif ( $output[$n] == '' || $output[$n][strlen( $output[$n] ) - 1] != \"\\n\" ) {\n \t\t\t\t\t\t\t\t\t\t$output[$n] .= \"\\n\";\n \t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t$output[$n] .= \"|\"; // \\n\";\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t$found = false;\n+\n \t\t\t\t\t\t\t\t// % in parameter name\n \t\t\t\t\t\t\t\tif ( strpos( $exParm, '%' ) !== false ) {\n \t\t\t\t\t\t\t\t\t// %% is a short form for inclusion of %PAGE% and %TITLE%\n \t\t\t\t\t\t\t\t\t$found = true;\n \t\t\t\t\t\t\t\t\t$output[$n] .= $lister->formatTemplateArg( $exParm, $dplNr, $exParmKey, $firstCall, $maxlen, $article );\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\tif ( !$found ) {\n \t\t\t\t\t\t\t\t\t// named parameter\n \t\t\t\t\t\t\t\t\t$exParmQuote = str_replace( '/', '\\/', $exParm );\n+\n \t\t\t\t\t\t\t\t\tforeach ( $parms as $parm ) {\n \t\t\t\t\t\t\t\t\t\tif ( !preg_match( \"/^\\s*$exParmQuote\\s*=/\", $parm ) ) {\n \t\t\t\t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t\t$found = true;\n \t\t\t\t\t\t\t\t\t\t$output[$n] .= $lister->formatTemplateArg( preg_replace( \"/^$exParmQuote\\s*=\\s*/\", \"\", $parm ), $dplNr, $exParmKey, $firstCall, $maxlen, $article );\n \t\t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\tif ( !$found && is_numeric( $exParm ) && intval( $exParm ) == $exParm ) {\n \t\t\t\t\t\t\t\t\t// numeric parameter\n \t\t\t\t\t\t\t\t\t$np = 0;\n+\n \t\t\t\t\t\t\t\t\tforeach ( $parms as $parm ) {\n \t\t\t\t\t\t\t\t\t\tif ( strstr( $parm, '=' ) === false ) {\n \t\t\t\t\t\t\t\t\t\t\t++$np;\n \t\t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t\tif ( $np != $exParm ) {\n \t\t\t\t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t\t$found = true;\n \t\t\t\t\t\t\t\t\t\t$output[$n] .= $lister->formatTemplateArg( $parm, $dplNr, $exParmKey, $firstCall, $maxlen, $article );\n \t\t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\tif ( !$found ) {\n \t\t\t\t\t\t\t\t\t$output[$n] .= $lister->formatTemplateArg( '', $dplNr, $exParmKey, $firstCall, $maxlen, $article );\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t$second = true;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$firstCall = false;\n \t\t}\n "
        },
        {
          "filename": "includes/Logger.php",
          "status": "modified",
          "additions": 18,
          "deletions": 32,
          "patch": "@@ -1,13 +1,5 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Logger Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n class Logger {\n@@ -18,63 +10,57 @@ class Logger {\n \t */\n \tprivate $buffer = [];\n \n-\t/**\n-\t * Function Documentation\n-\t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n-\t */\n-\tpublic function addMessage( $errorId ) {\n+\tpublic function addMessage() {\n \t\t$args = func_get_args();\n \t\t$args = array_map( 'htmlspecialchars', $args );\n-\t\treturn call_user_func_array( [ $this, 'msg' ], $args );\n+\n+\t\tcall_user_func_array( [ $this, 'msg' ], $args );\n \t}\n \n \t/**\n \t * Return the buffer of messages.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Clear the message buffer.\n-\t * @return\tarray\tMessages in the order added.\n+\t * @param bool $clearBuffer\n+\t * @return array\n \t */\n \tpublic function getMessages( $clearBuffer = true ) {\n \t\t$buffer = $this->buffer;\n+\n \t\tif ( $clearBuffer === true ) {\n \t\t\t$this->buffer = [];\n \t\t}\n+\n \t\treturn $buffer;\n \t}\n \n \t/**\n \t * Get a message, with optional parameters\n \t * Parameters from user input must be escaped for HTML *before* passing to this function\n-\t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tMessage ID\n-\t * @return\tstring\n \t */\n \tpublic function msg() {\n \t\t$args = func_get_args();\n \t\t$errorId = array_shift( $args );\n \t\t$errorLevel = floor( $errorId / 1000 );\n \t\t$errorMessageId = $errorId % 1000;\n-\t\tif ( \\DynamicPageListHooks::getDebugLevel() >= $errorLevel ) {\n-\t\t\tif ( \\DynamicPageListHooks::isLikeIntersection() ) {\n-\t\t\t\tif ( $errorId == \\DynamicPageListHooks::FATAL_TOOMANYCATS ) {\n+\n+\t\tif ( DynamicPageListHooks::getDebugLevel() >= $errorLevel ) {\n+\t\t\tif ( DynamicPageListHooks::isLikeIntersection() ) {\n+\t\t\t\tif ( $errorId == DynamicPageListHooks::FATAL_TOOMANYCATS ) {\n \t\t\t\t\t$text = wfMessage( 'intersection_toomanycats', $args )->text();\n-\t\t\t\t} elseif ( $errorId == \\DynamicPageListHooks::FATAL_TOOFEWCATS ) {\n+\t\t\t\t} elseif ( $errorId == DynamicPageListHooks::FATAL_TOOFEWCATS ) {\n \t\t\t\t\t$text = wfMessage( 'intersection_toofewcats', $args )->text();\n-\t\t\t\t} elseif ( $errorId == \\DynamicPageListHooks::WARN_NORESULTS ) {\n+\t\t\t\t} elseif ( $errorId == DynamicPageListHooks::WARN_NORESULTS ) {\n \t\t\t\t\t$text = wfMessage( 'intersection_noresults', $args )->text();\n-\t\t\t\t} elseif ( $errorId == \\DynamicPageListHooks::FATAL_NOSELECTION ) {\n+\t\t\t\t} elseif ( $errorId == DynamicPageListHooks::FATAL_NOSELECTION ) {\n \t\t\t\t\t$text = wfMessage( 'intersection_noincludecats', $args )->text();\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( empty( $text ) ) {\n \t\t\t\t$text = wfMessage( 'dpl_log_' . $errorMessageId, $args )->text();\n \t\t\t}\n-\t\t\t$this->buffer[] = '<p>Extension:DynamicPageList (DPL), version ' . DPL_VERSION . ': ' . $text . '</p>';\n+\n+\t\t\t$this->buffer[] = '<p>Extension:DynamicPageList (DPL), version ' . DynamicPageListHooks::getVersion() . ': ' . $text . '</p>';\n \t\t}\n-\t\treturn false;\n \t}\n }"
        },
        {
          "filename": "includes/Parameters.php",
          "status": "modified",
          "additions": 289,
          "deletions": 178,
          "patch": "@@ -1,17 +1,12 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Variables Class\n- *\n- * @author IlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith\n- * @license GPL-2.0-or-later\n- * @package DynamicPageList3\n- *\n- */\n \n namespace DPL;\n \n use MediaWiki\\MediaWikiServices;\n+use MWException;\n+use PermissionsError;\n+use RequestContext;\n+use Title;\n \n class Parameters extends ParametersData {\n \t/**\n@@ -42,21 +37,17 @@ class Parameters extends ParametersData {\n \t */\n \tprivate $parametersProcessed = [];\n \n-\t/**\n-\t * Main Constructor\n-\t *\n-\t * @return void\n-\t */\n \tpublic function __construct() {\n \t\tparent::__construct();\n+\n \t\t$this->setDefaults();\n \t}\n \n \t/**\n \t * Handle simple parameter functions.\n \t *\n-\t * @param string $parameter Function(Parameter) Called\n-\t * @param string $arguments Function Arguments\n+\t * @param string $parameter\n+\t * @param mixed $arguments\n \t * @return bool\n \t */\n \tpublic function __call( $parameter, $arguments ) {\n@@ -68,16 +59,17 @@ public function __call( $parameter, $arguments ) {\n \n \t\t// Check permission to use this parameter.\n \t\tif ( array_key_exists( 'permission', $parameterData ) ) {\n-\t\t\tglobal $wgUser;\n-\t\t\tif ( !$wgUser->isAllowed( $parameterData['permission'] ) ) {\n-\t\t\t\tthrow new \\PermissionsError( $parameterData['permission'] );\n-\t\t\t\treturn;\n+\t\t\t$user = RequestContext::getMain()->getUser();\n+\n+\t\t\tif ( !$user->isAllowed( $parameterData['permission'] ) ) {\n+\t\t\t\tthrow new PermissionsError( $parameterData['permission'] );\n \t\t\t}\n \t\t}\n \n-\t\t// Subvert to the real function if it exists.  This keeps code elsewhere clean from needed to check if it exists first.\n-\t\t$function = \"_\" . $parameter;\n+\t\t// Subvert to the real function if it exists. This keeps code elsewhere clean from needed to check if it exists first.\n+\t\t$function = '_' . $parameter;\n \t\t$this->parametersProcessed[$parameter] = true;\n+\n \t\tif ( method_exists( $this, $function ) ) {\n \t\t\treturn call_user_func_array( [ $this, $function ], $arguments );\n \t\t}\n@@ -118,6 +110,7 @@ public function __call( $parameter, $arguments ) {\n \t\t\t// Booleans\n \t\t\tif ( array_key_exists( 'boolean', $parameterData ) && $parameterData['boolean'] === true ) {\n \t\t\t\t$option = $this->filterBoolean( $option );\n+\n \t\t\t\tif ( $option === null ) {\n \t\t\t\t\t$success = false;\n \t\t\t\t}\n@@ -126,6 +119,7 @@ public function __call( $parameter, $arguments ) {\n \t\t\t// Timestamps\n \t\t\tif ( array_key_exists( 'timestamp', $parameterData ) && $parameterData['timestamp'] === true ) {\n \t\t\t\t$option = strtolower( $option );\n+\n \t\t\t\tswitch ( $option ) {\n \t\t\t\t\tcase 'today':\n \t\t\t\t\tcase 'last hour':\n@@ -148,10 +142,13 @@ public function __call( $parameter, $arguments ) {\n \t\t\t// List of Pages\n \t\t\tif ( array_key_exists( 'page_name_list', $parameterData ) && $parameterData['page_name_list'] === true ) {\n \t\t\t\t$pageGroups = $this->getParameter( $parameter );\n+\n \t\t\t\tif ( !is_array( $pageGroups ) ) {\n \t\t\t\t\t$pageGroups = [];\n \t\t\t\t}\n+\n \t\t\t\t$pages = $this->getPageNameList( $option, (bool)$parameterData['page_name_must_exist'] );\n+\n \t\t\t\tif ( $pages === false ) {\n \t\t\t\t\t$success = false;\n \t\t\t\t} else {\n@@ -163,7 +160,7 @@ public function __call( $parameter, $arguments ) {\n \t\t\t// Regex Pattern Matching\n \t\t\tif ( array_key_exists( 'pattern', $parameterData ) ) {\n \t\t\t\tif ( preg_match( $parameterData['pattern'], $option, $matches ) ) {\n-\t\t\t\t\t//Nuke the total pattern match off the beginning of the array.\n+\t\t\t\t\t// Nuke the total pattern match off the beginning of the array.\n \t\t\t\t\tarray_shift( $matches );\n \t\t\t\t\t$option = $matches;\n \t\t\t\t} else {\n@@ -177,15 +174,15 @@ public function __call( $parameter, $arguments ) {\n \t\t\t}\n \n \t\t\t// If none of the above checks marked this as a failure then set it.\n-\t\t\tif ( $success === true ) {\n+\t\t\tif ( $success ) {\n \t\t\t\t$this->setParameter( $parameter, $option );\n \n-\t\t\t\t//Set that criteria was found for a selection.\n+\t\t\t\t// Set that criteria was found for a selection.\n \t\t\t\tif ( array_key_exists( 'set_criteria_found', $parameterData ) && $parameterData['set_criteria_found'] === true ) {\n \t\t\t\t\t$this->setSelectionCriteriaFound( true );\n \t\t\t\t}\n \n-\t\t\t\t//Set open references conflict possibility.\n+\t\t\t\t// Set open references conflict possibility.\n \t\t\t\tif ( array_key_exists( 'open_ref_conflict', $parameterData ) && $parameterData['open_ref_conflict'] === true ) {\n \t\t\t\t\t$this->setOpenReferencesConflict( true );\n \t\t\t\t}\n@@ -197,28 +194,29 @@ public function __call( $parameter, $arguments ) {\n \n \t/**\n \t * Sort cleaned parameter arrays by priority.\n-\t * Users can not be told to put the parameters into a specific order each time.  Some parameters are dependent on each other coming in a certain order due to some procedural legacy issues.\n+\t * Users can not be told to put the parameters into a specific order each time. Some parameters are dependent on each other coming in a certain order due to some procedural legacy issues.\n \t *\n \t * @param array\t$parameters\n \t * @return array\n \t */\n \tpublic static function sortByPriority( $parameters ) {\n \t\tif ( !is_array( $parameters ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': A non-array was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': A non-array was passed.' );\n \t\t}\n-\t\t//'category' to get category headings first for ordermethod.\n-\t\t//'include'/'includepage' to make sure section labels are ready for 'table'.\n+\n+\t\t// 'category' to get category headings first for ordermethod.\n+\t\t// 'include'/'includepage' to make sure section labels are ready for 'table'.\n \t\t$priority = [\n-\t\t\t'distinct'\t\t\t=> 1,\n-\t\t\t'openreferences'\t=> 2,\n-\t\t\t'ignorecase'\t\t=> 3,\n-\t\t\t'category'\t\t\t=> 4,\n-\t\t\t'title'\t\t\t\t=> 5,\n-\t\t\t'goal'\t\t\t\t=> 6,\n-\t\t\t'ordercollation'\t=> 7,\n-\t\t\t'ordermethod'\t\t=> 8,\n-\t\t\t'includepage'\t\t=> 9,\n-\t\t\t'include'\t\t\t=> 10\n+\t\t\t'distinct' => 1,\n+\t\t\t'openreferences' => 2,\n+\t\t\t'ignorecase' => 3,\n+\t\t\t'category' => 4,\n+\t\t\t'title' => 5,\n+\t\t\t'goal' => 6,\n+\t\t\t'ordercollation' => 7,\n+\t\t\t'ordermethod' => 8,\n+\t\t\t'includepage' => 9,\n+\t\t\t'include' => 10\n \t\t];\n \n \t\t$_first = [];\n@@ -237,7 +235,7 @@ public static function sortByPriority( $parameters ) {\n \t/**\n \t * Set Selection Criteria Found\n \t *\n-\t * @param bool $found|true\n+\t * @param bool $found\n \t * @return void\n \t */\n \tprivate function setSelectionCriteriaFound( $found = true ) {\n@@ -282,9 +280,6 @@ public function isOpenReferencesConflict() {\n \n \t/**\n \t * Set default parameters based on ParametersData.\n-\t *\n-\t * @private\n-\t * @return void\n \t */\n \tprivate function setDefaults() {\n \t\t$this->setParameter( 'defaulttemplatesuffix', '.default' );\n@@ -293,8 +288,9 @@ private function setDefaults() {\n \t\tforeach ( $parameters as $parameter ) {\n \t\t\tif ( $this->getData( $parameter )['default'] !== null && !( $this->getData( $parameter )['default'] === false && $this->getData( $parameter )['boolean'] === true ) ) {\n \t\t\t\tif ( $parameter == 'debug' ) {\n-\t\t\t\t\t\\DynamicPageListHooks::setDebugLevel( $this->getData( $parameter )['default'] );\n+\t\t\t\t\tDynamicPageListHooks::setDebugLevel( $this->getData( $parameter )['default'] );\n \t\t\t\t}\n+\n \t\t\t\t$this->setParameter( $parameter, $this->getData( $parameter )['default'] );\n \t\t\t}\n \t\t}\n@@ -305,7 +301,6 @@ private function setDefaults() {\n \t *\n \t * @param string $parameter\n \t * @param mixed\t$option\n-\t * @return void\n \t */\n \tpublic function setParameter( $parameter, $option ) {\n \t\t$this->parameterOptions[$parameter] = $option;\n@@ -324,7 +319,7 @@ public function getParameter( $parameter ) {\n \t/**\n \t * Get all parameters.\n \t *\n-\t * @return array Parameter => Options\n+\t * @return array\n \t */\n \tpublic function getAllParameters() {\n \t\treturn self::sortByPriority( $this->parameterOptions );\n@@ -333,7 +328,7 @@ public function getAllParameters() {\n \t/**\n \t * Filter a standard boolean like value into an actual boolean.\n \t *\n-\t * @param mixed\tInteger or string to evaluated through filter_var().\n+\t * @param int|string|bool $boolean\n \t * @return bool\n \t */\n \tpublic function filterBoolean( $boolean ) {\n@@ -343,9 +338,8 @@ public function filterBoolean( $boolean ) {\n \t/**\n \t * Strip <html> tags.\n \t *\n-\t * @private\n-\t * @param string $text Dirty Text\n-\t * @return string $text Clean Text\n+\t * @param string $text\n+\t * @return string\n \t */\n \tprivate function stripHtmlTags( $text ) {\n \t\t$text = preg_replace( \"#<.*?html.*?>#is\", \"\", $text );\n@@ -356,25 +350,29 @@ private function stripHtmlTags( $text ) {\n \t/**\n \t * Get a list of valid page names.\n \t *\n-\t * @private\n-\t * @param string Raw Text of Pages\n-\t * @param bool [Optional] Each Title MUST Exist\n-\t * @return mixed List of page titles or false on error.\n+\t * @param string $text\n+\t * @param bool $mustExist\n+\t * @return array|bool\n \t */\n \tprivate function getPageNameList( $text, $mustExist = true ) {\n \t\t$list = [];\n \t\t$pages = explode( '|', trim( $text ) );\n+\n \t\tforeach ( $pages as $page ) {\n \t\t\t$page = trim( $page );\n-\t\t\t$page = rtrim( $page, '\\\\' ); //This was fixed from the original code, but I am not sure what its intended purpose was.\n+\t\t\t$page = rtrim( $page, '\\\\' );\n+\n \t\t\tif ( empty( $page ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n+\n \t\t\tif ( $mustExist === true ) {\n-\t\t\t\t$title = \\Title::newFromText( $page );\n+\t\t\t\t$title = Title::newFromText( $page );\n+\n \t\t\t\tif ( !$title ) {\n \t\t\t\t\treturn false;\n \t\t\t\t}\n+\n \t\t\t\t$list[] = $title;\n \t\t\t} else {\n \t\t\t\t$list[] = $page;\n@@ -387,9 +385,8 @@ private function getPageNameList( $text, $mustExist = true ) {\n \t/**\n \t * Check if a regular expression is valid.\n \t *\n-\t * @private\n-\t * @param mixed\tRegular Expression(s) in an array or a single expression in a string.\n-\t * @param bool Is this a database REGEXP?\n+\t * @param array|string $regexes\n+\t * @param bool $forDb\n \t * @return bool\n \t */\n \tprivate function isRegexValid( $regexes, $forDb = false ) {\n@@ -401,11 +398,17 @@ private function isRegexValid( $regexes, $forDb = false ) {\n \t\t\tif ( empty( trim( $regex ) ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n+\n \t\t\tif ( $forDb ) {\n \t\t\t\t$regex = '#' . str_replace( '#', '\\#', $regex ) . '#';\n \t\t\t}\n-\t\t\t//Purposely silencing the errors here since we are testing if preg_match would throw an error due to a bad regex from user input.\n+\n+\t\t\t// Purposely silencing the errors here since we are testing if preg_match\n+\t\t\t// would throw an error due to a bad regex from user input.\n+\n+\t\t\t// phpcs:ignore Generic.PHP.NoSilencedErrors.Discouraged\n \t\t\tif ( @preg_match( $regex, null ) === false ) {\n+\t\t\t\t// @phan-suppress-previous-line PhanParamSuspiciousOrder, PhanTypeMismatchArgumentInternalProbablyReal\n \t\t\t\treturn false;\n \t\t\t}\n \t\t}\n@@ -416,39 +419,45 @@ private function isRegexValid( $regexes, $forDb = false ) {\n \t/**\n \t * Clean and test 'category' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool Success\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _category( $option ) {\n \t\t$option = trim( $option );\n+\n \t\tif ( empty( $option ) ) {\n \t\t\treturn false;\n \t\t}\n \n \t\t// Init array of categories to include\n \t\t$categories = [];\n-\t\t$heading    = false;\n+\t\t$heading = false;\n \t\t$notHeading = false;\n+\n \t\tif ( substr( $option, 0, 1 ) == '+' ) { // categories are headings\n \t\t\t$heading = true;\n \t\t\t$option = ltrim( $option, '+' );\n \t\t}\n+\n \t\tif ( substr( $option, 0, 1 ) == '-' ) { // categories are NOT headings\n \t\t\t$notHeading = true;\n \t\t\t$option = ltrim( $option, '-' );\n \t\t}\n \n-\t\t//We expand html entities because they contain an '& 'which would be interpreted as an AND condition\n+\t\t// We expand html entities because they contain an '& 'which would be interpreted as an AND condition\n \t\t$option = html_entity_decode( $option, ENT_QUOTES );\n+\n \t\tif ( strpos( $option, '|' ) !== false ) {\n \t\t\t$parameters = explode( '|', $option );\n \t\t\t$operator = 'OR';\n \t\t} else {\n \t\t\t$parameters = explode( '&', $option );\n \t\t\t$operator = 'AND';\n \t\t}\n+\n \t\tforeach ( $parameters as $parameter ) {\n \t\t\t$parameter = trim( $parameter );\n+\n \t\t\tif ( $parameter === '_none_' || $parameter === '' ) {\n \t\t\t\t$this->setParameter( 'includeuncat', true );\n \t\t\t\t$categories[] = '';\n@@ -461,74 +470,90 @@ public function _category( $option ) {\n \t\t\t\t\t\t$parameter = substr( $parameter, 1 );\n \t\t\t\t\t\t$subCategories = Query::getSubcategories( $parameter, 1 );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$subCategories[] = $parameter;\n \t\t\t\t\tforeach ( $subCategories as $subCategory ) {\n-\t\t\t\t\t\t$title = \\Title::newFromText( $subCategory );\n+\t\t\t\t\t\t$title = Title::newFromText( $subCategory );\n+\n \t\t\t\t\t\tif ( $title !== null ) {\n-\t\t\t\t\t\t\t//The * helper is just like listing \"Category1|SubCategory1\".  This gets hard coded here for this purpose.\n+\t\t\t\t\t\t\t// The * helper is just like listing \"Category1|SubCategory1\". This gets hard coded here for this purpose.\n \t\t\t\t\t\t\t$categories['OR'][] = $title->getDbKey();\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t} else {\n-\t\t\t\t\t$title = \\Title::newFromText( $parameter );\n+\t\t\t\t\t$title = Title::newFromText( $parameter );\n+\n \t\t\t\t\tif ( $title !== null ) {\n \t\t\t\t\t\t$categories[$operator][] = $title->getDbKey();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\tif ( !empty( $categories ) ) {\n \t\t\t$data = $this->getParameter( 'category' );\n-\t\t\t//Do a bunch of data integrity checks to avoid E_NOTICE.\n+\n+\t\t\t// Do a bunch of data integrity checks to avoid E_NOTICE.\n \t\t\tif ( !is_array( $data ) ) {\n \t\t\t\t$data = [];\n \t\t\t}\n+\n \t\t\tif ( !array_key_exists( '=', $data ) || !is_array( $data['='] ) ) {\n \t\t\t\t$data['='] = [];\n \t\t\t}\n+\n \t\t\tforeach ( $categories as $_operator => $_categories ) {\n \t\t\t\tif ( !array_key_exists( $_operator, $data['='] ) || !is_array( $data['='][$_operator] ) ) {\n \t\t\t\t\t$data['='][$_operator] = [];\n \t\t\t\t}\n+\n \t\t\t\t$data['='][$_operator][] = $_categories;\n \t\t\t}\n+\n \t\t\t$this->setParameter( 'category', $data );\n \t\t\tif ( $heading ) {\n \t\t\t\t$this->setParameter( 'catheadings', array_unique( array_merge( ( is_array( $this->getParameter( 'catheadings' ) ) ? $this->getParameter( 'catheadings' ) : [] ), $categories ) ) );\n \t\t\t}\n+\n \t\t\tif ( $notHeading ) {\n \t\t\t\t$this->setParameter( 'catnotheadings', array_unique( array_merge( ( is_array( $this->getParameter( 'catnotheadings' ) ) ? $this->getParameter( 'catnotheadings' ) : [] ), $categories ) ) );\n \t\t\t}\n+\n \t\t\t$this->setOpenReferencesConflict( true );\n+\n \t\t\treturn true;\n \t\t}\n+\n \t\treturn false;\n \t}\n \n \t/**\n \t * Clean and test 'categoryregexp' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool Success\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _categoryregexp( $option ) {\n \t\tif ( !$this->isRegexValid( $option, true ) ) {\n \t\t\treturn false;\n \t\t}\n \n \t\t$data = $this->getParameter( 'category' );\n-\t\t//REGEXP input only supports AND operator.\n-\t\t$data['REGEXP']['AND'][] = [ $option ]; //Wrapped in an array since the category Query handler expects an array.\n+\n+\t\t// REGEXP input only supports AND operator.\n+\t\t$data['REGEXP']['AND'][] = [ $option ];\n+\n \t\t$this->setParameter( 'category', $data );\n \t\t$this->setOpenReferencesConflict( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'categorymatch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool Success\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _categorymatch( $option ) {\n \t\tif ( strpos( $option, '|' ) !== false ) {\n@@ -545,34 +570,40 @@ public function _categorymatch( $option ) {\n \t\t}\n \n \t\t$data['LIKE'][$operator][] = $newMatches;\n+\n \t\t$this->setParameter( 'category', $data );\n \t\t$this->setOpenReferencesConflict( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'notcategory' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _notcategory( $option ) {\n-\t\t$title = \\Title::newFromText( $option );\n+\t\t$title = Title::newFromText( $option );\n+\n \t\tif ( $title !== null ) {\n \t\t\t$data = $this->getParameter( 'notcategory' );\n \t\t\t$data['='][] = $title->getDbKey();\n+\n \t\t\t$this->setParameter( 'notcategory', $data );\n \t\t\t$this->setOpenReferencesConflict( true );\n+\n \t\t\treturn true;\n \t\t}\n+\n \t\treturn false;\n \t}\n \n \t/**\n \t * Clean and test 'notcategoryregexp' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _notcategoryregexp( $option ) {\n \t\tif ( !$this->isRegexValid( $option, true ) ) {\n@@ -581,48 +612,56 @@ public function _notcategoryregexp( $option ) {\n \n \t\t$data = $this->getParameter( 'notcategory' );\n \t\t$data['regexp'][] = $option;\n+\n \t\t$this->setParameter( 'notcategory', $data );\n \t\t$this->setOpenReferencesConflict( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'notcategorymatch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _notcategorymatch( $option ) {\n \t\t$data = $this->getParameter( 'notcategory' );\n-\t\tif ( !isset( $data['like'] ) || !is_array( $data['like'] ) ) {\n+\n+\t\tif ( !is_array( $data['like'] ?? false ) ) {\n \t\t\t$data['like'] = [];\n \t\t}\n+\n \t\t$newMatches = explode( '|', $option );\n \t\t$data['like'] = array_merge( $data['like'], $newMatches );\n+\n \t\t$this->setParameter( 'notcategory', $data );\n \t\t$this->setOpenReferencesConflict( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'count' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string|int $option\n+\t * @return bool\n \t */\n \tpublic function _count( $option ) {\n \t\tif ( !Config::getSetting( 'allowUnlimitedResults' ) && $option <= Config::getSetting( 'maxResultCount' ) && $option > 0 ) {\n \t\t\t$this->setParameter( 'count', intval( $option ) );\n+\n \t\t\treturn true;\n \t\t}\n+\n \t\treturn false;\n \t}\n \n \t/**\n \t * Clean and test 'namespace' parameter.\n \t *\n-\t * @param string Option passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _namespace( $option ) {\n \t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n@@ -631,24 +670,28 @@ public function _namespace( $option ) {\n \t\tforeach ( $extraParams as $parameter ) {\n \t\t\t$parameter = trim( $parameter );\n \t\t\t$namespaceId = $contLang->getNsIndex( $parameter );\n+\n \t\t\tif ( $namespaceId === false || ( is_array( Config::getSetting( 'allowedNamespaces' ) ) && !in_array( $parameter, Config::getSetting( 'allowedNamespaces' ) ) ) ) {\n-\t\t\t\t//Let the user know this namespace is not allowed or does not exist.\n+\t\t\t\t// Let the user know this namespace is not allowed or does not exist.\n \t\t\t\treturn false;\n \t\t\t}\n+\n \t\t\t$data = $this->getParameter( 'namespace' );\n \t\t\t$data[] = $namespaceId;\n \t\t\t$data = array_unique( $data );\n+\n \t\t\t$this->setParameter( 'namespace', $data );\n \t\t\t$this->setSelectionCriteriaFound( true );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'notnamespace' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _notnamespace( $option ) {\n \t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n@@ -657,32 +700,37 @@ public function _notnamespace( $option ) {\n \t\tforeach ( $extraParams as $parameter ) {\n \t\t\t$parameter = trim( $parameter );\n \t\t\t$namespaceId = $contLang->getNsIndex( $parameter );\n+\n \t\t\tif ( $namespaceId === false ) {\n-\t\t\t\t//Let the user know this namespace is not allowed or does not exist.\n+\t\t\t\t// Let the user know this namespace is not allowed or does not exist.\n \t\t\t\treturn false;\n \t\t\t}\n+\n \t\t\t$data = $this->getParameter( 'notnamespace' );\n \t\t\t$data[] = $namespaceId;\n \t\t\t$data = array_unique( $data );\n+\n \t\t\t$this->setParameter( 'notnamespace', $data );\n \t\t\t$this->setSelectionCriteriaFound( true );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'openreferences' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _openreferences( $option ) {\n \t\t$option = $this->filterBoolean( $option );\n+\n \t\tif ( $option === null ) {\n \t\t\treturn false;\n \t\t}\n \n-\t\t//Force 'ordermethod' back to none.\n+\t\t// Force 'ordermethod' back to none.\n \t\t$this->setParameter( 'ordermethod', [ 'none' ] );\n \t\t$this->setParameter( 'openreferences', $option );\n \n@@ -692,12 +740,13 @@ public function _openreferences( $option ) {\n \t/**\n \t * Clean and test 'ordermethod' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _ordermethod( $option ) {\n \t\t$methods = explode( ',', $option );\n \t\t$success = true;\n+\n \t\tforeach ( $methods as $method ) {\n \t\t\tif ( !in_array( $method, $this->getData( 'ordermethod' )['values'] ) ) {\n \t\t\t\treturn false;\n@@ -715,12 +764,12 @@ public function _ordermethod( $option ) {\n \t/**\n \t * Clean and test 'mode' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _mode( $option ) {\n \t\tif ( in_array( $option, $this->getData( 'mode' )['values'] ) ) {\n-\t\t\t//'none' mode is implemented as a specific submode of 'inline' with <br/> as inline text\n+\t\t\t// 'none' mode is implemented as a specific submode of 'inline' with <br/> as inline text\n \t\t\tif ( $option == 'none' ) {\n \t\t\t\t$this->setParameter( 'mode', 'inline' );\n \t\t\t\t$this->setParameter( 'inlinetext', '<br/>' );\n@@ -731,6 +780,7 @@ public function _mode( $option ) {\n \t\t\t} else {\n \t\t\t\t$this->setParameter( 'mode', $option );\n \t\t\t}\n+\n \t\t\treturn true;\n \t\t} else {\n \t\t\treturn false;\n@@ -740,26 +790,28 @@ public function _mode( $option ) {\n \t/**\n \t * Clean and test 'distinct' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _distinct( $option ) {\n \t\t$boolean = $this->filterBoolean( $option );\n+\n \t\tif ( $option == 'strict' ) {\n \t\t\t$this->setParameter( 'distinctresultset', 'strict' );\n \t\t} elseif ( $boolean !== null ) {\n \t\t\t$this->setParameter( 'distinctresultset', $boolean );\n \t\t} else {\n \t\t\treturn false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'ordercollation' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _ordercollation( $option ) {\n \t\tif ( $option == 'bridge' ) {\n@@ -769,6 +821,7 @@ public function _ordercollation( $option ) {\n \t\t} else {\n \t\t\treturn false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n@@ -784,28 +837,32 @@ public function _listseparators() {\n \t/**\n \t * Clean and test 'format' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _format( $option ) {\n-\t\t//Parsing of wikitext will happen at the end of the output phase.  Replace '\\n' in the input by linefeed because wiki syntax depends on linefeeds.\n+\t\t// Parsing of wikitext will happen at the end of the output phase. Replace '\\n' in the input by linefeed because wiki syntax depends on linefeeds.\n \t\t$option = $this->stripHtmlTags( $option );\n \t\t$option = Parse::replaceNewLines( $option );\n+\n \t\t$this->setParameter( 'listseparators', explode( ',', $option, 4 ) );\n-\t\t//Set the 'mode' parameter to userformat automatically.\n+\n+\t\t// Set the 'mode' parameter to userformat automatically.\n \t\t$this->setParameter( 'mode', 'userformat' );\n \t\t$this->setParameter( 'inlinetext', '' );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'title' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _title( $option ) {\n-\t\t$title = \\Title::newFromText( $option );\n+\t\t$title = Title::newFromText( $option );\n+\n \t\tif ( $title ) {\n \t\t\t$data = $this->getParameter( 'title' );\n \t\t\t$data['='][] = str_replace( ' ', '_', $title->getText() );\n@@ -814,54 +871,62 @@ public function _title( $option ) {\n \t\t\t$data = $this->getParameter( 'namespace' );\n \t\t\t$data[] = $title->getNamespace();\n \t\t\t$data = array_unique( $data );\n-\t\t\t$this->setParameter( 'namespace', $data );\n \n+\t\t\t$this->setParameter( 'namespace', $data );\n \t\t\t$this->setParameter( 'mode', 'userformat' );\n+\n \t\t\t$this->setSelectionCriteriaFound( true );\n \t\t\t$this->setOpenReferencesConflict( true );\n+\n \t\t\treturn true;\n \t\t}\n+\n \t\treturn false;\n \t}\n \n \t/**\n \t * Clean and test 'titleregexp' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _titleregexp( $option ) {\n \t\t$data = $this->getParameter( 'title' );\n-\t\tif ( !isset( $data['regexp'] ) || !is_array( $data['regexp'] ) ) {\n+\n+\t\tif ( !is_array( $data['regexp'] ?? false ) ) {\n \t\t\t$data['regexp'] = [];\n \t\t}\n+\n \t\t$newMatches = explode( '|', str_replace( ' ', '\\_', $option ) );\n \n \t\tif ( !$this->isRegexValid( $newMatches, true ) ) {\n \t\t\treturn false;\n \t\t}\n \n \t\t$data['regexp'] = array_merge( $data['regexp'], $newMatches );\n+\n \t\t$this->setParameter( 'title', $data );\n \t\t$this->setSelectionCriteriaFound( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'titlematch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _titlematch( $option ) {\n \t\t$data = $this->getParameter( 'title' );\n \n-\t\tif ( !isset( $data['like'] ) || !is_array( $data['like'] ) ) {\n+\t\tif ( !is_array( $data['like'] ?? false ) ) {\n \t\t\t$data['like'] = [];\n \t\t}\n \n \t\t$newMatches = explode( '|', str_replace( ' ', '\\_', $option ) );\n \t\t$data['like'] = array_merge( $data['like'], $newMatches );\n+\n \t\t$this->setParameter( 'title', $data );\n \t\t$this->setSelectionCriteriaFound( true );\n \n@@ -871,14 +936,16 @@ public function _titlematch( $option ) {\n \t/**\n \t * Clean and test 'nottitleregexp' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _nottitleregexp( $option ) {\n \t\t$data = $this->getParameter( 'nottitle' );\n+\n \t\tif ( !is_array( $data['regexp'] ) ) {\n \t\t\t$data['regexp'] = [];\n \t\t}\n+\n \t\t$newMatches = explode( '|', str_replace( ' ', '\\_', $option ) );\n \t\t$data['regexp'] = array_merge( $data['regexp'], $newMatches );\n \n@@ -888,24 +955,26 @@ public function _nottitleregexp( $option ) {\n \n \t\t$this->setParameter( 'nottitle', $data );\n \t\t$this->setSelectionCriteriaFound( true );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'nottitlematch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _nottitlematch( $option ) {\n \t\t$data = $this->getParameter( 'nottitle' );\n \n-\t\tif ( !isset( $data['like'] ) || !is_array( $data['like'] ) ) {\n+\t\tif ( !is_array( $data['like'] ?? false ) ) {\n \t\t\t$data['like'] = [];\n \t\t}\n \n \t\t$newMatches = explode( '|', str_replace( ' ', '\\_', $option ) );\n \t\t$data['like'] = array_merge( $data['like'], $newMatches );\n+\n \t\t$this->setParameter( 'nottitle', $data );\n \t\t$this->setSelectionCriteriaFound( true );\n \n@@ -915,50 +984,56 @@ public function _nottitlematch( $option ) {\n \t/**\n \t * Clean and test 'scroll' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _scroll( $option ) {\n \t\t$option = $this->filterBoolean( $option );\n \t\t$this->setParameter( 'scroll', $option );\n-\t\t//If scrolling is active we adjust the values for certain other parameters based on URL arguments\n+\n+\t\t// If scrolling is active we adjust the values for certain other parameters based on URL arguments\n \t\tif ( $option === true ) {\n \t\t\tglobal $wgRequest;\n \n-\t\t\t//The 'findTitle' option has argument over the 'fromTitle' argument.\n+\t\t\t// The 'findTitle' option has argument over the 'fromTitle' argument.\n \t\t\t$titlegt = $wgRequest->getVal( 'DPL_findTitle', '' );\n+\n \t\t\tif ( !empty( $titlegt ) ) {\n \t\t\t\t$titlegt = '=_' . ucfirst( $titlegt );\n \t\t\t} else {\n \t\t\t\t$titlegt = $wgRequest->getVal( 'DPL_fromTitle', '' );\n \t\t\t\t$titlegt = ucfirst( $titlegt );\n \t\t\t}\n+\n \t\t\t$this->setParameter( 'titlegt', str_replace( ' ', '_', $titlegt ) );\n \n-\t\t\t//Lets get the 'toTitle' argument.\n+\t\t\t// Lets get the 'toTitle' argument.\n \t\t\t$titlelt = $wgRequest->getVal( 'DPL_toTitle', '' );\n \t\t\t$titlelt = ucfirst( $titlelt );\n+\n \t\t\t$this->setParameter( 'titlelt', str_replace( ' ', '_', $titlelt ) );\n \n-\t\t\t//Make sure the 'scrollDir' arugment is captured.  This is mainly used for the Variables extension and in the header/footer replacements.\n+\t\t\t// Make sure the 'scrollDir' arugment is captured. This is mainly used for the Variables extension and in the header/footer replacements.\n \t\t\t$this->setParameter( 'scrolldir', $wgRequest->getVal( 'DPL_scrollDir', '' ) );\n \n-\t\t\t//Also set count limit from URL if not otherwise set.\n+\t\t\t// Also set count limit from URL if not otherwise set.\n \t\t\t$this->_count( $wgRequest->getInt( 'DPL_count' ) );\n \t\t}\n-\t\t//We do not return false since they could have just left it out.  Who knows why they put the parameter in the list in the first place.\n+\n+\t\t// We do not return false since they could have just left it out. Who knows why they put the parameter in the list in the first place.\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'replaceintitle' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _replaceintitle( $option ) {\n-\t\t//We offer a possibility to replace some part of the title\n+\t\t// We offer a possibility to replace some part of the title\n \t\t$replaceInTitle = explode( ',', $option, 2 );\n+\n \t\tif ( isset( $replaceInTitle[1] ) ) {\n \t\t\t$replaceInTitle[1] = $this->stripHtmlTags( $replaceInTitle[1] );\n \t\t}\n@@ -971,12 +1046,12 @@ public function _replaceintitle( $option ) {\n \t/**\n \t * Clean and test 'debug' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _debug( $option ) {\n \t\tif ( in_array( $option, $this->getData( 'debug' )['values'] ) ) {\n-\t\t\t\\DynamicPageListHooks::setDebugLevel( $option );\n+\t\t\tDynamicPageListHooks::setDebugLevel( $option );\n \t\t} else {\n \t\t\treturn false;\n \t\t}\n@@ -996,8 +1071,8 @@ public function _includepage() {\n \t/**\n \t * Clean and test 'include' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _include( $option ) {\n \t\tif ( !empty( $option ) ) {\n@@ -1006,14 +1081,15 @@ public function _include( $option ) {\n \t\t} else {\n \t\t\treturn false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'includematch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _includematch( $option ) {\n \t\t$regexes = explode( ',', $option );\n@@ -1023,14 +1099,15 @@ public function _includematch( $option ) {\n \t\t}\n \n \t\t$this->setParameter( 'seclabelsmatch', $regexes );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'includematchparsed' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _includematchparsed( $option ) {\n \t\t$regexes = explode( ',', $option );\n@@ -1041,14 +1118,15 @@ public function _includematchparsed( $option ) {\n \n \t\t$this->setParameter( 'incparsed', true );\n \t\t$this->setParameter( 'seclabelsmatch', $regexes );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'includenotmatch' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _includenotmatch( $option ) {\n \t\t$regexes = explode( ',', $option );\n@@ -1058,14 +1136,15 @@ public function _includenotmatch( $option ) {\n \t\t}\n \n \t\t$this->setParameter( 'seclabelsnotmatch', $regexes );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'includenotmatchparsed' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _includenotmatchparsed( $option ) {\n \t\t$regexes = explode( ',', $option );\n@@ -1076,128 +1155,146 @@ public function _includenotmatchparsed( $option ) {\n \n \t\t$this->setParameter( 'incparsed', true );\n \t\t$this->setParameter( 'seclabelsnotmatch', $regexes );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'secseparators' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _secseparators( $option ) {\n-\t\t//We replace '\\n' by newline to support wiki syntax within the section separators\n+\t\t// We replace '\\n' by newline to support wiki syntax within the section separators\n \t\t$this->setParameter( 'secseparators', explode( ',', Parse::replaceNewLines( $option ) ) );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'multisecseparators' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _multisecseparators( $option ) {\n-\t\t//We replace '\\n' by newline to support wiki syntax within the section separators\n+\t\t// We replace '\\n' by newline to support wiki syntax within the section separators\n \t\t$this->setParameter( 'multisecseparators', explode( ',', Parse::replaceNewLines( $option ) ) );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'table' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _table( $option ) {\n \t\t$this->setParameter( 'defaulttemplatesuffix', '' );\n \t\t$this->setParameter( 'mode', 'userformat' );\n \t\t$this->setParameter( 'inlinetext', '' );\n+\n \t\t$withHLink = \"[[%PAGE%|%TITLE%]]\\n|\";\n+\t\t$listSeparators = [];\n \n \t\tforeach ( explode( ',', $option ) as $tabnr => $tab ) {\n \t\t\tif ( $tabnr == 0 ) {\n \t\t\t\tif ( $tab == '' ) {\n \t\t\t\t\t$tab = 'class=wikitable';\n \t\t\t\t}\n+\n \t\t\t\t$listSeparators[0] = '{|' . $tab;\n \t\t\t} else {\n \t\t\t\tif ( $tabnr == 1 && $tab == '-' ) {\n \t\t\t\t\t$withHLink = '';\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n+\n \t\t\t\tif ( $tabnr == 1 && $tab == '' ) {\n \t\t\t\t\t$tab = wfMessage( 'article' )->text();\n \t\t\t\t}\n+\n \t\t\t\t$listSeparators[0] .= \"\\n!{$tab}\";\n \t\t\t}\n \t\t}\n+\n \t\t$listSeparators[1] = '';\n+\n \t\t// the user may have specified the third parameter of 'format' to add meta attributes of articles to the table\n-\t\tif ( !array_key_exists( 2, $listSeparators ) ) {\n-\t\t\t$listSeparators[2] = '';\n-\t\t}\n+\t\t$listSeparators[2] = '';\n+\n \t\t$listSeparators[3] = \"\\n|}\";\n-\t\t//Overwrite 'listseparators'.\n+\n+\t\t// Overwrite 'listseparators'.\n \t\t$this->setParameter( 'listseparators', $listSeparators );\n \n \t\t$sectionLabels = (array)$this->getParameter( 'seclabels' );\n \t\t$sectionSeparators = $this->getParameter( 'secseparators' );\n \t\t$multiSectionSeparators = $this->getParameter( 'multisecseparators' );\n+\n \t\tfor ( $i = 0; $i < count( $sectionLabels ); $i++ ) {\n \t\t\tif ( $i == 0 ) {\n-\t\t\t\t$sectionSeparators[0]\t\t= \"\\n|-\\n|\" . $withHLink; //.\"\\n\";\n-\t\t\t\t$sectionSeparators[1]\t\t= '';\n-\t\t\t\t$multiSectionSeparators[0]\t= \"\\n|-\\n|\" . $withHLink; // .\"\\n\";\n+\t\t\t\t$sectionSeparators[0] = \"\\n|-\\n|\" . $withHLink; // .\"\\n\";\n+\t\t\t\t$sectionSeparators[1] = '';\n+\t\t\t\t$multiSectionSeparators[0] = \"\\n|-\\n|\" . $withHLink; // .\"\\n\";\n \t\t\t} else {\n-\t\t\t\t$sectionSeparators[2 * $i]\t\t= \"\\n|\"; // .\"\\n\";\n-\t\t\t\t$sectionSeparators[2 * $i + 1]\t= '';\n+\t\t\t\t$sectionSeparators[2 * $i] = \"\\n|\"; // .\"\\n\";\n+\t\t\t\t$sectionSeparators[2 * $i + 1] = '';\n+\n \t\t\t\tif ( is_array( $sectionLabels[$i] ) && $sectionLabels[$i][0] == '#' ) {\n \t\t\t\t\t$multiSectionSeparators[$i] = \"\\n----\\n\";\n \t\t\t\t} else {\n \t\t\t\t\t$multiSectionSeparators[$i] = \"<br/>\\n\";\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\t//Overwrite 'secseparators' and 'multisecseparators'.\n+\n+\t\t// Overwrite 'secseparators' and 'multisecseparators'.\n \t\t$this->setParameter( 'secseparators', $sectionSeparators );\n \t\t$this->setParameter( 'multisecseparators', $multiSectionSeparators );\n \n \t\t$this->setParameter( 'table', Parse::replaceNewLines( $option ) );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'tablerow' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _tablerow( $option ) {\n \t\t$option = Parse::replaceNewLines( trim( $option ) );\n+\n \t\tif ( empty( $option ) ) {\n \t\t\t$this->setParameter( 'tablerow', [] );\n \t\t} else {\n \t\t\t$this->setParameter( 'tablerow', explode( ',', $option ) );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'allowcachedresults' parameter.\n \t * This function is necessary for the custom 'yes+warn' option that sets 'warncachedresults'.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool|int|string\n \t */\n \tpublic function _allowcachedresults( $option ) {\n-\t\t//If execAndExit was previously set (i.e. if it is not empty) we will ignore all cache settings which are placed AFTER the execandexit statement thus we make sure that the cache will only become invalid if the query is really executed.\n+\t\t// If execAndExit was previously set (i.e. if it is not empty) we will ignore all cache settings which are placed AFTER the execandexit statement thus we make sure that the cache will only become invalid if the query is really executed.\n \t\tif ( $this->getParameter( 'execandexit' ) === null ) {\n \t\t\tif ( $option === 'yes+warn' ) {\n \t\t\t\t$this->setParameter( 'allowcachedresults', true );\n \t\t\t\t$this->setParameter( 'warncachedresults', true );\n+\n \t\t\t\treturn true;\n \t\t\t}\n+\n \t\t\t$option = $this->filterBoolean( $option );\n \t\t\tif ( $option !== null ) {\n \t\t\t\t$this->setParameter( 'allowcachedresults', $this->filterBoolean( $option ) );\n@@ -1207,31 +1304,35 @@ public function _allowcachedresults( $option ) {\n \t\t} else {\n \t\t\t$this->setParameter( 'allowcachedresults', false );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'fixcategory' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _fixcategory( $option ) {\n-\t\t\\DynamicPageListHooks::fixCategory( $option );\n+\t\tDynamicPageListHooks::fixCategory( $option );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'reset' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _reset( $option ) {\n \t\t$arguments = explode( ',', $option );\n \t\t$reset = [];\n+\n \t\tforeach ( $arguments as $argument ) {\n \t\t\t$argument = trim( $argument );\n+\n \t\t\tif ( empty( $argument ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n@@ -1241,9 +1342,10 @@ public function _reset( $option ) {\n \t\t\t\treturn false;\n \t\t\t} else {\n \t\t\t\tif ( $argument == 'all' || $argument == 'none' ) {\n-\t\t\t\t\t$boolean = ( $argument == 'all' ? true : false );\n+\t\t\t\t\t$boolean = ( $argument == 'all' );\n \t\t\t\t\t$values = array_diff( $values, [ 'all', 'none' ] );\n \t\t\t\t\t$reset = array_flip( $values );\n+\n \t\t\t\t\tforeach ( $reset as $value => $key ) {\n \t\t\t\t\t\t$reset[$value] = $boolean;\n \t\t\t\t\t}\n@@ -1252,35 +1354,42 @@ public function _reset( $option ) {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\t$data = $this->getParameter( 'reset' );\n \t\t$data = array_merge( $data, $reset );\n+\n \t\t$this->setParameter( 'reset', $data );\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Clean and test 'eliminate' parameter.\n \t *\n-\t * @param string Options passed to parameter.\n-\t * @return bool\tSuccess\n+\t * @param string $option\n+\t * @return bool\n \t */\n \tpublic function _eliminate( $option ) {\n \t\t$arguments = explode( ',', $option );\n \t\t$eliminate = [];\n+\n \t\tforeach ( $arguments as $argument ) {\n \t\t\t$argument = trim( $argument );\n+\n \t\t\tif ( empty( $argument ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\t$values = $this->getData( 'eliminate' )['values'];\n+\n \t\t\tif ( !in_array( $argument, $values ) ) {\n \t\t\t\treturn false;\n \t\t\t} else {\n \t\t\t\tif ( $argument == 'all' || $argument == 'none' ) {\n-\t\t\t\t\t$boolean = ( $argument == 'all' ? true : false );\n+\t\t\t\t\t$boolean = ( $argument == 'all' );\n \t\t\t\t\t$values = array_diff( $values, [ 'all', 'none' ] );\n \t\t\t\t\t$eliminate = array_flip( $values );\n+\n \t\t\t\t\tforeach ( $eliminate as $value => $key ) {\n \t\t\t\t\t\t$eliminate[$value] = $boolean;\n \t\t\t\t\t}\n@@ -1289,9 +1398,11 @@ public function _eliminate( $option ) {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\t$data = $this->getParameter( 'eliminate' );\n \t\t$data = array_merge( $data, $eliminate );\n \t\t$this->setParameter( 'eliminate', $data );\n+\n \t\treturn true;\n \t}\n }"
        },
        {
          "filename": "includes/ParametersData.php",
          "status": "modified",
          "additions": 336,
          "deletions": 339,
          "patch": "@@ -1,15 +1,9 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL ParametersData Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n+use MWException;\n+\n class ParametersData {\n \t/**\n \t * Parameter Richness\n@@ -167,72 +161,72 @@ class ParametersData {\n \t */\n \tprivate $data = [\n \t\t'addauthor' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addcategories' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addcontribution' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addeditdate' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addexternallink' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addfirstcategorydate' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addlasteditor' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addpagecounter' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addpagesize' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'addpagetoucheddate' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t'adduser' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \n \t\t// default of allowcachedresults depends on behaveasIntersetion and on LocalSettings ...\n \t\t'allowcachedresults' => [\n-\t\t\t'default'\t\t\t=> true,\n-\t\t\t'boolean'\t\t\t=> true\n+\t\t\t'default' => true,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * search for a page with the same title in another namespace (this is normally the article to a talk page)\n \t\t */\n \t\t'articlecategory' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'db_format'\t\t\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'db_format' => true\n \t\t],\n \n \t\t/**\n@@ -247,13 +241,13 @@ class ParametersData {\n \t\t * @todo define 'category' options (retrieve list of categories from 'categorylinks' table?)\n \t\t */\n \t\t'category' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t'categorymatch' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t'categoryregexp' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t/**\n \t\t * Min and Max of categories allowed for an article\n@@ -266,55 +260,55 @@ class ParametersData {\n \t\t * hiddencategories\n \t\t */\n \t\t'hiddencategories' => [\n-\t\t\t'default'\t=> 'include',\n-\t\t\t'values'\t=> [ 'include', 'exclude', 'only' ]\n+\t\t\t'default' => 'include',\n+\t\t\t'values' => [ 'include', 'exclude', 'only' ]\n \t\t],\n \t\t/**\n \t\t * Perform the command and do not query the database.\n \t\t */\n \t\t'execandexit' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \n \t\t/**\n \t\t * number of results which shall be skipped before display starts\n \t\t * default is 0\n \t\t */\n \t\t'offset' => [\n-\t\t\t'default'\t=> 0,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 0,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * Max of results to display, selection is based on random.\n \t\t */\n \t\t'count' => [\n-\t\t\t'default'\t=> 500,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 500,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * Max number of results to display, selection is based on random.\n \t\t */\n \t\t'randomcount' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * shall the result set be distinct (=default) or not?\n \t\t */\n \t\t'distinct' => [\n-\t\t\t'default'\t=> true,\n-\t\t\t'values'\t=> [ 'strict' ]\n+\t\t\t'default' => true,\n+\t\t\t'values' => [ 'strict' ]\n \t\t],\n \t\t'cacheperiod' => [\n-\t\t\t'default'\t=> 3600, // Number of seconds, default one day at 86400 seconds.\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 3600,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * number of columns for output, default is 1\n \t\t */\n \t\t'columns' => [\n-\t\t\t'default'\t=> 1,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 1,\n+\t\t\t'integer' => true\n \t\t],\n \n \t\t/**\n@@ -327,8 +321,8 @@ class ParametersData {\n \t\t * - 5: <nowiki> tags around the ouput\n \t\t */\n \t\t'debug' => [\n-\t\t\t'default'\t=> 1,\n-\t\t\t'values'\t=> [ 0, 1, 2, 3, 4, 5 ]\n+\t\t\t'default' => 1,\n+\t\t\t'values' => [ 0, 1, 2, 3, 4, 5 ]\n \t\t],\n \n \t\t/**\n@@ -341,8 +335,8 @@ class ParametersData {\n \t\t * all\t\t   all of the above\n \t\t */\n \t\t'eliminate' => [\n-\t\t\t'default'\t=> [],\n-\t\t\t'values'\t=> [\n+\t\t\t'default' => [],\n+\t\t\t'values' => [\n \t\t\t\t'categories',\n \t\t\t\t'templates',\n \t\t\t\t'links',\n@@ -353,22 +347,22 @@ class ParametersData {\n \t\t],\n \n \t\t'format' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \n \t\t'goal' => [\n-\t\t\t'default'\t=> 'pages',\n-\t\t\t'values'\t=> [\n+\t\t\t'default' => 'pages',\n+\t\t\t'values' => [\n \t\t\t\t'pages',\n \t\t\t\t'categories'\n \t\t\t],\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \n-\t\t//Include the lowercase variants of header tiers for ease of use.\n+\t\t// Include the lowercase variants of header tiers for ease of use.\n \t\t'headingmode' => [\n-\t\t\t'default'\t=> 'none',\n-\t\t\t'values'\t=> [\n+\t\t\t'default' => 'none',\n+\t\t\t'values' => [\n \t\t\t\t'H1',\n \t\t\t\t'H2',\n \t\t\t\t'H3',\n@@ -381,22 +375,22 @@ class ParametersData {\n \t\t\t\t'h4',\n \t\t\t\t'h5',\n \t\t\t\t'h6',\n-\t\t\t\t//'header',\n+\t\t\t\t// 'header',\n \t\t\t\t'definition',\n \t\t\t\t'none',\n \t\t\t\t'ordered',\n \t\t\t\t'unordered'\n \t\t\t],\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \n \t\t/**\n \t\t * we can display the number of articles within a heading group\n \t\t */\n \t\t'headingcount' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \n \t\t/**\n@@ -406,7 +400,7 @@ class ParametersData {\n \t\t * Example: hitemattr= class=\"topmenuli\" style=\"color: red;\"\n \t\t */\n \t\t'hitemattr' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \n \t\t/**\n@@ -416,7 +410,7 @@ class ParametersData {\n \t\t * Example: hlistattr= class=\"topmenul\" id=\"dmenu\"\n \t\t */\n \t\t'hlistattr' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \n \t\t/**\n@@ -434,67 +428,67 @@ class ParametersData {\n \t\t */\n \n \t\t'includepage' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \n \t\t/**\n \t\t * make comparisons (linksto, linksfrom ) case insensitive\n \t\t */\n \t\t'ignorecase' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n-\t\t'include'\t\t\t   => [\n-\t\t\t'default'\t=> null\n+\t\t'include' => [\n+\t\t\t'default' => null\n \t\t],\n \n \t\t/**\n \t\t * includesubpages\n \t\t */\n \t\t'includesubpages' => [\n-\t\t\t'default'\t=> true,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => true,\n+\t\t\t'boolean' => true\n \t\t],\n \n \t\t/**\n \t\t * includematch=..,..\t allows to specify regular expressions which must match the included contents\n \t\t */\n \t\t'includematch' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'includematchparsed' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * includenotmatch=..,..\tallows to specify regular expressions which must NOT match the included contents\n \t\t */\n \t\t'includenotmatch' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'includenotmatchparsed' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t'includetrim' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * Inline text is some wiki text used to separate list items with 'mode=inline'.\n \t\t */\n \t\t'inlinetext' => [\n-\t\t\t'default'\t\t=> '&#160;-&#160;',\n-\t\t\t'strip_html'\t=> true\n+\t\t\t'default' => '&#160;-&#160;',\n+\t\t\t'strip_html' => true\n \t\t],\n \t\t/**\n \t\t * Max # characters of included page to display.\n \t\t * Null means no limit.\n \t\t * If we include sections the limit will apply to each section.\n \t\t */\n \t\t'includemaxlength' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * Attributes for HTML list items, depending on 'mode' ('li' for ordered/unordered, 'span' for others).\n@@ -503,7 +497,7 @@ class ParametersData {\n \t\t * Example: itemattr= class=\"submenuli\" style=\"color: red;\"\n \t\t */\n \t\t'itemattr' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t/**\n \t\t * listseparators is an array of four tags (in wiki syntax) which defines the output of DPL\n@@ -517,7 +511,7 @@ class ParametersData {\n \t\t *\t\t   : listseparators={|,\\n|-\\n|[[%PAGE%]],,\\n|}\n \t\t */\n \t\t'listseparators' => [\n-\t\t\t'default'\t=> []\n+\t\t\t'default' => []\n \t\t],\n \t\t/**\n \t\t * sequence of four wiki tags (separated by \",\") to be used together with mode = 'userformat'\n@@ -526,176 +520,176 @@ class ParametersData {\n \t\t *\t example:\tlistattr=<ul>,<li>,</li>,</ul>\n \t\t */\n \t\t'listattr' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which can reached via a link from the specified pages.\n \t\t * Examples:   linksfrom=my article|your article\n \t\t */\n \t\t'linksfrom' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which cannot be reached via a link from the specified pages.\n \t\t * Examples:   notlinksfrom=my article|your article\n \t\t */\n \t\t'notlinksfrom' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which contain a reference to one of the specified pages.\n \t\t * Examples:   linksto=my article|your article\t ,\tlinksto=Template:my template   ,  linksto = {{FULLPAGENAME}}\n \t\t */\n \t\t'linksto' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which do not contain a reference to the specified page.\n \t\t */\n \t\t'notlinksto' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which contain an external reference that conatins a certain pattern\n \t\t * Examples:   linkstoexternal= www.xyz.com|www.xyz2.com\n \t\t */\n \t\t'linkstoexternal' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> false,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => false,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which use one of the specified images.\n \t\t * Examples:   imageused=Image:my image|Image:your image\n \t\t */\n \t\t'imageused' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t /**\n \t\t  * this parameter restricts the output to images which are used (contained) by one of the specified pages.\n \t\t  * Examples:   imagecontainer=my article|your article\n \t\t  */\n \t\t'imagecontainer' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> false,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => false,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which use the specified template.\n \t\t * Examples:   uses=Template:my template\n \t\t */\n \t\t'uses' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to articles which do not use the specified template.\n \t\t * Examples:   notuses=Template:my template\n \t\t */\n \t\t'notuses' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * this parameter restricts the output to the template used by the specified page.\n \t\t */\n \t\t'usedby' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'page_name_list'\t\t=> true,\n-\t\t\t'page_name_must_exist'\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'page_name_list' => true,\n+\t\t\t'page_name_must_exist' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must be the first editor of the pages we select\n \t\t */\n-\t\t'createdby'\t=> [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t'createdby' => [\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must not be the first editor of the pages we select\n \t\t */\n-\t\t'notcreatedby'\t=> [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t'notcreatedby' => [\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must be among the editors of the pages we select\n \t\t */\n-\t\t'modifiedby'\t=> [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t'modifiedby' => [\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must not be among the editors of the pages we select\n \t\t */\n-\t\t'notmodifiedby'\t=> [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t'notmodifiedby' => [\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must be the last editor of the pages we select\n \t\t */\n \t\t'lastmodifiedby' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * allows to specify a username who must not be the last editor of the pages we select\n \t\t */\n-\t\t'notlastmodifiedby'\t=> [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'set_criteria_found'\t=> true,\n-\t\t\t'open_ref_conflict'\t\t=> true,\n-\t\t\t'preserve_case'\t\t\t=> true\n+\t\t'notlastmodifiedby' => [\n+\t\t\t'default' => null,\n+\t\t\t'set_criteria_found' => true,\n+\t\t\t'open_ref_conflict' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * Mode for list of pages (possibly within a heading, see 'headingmode' param).\n \t\t * 'none' mode is implemented as a specific submode of 'inline' with <br /> as inline text\n \t\t * 'userformat' does not produce any html tags unless 'listseparators' are specified\n \t\t */\n \t\t'mode' => [\n-\t\t\t'default'\t=> 'unordered',\n-\t\t\t'values'\t=> [\n+\t\t\t'default' => 'unordered',\n+\t\t\t'values' => [\n \t\t\t\t'category',\n \t\t\t\t'definition',\n \t\t\t\t'gallery',\n@@ -714,17 +708,17 @@ class ParametersData {\n \t\t * 'false'\timages are shown, categories are assigned to the current document\n \t\t */\n \t\t'escapelinks' => [\n-\t\t\t'default'\t=> true,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => true,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * By default the page containingthe query will not be part of the result set.\n \t\t * This can be changed via 'skipthispage=no'. This should be used with care as it may lead to\n \t\t * problems which are hard to track down, esp. in combination with contents transclusion.\n \t\t */\n \t\t'skipthispage' => [\n-\t\t\t'default'\t=> true,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => true,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * namespace= Ns1 | Ns2 | ...\n@@ -733,7 +727,7 @@ class ParametersData {\n \t\t * Magic words allowed.\n \t\t */\n \t\t'namespace' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t/**\n \t\t * notcategory= Cat1\n@@ -743,13 +737,13 @@ class ParametersData {\n \t\t * @todo define 'notcategory' options (retrieve list of categories from 'categorylinks' table?)\n \t\t */\n \t\t'notcategory' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t'notcategorymatch' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t'notcategoryregexp' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t/**\n \t\t * notnamespace= Ns1\n@@ -760,65 +754,65 @@ class ParametersData {\n \t\t * Magic words allowed.\n \t\t */\n \t\t'notnamespace' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t/**\n \t\t * title is the exact name of a page; this is useful if you want to use DPL\n \t\t * just for contents inclusion; mode=userformat is automatically implied with title=\n \t\t */\n \t\t'title' => [\n-\t\t\t'default'\t=> null,\n+\t\t\t'default' => null,\n \t\t],\n \t\t/**\n \t\t * titlematch is a (SQL-LIKE-expression) pattern\n \t\t * which restricts the result to pages matching that pattern\n \t\t */\n \t\t'titlelt' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'db_format'\t\t\t\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'db_format' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t'titlegt' => [\n-\t\t\t'default'\t\t\t\t=> null,\n-\t\t\t'db_format'\t\t\t\t=> true,\n-\t\t\t'set_criteria_found'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'db_format' => true,\n+\t\t\t'set_criteria_found' => true\n \t\t],\n \t\t'scroll' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t'titlematch' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'titleregexp' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'userdateformat' => [\n-\t\t\t'default'\t\t=> 'Y-m-d H:i:s',\n-\t\t\t'strip_html'\t=> true\n+\t\t\t'default' => 'Y-m-d H:i:s',\n+\t\t\t'strip_html' => true\n \t\t],\n \t\t'updaterules' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'permission'\t=> 'dpl_param_update_rules'\n+\t\t\t'default' => null,\n+\t\t\t'permission' => 'dpl_param_update_rules'\n \t\t],\n \t\t'deleterules' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'permission'\t=> 'dpl_param_delete_rules'\n+\t\t\t'default' => null,\n+\t\t\t'permission' => 'dpl_param_delete_rules'\n \t\t],\n \n \t\t/**\n \t\t * nottitlematch is a (SQL-LIKE-expression) pattern\n \t\t * which excludes pages matching that pattern from the result\n \t\t */\n \t\t'nottitlematch' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'nottitleregexp' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t'order' => [\n-\t\t\t'default'\t=> 'ascending',\n-\t\t\t'values'\t=> [ 'ascending', 'descending', 'asc', 'desc' ]\n+\t\t\t'default' => 'ascending',\n+\t\t\t'values' => [ 'ascending', 'descending', 'asc', 'desc' ]\n \t\t],\n \t\t/**\n \t\t * we can specify something like \"latin1_swedish_ci\" for case insensitive sorting\n@@ -831,8 +825,8 @@ class ParametersData {\n \t\t * @todo: add 'ordermethod=category,categoryadd' (for each category CAT, pages ordered by date when page was added to CAT).\n \t\t */\n \t\t'ordermethod' => [\n-\t\t\t'default'\t=> [ 'none' ],\n-\t\t\t'values'\t=> [\n+\t\t\t'default' => [ 'none' ],\n+\t\t\t'values' => [\n \t\t\t\t'counter',\n \t\t\t\t'size',\n \t\t\t\t'category',\n@@ -854,94 +848,94 @@ class ParametersData {\n \t\t * - include: include minor edits\n \t\t */\n \t\t'minoredits' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'values'\t\t\t=> [ 'include', 'exclude' ],\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'values' => [ 'include', 'exclude' ],\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * lastrevisionbefore = select the latest revision which was existent before the specified point in time\n \t\t */\n \t\t'lastrevisionbefore' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'timestamp'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'timestamp' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * allrevisionsbefore = select the revisions which were created before the specified point in time\n \t\t */\n \t\t'allrevisionsbefore' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'timestamp'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'timestamp' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * firstrevisionsince = select the first revision which was created after the specified point in time\n \t\t */\n \t\t'firstrevisionsince' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'timestamp'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'timestamp' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * allrevisionssince = select the latest revisions which were created after the specified point in time\n \t\t */\n \t\t'allrevisionssince' => [\n-\t\t\t'default'\t\t\t=> null,\n-\t\t\t'timestamp'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'timestamp' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * Minimum/Maximum number of revisions required\n \t\t */\n \t\t'minrevisions' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t],\n \t\t'maxrevisions' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t],\n \t\t'suppresserrors' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * noresultsheader / footer is some wiki text which will be output (instead of a warning message)\n \t\t * if the result set is empty; setting 'noresultsheader' to something like ' ' will suppress\n \t\t * the warning about empty result set.\n \t\t */\n \t\t'noresultsheader' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t'noresultsfooter' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * oneresultsheader / footer is some wiki text which will be output\n \t\t * if the result set contains exactly one entry.\n \t\t */\n \t\t'oneresultheader' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t'oneresultfooter' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * openreferences =...\n \t\t * - no: excludes pages which do not exist (=default)\n \t\t * - yes: includes pages which do not exist -- this conflicts with some other options\n \t\t */\n \t\t'openreferences' => [\n-\t\t\t'default'\t=> false,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * redirects =...\n@@ -950,8 +944,8 @@ class ParametersData {\n \t\t * - only: lists only redirect pages in lists (page_is_redirect = 1 only)\n \t\t */\n \t\t'redirects' => [\n-\t\t\t'default'\t=> 'exclude',\n-\t\t\t'values'\t=> [ 'include', 'exclude', 'only' ]\n+\t\t\t'default' => 'exclude',\n+\t\t\t'values' => [ 'include', 'exclude', 'only' ]\n \t\t],\n \t\t/**\n \t\t * stablepages =...\n@@ -960,8 +954,8 @@ class ParametersData {\n \t\t * - only: lists only stable pages in lists\n \t\t */\n \t\t'stablepages' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'values'\t=> [ 'exclude', 'only' ]\n+\t\t\t'default' => null,\n+\t\t\t'values' => [ 'exclude', 'only' ]\n \t\t],\n \t\t/**\n \t\t * qualitypages =...\n@@ -970,23 +964,23 @@ class ParametersData {\n \t\t * - only: lists only quality pages in lists\n \t\t */\n \t\t'qualitypages' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'values'\t=> [ 'exclude', 'only' ]\n+\t\t\t'default' => null,\n+\t\t\t'values' => [ 'exclude', 'only' ]\n \t\t],\n \t\t/**\n \t\t * resultsheader / footer is some wiki text which will be output before / after the result list\n \t\t * (if there is at least one result); if 'oneresultheader / footer' is specified it will only be\n \t\t * used if there are at least TWO results\n \t\t */\n \t\t'resultsheader' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t'resultsfooter' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true,\n-\t\t\t'preserve_case'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true,\n+\t\t\t'preserve_case' => true\n \t\t],\n \t\t/**\n \t\t * reset=..\n@@ -999,7 +993,7 @@ class ParametersData {\n \t\t */\n \t\t'reset' => [\n \t\t\t'default' => [],\n-\t\t\t'values'\t=> [\n+\t\t\t'values' => [\n \t\t\t\t'categories',\n \t\t\t\t'templates',\n \t\t\t\t'links',\n@@ -1021,25 +1015,25 @@ class ParametersData {\n \t\t * Note: a \"row\" is a group of lines for which the heading tags defined in listseparators/format will be repeated\n \t\t */\n \t\t'rows' => [\n-\t\t\t'default'\t=> 1,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 1,\n+\t\t\t'integer' => true\n \t\t],\n \n \t\t/**\n \t\t * Number of elements in a rows for output, default is \"all\"\n \t\t * Note: a \"row\" is a group of lines for which the heading tags defined in listeseparators will be repeated\n \t\t */\n \t\t'rowsize' => [\n-\t\t\t'default'\t=> 0,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 0,\n+\t\t\t'integer' => true\n \t\t],\n \n \t\t/**\n \t\t * The HTML attribute tags(class, cellspacing) used for columns and rows in MediaWiki table markup.\n \t\t */\n \t\t'rowcolformat' => [\n-\t\t\t'default'\t\t=> null,\n-\t\t\t'strip_html'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'strip_html' => true\n \t\t],\n \t\t/**\n \t\t * secseparators  is a sequence of pairs of tags used to separate sections (see \"includepage=name1, name2, ..\")\n@@ -1062,48 +1056,48 @@ class ParametersData {\n \t\t * dominant column\n \t\t */\n \t\t'dominantsection' => [\n-\t\t\t'default'\t=> 0,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => 0,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * showcurid creates a stable link to the current revision of a page\n \t\t */\n \t\t'showcurid' => [\n-\t\t\t'default'\t\t\t=> false,\n-\t\t\t'boolean'\t\t\t=> true,\n-\t\t\t'open_ref_conflict'\t=> true\n+\t\t\t'default' => false,\n+\t\t\t'boolean' => true,\n+\t\t\t'open_ref_conflict' => true\n \t\t],\n \t\t/**\n \t\t * shownamespace decides whether to show the namespace prefix or not\n \t\t */\n \t\t'shownamespace' => [\n-\t\t\t'default'\t=> true,\n-\t\t\t'boolean'\t=> true\n+\t\t\t'default' => true,\n+\t\t\t'boolean' => true\n \t\t],\n \t\t/**\n \t\t * replaceintitle applies a regex replacement to %TITLE%\n \t\t */\n \t\t'replaceintitle' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t/**\n \t\t * table is a short hand for combined values of listseparators, colseparators and mulicolseparators\n \t\t */\n \t\t'table' => [\n-\t\t\t'default'\t=> null\n+\t\t\t'default' => null\n \t\t],\n \t\t/**\n \t\t * tablerow allows to define individual formats for table columns\n \t\t */\n \t\t'tablerow' => [\n-\t\t\t'default'\t=> []\n+\t\t\t'default' => []\n \t\t],\n \t\t/**\n \t\t * The number (starting with 1) of the column to be used for sorting\n \t\t */\n \t\t'tablesortcol' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t],\n \t\t/**\n \t\t * The sorting algorithm for table columns when 'tablesortcol'\n@@ -1112,66 +1106,63 @@ class ParametersData {\n \t\t * - natural: Use PHP natsort()\n \t\t */\n \t\t'tablesortmethod' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'values'\t=> ['standard', 'natural']\n+\t\t\t'default' => null,\n+\t\t\t'values' => [ 'standard', 'natural' ]\n \t\t],\n \t\t/**\n \t\t * Max # characters of page title to display.\n \t\t * Empty value (default) means no limit.\n \t\t * Not applicable to mode=category.\n \t\t */\n \t\t'titlemaxlength' => [\n-\t\t\t'default'\t=> null,\n-\t\t\t'integer'\t=> true\n+\t\t\t'default' => null,\n+\t\t\t'integer' => true\n \t\t]\n \t];\n \n-\t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n-\t */\n \tpublic function __construct() {\n \t\t$this->setRichness( Config::getSetting( 'functionalRichness' ) );\n \n-\t\tif ( \\DynamicPageListHooks::isLikeIntersection() ) {\n+\t\tif ( DynamicPageListHooks::isLikeIntersection() ) {\n \t\t\t$this->data['ordermethod'] = [\n-\t\t\t\t'default'\t=> 'categoryadd',\n-\t\t\t\t'values'\t=> [\n+\t\t\t\t'default' => 'categoryadd',\n+\t\t\t\t'values' => [\n \t\t\t\t\t'categoryadd',\n \t\t\t\t\t'lastedit',\n \t\t\t\t\t'none'\n \t\t\t\t]\n \t\t\t];\n+\n \t\t\t$this->data['order'] = [\n-\t\t\t\t'default'\t=> 'descending',\n-\t\t\t\t'values'\t=> [\n+\t\t\t\t'default' => 'descending',\n+\t\t\t\t'values' => [\n \t\t\t\t\t'ascending',\n \t\t\t\t\t'descending'\n \t\t\t\t]\n \t\t\t];\n+\n \t\t\t$this->data['mode'] = [\n-\t\t\t\t'default'\t=> 'unordered',\n-\t\t\t\t'values'\t=> [\n+\t\t\t\t'default' => 'unordered',\n+\t\t\t\t'values' => [\n \t\t\t\t\t'none',\n \t\t\t\t\t'ordered',\n \t\t\t\t\t'unordered'\n \t\t\t\t]\n \t\t\t];\n+\n \t\t\t$this->data['userdateformat'] = [\n \t\t\t\t'default' => 'Y-m-d: '\n \t\t\t];\n+\n \t\t\t$this->data['allowcachedresults']['default'] = 'true';\n \t\t}\n \t}\n \n \t/**\n \t * Return if the parameter exists.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter name.\n-\t * @return\tboolean\tExists\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function exists( $parameter ) {\n \t\treturn array_key_exists( $parameter, $this->data );\n@@ -1180,9 +1171,8 @@ public function exists( $parameter ) {\n \t/**\n \t * Return data for the supplied parameter.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter name.\n-\t * @return\tmixed\tParameter array or false if it does not exist.\n+\t * @param string $parameter\n+\t * @return mixed\n \t */\n \tpublic function getData( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n@@ -1195,9 +1185,7 @@ public function getData( $parameter ) {\n \t/**\n \t * Sets the current parameter richness.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tInteger level.\n-\t * @return\tvoid\n+\t * @param int $level\n \t */\n \tpublic function setRichness( $level ) {\n \t\t$this->parameterRichness = intval( $level );\n@@ -1206,8 +1194,7 @@ public function setRichness( $level ) {\n \t/**\n \t * Returns the current parameter richness.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\n+\t * @return int\n \t */\n \tpublic function getRichness() {\n \t\treturn $this->parameterRichness;\n@@ -1216,37 +1203,39 @@ public function getRichness() {\n \t/**\n \t * Tests if the function is valid for the current functional richness level.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tFunction to test.\n-\t * @return\tboolean\tValid for this functional richness level.\n+\t * @param string $function\n+\t * @return bool\n \t */\n \tpublic function testRichness( $function ) {\n \t\t$valid = false;\n+\n \t\tfor ( $i = 0; $i <= $this->getRichness(); $i++ ) {\n \t\t\tif ( in_array( $function, self::$parametersForRichnessLevel[$i] ) ) {\n \t\t\t\t$valid = true;\n \t\t\t\tbreak;\n \t\t\t}\n \t\t}\n+\n \t\treturn $valid;\n \t}\n \n \t/**\n \t * Returns all parameters for the current richness level or limited to the optional maximum richness.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\t[Optional] Maximum richness level\n-\t * @return\tarray\tThe functional richness parameters list.\n+\t * @param int|null $level\n+\t * @return array\n \t */\n \tpublic function getParametersForRichness( $level = null ) {\n \t\tif ( $level === null ) {\n \t\t\t$level = $this->getRichness();\n \t\t}\n \n \t\t$parameters = [];\n+\n \t\tfor ( $i = 0; $i <= $level; $i++ ) {\n \t\t\t$parameters = array_merge( $parameters, self::$parametersForRichnessLevel[$i] );\n \t\t}\n+\n \t\tsort( $parameters );\n \n \t\treturn $parameters;\n@@ -1255,136 +1244,144 @@ public function getParametersForRichness( $level = null ) {\n \t/**\n \t * Return the default value for the parameter.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tmixed\n+\t * @param string $parameter\n+\t * @return mixed\n \t */\n \tpublic function getDefault( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'default', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['default'];\n \t\t\t}\n+\n \t\t\treturn null;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Return the acceptable values for the parameter.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tmixed\tArray of allowed values or false that the parameter allows any.\n+\t * @param string $parameter\n+\t * @return mixed\n \t */\n \tpublic function getValues( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'values', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['values'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Does the parameter set that criteria for selection was found?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function setsCriteriaFound( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'set_criteria_found', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['set_criteria_found'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Does the parameter cause an open reference conflict?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function isOpenReferenceConflict( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'open_ref_conflict', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['open_ref_conflict'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Should this parameter preserve the case of the user supplied input?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function shouldPreserveCase( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'preserve_case', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['preserve_case'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Does this parameter take a list of page names?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function isPageNameList( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'page_name_list', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['page_name_list'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Is the parameter supposed to be parsed as a boolean?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function isBoolean( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'boolean', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['boolean'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n \n \t/**\n \t * Is the parameter supposed to be parsed as a Mediawiki timestamp?\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tParameter Name\n-\t * @return\tbool\n+\t * @param string $parameter\n+\t * @return bool\n \t */\n \tpublic function isTimestamp( $parameter ) {\n \t\tif ( array_key_exists( $parameter, $this->data ) ) {\n \t\t\tif ( array_key_exists( 'timestamp', $this->data[$parameter] ) ) {\n \t\t\t\treturn (bool)$this->data[$parameter]['timestamp'];\n \t\t\t}\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tthrow new MWException( __METHOD__ . \": Attempted to load a parameter that does not exist.\" );\n \t}\n }"
        },
        {
          "filename": "includes/Parse.php",
          "status": "modified",
          "additions": 310,
          "deletions": 258,
          "patch": "@@ -1,51 +1,44 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Parse Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith, Universal Omega\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n+use ActorMigration;\n use DPL\\Heading\\Heading;\n use DPL\\Lister\\Lister;\n+use ExtVariables;\n+use MediaWiki\\MediaWikiServices;\n+use MWException;\n+use Parser;\n+use Title;\n+use WebRequest;\n+use Wikimedia\\Rdbms\\IDatabase;\n \n class Parse {\n \t/**\n \t * Mediawiki Database Object\n \t *\n-\t * @var object\n+\t * @var IDatabase\n \t */\n \tprivate $DB = null;\n \n \t/**\n-\t * Mediawiki Parser Object\n-\t *\n-\t * @var object\n-\t */\n-\tprivate $parser = null;\n-\n-\t/**\n-\t * \\DPL\\Parameters Object\n+\t * Parameters Object\n \t *\n-\t * @var object\n+\t * @var Parameters\n \t */\n \tprivate $parameters = null;\n \n \t/**\n-\t * \\DPL\\Logger Object\n+\t * Logger Object\n \t *\n-\t * @var object\n+\t * @var Logger\n \t */\n \tprivate $logger = null;\n \n \t/**\n \t * Array of prequoted table names.\n \t *\n-\t * @var array\n+\t * @var string[]\n \t */\n \tprivate $tableNames = [];\n \n@@ -84,6 +77,13 @@ class Parse {\n \t */\n \tprivate $replacementVariables = [];\n \n+\t/**\n+\t * WebRequest object\n+\t *\n+\t * @var WebRequest\n+\t */\n+\tprivate $request;\n+\n \t/**\n \t * Array of possible URL arguments.\n \t *\n@@ -97,50 +97,46 @@ class Parse {\n \t\t'DPL_toTitle'\n \t];\n \n-\t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n-\t */\n \tpublic function __construct() {\n \t\tglobal $wgRequest;\n \n-\t\t$this->DB\t\t\t= wfGetDB( DB_REPLICA, 'dpl' );\n-\t\t$this->parameters\t= new Parameters();\n-\t\t$this->logger\t\t= new Logger( $this->parameters->getData( 'debug' )['default'] );\n-\t\t$this->tableNames\t= Query::getTableNames();\n-\t\t$this->wgRequest\t= $wgRequest;\n+\t\t$this->DB = wfGetDB( DB_REPLICA, 'dpl' );\n+\t\t$this->parameters = new Parameters();\n+\t\t$this->logger = new Logger();\n+\t\t$this->tableNames = Query::getTableNames();\n+\t\t$this->request = $wgRequest;\n \t}\n \n \t/**\n \t * The real callback function for converting the input text to wiki text output\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tRaw User Input\n-\t * @param\tobject\tMediawiki Parser object.\n-\t * @param\tarray\tEnd Reset Booleans\n-\t * @param\tarray\tEnd Eliminate Booleans\n-\t * @param\tboolean\t[Optional] Called as a parser tag\n-\t * @return\tstring\tWiki/HTML Output\n+\t * @param string $input\n+\t * @param Parser $parser\n+\t * @param array &$reset\n+\t * @param array\t&$eliminate\n+\t * @param bool $isParserTag\n+\t * @return string\n+\t *\n+\t * @suppress PhanUndeclaredProperty Use of Parser::mTemplatePath\n \t */\n-\tpublic function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserTag = false ) {\n+\tpublic function parse( $input, Parser $parser, &$reset, &$eliminate, $isParserTag = false ) {\n \t\t$dplStartTime = microtime( true );\n-\t\t$this->parser = $parser;\n \n-\t\t//Reset headings when being ran more than once in the same page load.\n+\t\t// Reset headings when being ran more than once in the same page load.\n \t\tArticle::resetHeadings();\n \n-\t\t//Check that we are not in an infinite transclusion loop\n-\t\tif ( isset( $this->parser->mTemplatePath[$this->parser->mTitle->getPrefixedText()] ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_TRANSCLUSIONLOOP, $this->parser->mTitle->getPrefixedText() );\n+\t\t// Check that we are not in an infinite transclusion loop\n+\t\tif ( isset( $parser->mTemplatePath[$parser->getTitle()->getPrefixedText()] ) ) {\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_TRANSCLUSIONLOOP, $parser->getTitle()->getPrefixedText() );\n+\n \t\t\treturn $this->getFullOutput();\n \t\t}\n \n-\t\t//Check if DPL shall only be executed from protected pages.\n-\t\tif ( Config::getSetting( 'runFromProtectedPagesOnly' ) === true && !$this->parser->mTitle->isProtected( 'edit' ) ) {\n-\t\t\t//Ideally we would like to allow using a DPL query if the query istelf is coded on a template page which is protected. Then there would be no need for the article to be protected.  However, how can one find out from which wiki source an extension has been invoked???\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_NOTPROTECTED, $this->parser->mTitle->getPrefixedText() );\n+\t\t// Check if DPL shall only be executed from protected pages.\n+\t\tif ( Config::getSetting( 'runFromProtectedPagesOnly' ) === true && !$parser->getTitle()->isProtected( 'edit' ) ) {\n+\t\t\t// Ideally we would like to allow using a DPL query if the query istelf is coded on a template page which is protected. Then there would be no need for the article to be protected. However, how can one find out from which wiki source an extension has been invoked???\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_NOTPROTECTED, $parser->getTitle()->getPrefixedText() );\n+\n \t\t\treturn $this->getFullOutput();\n \t\t}\n \n@@ -152,30 +148,33 @@ public function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserT\n \t\t\t\t$this->urlArguments[] = 'DPL_arg' . $i;\n \t\t\t}\n \t\t}\n+\n \t\t$input = $this->resolveUrlArguments( $input, $this->urlArguments );\n-\t\t$this->getUrlArgs( $this->parser );\n+\t\t$this->getUrlArgs( $parser );\n \n-\t\t$this->parameters->setParameter( 'offset', $this->wgRequest->getInt( 'DPL_offset', $this->parameters->getData( 'offset' )['default'] ) );\n+\t\t$this->parameters->setParameter( 'offset', $this->request->getInt( 'DPL_offset', $this->parameters->getData( 'offset' )['default'] ) );\n \t\t$offset = $this->parameters->getParameter( 'offset' );\n \n \t\t/***************************************/\n \t\t/* User Input preparation and parsing. */\n \t\t/***************************************/\n \t\t$cleanParameters = $this->prepareUserInput( $input );\n \t\tif ( !is_array( $cleanParameters ) ) {\n-\t\t\t//Short circuit for dumb things.\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_NOSELECTION );\n+\t\t\t// Short circuit for dumb things.\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_NOSELECTION );\n+\n \t\t\treturn $this->getFullOutput();\n \t\t}\n+\n \t\t$cleanParameters = Parameters::sortByPriority( $cleanParameters );\n \t\t$this->parameters->setParameter( 'includeuncat', false ); // to check if pseudo-category of Uncategorized pages is included\n \n \t\tforeach ( $cleanParameters as $parameter => $option ) {\n \t\t\tforeach ( $option as $_option ) {\n-\t\t\t\t//Parameter functions return true or false.  The full parameter data will be passed into the Query object later.\n+\t\t\t\t// Parameter functions return true or false. The full parameter data will be passed into the Query object later.\n \t\t\t\tif ( $this->parameters->$parameter( $_option ) === false ) {\n-\t\t\t\t\t//Do not build this into the output just yet.  It will be collected at the end.\n-\t\t\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_WRONGPARAM, $parameter, $_option );\n+\t\t\t\t\t// Do not build this into the output just yet. It will be collected at the end.\n+\t\t\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_WRONGPARAM, $parameter, $_option );\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -184,15 +183,16 @@ public function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserT\n \t\t/* Execute and Exit Only */\n \t\t/*************************/\n \t\tif ( $this->parameters->getParameter( 'execandexit' ) !== null ) {\n-\t\t\t//The keyword \"geturlargs\" is used to return the Url arguments and do nothing else.\n+\t\t\t// The keyword \"geturlargs\" is used to return the Url arguments and do nothing else.\n \t\t\tif ( $this->parameters->getParameter( 'execandexit' ) == 'geturlargs' ) {\n-\t\t\t\treturn;\n+\t\t\t\treturn '';\n \t\t\t}\n-\t\t\t//In all other cases we return the value of the argument which may contain parser function calls.\n+\n+\t\t\t// In all other cases we return the value of the argument which may contain parser function calls.\n \t\t\treturn $this->parameters->getParameter( 'execandexit' );\n \t\t}\n \n-\t\t//Construct internal keys for TableRow according to the structure of \"include\".  This will be needed in the output phase.\n+\t\t// Construct internal keys for TableRow according to the structure of \"include\". This will be needed in the output phase.\n \t\t$secLabels = $this->parameters->getParameter( 'seclabels' );\n \t\tif ( is_array( $secLabels ) && !empty( $this->parameters->getParameter( 'seclabels' ) ) ) {\n \t\t\t$this->parameters->setParameter( 'tablerow', $this->updateTableRowKeys( $this->parameters->getParameter( 'tablerow' ), $this->parameters->getParameter( 'seclabels' ) ) );\n@@ -203,7 +203,7 @@ public function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserT\n \t\t/****************/\n \t\t$errors = $this->doQueryErrorChecks();\n \t\tif ( $errors === false ) {\n-\t\t\t//WHAT HAS HAPPENED OH NOOOOOOOOOOOOO.\n+\t\t\t// WHAT HAS HAPPENED OH NOOOOOOOOOOOOO.\n \t\t\treturn $this->getFullOutput();\n \t\t}\n \n@@ -216,87 +216,96 @@ public function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserT\n \t\t/* Query */\n \t\t/*********/\n \t\ttry {\n-\t\t\t$this->query = new Query( $this->parameters );\n-\t\t\t$result = $this->query->buildAndSelect( $calcRows );\n+\t\t\t$actorMigration = ActorMigration::newMigration();\n+\t\t\t$commentStore = MediaWikiServices::getInstance()->getCommentStore();\n+\t\t\t$query = new Query( $this->parameters, $actorMigration, $commentStore );\n+\t\t\t$result = $query->buildAndSelect( $calcRows );\n \t\t} catch ( MWException $e ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_SQLBUILDERROR, $e->getMessage() );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_SQLBUILDERROR, $e->getMessage() );\n \t\t\treturn $this->getFullOutput();\n \t\t}\n \n \t\t$numRows = $this->DB->numRows( $result );\n-\t\t$articles = $this->processQueryResults( $result );\n+\t\t$articles = $this->processQueryResults( $result, $parser );\n \n \t\tglobal $wgDebugDumpSql;\n-\t\tif ( \\DynamicPageListHooks::getDebugLevel() >= 4 && $wgDebugDumpSql ) {\n-\t\t\t$this->addOutput( $this->query->getSqlQuery() . \"\\n\" );\n+\t\tif ( DynamicPageListHooks::getDebugLevel() >= 4 && $wgDebugDumpSql ) {\n+\t\t\t$this->addOutput( $query->getSqlQuery() . \"\\n\" );\n \t\t}\n \n \t\t$this->addOutput( '{{Extension DPL}}' );\n \n-\t\t//Preset these to defaults.\n-\t\t$this->setVariable( 'TOTALPAGES', 0 );\n-\t\t$this->setVariable( 'PAGES', 0 );\n-\t\t$this->setVariable( 'VERSION', DPL_VERSION );\n+\t\t// Preset these to defaults.\n+\t\t$this->setVariable( 'TOTALPAGES', '0' );\n+\t\t$this->setVariable( 'PAGES', '0' );\n+\t\t$this->setVariable( 'VERSION', DynamicPageListHooks::getVersion() );\n \n \t\t/*********************/\n \t\t/* Handle No Results */\n \t\t/*********************/\n \t\tif ( $numRows <= 0 || empty( $articles ) ) {\n-\t\t\t//Shortcut out since there is no processing to do.\n+\t\t\t// Shortcut out since there is no processing to do.\n \t\t\t$this->DB->freeResult( $result );\n \t\t\treturn $this->getFullOutput( 0, false );\n \t\t}\n \n \t\t$foundRows = null;\n \t\tif ( $calcRows ) {\n-\t\t\t$foundRows = $this->query->getFoundRows();\n+\t\t\t$foundRows = $query->getFoundRows();\n \t\t}\n \n-\t\t//Backward scrolling: If the user specified only titlelt with descending reverse the output order.\n+\t\t// Backward scrolling: If the user specified only titlelt with descending reverse the output order.\n \t\tif ( $this->parameters->getParameter( 'titlelt' ) && !$this->parameters->getParameter( 'titlegt' ) && $this->parameters->getParameter( 'order' ) == 'descending' ) {\n \t\t\t$articles = array_reverse( $articles );\n \t\t}\n \n-\t\t//Special sort for card suits (Bridge)\n+\t\t// Special sort for card suits (Bridge)\n \t\tif ( $this->parameters->getParameter( 'ordersuitsymbols' ) ) {\n \t\t\t$articles = $this->cardSuitSort( $articles );\n \t\t}\n \n \t\t/*******************/\n \t\t/* Generate Output */\n \t\t/*******************/\n-\t\t$lister = Lister::newFromStyle( $this->parameters->getParameter( 'mode' ), $this->parameters, $this->parser );\n+\t\t$lister = Lister::newFromStyle( $this->parameters->getParameter( 'mode' ), $this->parameters, $parser );\n \t\t$heading = Heading::newFromStyle( $this->parameters->getParameter( 'headingmode' ), $this->parameters );\n \t\tif ( $heading !== null ) {\n \t\t\t$this->addOutput( $heading->format( $articles, $lister ) );\n \t\t} else {\n \t\t\t$this->addOutput( $lister->format( $articles ) );\n \t\t}\n \n-\t\t//$this->addOutput($lister->format($articles));\n+\t\t// $this->addOutput($lister->format($articles));\n \t\tif ( $foundRows === null ) {\n-\t\t\t$foundRows = $lister->getRowCount(); //Get row count after calling format() otherwise the count will be inaccurate.\n+\t\t\t$foundRows = $lister->getRowCount(); // Get row count after calling format() otherwise the count will be inaccurate.\n \t\t}\n \n \t\t/*******************************/\n \t\t/* Replacement Variables       */\n \t\t/*******************************/\n-\t\t$this->setVariable( 'TOTALPAGES', $foundRows ); //Guaranteed to be an accurate count if SQL_CALC_FOUND_ROWS was used.  Otherwise only accurate if results are less than the SQL LIMIT.\n-\t\t$this->setVariable( 'PAGES', $lister->getRowCount() ); //This could be different than TOTALPAGES.  PAGES represents the total results within the constraints of SQL LIMIT.\n+\t\t$this->setVariable( 'TOTALPAGES', (string)$foundRows ); // Guaranteed to be an accurate count if SQL_CALC_FOUND_ROWS was used. Otherwise only accurate if results are less than the SQL LIMIT.\n+\t\t$this->setVariable( 'PAGES', $lister->getRowCount() ); // This could be different than TOTALPAGES. PAGES represents the total results within the constraints of SQL LIMIT.\n \n \t\t//Replace %DPLTIME% by execution time and timestamp in header and footer\n-\t\t$nowTimeStamp   = date( 'Y/m/d H:i:s' );\n+\t\t$nowTimeStamp = date( 'Y/m/d H:i:s' );\n \t\t$dplElapsedTime = sprintf( '%.3f sec.', microtime( true ) - $dplStartTime );\n \t\t$dplTime = \"{$dplElapsedTime} ({$nowTimeStamp})\";\n \t\t$this->setVariable( 'DPLTIME', $dplTime );\n \n-\t\t//Replace %LASTTITLE% / %LASTNAMESPACE% by the last title found in header and footer\n-\t\tif ( ( $n = count( $articles ) ) > 0 ) {\n+\t\t$firstNamespaceFound = '';\n+\t\t$firstTitleFound = '';\n+\t\t$lastNamespaceFound = '';\n+\t\t$lastTitleFound = '';\n+\n+\t\t// Replace %LASTTITLE% / %LASTNAMESPACE% by the last title found in header and footer\n+\t\t$n = count( $articles );\n+\t\tif ( $n > 0 ) {\n \t\t\t$firstNamespaceFound = str_replace( ' ', '_', $articles[0]->mTitle->getNamespace() );\n-\t\t\t$firstTitleFound     = str_replace( ' ', '_', $articles[0]->mTitle->getText() );\n-\t\t\t$lastNamespaceFound  = str_replace( ' ', '_', $articles[$n - 1]->mTitle->getNamespace() );\n-\t\t\t$lastTitleFound      = str_replace( ' ', '_', $articles[$n - 1]->mTitle->getText() );\n+\t\t\t$firstTitleFound = str_replace( ' ', '_', $articles[0]->mTitle->getText() );\n+\t\t\t$lastNamespaceFound = str_replace( ' ', '_', $articles[$n - 1]->mTitle->getNamespace() );\n+\t\t\t$lastTitleFound = str_replace( ' ', '_', $articles[$n - 1]->mTitle->getText() );\n \t\t}\n+\n \t\t$this->setVariable( 'FIRSTNAMESPACE', $firstNamespaceFound );\n \t\t$this->setVariable( 'FIRSTTITLE', $firstTitleFound );\n \t\t$this->setVariable( 'LASTNAMESPACE', $lastNamespaceFound );\n@@ -307,57 +316,58 @@ public function parse( $input, \\Parser $parser, &$reset, &$eliminate, $isParserT\n \t\t/* Scroll Variables            */\n \t\t/*******************************/\n \t\t$scrollVariables = [\n-\t\t\t'DPL_firstNamespace'\t=> $firstNamespaceFound,\n-\t\t\t'DPL_firstTitle'\t\t=> $firstTitleFound,\n-\t\t\t'DPL_lastNamespace'\t\t=> $lastNamespaceFound,\n-\t\t\t'DPL_lastTitle'\t\t\t=> $lastTitleFound,\n-\t\t\t'DPL_scrollDir'\t\t\t=> $this->parameters->getParameter( 'scrolldir' ),\n-\t\t\t'DPL_time'\t\t\t\t=> $dplTime,\n-\t\t\t'DPL_count'\t\t\t\t=> $this->parameters->getParameter( 'count' ),\n-\t\t\t'DPL_totalPages'\t\t=> $foundRows,\n-\t\t\t'DPL_pages'\t\t\t\t=> $lister->getRowCount()\n+\t\t\t'DPL_firstNamespace' => $firstNamespaceFound,\n+\t\t\t'DPL_firstTitle' => $firstTitleFound,\n+\t\t\t'DPL_lastNamespace' => $lastNamespaceFound,\n+\t\t\t'DPL_lastTitle' => $lastTitleFound,\n+\t\t\t'DPL_scrollDir' => $this->parameters->getParameter( 'scrolldir' ),\n+\t\t\t'DPL_time' => $dplTime,\n+\t\t\t'DPL_count' => $this->parameters->getParameter( 'count' ),\n+\t\t\t'DPL_totalPages' => $foundRows,\n+\t\t\t'DPL_pages' => $lister->getRowCount()\n \t\t];\n-\t\t$this->defineScrollVariables( $scrollVariables );\n+\n+\t\t$this->defineScrollVariables( $scrollVariables, $parser );\n \n \t\tif ( $this->parameters->getParameter( 'allowcachedresults' ) || Config::getSetting( 'alwaysCacheResults' ) ) {\n-\t\t\t$this->parser->getOutput()->updateCacheExpiry( $this->parameters->getParameter( 'cacheperiod' ) ?? 3600 );\n+\t\t\t$parser->getOutput()->updateCacheExpiry( $this->parameters->getParameter( 'cacheperiod' ) ?? 3600 );\n \t\t} else {\n-\t\t\t$this->parser->getOutput()->updateCacheExpiry( 0 );\n+\t\t\t$parser->getOutput()->updateCacheExpiry( 0 );\n \t\t}\n \n \t\t$finalOutput = $this->getFullOutput( $foundRows, false );\n \n-\t\t$this->triggerEndResets( $finalOutput, $reset, $eliminate, $isParserTag );\n+\t\t$this->triggerEndResets( $finalOutput, $reset, $eliminate, $isParserTag, $parser );\n \n \t\treturn $finalOutput;\n \t}\n \n \t/**\n \t * Process Query Results\n \t *\n-\t * @private\n-\t * @param\tobject\tMediawiki Result Object\n-\t * @return\tarray\tArray of Article objects.\n+\t * @param $result\n+\t * @param Parser $parser\n+\t * @return array\n \t */\n-\tprivate function processQueryResults( $result ) {\n+\tprivate function processQueryResults( $result, Parser $parser ) {\n \t\t/*******************************/\n \t\t/* Random Count Pick Generator */\n \t\t/*******************************/\n \t\t$randomCount = $this->parameters->getParameter( 'randomcount' );\n \t\tif ( $randomCount > 0 ) {\n \t\t\t$nResults = $this->DB->numRows( $result );\n-\t\t\t//mt_srand() seeding was removed due to PHP 5.2.1 and above no longer generating the same sequence for the same seed.\n+\t\t\t// mt_srand() seeding was removed due to PHP 5.2.1 and above no longer generating the same sequence for the same seed.\n \t\t\t//Constrain the total amount of random results to not be greater than the total results.\n \t\t\tif ( $randomCount > $nResults ) {\n \t\t\t\t$randomCount = $nResults;\n \t\t\t}\n \n-\t\t\t//This is 50% to 150% faster than the old while (true) version that could keep rechecking the same random key over and over again.\n-\t\t\t//Generate pick numbers for results.\n+\t\t\t// This is 50% to 150% faster than the old while (true) version that could keep rechecking the same random key over and over again.\n+\t\t\t// Generate pick numbers for results.\n \t\t\t$pick = range( 1, $nResults );\n-\t\t\t//Shuffle the pick numbers.\n+\t\t\t// Shuffle the pick numbers.\n \t\t\tshuffle( $pick );\n-\t\t\t//Select pick numbers from the beginning to the maximum of $randomCount.\n+\t\t\t// Select pick numbers from the beginning to the maximum of $randomCount.\n \t\t\t$pick = array_slice( $pick, 0, $randomCount );\n \t\t}\n \n@@ -370,44 +380,45 @@ private function processQueryResults( $result ) {\n \t\twhile ( $row = $result->fetchRow() ) {\n \t\t\t$i++;\n \n-\t\t\t//In random mode skip articles which were not chosen.\n-\t\t\tif ( $randomCount > 0 && !in_array( $i, $pick ) ) {\n+\t\t\t// In random mode skip articles which were not chosen.\n+\t\t\tif ( $randomCount > 0 && !in_array( $i, $pick ?? [] ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\tif ( $this->parameters->getParameter( 'goal' ) == 'categories' ) {\n \t\t\t\t$pageNamespace = NS_CATEGORY;\n-\t\t\t\t$pageTitle     = $row['cl_to'];\n+\t\t\t\t$pageTitle = $row['cl_to'];\n \t\t\t} elseif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t\tif ( count( $this->parameters->getParameter( 'imagecontainer' ) ) > 0 ) {\n \t\t\t\t\t$pageNamespace = NS_FILE;\n-\t\t\t\t\t$pageTitle     = $row['il_to'];\n+\t\t\t\t\t$pageTitle = $row['il_to'];\n \t\t\t\t} else {\n-\t\t\t\t\t//Maybe non-existing title\n+\t\t\t\t\t// Maybe non-existing title\n \t\t\t\t\t$pageNamespace = $row['pl_namespace'];\n-\t\t\t\t\t$pageTitle     = $row['pl_title'];\n+\t\t\t\t\t$pageTitle = $row['pl_title'];\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\t//Existing PAGE TITLE\n+\t\t\t\t// Existing PAGE TITLE\n \t\t\t\t$pageNamespace = $row['page_namespace'];\n-\t\t\t\t$pageTitle     = $row['page_title'];\n+\t\t\t\t$pageTitle = $row['page_title'];\n \t\t\t}\n \n \t\t\t// if subpages are to be excluded: skip them\n \t\t\tif ( !$this->parameters->getParameter( 'includesubpages' ) && strpos( $pageTitle, '/' ) !== false ) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n-\t\t\t$title     = \\Title::makeTitle( $pageNamespace, $pageTitle );\n-\t\t\t$thisTitle = $this->parser->getTitle();\n+\t\t\t$title = Title::makeTitle( $pageNamespace, $pageTitle );\n+\t\t\t$thisTitle = $parser->getTitle();\n \n-\t\t\t//Block recursion from happening by seeing if this result row is the page the DPL query was ran from.\n+\t\t\t// Block recursion from happening by seeing if this result row is the page the DPL query was ran from.\n \t\t\tif ( $this->parameters->getParameter( 'skipthispage' ) && $thisTitle->equals( $title ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\t$articles[] = Article::newFromRow( $row, $this->parameters, $title, $pageNamespace, $pageTitle );\n \t\t}\n+\n \t\t$this->DB->freeResult( $result );\n \n \t\treturn $articles;\n@@ -416,70 +427,71 @@ private function processQueryResults( $result ) {\n \t/**\n \t * Do basic clean up and structuring of raw user input.\n \t *\n-\t * @private\n-\t * @param\tstring\tRaw User Input\n-\t * @return\tarray\tArray of raw text parameter => option.\n+\t * @param string $input\n+\t * @return array\n \t */\n \tprivate function prepareUserInput( $input ) {\n-\t\t//We replace double angle brackets with single angle brackets to avoid premature tag expansion in the input.\n-\t\t//The \u00a6 symbol is an alias for |.\n-\t\t//The combination '\u00b2{' and '}\u00b2'will be translated to double curly braces; this allows postponed template execution which is crucial for DPL queries which call other DPL queries.\n+\t\t// We replace double angle brackets with single angle brackets to avoid premature tag expansion in the input.\n+\t\t// The \u00a6 symbol is an alias for |.\n+\t\t// The combination '\u00b2{' and '}\u00b2'will be translated to double curly braces; this allows postponed template execution which is crucial for DPL queries which call other DPL queries.\n \t\t$input = str_replace( [ '\u00ab', '\u00bb', '\u00a6', '\u00b2{', '}\u00b2' ], [ '<', '>', '|', '{{', '}}' ], $input );\n \n-\t\t//Standard new lines into the standard \\n and clean up any hanging new lines.\n+\t\t// Standard new lines into the standard \\n and clean up any hanging new lines.\n \t\t$input = str_replace( [ \"\\r\\n\", \"\\r\" ], \"\\n\", $input );\n \t\t$input = trim( $input, \"\\n\" );\n \t\t$rawParameters = explode( \"\\n\", $input );\n \n-\t\t$parameters = false;\n+\t\t$parameters = [];\n \t\tforeach ( $rawParameters as $parameterOption ) {\n \t\t\tif ( empty( $parameterOption ) ) {\n-\t\t\t\t//Softly ignore blank lines.\n+\t\t\t\t// Softly ignore blank lines.\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\tif ( strpos( $parameterOption, '=' ) === false ) {\n-\t\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_PARAMNOOPTION, $parameterOption );\n+\t\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_PARAMNOOPTION, $parameterOption );\n+\n \t\t\t\tcontinue;\n \t\t\t}\n \n-\t\t\tlist( $parameter, $option ) = explode( '=', $parameterOption, 2 );\n+\t\t\t[ $parameter, $option ] = explode( '=', $parameterOption, 2 );\n \t\t\t$parameter = trim( $parameter );\n-\t\t\t$option  = trim( $option );\n+\t\t\t$option = trim( $option );\n \n \t\t\tif ( strpos( $parameter, '<' ) !== false || strpos( $parameter, '>' ) !== false ) {\n-\t\t\t\t//Having the actual less than and greater than symbols is nasty for programatic look up.  The old parameter is still supported along with the new, but we just fix it here before calling it.\n+\t\t\t\t// Having the actual less than and greater than symbols is nasty for programatic look up. The old parameter is still supported along with the new, but we just fix it here before calling it.\n \t\t\t\t$parameter = str_replace( '<', 'lt', $parameter );\n \t\t\t\t$parameter = str_replace( '>', 'gt', $parameter );\n \t\t\t}\n \n-\t\t\t$parameter = strtolower( $parameter ); //Force lower case for ease of use.\n+\t\t\t$parameter = strtolower( $parameter ); // Force lower case for ease of use.\n \t\t\tif ( empty( $parameter ) || substr( $parameter, 0, 1 ) == '#' || ( $this->parameters->exists( $parameter ) && !$this->parameters->testRichness( $parameter ) ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\tif ( !$this->parameters->exists( $parameter ) ) {\n-\t\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_UNKNOWNPARAM, $parameter, implode( ', ', $this->parameters->getParametersForRichness() ) );\n+\t\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_UNKNOWNPARAM, $parameter, implode( ', ', $this->parameters->getParametersForRichness() ) );\n+\n \t\t\t\tcontinue;\n \t\t\t}\n \n-\t\t\t//Ignore parameter settings without argument (except namespace and category).\n+\t\t\t// Ignore parameter settings without argument (except namespace and category).\n \t\t\tif ( !strlen( $option ) ) {\n \t\t\t\tif ( $parameter != 'namespace' && $parameter != 'notnamespace' && $parameter != 'category' && $this->parameters->exists( $parameter ) ) {\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$parameters[$parameter][] = $option;\n \t\t}\n+\n \t\treturn $parameters;\n \t}\n \n \t/**\n \t * Concatenate output\n \t *\n-\t * @private\n-\t * @param\tstring\tOutput to add\n-\t * @return\tvoid\n+\t * @param string $output\n \t */\n \tprivate function addOutput( $output ) {\n \t\t$this->output .= $output;\n@@ -488,32 +500,32 @@ private function addOutput( $output ) {\n \t/**\n \t * Set the output text.\n \t *\n-\t * @private\n-\t * @return\tstring\tOutput Text\n+\t * @return string\n \t */\n \tprivate function getOutput() {\n-\t\t//@TODO: 2015-08-28 Consider calling $this->replaceVariables() here.  Might cause issues with text returned in the results.\n+\t\t// @TODO: 2015-08-28 Consider calling $this->replaceVariables() here. Might cause issues with text returned in the results.\n \t\treturn $this->output;\n \t}\n \n \t/**\n \t * Return output optionally including header and footer.\n \t *\n-\t * @private\n-\t * @param\tboolean\t[Optional] Total results.\n-\t * @param\tboolean\t[Optional] Skip adding the header and footer.\n-\t * @return\tstring\tOutput\n+\t * @param bool|int $totalResults\n+\t * @param bool $skipHeaderFooter\n+\t * @return string\n \t */\n \tprivate function getFullOutput( $totalResults = false, $skipHeaderFooter = true ) {\n \t\tif ( !$skipHeaderFooter ) {\n \t\t\t$header = '';\n \t\t\t$footer = '';\n-\t\t\t//Only override header and footers if specified.\n-\t\t\t$_headerType = $this->getHeaderFooterType( 'header', $totalResults );\n+\n+\t\t\t// Only override header and footers if specified.\n+\t\t\t$_headerType = $this->getHeaderFooterType( 'header', (int)$totalResults );\n \t\t\tif ( $_headerType !== false ) {\n \t\t\t\t$header = $this->parameters->getParameter( $_headerType );\n \t\t\t}\n-\t\t\t$_footerType = $this->getHeaderFooterType( 'footer', $totalResults );\n+\n+\t\t\t$_footerType = $this->getHeaderFooterType( 'footer', (int)$totalResults );\n \t\t\tif ( $_footerType !== false ) {\n \t\t\t\t$footer = $this->parameters->getParameter( $_footerType );\n \t\t\t}\n@@ -523,8 +535,9 @@ private function getFullOutput( $totalResults = false, $skipHeaderFooter = true\n \t\t}\n \n \t\tif ( !$totalResults && !strlen( $this->getHeader() ) && !strlen( $this->getFooter() ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_NORESULTS );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_NORESULTS );\n \t\t}\n+\n \t\t$messages = $this->logger->getMessages( false );\n \n \t\treturn ( count( $messages ) ? implode( \"<br/>\\n\", $messages ) : null ) . $this->getHeader() . $this->getOutput() . $this->getFooter();\n@@ -533,22 +546,20 @@ private function getFullOutput( $totalResults = false, $skipHeaderFooter = true\n \t/**\n \t * Set the header text.\n \t *\n-\t * @private\n-\t * @param\tstring\tHeader Text\n-\t * @return\tvoid\n+\t * @param string $header\n \t */\n \tprivate function setHeader( $header ) {\n-\t\tif ( \\DynamicPageListHooks::getDebugLevel() == 5 ) {\n+\t\tif ( DynamicPageListHooks::getDebugLevel() == 5 ) {\n \t\t\t$header = '<pre><nowiki>' . $header;\n \t\t}\n+\n \t\t$this->header = $this->replaceVariables( $header );\n \t}\n \n \t/**\n \t * Set the header text.\n \t *\n-\t * @private\n-\t * @return\tstring\tHeader Text\n+\t * @return string\n \t */\n \tprivate function getHeader() {\n \t\treturn $this->header;\n@@ -557,22 +568,20 @@ private function getHeader() {\n \t/**\n \t * Set the footer text.\n \t *\n-\t * @private\n-\t * @param\tstring\tFooter Text\n-\t * @return\tvoid\n+\t * @param string $footer\n \t */\n \tprivate function setFooter( $footer ) {\n-\t\tif ( \\DynamicPageListHooks::getDebugLevel() == 5 ) {\n+\t\tif ( DynamicPageListHooks::getDebugLevel() == 5 ) {\n \t\t\t$footer .= '</nowiki></pre>';\n \t\t}\n+\n \t\t$this->footer = $this->replaceVariables( $footer );\n \t}\n \n \t/**\n \t * Set the footer text.\n \t *\n-\t * @private\n-\t * @return\tstring\tFooter Text\n+\t * @return string\n \t */\n \tprivate function getFooter() {\n \t\treturn $this->footer;\n@@ -581,13 +590,13 @@ private function getFooter() {\n \t/**\n \t * Determine the header/footer type to use based on what output format parameters were chosen and the number of results.\n \t *\n-\t * @private\n-\t * @param\tstring\tPage position to check: 'header' or 'footer'.\n-\t * @param\tinteger\tCount of pages.\n-\t * @return\tmixed\tType to use: 'results', 'oneresult', or 'noresults'.  False if invalid or none should be used.\n+\t * @param string $position\n+\t * @param int $count\n+\t * @return mixed Type to use: 'results', 'oneresult', or 'noresults'. False if invalid or none should be used.\n \t */\n \tprivate function getHeaderFooterType( $position, $count ) {\n \t\t$count = intval( $count );\n+\n \t\tif ( $position != 'header' && $position != 'footer' ) {\n \t\t\treturn false;\n \t\t}\n@@ -601,16 +610,15 @@ private function getHeaderFooterType( $position, $count ) {\n \t\t} else {\n \t\t\t$_type = false;\n \t\t}\n+\n \t\treturn $_type;\n \t}\n \n \t/**\n \t * Set a variable to be replaced with the provided text later at the end of the output.\n \t *\n-\t * @private\n-\t * @param\tstring\tVariable name, will be transformed to uppercase and have leading and trailing percent signs added.\n-\t * @param\tstring\tText to replace the variable with.\n-\t * @return\tvoid\n+\t * @param string $variable\n+\t * @param string $replacement\n \t */\n \tprivate function setVariable( $variable, $replacement ) {\n \t\t$variable = \"%\" . mb_strtoupper( $variable, \"UTF-8\" ) . \"%\";\n@@ -620,24 +628,24 @@ private function setVariable( $variable, $replacement ) {\n \t/**\n \t * Return text with variables replaced.\n \t *\n-\t * @private\n-\t * @param\tstring\tText to perform replacements on.\n-\t * @return\tstring\tReplaced Text\n+\t * @param string $text\n+\t * @return string\n \t */\n \tprivate function replaceVariables( $text ) {\n \t\t$text = self::replaceNewLines( $text );\n+\n \t\tforeach ( $this->replacementVariables as $variable => $replacement ) {\n \t\t\t$text = str_replace( $variable, $replacement, $text );\n \t\t}\n+\n \t\treturn $text;\n \t}\n \n \t/**\n \t * Return text with custom new line characters replaced.\n \t *\n-\t * @private\n-\t * @param\tstring\tText\n-\t * @return\tstring\tNew Lined Text\n+\t * @param string $text\n+\t * @return string\n \t */\n \tpublic static function replaceNewLines( $text ) {\n \t\treturn str_replace( [ '\\n', \"\u00b6\" ], \"\\n\", $text );\n@@ -646,8 +654,7 @@ public static function replaceNewLines( $text ) {\n \t/**\n \t * Work through processed parameters and check for potential issues.\n \t *\n-\t * @private\n-\t * @return\tvoid\n+\t * @return bool\n \t */\n \tprivate function doQueryErrorChecks() {\n \t\t/**************************/\n@@ -666,6 +673,7 @@ private function doQueryErrorChecks() {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\tif ( is_array( $this->parameters->getParameter( 'notcategory' ) ) ) {\n \t\t\tforeach ( $this->parameters->getParameter( 'notcategory' ) as $comparisonType => $operatorTypes ) {\n \t\t\t\tforeach ( $operatorTypes as $operatorType => $categories ) {\n@@ -676,64 +684,73 @@ private function doQueryErrorChecks() {\n \t\t\t}\n \t\t}\n \n-\t\t//Too many categories.\n+\t\t// Too many categories.\n \t\tif ( $totalCategories > Config::getSetting( 'maxCategoryCount' ) && !Config::getSetting( 'allowUnlimitedCategories' ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_TOOMANYCATS, Config::getSetting( 'maxCategoryCount' ) );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_TOOMANYCATS, Config::getSetting( 'maxCategoryCount' ) );\n+\n \t\t\treturn false;\n \t\t}\n \n-\t\t//Not enough categories.(Really?)\n+\t\t// Not enough categories.(Really?)\n \t\tif ( $totalCategories < Config::getSetting( 'minCategoryCount' ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_TOOFEWCATS, Config::getSetting( 'minCategoryCount' ) );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_TOOFEWCATS, Config::getSetting( 'minCategoryCount' ) );\n+\n \t\t\treturn false;\n \t\t}\n \n-\t\t//Selection criteria needs to be found.\n+\t\t// Selection criteria needs to be found.\n \t\tif ( !$totalCategories && !$this->parameters->isSelectionCriteriaFound() ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_NOSELECTION );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_NOSELECTION );\n+\n \t\t\treturn false;\n \t\t}\n \n-\t\t//ordermethod=sortkey requires ordermethod=category\n-\t\t//Delayed to the construction of the SQL query, see near line 2211, gs\n-\t\t//if (in_array('sortkey',$aOrderMethods) && ! in_array('category',$aOrderMethods)) $aOrderMethods[] = 'category';\n+\t\t// ordermethod=sortkey requires ordermethod=category\n+\t\t// Delayed to the construction of the SQL query, see near line 2211, gs\n+\t\t// if (in_array('sortkey',$aOrderMethods) && ! in_array('category',$aOrderMethods)) $aOrderMethods[] = 'category';\n \n \t\t$orderMethods = (array)$this->parameters->getParameter( 'ordermethod' );\n-\t\t//Throw an error in no categories were selected when using category sorting modes or requesting category information.\n+\t\t// Throw an error in no categories were selected when using category sorting modes or requesting category information.\n \t\tif ( $totalCategories == 0 && ( in_array( 'categoryadd', $orderMethods ) || $this->parameters->getParameter( 'addfirstcategorydate' ) === true ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_CATDATEBUTNOINCLUDEDCATS );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_CATDATEBUTNOINCLUDEDCATS );\n+\n \t\t\treturn false;\n \t\t}\n \n-\t\t//No more than one type of date at a time!\n-\t\t//@TODO: Can this be fixed to allow all three later after fixing the article class?\n+\t\t// No more than one type of date at a time!\n+\t\t// @TODO: Can this be fixed to allow all three later after fixing the article class?\n \t\tif ( ( intval( $this->parameters->getParameter( 'addpagetoucheddate' ) ) + intval( $this->parameters->getParameter( 'addfirstcategorydate' ) ) + intval( $this->parameters->getParameter( 'addeditdate' ) ) ) > 1 ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_MORETHAN1TYPEOFDATE );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_MORETHAN1TYPEOFDATE );\n+\n \t\t\treturn false;\n \t\t}\n \n \t\t// the dominant section must be one of the sections mentioned in includepage\n \t\tif ( $this->parameters->getParameter( 'dominantsection' ) > 0 && count( $this->parameters->getParameter( 'seclabels' ) ) < $this->parameters->getParameter( 'dominantsection' ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_DOMINANTSECTIONRANGE, count( $this->parameters->getParameter( 'seclabels' ) ) );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_DOMINANTSECTIONRANGE, count( $this->parameters->getParameter( 'seclabels' ) ) );\n+\n \t\t\treturn false;\n \t\t}\n \n \t\t// category-style output requested with not compatible order method\n \t\tif ( $this->parameters->getParameter( 'mode' ) == 'category' && !array_intersect( $orderMethods, [ 'sortkey', 'title', 'titlewithoutnamespace' ] ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'mode=category', 'sortkey | title | titlewithoutnamespace' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'mode=category', 'sortkey | title | titlewithoutnamespace' );\n+\n \t\t\treturn false;\n \t\t}\n \n \t\t// addpagetoucheddate=true with unappropriate order methods\n \t\tif ( $this->parameters->getParameter( 'addpagetoucheddate' ) && !array_intersect( $orderMethods, [ 'pagetouched', 'title' ] ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'addpagetoucheddate=true', 'pagetouched | title' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'addpagetoucheddate=true', 'pagetouched | title' );\n+\n \t\t\treturn false;\n \t\t}\n \n \t\t// addeditdate=true but not (ordermethod=...,firstedit or ordermethod=...,lastedit)\n-\t\t//firstedit (resp. lastedit) -> add date of first (resp. last) revision\n+\t\t// firstedit (resp. lastedit) -> add date of first (resp. last) revision\n \t\tif ( $this->parameters->getParameter( 'addeditdate' ) && !array_intersect( $orderMethods, [ 'firstedit', 'lastedit' ] ) && ( $this->parameters->getParameter( 'allrevisionsbefore' ) || $this->parameters->getParameter( 'allrevisionssince' ) || $this->parameters->getParameter( 'firstrevisionsince' ) || $this->parameters->getParameter( 'lastrevisionbefore' ) ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'addeditdate=true', 'firstedit | lastedit' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'addeditdate=true', 'firstedit | lastedit' );\n+\n \t\t\treturn false;\n \t\t}\n \n@@ -744,82 +761,92 @@ private function doQueryErrorChecks() {\n \t\t * Ideally, we could use values such as 'all', 'first' or 'last' for the adduser parameter.\n \t\t */\n \t\tif ( $this->parameters->getParameter( 'adduser' ) && !array_intersect( $orderMethods, [ 'firstedit', 'lastedit' ] ) && !$this->parameters->getParameter( 'allrevisionsbefore' ) && !$this->parameters->getParameter( 'allrevisionssince' ) && !$this->parameters->getParameter( 'firstrevisionsince' ) && !$this->parameters->getParameter( 'lastrevisionbefore' ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'adduser=true', 'firstedit | lastedit' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'adduser=true', 'firstedit | lastedit' );\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\tif ( $this->parameters->getParameter( 'minoredits' ) && !array_intersect( $orderMethods, [ 'firstedit', 'lastedit' ] ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'minoredits', 'firstedit | lastedit' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_WRONGORDERMETHOD, 'minoredits', 'firstedit | lastedit' );\n+\n \t\t\treturn false;\n \t\t}\n \n-\t\t//add*** parameters have no effect with 'mode=category' (only namespace/title can be viewed in this mode)\n+\t\t// add*** parameters have no effect with 'mode=category' (only namespace/title can be viewed in this mode)\n \t\tif ( $this->parameters->getParameter( 'mode' ) == 'category' && ( $this->parameters->getParameter( 'addcategories' ) || $this->parameters->getParameter( 'addeditdate' ) || $this->parameters->getParameter( 'addfirstcategorydate' ) || $this->parameters->getParameter( 'addpagetoucheddate' ) || $this->parameters->getParameter( 'incpage' ) || $this->parameters->getParameter( 'adduser' ) || $this->parameters->getParameter( 'addauthor' ) || $this->parameters->getParameter( 'addcontribution' ) || $this->parameters->getParameter( 'addlasteditor' ) ) ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_CATOUTPUTBUTWRONGPARAMS );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_CATOUTPUTBUTWRONGPARAMS );\n \t\t}\n \n-\t\t//headingmode has effects with ordermethod on multiple components only\n+\t\t// headingmode has effects with ordermethod on multiple components only\n \t\tif ( $this->parameters->getParameter( 'headingmode' ) !== 'none' && count( $orderMethods ) < 2 ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::WARN_HEADINGBUTSIMPLEORDERMETHOD, $this->parameters->getParameter( 'headingmode' ), 'none' );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::WARN_HEADINGBUTSIMPLEORDERMETHOD, $this->parameters->getParameter( 'headingmode' ), 'none' );\n \t\t\t$this->parameters->setParameter( 'headingmode', 'none' );\n \t\t}\n \n-\t\t//The 'openreferences' parameter is incompatible with many other options.\n+\t\t// The 'openreferences' parameter is incompatible with many other options.\n \t\tif ( $this->parameters->isOpenReferencesConflict() && $this->parameters->getParameter( 'openreferences' ) === true ) {\n-\t\t\t$this->logger->addMessage( \\DynamicPageListHooks::FATAL_OPENREFERENCES );\n+\t\t\t$this->logger->addMessage( DynamicPageListHooks::FATAL_OPENREFERENCES );\n+\n \t\t\treturn false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Create keys for TableRow which represent the structure of the \"include=\" arguments.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tArray of 'tablerow' parameter data.\n-\t * @param\tarray\tArray of 'include' parameter data.\n-\t * @return\tarray\tUpdated 'tablerow' parameter.\n+\t * @param array\t$tableRow\n+\t * @param array\t$sectionLabels\n+\t * @return array\n \t */\n \tprivate static function updateTableRowKeys( $tableRow, $sectionLabels ) {\n-\t\t$_tableRow\t= (array)$tableRow;\n-\t\t$tableRow\t= [];\n-\t\t$groupNr\t= -1;\n-\t\t$t\t\t\t= -1;\n+\t\t$_tableRow = (array)$tableRow;\n+\t\t$tableRow = [];\n+\t\t$groupNr = -1;\n+\t\t$t = -1;\n+\n \t\tforeach ( $sectionLabels as $label ) {\n \t\t\t$t++;\n \t\t\t$groupNr++;\n \t\t\t$cols = explode( '}:', $label );\n+\n \t\t\tif ( count( $cols ) <= 1 ) {\n \t\t\t\tif ( array_key_exists( $t, $_tableRow ) ) {\n \t\t\t\t\t$tableRow[$groupNr] = $_tableRow[$t];\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\t$n     = count( explode( ':', $cols[1] ) );\n+\t\t\t\t$n = count( explode( ':', $cols[1] ) );\n \t\t\t\t$colNr = -1;\n \t\t\t\t$t--;\n+\n \t\t\t\tfor ( $i = 1; $i <= $n; $i++ ) {\n \t\t\t\t\t$colNr++;\n \t\t\t\t\t$t++;\n+\n \t\t\t\t\tif ( array_key_exists( $t, $_tableRow ) ) {\n \t\t\t\t\t\t$tableRow[$groupNr . '.' . $colNr] = $_tableRow[$t];\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\treturn $tableRow;\n \t}\n \n \t/**\n \t * Resolve arguments in the input that would normally be in the URL.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tRaw Uncleaned User Input\n-\t * @param\tarray\tArray of URL arguments to resolve.  Non-arrays will be casted to an array.\n-\t * @return\tstring\tRaw input with variables replaced\n+\t * @param string $input\n+\t * @param array $arguments\n+\t * @return string\n \t */\n \tprivate function resolveUrlArguments( $input, $arguments ) {\n \t\t$arguments = (array)$arguments;\n+\n \t\tforeach ( $arguments as $arg ) {\n-\t\t\t$dplArg = $this->wgRequest->getVal( $arg, '' );\n+\t\t\t$dplArg = $this->request->getVal( $arg, '' );\n+\n \t\t\tif ( $dplArg == '' ) {\n \t\t\t\t$input = preg_replace( '/\\{%' . $arg . ':(.*)%\\}/U', '\\1', $input );\n \t\t\t\t$input = str_replace( '{%' . $arg . '%}', '', $input );\n@@ -828,152 +855,171 @@ private function resolveUrlArguments( $input, $arguments ) {\n \t\t\t\t$input = str_replace( '{%' . $arg . '%}', $dplArg, $input );\n \t\t\t}\n \t\t}\n+\n \t\treturn $input;\n \t}\n \n \t/**\n \t * This function uses the Variables extension to provide URL-arguments like &DPL_xyz=abc in the form of a variable which can be accessed as {{#var:xyz}} if Extension:Variables is installed.\n \t *\n-\t * @access\tpublic\n-\t * @return\tvoid\n+\t * @param Parser $parser\n \t */\n-\tprivate function getUrlArgs() {\n-\t\t$args = $this->wgRequest->getValues();\n+\tprivate function getUrlArgs( Parser $parser ) {\n+\t\t$args = $this->request->getValues();\n+\n \t\tforeach ( $args as $argName => $argValue ) {\n \t\t\tif ( strpos( $argName, 'DPL_' ) === false ) {\n \t\t\t\tcontinue;\n \t\t\t}\n+\n \t\t\tVariables::setVar( [ '', '', $argName, $argValue ] );\n+\n \t\t\tif ( defined( 'ExtVariables::VERSION' ) ) {\n-\t\t\t\t\\ExtVariables::get( $this->parser )->setVarValue( $argName, $argValue );\n+\t\t\t\tExtVariables::get( $parser )->setVarValue( $argName, $argValue );\n \t\t\t}\n \t\t}\n \t}\n \n \t/**\n-\t * This function uses the Variables extension to provide navigation aids such as DPL_firstTitle, DPL_lastTitle, or DPL_findTitle.  These variables can be accessed as {{#var:DPL_firstTitle}} if Extension:Variables is installed.\n+\t * This function uses the Variables extension to provide navigation aids such as DPL_firstTitle, DPL_lastTitle, or DPL_findTitle. These variables can be accessed as {{#var:DPL_firstTitle}} if Extension:Variables is installed.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tArray of scroll variables with the key as the variable name and the value as the value.  Non-arrays will be casted to arrays.\n-\t * @return\tvoid\n+\t * @param array $scrollVariables\n+\t * @param Parser $parser\n \t */\n-\tprivate function defineScrollVariables( $scrollVariables ) {\n+\tprivate function defineScrollVariables( $scrollVariables, Parser $parser ) {\n \t\t$scrollVariables = (array)$scrollVariables;\n \n \t\tforeach ( $scrollVariables as $variable => $value ) {\n \t\t\tVariables::setVar( [ '', '', $variable, $value ] );\n+\n \t\t\tif ( defined( 'ExtVariables::VERSION' ) ) {\n-\t\t\t\t\\ExtVariables::get( $this->parser )->setVarValue( $variable, $value );\n+\t\t\t\tExtVariables::get( $parser )->setVarValue( $variable, $value );\n \t\t\t}\n \t\t}\n \t}\n \n \t/**\n \t * Trigger Resets and Eliminates that run at the end of parsing.\n \t *\n-\t * @private\n-\t * @param\tstring\tFull output including header, footer, and any warnings.\n-\t * @param\tarray\tEnd Reset Booleans\n-\t * @param\tarray\tEnd Eliminate Booleans\n-\t * @param\tboolean\tCall as a parser tag\n-\t * @return\tvoid\n+\t * @param string $output\n+\t * @param array &$reset\n+\t * @param array &$eliminate\n+\t * @param bool $isParserTag\n+\t * @param Parser $parser\n \t */\n-\tprivate function triggerEndResets( $output, &$reset, &$eliminate, $isParserTag ) {\n+\tprivate function triggerEndResets( $output, &$reset, &$eliminate, $isParserTag, Parser $parser ) {\n \t\tglobal $wgHooks;\n \n-\t\t$localParser = \\MediaWiki\\MediaWikiServices::getInstance()->getParserFactory()->create();\n-\t\t$parserOutput = $localParser->parse( $output, $this->parser->mTitle, $this->parser->mOptions );\n+\t\t$localParser = MediaWikiServices::getInstance()->getParserFactory()->create();\n+\t\t$parserOutput = $localParser->parse( $output, $parser->getTitle(), $parser->getOptions() );\n \n \t\tif ( !is_array( $reset ) ) {\n \t\t\t$reset = [];\n \t\t}\n+\n \t\t$reset = array_merge( $reset, (array)$this->parameters->getParameter( 'reset' ) );\n \n \t\tif ( !is_array( $eliminate ) ) {\n \t\t\t$eliminate = [];\n \t\t}\n+\n \t\t$eliminate = array_merge( $eliminate, (array)$this->parameters->getParameter( 'eliminate' ) );\n+\n \t\tif ( $isParserTag === true ) {\n-\t\t\t//In tag mode 'eliminate' is the same as 'reset' for templates, categories, and images.\n+\t\t\t// In tag mode 'eliminate' is the same as 'reset' for templates, categories, and images.\n \t\t\tif ( isset( $eliminate['templates'] ) && $eliminate['templates'] ) {\n \t\t\t\t$reset['templates'] = true;\n \t\t\t\t$eliminate['templates'] = false;\n \t\t\t}\n+\n \t\t\tif ( isset( $eliminate['categories'] ) && $eliminate['categories'] ) {\n \t\t\t\t$reset['categories'] = true;\n \t\t\t\t$eliminate['categories'] = false;\n \t\t\t}\n+\n \t\t\tif ( isset( $eliminate['images'] ) && $eliminate['images'] ) {\n \t\t\t\t$reset['images'] = true;\n \t\t\t\t$eliminate['images'] = false;\n \t\t\t}\n \t\t} else {\n \t\t\tif ( isset( $reset['templates'] ) && $reset['templates'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks['resetTemplates'] = true;\n+\t\t\t\tDynamicPageListHooks::$createdLinks['resetTemplates'] = true;\n \t\t\t}\n+\n \t\t\tif ( isset( $reset['categories'] ) && $reset['categories'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks['resetCategories'] = true;\n+\t\t\t\tDynamicPageListHooks::$createdLinks['resetCategories'] = true;\n \t\t\t}\n+\n \t\t\tif ( isset( $reset['images'] ) && $reset['images'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks['resetImages'] = true;\n+\t\t\t\tDynamicPageListHooks::$createdLinks['resetImages'] = true;\n \t\t\t}\n \t\t}\n+\n \t\tif ( ( $isParserTag === true && isset( $reset['links'] ) ) || $isParserTag === false ) {\n \t\t\tif ( isset( $reset['links'] ) ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks['resetLinks'] = true;\n+\t\t\t\tDynamicPageListHooks::$createdLinks['resetLinks'] = true;\n \t\t\t}\n-\t\t\t//Register a hook to reset links which were produced during parsing DPL output.\n+\n+\t\t\t// Register a hook to reset links which were produced during parsing DPL output.\n \t\t\tif ( !isset( $wgHooks['ParserAfterTidy'] ) || !is_array( $wgHooks['ParserAfterTidy'] ) || !in_array( 'DynamicPageListHooks::endReset', $wgHooks['ParserAfterTidy'] ) ) {\n \t\t\t\t$wgHooks['ParserAfterTidy'][] = 'DynamicPageListHooks::endReset';\n \t\t\t}\n \t\t}\n \n \t\tif ( array_sum( $eliminate ) ) {\n-\t\t\t//Register a hook to reset links which were produced during parsing DPL output\n+\t\t\t// Register a hook to reset links which were produced during parsing DPL output\n \t\t\tif ( !isset( $wgHooks['ParserAfterTidy'] ) || !is_array( $wgHooks['ParserAfterTidy'] ) || !in_array( 'DynamicPageListHooks::endEliminate', $wgHooks['ParserAfterTidy'] ) ) {\n \t\t\t\t$wgHooks['ParserAfterTidy'][] = 'DynamicPageListHooks::endEliminate';\n \t\t\t}\n \n \t\t\tif ( isset( $eliminate['links'] ) && $eliminate['links'] ) {\n-\t\t\t\t//Trigger the mediawiki parser to find links, images, categories etc. which are contained in the DPL output.  This allows us to remove these links from the link list later.  If the article containing the DPL statement itself uses one of these links they will be thrown away!\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks[0] = [];\n+\t\t\t\t// Trigger the mediawiki parser to find links, images, categories etc. which are contained in the DPL output. This allows us to remove these links from the link list later. If the article containing the DPL statement itself uses one of these links they will be thrown away!\n+\t\t\t\tDynamicPageListHooks::$createdLinks[0] = [];\n+\n \t\t\t\tforeach ( $parserOutput->getLinks() as $nsp => $link ) {\n-\t\t\t\t\t\\DynamicPageListHooks::$createdLinks[0][$nsp] = $link;\n+\t\t\t\t\tDynamicPageListHooks::$createdLinks[0][$nsp] = $link;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( isset( $eliminate['templates'] ) && $eliminate['templates'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks[1] = [];\n+\t\t\t\tDynamicPageListHooks::$createdLinks[1] = [];\n+\n \t\t\t\tforeach ( $parserOutput->getTemplates() as $nsp => $tpl ) {\n-\t\t\t\t\t\\DynamicPageListHooks::$createdLinks[1][$nsp] = $tpl;\n+\t\t\t\t\tDynamicPageListHooks::$createdLinks[1][$nsp] = $tpl;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( isset( $eliminate['categories'] ) && $eliminate['categories'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks[2] = $parserOutput->mCategories;\n+\t\t\t\tDynamicPageListHooks::$createdLinks[2] = $parserOutput->mCategories;\n \t\t\t}\n+\n \t\t\tif ( isset( $eliminate['images'] ) && $eliminate['images'] ) {\n-\t\t\t\t\\DynamicPageListHooks::$createdLinks[3] = $parserOutput->mImages;\n+\t\t\t\tDynamicPageListHooks::$createdLinks[3] = $parserOutput->mImages;\n \t\t\t}\n \t\t}\n \t}\n \n \t/**\n \t * Sort an array of Article objects by the card suit symbol.\n \t *\n-\t * @private\n-\t * @param\tarray\tArticle objects in an array.\n-\t * @return\tarray\tSorted objects\n+\t * @param array\t$articles\n+\t * @return array\n \t */\n \tprivate function cardSuitSort( $articles ) {\n \t\t$sortKeys = [];\n+\n \t\tforeach ( $articles as $key => $article ) {\n-\t\t\t$title  = preg_replace( '/.*:/', '', $article->mTitle );\n-\t\t\t$tokens  = preg_split( '/ - */', $title );\n+\t\t\t$title = preg_replace( '/.*:/', '', $article->mTitle );\n+\t\t\t$tokens = preg_split( '/ - */', $title );\n \t\t\t$newKey = '';\n+\n \t\t\tforeach ( $tokens as $token ) {\n \t\t\t\t$initial = substr( $token, 0, 1 );\n+\n \t\t\t\tif ( $initial >= '1' && $initial <= '7' ) {\n \t\t\t\t\t$newKey .= $initial;\n \t\t\t\t\t$suit = substr( $token, 1 );\n+\n \t\t\t\t\tif ( $suit == '\u2663' ) {\n \t\t\t\t\t\t$newKey .= '1';\n \t\t\t\t\t} elseif ( $suit == '\u2666' ) {\n@@ -995,12 +1041,18 @@ private function cardSuitSort( $articles ) {\n \t\t\t\t\t$newKey .= $token;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$sortKeys[$key] = $newKey;\n \t\t}\n+\n \t\tasort( $sortKeys );\n+\n+\t\t$sortedArticles = [];\n+\n \t\tforeach ( $sortKeys as $oldKey => $newKey ) {\n \t\t\t$sortedArticles[] = $articles[$oldKey];\n \t\t}\n+\n \t\treturn $sortedArticles;\n \t}\n }"
        },
        {
          "filename": "includes/Query.php",
          "status": "modified",
          "additions": 445,
          "deletions": 437,
          "patch": "@@ -1,32 +1,41 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Variables Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith, Universal Omega\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n+use ActorMigration;\n+use CommentStore;\n+use DateInterval;\n+use DateTime;\n+use Exception;\n use MediaWiki\\MediaWikiServices;\n+use MWException;\n+use Wikimedia\\Rdbms\\IDatabase;\n \n class Query {\n \t/**\n \t * Parameters Object\n \t *\n-\t * @var object\n+\t * @var Parameters\n \t */\n \tprivate $parameters;\n \n \t/**\n \t * Mediawiki DB Object\n \t *\n-\t * @var object\n+\t * @var IDatabase\n \t */\n \tprivate $DB;\n \n+\t/**\n+\t * @var ActorMigration\n+\t */\n+\tprivate $actorMigration;\n+\n+\t/** @var UserQueryBuilder */\n+\tprivate $userQueryBuilder;\n+\t/** @var RevisionJoinBuilder */\n+\tprivate $revisionJoinBuilder;\n+\n \t/**\n \t * Array of prefixed and escaped table names.\n \t *\n@@ -100,14 +109,14 @@ class Query {\n \t/**\n \t * Limit\n \t *\n-\t * @var int\n+\t * @var int|bool\n \t */\n \tprivate $limit = false;\n \n \t/**\n \t * Offset\n \t *\n-\t * @var int\n+\t * @var int|bool\n \t */\n \tprivate $offset = false;\n \n@@ -128,7 +137,7 @@ class Query {\n \t/**\n \t * Character Set Collation\n \t *\n-\t * @var string\n+\t * @var string|bool\n \t */\n \tprivate $collation = false;\n \n@@ -147,26 +156,34 @@ class Query {\n \tprivate $revisionAuxWhereAdded = false;\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\t\\DPL\\Parameters\t$parameters\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n+\t * @param ActorMigration $actorMigration\n+\t * @param CommentStore $commentStore\n \t */\n-\tpublic function __construct( Parameters $parameters ) {\n+\tpublic function __construct(\n+\t\tParameters $parameters,\n+\t\tActorMigration $actorMigration,\n+\t\tCommentStore $commentStore\n+\t) {\n \t\t$this->parameters = $parameters;\n \n \t\t$this->tableNames = self::getTableNames();\n \n \t\t$this->DB = wfGetDB( DB_REPLICA, 'dpl' );\n+\t\t$this->actorMigration = $actorMigration;\n+\t\t$this->userQueryBuilder = new UserQueryBuilder( $this->DB, $this->actorMigration );\n+\t\t$this->revisionJoinBuilder = new RevisionJoinBuilder(\n+\t\t\t$this->DB,\n+\t\t\t$this->actorMigration,\n+\t\t\t$commentStore\n+\t\t);\n \t}\n \n \t/**\n \t * Start a query build.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\tCalculate Found Rows\n-\t * @return\tmixed\tMediawiki Result Object or False\n+\t * @param bool $calcRows\n+\t * @return mixed Mediawiki Result Object or False\n \t */\n \tpublic function buildAndSelect( $calcRows = false ) {\n \t\tglobal $wgNonincludableNamespaces;\n@@ -176,19 +193,39 @@ public function buildAndSelect( $calcRows = false ) {\n \t\t$parameters = $this->parameters->getAllParameters();\n \t\tforeach ( $parameters as $parameter => $option ) {\n \t\t\t$function = \"_\" . $parameter;\n-\t\t\t//Some parameters do not modifiy the query so we check if the function to modify the query exists first.\n+\t\t\t// Some parameters do not modifiy the query so we check if the function to modify the query exists first.\n \t\t\t$success = true;\n \t\t\tif ( method_exists( $this, $function ) ) {\n \t\t\t\t$success = $this->$function( $option );\n \t\t\t}\n+\n \t\t\tif ( $success === false ) {\n-\t\t\t\tthrow new \\MWException( __METHOD__ . \": SQL Build Error returned from {$function} for \" . serialize( $option ) . \".\" );\n+\t\t\t\tthrow new MWException( __METHOD__ . \": SQL Build Error returned from {$function} for \" . serialize( $option ) . \".\" );\n \t\t\t}\n+\n \t\t\t$this->parametersProcessed[$parameter] = true;\n \t\t}\n \n+\t\t$userQueryConds = $this->userQueryBuilder->getWhere();\n+\t\tif ( $userQueryConds ) {\n+\t\t\t$this->addWhere( $userQueryConds );\n+\t\t}\n+\n+\t\t$revQueryInfo = $this->revisionJoinBuilder->getQueryInfo();\n+\t\t$this->addSelect( $revQueryInfo['fields'] );\n+\n+\t\tforeach ( $revQueryInfo['tables'] as $alias => $table ) {\n+\t\t\tif ( !isset( $this->tables[$alias] ) ) {\n+\t\t\t\t$this->tables[$alias] = $table;\n+\t\t\t}\n+\t\t}\n+\n+\t\tforeach ( $revQueryInfo['joins'] as $joinTarget => $joinConds ) {\n+\t\t\t$this->addJoin( $joinTarget, $joinConds );\n+\t\t}\n+\n \t\tif ( !$this->parameters->getParameter( 'openreferences' ) ) {\n-\t\t\t//Add things that are always part of the query.\n+\t\t\t// Add things that are always part of the query.\n \t\t\t$this->addTable( 'page', $this->tableNames['page'] );\n \t\t\t$this->addSelect(\n \t\t\t\t[\n@@ -198,7 +235,8 @@ public function buildAndSelect( $calcRows = false ) {\n \t\t\t\t]\n \t\t\t);\n \t\t}\n-\t\t//Always add nonincludeable namespaces.\n+\n+\t\t// Always add nonincludeable namespaces.\n \t\tif ( is_array( $wgNonincludableNamespaces ) && count( $wgNonincludableNamespaces ) ) {\n \t\t\t$this->addNotWhere(\n \t\t\t\t[\n@@ -210,26 +248,28 @@ public function buildAndSelect( $calcRows = false ) {\n \t\tif ( $this->offset !== false ) {\n \t\t\t$options['OFFSET'] = $this->offset;\n \t\t}\n+\n \t\tif ( $this->limit !== false ) {\n \t\t\t$options['LIMIT'] = $this->limit;\n-\t\t} elseif ( $this->offset !== false && $this->limit === false ) {\n+\t\t} elseif ( $this->offset !== false ) {\n \t\t\t$options['LIMIT'] = $this->parameters->getParameter( 'count' );\n \t\t}\n \n \t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\tif ( count( $this->parameters->getParameter( 'imagecontainer' ) ) > 0 ) {\n-\t\t\t\t//$sSqlSelectFrom = $sSqlCl_to.'ic.il_to, '.$sSqlSelPage.\"ic.il_to AS sortkey\".' FROM '.$this->tableNames['imagelinks'].' AS ic';\n+\t\t\t\t// $sSqlSelectFrom = $sSqlCl_to.'ic.il_to, '.$sSqlSelPage.\"ic.il_to AS sortkey\".' FROM '.$this->tableNames['imagelinks'].' AS ic';\n \t\t\t\t$tables = [\n \t\t\t\t\t'ic'\t=> 'imagelinks'\n \t\t\t\t];\n \t\t\t} else {\n-\t\t\t\t//$sSqlSelectFrom = \"SELECT $sSqlCalcFoundRows $sSqlDistinct \".$sSqlCl_to.'pl_namespace, pl_title'.$sSqlSelPage.$sSqlSortkey.' FROM '.$this->tableNames['pagelinks'];\n+\t\t\t\t// $sSqlSelectFrom = \"SELECT $sSqlCalcFoundRows $sSqlDistinct \".$sSqlCl_to.'pl_namespace, pl_title'.$sSqlSelPage.$sSqlSortkey.' FROM '.$this->tableNames['pagelinks'];\n \t\t\t\t$this->addSelect(\n \t\t\t\t\t[\n \t\t\t\t\t\t'pl_namespace',\n \t\t\t\t\t\t'pl_title'\n \t\t\t\t\t]\n \t\t\t\t);\n+\n \t\t\t\t$tables = [\n \t\t\t\t\t'pagelinks'\n \t\t\t\t];\n@@ -251,14 +291,17 @@ public function buildAndSelect( $calcRows = false ) {\n \t\t\t$select = [\n \t\t\t\t$this->tableNames['page'] . '.page_id'\n \t\t\t];\n+\n \t\t\t$options[] = 'DISTINCT';\n \t\t} else {\n \t\t\tif ( $calcRows ) {\n \t\t\t\t$options[] = 'SQL_CALC_FOUND_ROWS';\n \t\t\t}\n+\n \t\t\tif ( $this->distinct ) {\n \t\t\t\t$options[] = 'DISTINCT';\n \t\t\t}\n+\n \t\t\t$categoriesGoal = false;\n \t\t\t$select = $this->select;\n \t\t}\n@@ -275,22 +318,25 @@ public function buildAndSelect( $calcRows = false ) {\n \t\t\t\t\t$this->join\n \t\t\t\t);\n \n+\t\t\t\t$pageIds = [];\n+\n \t\t\t\twhile ( $row = $result->fetchRow() ) {\n \t\t\t\t\t$pageIds[] = $row['page_id'];\n \t\t\t\t}\n+\n \t\t\t\t$sql = $this->DB->selectSQLText(\n \t\t\t\t\t[\n-\t\t\t\t\t\t'clgoal'\t=> 'categorylinks'\n+\t\t\t\t\t\t'clgoal' => 'categorylinks'\n \t\t\t\t\t],\n \t\t\t\t\t[\n \t\t\t\t\t\t'clgoal.cl_to'\n \t\t\t\t\t],\n \t\t\t\t\t[\n-\t\t\t\t\t\t'clgoal.cl_from'\t=> $pageIds\n+\t\t\t\t\t\t'clgoal.cl_from' => $pageIds\n \t\t\t\t\t],\n \t\t\t\t\t__METHOD__,\n \t\t\t\t\t[\n-\t\t\t\t\t\t'ORDER BY'\t=> 'clgoal.cl_to ' . $this->direction\n+\t\t\t\t\t\t'ORDER BY' => 'clgoal.cl_to ' . $this->direction\n \t\t\t\t\t]\n \t\t\t\t);\n \t\t\t} else {\n@@ -316,8 +362,9 @@ public function buildAndSelect( $calcRows = false ) {\n \t\t} catch ( Exception $e ) {\n \t\t\t$queryError = true;\n \t\t}\n-\t\tif ( $queryError == true || $result === false ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . \": \" . wfMessage( 'dpl_query_error', DPL_VERSION, $this->DB->lastError() )->text() );\n+\n+\t\tif ( $queryError || $result === false ) {\n+\t\t\tthrow new MWException( __METHOD__ . \": \" . wfMessage( 'dpl_query_error', DynamicPageListHooks::getVersion(), $this->DB->lastError() )->text() );\n \t\t}\n \n \t\treturn $result;\n@@ -326,8 +373,7 @@ public function buildAndSelect( $calcRows = false ) {\n \t/**\n \t * Return the number of found rows.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\tNumber of Found Rows\n+\t * @return int\n \t */\n \tpublic function getFoundRows() {\n \t\treturn $this->foundRows;\n@@ -336,8 +382,7 @@ public function getFoundRows() {\n \t/**\n \t * Returns the generated SQL Query\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tSQL Query\n+\t * @return string\n \t */\n \tpublic function getSqlQuery() {\n \t\treturn $this->sqlQuery;\n@@ -346,11 +391,11 @@ public function getSqlQuery() {\n \t/**\n \t * Return prefixed and quoted tables that are needed.\n \t *\n-\t * @access\tpublic\n-\t * @return\tarray\tPrepared table names.\n+\t * @return array\n \t */\n \tpublic static function getTableNames() {\n \t\t$DB = wfGetDB( DB_REPLICA, 'dpl' );\n+\n \t\t$tables = [\n \t\t\t'categorylinks',\n \t\t\t'dpl_clview',\n@@ -361,216 +406,238 @@ public static function getTableNames() {\n \t\t\t'pagelinks',\n \t\t\t'recentchanges',\n \t\t\t'revision',\n-\t\t\t'revision_actor_temp',\n \t\t\t'templatelinks'\n \t\t];\n \n \t\t$tableNames = [];\n \t\tforeach ( $tables as $table ) {\n \t\t\t$tableNames[$table] = $DB->tableName( $table );\n \t\t}\n+\n \t\treturn $tableNames;\n \t}\n \n \t/**\n \t * Add a table to the output.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tRaw Table Name - Will be ran through tableName().\n-\t * @param\tstring\tTable Alias\n-\t * @return\tboolean\tSuccess - Added, false if the table alias already exists.\n+\t * @param string $table\n+\t * @param string $alias\n+\t * @return bool\n \t */\n \tpublic function addTable( $table, $alias ) {\n \t\tif ( empty( $table ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty table name was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty table name was passed.' );\n \t\t}\n+\n \t\tif ( empty( $alias ) || is_numeric( $alias ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty or numeric table alias was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty or numeric table alias was passed.' );\n \t\t}\n+\n \t\tif ( !isset( $this->tables[$alias] ) ) {\n \t\t\t$this->tables[$alias] = $this->DB->tableName( $table );\n+\n \t\t\treturn true;\n \t\t} else {\n \t\t\treturn false;\n \t\t}\n \t}\n \n+\t/**\n+\t * Add multiple tables to the output.\n+\t *\n+\t * @param array $tablesByAlias\n+\t */\n+\tpublic function addTables( array $tablesByAlias ) {\n+\t\tforeach ( $tablesByAlias as $alias => $table ) {\n+\t\t\t$this->addTable( $table, $alias );\n+\t\t}\n+\t}\n+\n \t/**\n \t * Add a where clause to the output.\n-\t * Where clauses get imploded together with AND at the end.\t Any custom where clauses should be preformed before placed into here.\n+\t * Where clauses get imploded together with AND at the end. Any custom where clauses should be preformed before placed into here.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tWhere clause\n-\t * @return\tboolean\tSuccess\n+\t * @param array|string $where\n+\t * @return bool\n \t */\n \tpublic function addWhere( $where ) {\n \t\tif ( empty( $where ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty where clause was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty where clause was passed.' );\n \t\t}\n+\n \t\tif ( is_string( $where ) ) {\n \t\t\t$this->where[] = $where;\n \t\t} elseif ( is_array( $where ) ) {\n \t\t\t$this->where = array_merge( $this->where, $where );\n \t\t} else {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An invalid where clause was passed.' );\n-\t\t\treturn false;\n+\t\t\tthrow new MWException( __METHOD__ . ': An invalid where clause was passed.' );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Add a where clause to the output that uses NOT IN or !=.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tField => Value(s)\n-\t * @return\tboolean\tSuccess\n+\t * @param array $where\n+\t * @return bool\n \t */\n \tpublic function addNotWhere( $where ) {\n \t\tif ( empty( $where ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty not where clause was passed.' );\n-\t\t\treturn false;\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty not where clause was passed.' );\n \t\t}\n+\n \t\tif ( is_array( $where ) ) {\n \t\t\tforeach ( $where as $field => $values ) {\n \t\t\t\t$this->where[] = $field . ( count( $values ) > 1 ? ' NOT IN(' . $this->DB->makeList( $values ) . ')' : ' != ' . $this->DB->addQuotes( current( $values ) ) );\n \t\t\t}\n \t\t} else {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An invalid not where clause was passed.' );\n-\t\t\treturn false;\n+\t\t\tthrow new MWException( __METHOD__ . ': An invalid not where clause was passed.' );\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Add a field to select.\n \t * Will ignore duplicate values if the exact same alias and exact same field are passed.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tArray of fields with the array key being the field alias.  Leave the array key as a numeric index to not specify an alias.\n-\t * @return\tboolean\tSuccess\n+\t * @param array $fields\n+\t * @return bool\n \t */\n \tpublic function addSelect( $fields ) {\n \t\tif ( !is_array( $fields ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': A non-array was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': A non-array was passed.' );\n \t\t}\n+\n \t\tforeach ( $fields as $alias => $field ) {\n \t\t\tif ( !is_numeric( $alias ) && array_key_exists( $alias, $this->select ) && $this->select[$alias] != $field ) {\n-\t\t\t\t//In case of a code bug that is overwriting an existing field alias throw an exception.\n-\t\t\t\tthrow new \\MWException( __METHOD__ . \": Attempted to overwrite existing field alias `{$this->select[$alias]}` AS `{$alias}` with `{$field}` AS `{$alias}`.\" );\n+\t\t\t\t// In case of a code bug that is overwriting an existing field alias throw an exception.\n+\t\t\t\tthrow new MWException( __METHOD__ . \": Attempted to overwrite existing field alias `{$this->select[$alias]}` AS `{$alias}` with `{$field}` AS `{$alias}`.\" );\n \t\t\t}\n-\t\t\t//String alias and does not exist already.\n+\n+\t\t\t// String alias and does not exist already.\n \t\t\tif ( !is_numeric( $alias ) && !array_key_exists( $alias, $this->select ) ) {\n \t\t\t\t$this->select[$alias] = $field;\n \t\t\t}\n \n-\t\t\t//Speed up by not using in_array() or array_key_exists().  Toss the field names into their own array as keys => true to exploit a speedy look up with isset().\n+\t\t\t// Speed up by not using in_array() or array_key_exists(). Toss the field names into their own array as keys => true to exploit a speedy look up with isset().\n \t\t\tif ( is_numeric( $alias ) && !isset( $this->selectedFields[$field] ) ) {\n \t\t\t\t$this->select[] = $field;\n \t\t\t\t$this->selectedFields[$field] = true;\n \t\t\t}\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Add a GROUP BY clause to the output.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tGroup By Clause\n-\t * @return\tboolean\tSuccess\n+\t * @param string $groupBy\n+\t * @return bool\n \t */\n \tpublic function addGroupBy( $groupBy ) {\n \t\tif ( empty( $groupBy ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty group by clause was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty group by clause was passed.' );\n \t\t}\n+\n \t\t$this->groupBy[] = $groupBy;\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Add a ORDER BY clause to the output.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tOrder By Clause\n-\t * @return\tboolean\tSuccess\n+\t * @param string $orderBy\n+\t * @return bool\n \t */\n \tpublic function addOrderBy( $orderBy ) {\n \t\tif ( empty( $orderBy ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty order by clause was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty order by clause was passed.' );\n \t\t}\n+\n \t\t$this->orderBy[] = $orderBy;\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Add a JOIN clause to the output.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTable Alias\n-\t * @param\tarray\tJoin Conditions in the format of the join type to the on where condition.  Example: ['JOIN TYPE' => 'this = that']\n-\t * @return\tboolean\tSuccess\n+\t * @param string $tableAlias\n+\t * @param array $joinConditions\n+\t * @return bool\n \t */\n \tpublic function addJoin( $tableAlias, $joinConditions ) {\n \t\tif ( empty( $tableAlias ) || empty( $joinConditions ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': An empty join clause was passed.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': An empty join clause was passed.' );\n \t\t}\n+\n \t\tif ( isset( $this->join[$tableAlias] ) ) {\n-\t\t\tthrow new \\MWException( __METHOD__ . ': Attempted to overwrite existing join clause.' );\n+\t\t\tthrow new MWException( __METHOD__ . ': Attempted to overwrite existing join clause.' );\n \t\t}\n+\n \t\t$this->join[$tableAlias] = $joinConditions;\n+\n \t\treturn true;\n \t}\n \n+\tpublic function addJoins( array $joins ) {\n+\t\tforeach ( $joins as $alias => $conds ) {\n+\t\t\t$this->addJoin( $alias, $conds );\n+\t\t}\n+\t}\n+\n \t/**\n \t * Set the limit.\n \t *\n-\t * @access\tpublic\n-\t * @param\tmixed\tInteger limit or false to unset.\n-\t * @return\tboolean\tSuccess\n+\t * @param mixed $limit\n+\t * @return bool\n \t */\n \tpublic function setLimit( $limit ) {\n \t\tif ( is_numeric( $limit ) ) {\n \t\t\t$this->limit = intval( $limit );\n \t\t} else {\n \t\t\t$this->limit = false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Set the offset.\n \t *\n-\t * @access\tpublic\n-\t * @param\tmixed\tInteger offset or false to unset.\n-\t * @return\tboolean\tSuccess\n+\t * @param mixed $offset\n+\t * @return bool\n \t */\n \tpublic function setOffset( $offset ) {\n \t\tif ( is_numeric( $offset ) ) {\n \t\t\t$this->offset = intval( $offset );\n \t\t} else {\n \t\t\t$this->offset = false;\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Set the ORDER BY direction\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tSQL direction key word.\n-\t * @return\tboolean\tSuccess\n+\t * @param string $direction\n+\t * @return bool\n \t */\n \tpublic function setOrderDir( $direction ) {\n \t\t$this->direction = $direction;\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Set the character set collation.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tCollation\n-\t * @return\tvoid\n+\t * @param string $collation\n \t */\n \tpublic function setCollation( $collation ) {\n \t\t$this->collation = $collation;\n@@ -579,8 +646,7 @@ public function setCollation( $collation ) {\n \t/**\n \t * Return SQL prefixed collation.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tSQL Collation\n+\t * @return string|null\n \t */\n \tpublic function getCollateSQL() {\n \t\treturn ( $this->collation !== false ? 'COLLATE ' . $this->collation : null );\n@@ -589,18 +655,18 @@ public function getCollateSQL() {\n \t/**\n \t * Recursively get and return an array of subcategories.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tCategory Name\n-\t * @param\tinteger\t[Optional] Maximum Depth\n-\t * @return\tarray\tSubcategories\n+\t * @param string $categoryName\n+\t * @param int $depth\n+\t * @return array\n \t */\n \tpublic static function getSubcategories( $categoryName, $depth = 1 ) {\n \t\t$DB = wfGetDB( DB_REPLICA, 'dpl' );\n \n \t\tif ( $depth > 2 ) {\n-\t\t\t//Hard constrain depth because lots of recursion is bad.\n+\t\t\t// Hard constrain depth because lots of recursion is bad.\n \t\t\t$depth = 2;\n \t\t}\n+\n \t\t$categories = [];\n \t\t$result = $DB->select(\n \t\t\t[ 'page', 'categorylinks' ],\n@@ -618,23 +684,25 @@ public static function getSubcategories( $categoryName, $depth = 1 ) {\n \t\t\t\t]\n \t\t\t]\n \t\t);\n+\n \t\twhile ( $row = $result->fetchRow() ) {\n \t\t\t$categories[] = $row['page_title'];\n \t\t\tif ( $depth > 1 ) {\n \t\t\t\t$categories = array_merge( $categories, self::getSubcategories( $row['page_title'], $depth - 1 ) );\n \t\t\t}\n \t\t}\n+\n \t\t$categories = array_unique( $categories );\n \t\t$DB->freeResult( $result );\n+\n \t\treturn $categories;\n \t}\n \n \t/**\n \t * Helper method to handle relative timestamps.\n \t *\n-\t * @private\n-\t * @param\tmixed\tInteger or string\n-\t * @return\tinteger\n+\t * @param mixed $inputDate\n+\t * @return int|string\n \t */\n \tprivate function convertTimestamp( $inputDate ) {\n \t\t$timestamp = $inputDate;\n@@ -643,65 +711,57 @@ private function convertTimestamp( $inputDate ) {\n \t\t\t\t$timestamp = date( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t\tcase 'last hour':\n-\t\t\t\t$date = new \\DateTime();\n-\t\t\t\t$date->sub( new \\DateInterval( 'P1H' ) );\n+\t\t\t\t$date = new DateTime();\n+\t\t\t\t$date->sub( new DateInterval( 'P1H' ) );\n \t\t\t\t$timestamp = $date->format( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t\tcase 'last day':\n-\t\t\t\t$date = new \\DateTime();\n-\t\t\t\t$date->sub( new \\DateInterval( 'P1D' ) );\n+\t\t\t\t$date = new DateTime();\n+\t\t\t\t$date->sub( new DateInterval( 'P1D' ) );\n \t\t\t\t$timestamp = $date->format( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t\tcase 'last week':\n-\t\t\t\t$date = new \\DateTime();\n-\t\t\t\t$date->sub( new \\DateInterval( 'P7D' ) );\n+\t\t\t\t$date = new DateTime();\n+\t\t\t\t$date->sub( new DateInterval( 'P7D' ) );\n \t\t\t\t$timestamp = $date->format( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t\tcase 'last month':\n-\t\t\t\t$date = new \\DateTime();\n-\t\t\t\t$date->sub( new \\DateInterval( 'P1M' ) );\n+\t\t\t\t$date = new DateTime();\n+\t\t\t\t$date->sub( new DateInterval( 'P1M' ) );\n \t\t\t\t$timestamp = $date->format( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t\tcase 'last year':\n-\t\t\t\t$date = new \\DateTime();\n-\t\t\t\t$date->sub( new \\DateInterval( 'P1Y' ) );\n+\t\t\t\t$date = new DateTime();\n+\t\t\t\t$date->sub( new DateInterval( 'P1Y' ) );\n \t\t\t\t$timestamp = $date->format( 'YmdHis' );\n \t\t\t\tbreak;\n \t\t}\n \n \t\tif ( is_numeric( $timestamp ) ) {\n \t\t\treturn $this->DB->addQuotes( $timestamp );\n \t\t}\n+\n \t\treturn 0;\n \t}\n \n \t/**\n \t * Set SQL for 'addauthor' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addauthor( $option ) {\n-\t\t//Addauthor can not be used with addlasteditor.\n+\t\t// Addauthor can not be used with addlasteditor.\n \t\tif ( !isset( $this->parametersProcessed['addlasteditor'] ) || !$this->parametersProcessed['addlasteditor'] ) {\n-\t\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t\t$this->addWhere(\n-\t\t\t\t[\n-\t\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t\t'rev.revactor_timestamp = (SELECT MIN(rev_aux_min.revactor_timestamp) FROM ' . $this->tableNames['revision_actor_temp'] . ' AS rev_aux_min WHERE rev_aux_min.revactor_page = rev.revactor_page)'\n-\t\t\t\t]\n+\t\t\t$this->revisionJoinBuilder->addFieldsFromFirst(\n+\t\t\t\t[ 'rev_user_text' => 'rev_user_text' ]\n \t\t\t);\n-\t\t\t$this->_adduser( null, 'rev' );\n \t\t}\n \t}\n \n \t/**\n \t * Set SQL for 'addcategories' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addcategories( $option ) {\n \t\t$this->addTable( 'categorylinks', 'cl_gc' );\n@@ -710,68 +770,58 @@ private function _addcategories( $option ) {\n \t\t\t\t'cats' => \"GROUP_CONCAT(DISTINCT cl_gc.cl_to ORDER BY cl_gc.cl_to ASC SEPARATOR ' | ')\"\n \t\t\t]\n \t\t);\n+\n \t\t$this->addJoin(\n \t\t\t'cl_gc',\n \t\t\t[\n \t\t\t\t'LEFT OUTER JOIN',\n \t\t\t\t'page_id = cl_gc.cl_from'\n \t\t\t]\n \t\t);\n+\n \t\t$this->addGroupBy( $this->tableNames['page'] . '.page_id' );\n \t}\n \n \t/**\n \t * Set SQL for 'addcontribution' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addcontribution( $option ) {\n-\t\t$this->addTable( 'recentchanges', 'rc' );\n+\t\t$actorQuery = $this->actorMigration->getJoin( 'rc_user' );\n \n-\t\t$field = 'rc.rc_actor';\n+\t\t$this->addTables( [ 'rc' => 'recentchanges' ] + $actorQuery['tables'] );\n+\t\t$this->addSelect( [\n+\t\t\t'contribution' => 'SUM(ABS(rc_new_len - rc_old_len))',\n+\t\t\t'contributor' => $actorQuery['fields']['rc_user_text']\n+\t\t] );\n \n-\t\t$this->addSelect(\n-\t\t\t[\n-\t\t\t\t'contribution'\t=> 'SUM(ABS(rc.rc_new_len - rc.rc_old_len))',\n-\t\t\t\t'contributor'\t=> $field\n-\t\t\t]\n-\t\t);\n-\t\t$this->addWhere(\n-\t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rc.rc_cur_id'\n-\t\t\t]\n-\t\t);\n-\t\t$this->addGroupBy( 'rc.rc_cur_id' );\n+\t\t$this->addGroupBy( 'rc_cur_id, ' . $actorQuery['fields']['rc_actor'] );\n+\t\t$this->addJoins( [ 'rc' => [ 'JOIN', 'page_id = rc_cur_id' ] ] + $actorQuery['joins'] );\n \t}\n \n \t/**\n \t * Set SQL for 'addeditdate' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addeditdate( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t$this->addSelect( [ 'rev.revactor_timestamp' ] );\n+\t\t$this->addTable( 'revision', 'rev' );\n+\t\t$this->addSelect( [ 'rev.rev_timestamp' ] );\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n \t\t\t]\n \t\t);\n \t}\n \n \t/**\n \t * Set SQL for 'addfirstcategorydate' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addfirstcategorydate( $option ) {\n-\t\t//@TODO: This should be programmatically determining which categorylink table to use instead of assuming the first one.\n+\t\t// @TODO: This should be programmatically determining which categorylink table to use instead of assuming the first one.\n \t\t$this->addSelect(\n \t\t\t[\n \t\t\t\t'cl_timestamp'\t=> \"DATE_FORMAT(cl1.cl_timestamp, '%Y%m%d%H%i%s')\"\n@@ -782,30 +832,19 @@ private function _addfirstcategorydate( $option ) {\n \t/**\n \t * Set SQL for 'addlasteditor' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addlasteditor( $option ) {\n-\t\t//Addlasteditor can not be used with addauthor.\n+\t\t// Addlasteditor can not be used with addauthor.\n \t\tif ( !isset( $this->parametersProcessed['addauthor'] ) || !$this->parametersProcessed['addauthor'] ) {\n-\t\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t\t$this->addWhere(\n-\t\t\t\t[\n-\t\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t\t'rev.revactor_timestamp = (SELECT MAX(rev_aux_max.revactor_timestamp) FROM ' . $this->tableNames['revision_actor_temp'] . ' AS rev_aux_max WHERE rev_aux_max.revactor_page = rev.revactor_page)'\n-\t\t\t\t]\n-\t\t\t);\n-\t\t\t$this->_adduser( null, 'rev' );\n+\t\t\t$this->revisionJoinBuilder->addFieldsFromLast( [ 'rev_user_text' => 'rev_user_text' ] );\n \t\t}\n \t}\n \n \t/**\n \t * Set SQL for 'addpagecounter' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addpagecounter( $option ) {\n \t\tif ( class_exists( \"\\\\HitCounters\\\\Hooks\" ) ) {\n@@ -815,6 +854,7 @@ private function _addpagecounter( $option ) {\n \t\t\t\t\t\"page_counter\"\t=> \"hit_counter.page_counter\"\n \t\t\t\t]\n \t\t\t);\n+\n \t\t\tif ( !isset( $this->join['hit_counter'] ) ) {\n \t\t\t\t$this->addJoin(\n \t\t\t\t\t'hit_counter',\n@@ -830,9 +870,7 @@ private function _addpagecounter( $option ) {\n \t/**\n \t * Set SQL for 'addpagesize' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addpagesize( $option ) {\n \t\t$this->addSelect(\n@@ -845,9 +883,7 @@ private function _addpagesize( $option ) {\n \t/**\n \t * Set SQL for 'addpagetoucheddate' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _addpagetoucheddate( $option ) {\n \t\t$this->addSelect(\n@@ -857,79 +893,58 @@ private function _addpagetoucheddate( $option ) {\n \t\t);\n \t}\n \n-\t/**\n-\t * Set SQL for 'adduser' parameter.\n-\t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @param\tstring\t[Optional] Table Alias\n-\t * @return\tvoid\n-\t */\n-\tprivate function _adduser( $option, $tableAlias = '' ) {\n-\t\t$tableAlias = ( !empty( $tableAlias ) ? $tableAlias . '.' : '' );\n-\t\t$this->addSelect(\n-\t\t\t[\n-\t\t\t\t$tableAlias . 'revactor_actor',\n-\t\t\t]\n-\t\t);\n-\t}\n-\n \t/**\n \t * Set SQL for 'allrevisionsbefore' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _allrevisionsbefore( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n+\t\t$this->addTable( 'revision', 'rev' );\n \t\t$this->addSelect(\n \t\t\t[\n-\t\t\t\t'rev.revactor_rev',\n-\t\t\t\t'rev.revactor_timestamp'\n+\t\t\t\t'rev.rev_id',\n+\t\t\t\t'rev.rev_timestamp'\n \t\t\t]\n \t\t);\n-\t\t$this->addOrderBy( 'rev.revactor_rev' );\n+\n+\t\t$this->addOrderBy( 'rev.rev_id' );\n \t\t$this->setOrderDir( 'DESC' );\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp < ' . $this->convertTimestamp( $option )\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp < ' . $this->convertTimestamp( $option )\n \t\t\t]\n \t\t);\n \t}\n \n \t/**\n \t * Set SQL for 'allrevisionssince' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _allrevisionssince( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n+\t\t$this->addTable( 'revision', 'rev' );\n \t\t$this->addSelect(\n \t\t\t[\n-\t\t\t\t'rev.revactor_rev',\n-\t\t\t\t'rev.revactor_timestamp'\n+\t\t\t\t'rev.rev_id',\n+\t\t\t\t'rev.rev_timestamp'\n \t\t\t]\n \t\t);\n-\t\t$this->addOrderBy( 'rev.revactor_rev' );\n+\n+\t\t$this->addOrderBy( 'rev.rev_id' );\n \t\t$this->setOrderDir( 'DESC' );\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp >= ' . $this->convertTimestamp( $option )\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp >= ' . $this->convertTimestamp( $option )\n \t\t\t]\n \t\t);\n \t}\n \n \t/**\n \t * Set SQL for 'articlecategory' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _articlecategory( $option ) {\n \t\t$this->addWhere( \"{$this->tableNames['page']}.page_title IN (SELECT p2.page_title FROM {$this->tableNames['page']} p2 INNER JOIN {$this->tableNames['categorylinks']} clstc ON (clstc.cl_from = p2.page_id AND clstc.cl_to = \" . $this->DB->addQuotes( $option ) . \") WHERE p2.page_namespace = 0)\" );\n@@ -938,34 +953,33 @@ private function _articlecategory( $option ) {\n \t/**\n \t * Set SQL for 'categoriesminmax' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _categoriesminmax( $option ) {\n \t\tif ( is_numeric( $option[0] ) ) {\n \t\t\t$this->addWhere( intval( $option[0] ) . ' <= (SELECT count(*) FROM ' . $this->tableNames['categorylinks'] . ' WHERE ' . $this->tableNames['categorylinks'] . '.cl_from=page_id)' );\n \t\t}\n-\t\tif ( is_numeric( $option[1] ) ) {\n+\n+\t\tif ( isset( $option[1] ) && is_numeric( $option[1] ) ) {\n \t\t\t$this->addWhere( intval( $option[1] ) . ' >= (SELECT count(*) FROM ' . $this->tableNames['categorylinks'] . ' WHERE ' . $this->tableNames['categorylinks'] . '.cl_from=page_id)' );\n \t\t}\n \t}\n \n \t/**\n-\t * Set SQL for 'category' parameter.  This includes 'category', 'categorymatch', and 'categoryregexp'.\n+\t * Set SQL for 'category' parameter. This includes 'category', 'categorymatch', and 'categoryregexp'.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _category( $option ) {\n \t\t$i = 0;\n+\n \t\tforeach ( $option as $comparisonType => $operatorTypes ) {\n \t\t\tforeach ( $operatorTypes as $operatorType => $categoryGroups ) {\n \t\t\t\tforeach ( $categoryGroups as $categories ) {\n \t\t\t\t\tif ( !is_array( $categories ) ) {\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n+\n \t\t\t\t\t$tableName = ( in_array( '', $categories ) ? 'dpl_clview' : 'categorylinks' );\n \t\t\t\t\tif ( $operatorType == 'AND' ) {\n \t\t\t\t\t\tforeach ( $categories as $category ) {\n@@ -987,9 +1001,11 @@ private function _category( $option ) {\n \n \t\t\t\t\t\t$joinOn = \"{$this->tableNames['page']}.page_id = {$tableAlias}.cl_from AND (\";\n \t\t\t\t\t\t$ors = [];\n+\n \t\t\t\t\t\tforeach ( $categories as $category ) {\n \t\t\t\t\t\t\t$ors[] = \"{$tableAlias}.cl_to {$comparisonType} \" . $this->DB->addQuotes( str_replace( ' ', '_', $category ) );\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$joinOn .= implode( \" {$operatorType} \", $ors );\n \t\t\t\t\t\t$joinOn .= ')';\n \n@@ -1009,9 +1025,7 @@ private function _category( $option ) {\n \t/**\n \t * Set SQL for 'notcategory' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notcategory( $option ) {\n \t\t$i = 0;\n@@ -1029,6 +1043,7 @@ private function _notcategory( $option ) {\n \t\t\t\t\t\t\"{$this->tableNames['page']}.page_id = {$tableAlias}.cl_from AND {$tableAlias}.cl_to {$operatorType}\" . $this->DB->addQuotes( str_replace( ' ', '_', $category ) )\n \t\t\t\t\t]\n \t\t\t\t);\n+\n \t\t\t\t$this->addWhere(\n \t\t\t\t\t[\n \t\t\t\t\t\t\"{$tableAlias}.cl_to\"\t=> null\n@@ -1041,31 +1056,16 @@ private function _notcategory( $option ) {\n \t/**\n \t * Set SQL for 'createdby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _createdby( $option ) {\n-\t\t$this->addTable( 'revision', 'creation_rev' );\n-\t\t$this->addTable( 'revision_actor_temp', 'creation_rev_actor' );\n-\t\t$this->_adduser( null, 'creation_rev_actor' );\n-\t\t$user = new \\User;\n-\n-\t\t$this->addWhere(\n-\t\t\t[\n-\t\t\t\t$this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' = creation_rev_actor.revactor_actor',\n-\t\t\t\t'creation_rev_actor.revactor_page = page_id',\n-\t\t\t\t'creation_rev.rev_parent_id = 0'\n-\t\t\t]\n-\t\t);\n+\t\t$this->userQueryBuilder->addCreatedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'distinct' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _distinct( $option ) {\n \t\tif ( $option == 'strict' || $option === true ) {\n@@ -1078,39 +1078,37 @@ private function _distinct( $option ) {\n \t/**\n \t * Set SQL for 'firstrevisionsince' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _firstrevisionsince( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n+\t\t$this->addTable( 'revision', 'rev' );\n \t\t$this->addSelect(\n \t\t\t[\n-\t\t\t\t'rev.revactor_rev',\n-\t\t\t\t'rev.revactor_timestamp'\n+\t\t\t\t'rev.rev_id',\n+\t\t\t\t'rev.rev_timestamp'\n \t\t\t]\n \t\t);\n+\n \t\t// tell the query optimizer not to look at rows that the following subquery will filter out anyway\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp >= ' . $this->DB->addQuotes( $option )\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp >= ' . $this->DB->addQuotes( $option )\n \t\t\t]\n \t\t);\n+\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp = (SELECT MIN(rev_aux_snc.revactor_timestamp) FROM ' . $this->tableNames['revision_actor_temp'] . ' AS rev_aux_snc WHERE rev_aux_snc.revactor_page=rev.revactor_page AND rev_aux_snc.revactor_timestamp >= ' . $this->convertTimestamp( $option ) . ')'\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp = (SELECT MIN(rev_aux_snc.rev_timestamp) FROM ' . $this->tableNames['revision'] . ' AS rev_aux_snc WHERE rev_aux_snc.rev_page=rev.rev_page AND rev_aux_snc.rev_timestamp >= ' . $this->convertTimestamp( $option ) . ')'\n \t\t\t]\n \t\t);\n \t}\n \n \t/**\n \t * Set SQL for 'goal' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _goal( $option ) {\n \t\tif ( $option == 'categories' ) {\n@@ -1122,34 +1120,34 @@ private function _goal( $option ) {\n \t/**\n \t * Set SQL for 'hiddencategories' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _hiddencategories( $option ) {\n-\t\t//@TODO: Unfinished functionality!  Never implemented by original author.\n+\t\t// @TODO: Unfinished functionality! Never implemented by original author.\n \t}\n \n \t/**\n \t * Set SQL for 'imagecontainer' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _imagecontainer( $option ) {\n+\t\t$where = [];\n+\n \t\t$this->addTable( 'imagelinks', 'ic' );\n \t\t$this->addSelect(\n \t\t\t[\n \t\t\t\t'sortkey'\t=> 'ic.il_to'\n \t\t\t]\n \t\t);\n+\n \t\tif ( !$this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t$where = [\n \t\t\t\t\"{$this->tableNames['page']}.page_namespace = \" . intval( NS_FILE ),\n \t\t\t\t\"{$this->tableNames['page']}.page_title = ic.il_to\"\n \t\t\t];\n \t\t}\n+\n \t\t$ors = [];\n \t\tforeach ( $option as $linkGroup ) {\n \t\t\tforeach ( $linkGroup as $link ) {\n@@ -1160,29 +1158,33 @@ private function _imagecontainer( $option ) {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\t$where[] = '(' . implode( ' OR ', $ors ) . ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'imageused' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _imageused( $option ) {\n+\t\t$where = [];\n+\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\t$this->addTable( 'imagelinks', 'il' );\n \t\t$this->addSelect(\n \t\t\t[\n \t\t\t\t'image_sel_title'\t=> 'il.il_to'\n \t\t\t]\n \t\t);\n+\n \t\t$where[] = $this->tableNames['page'] . '.page_id = il.il_from';\n \t\t$ors = [];\n+\n \t\tforeach ( $option as $linkGroup ) {\n \t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n@@ -1192,66 +1194,65 @@ private function _imageused( $option ) {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\t$where[] = '(' . implode( ' OR ', $ors ) . ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'lastmodifiedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _lastmodifiedby( $option ) {\n-\t   $user = new \\User;\n-\n-\t   $this->addWhere( $this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' = (SELECT revactor_actor FROM ' . $this->tableNames['revision_actor_temp'] . ' WHERE ' . $this->tableNames['revision_actor_temp'] . '.revactor_page=page_id ORDER BY ' . $this->tableNames['revision_actor_temp'] . '.revactor_timestamp DESC LIMIT 1)' );\n+\t\t$this->userQueryBuilder->addLastModifiedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'lastrevisionbefore' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _lastrevisionbefore( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t$this->addSelect( [ 'rev.revactor_rev', 'rev.revactor_timestamp' ] );\n+\t\t$this->addTable( 'revision', 'rev' );\n+\t\t$this->addSelect( [ 'rev.rev_id', 'rev.rev_timestamp' ] );\n+\n \t\t// tell the query optimizer not to look at rows that the following subquery will filter out anyway\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp < ' . $this->convertTimestamp( $option )\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp < ' . $this->convertTimestamp( $option )\n \t\t\t]\n \t\t);\n+\n \t\t$this->addWhere(\n \t\t\t[\n-\t\t\t\t$this->tableNames['page'] . '.page_id = rev.revactor_page',\n-\t\t\t\t'rev.revactor_timestamp = (SELECT MAX(rev_aux_bef.revactor_timestamp) FROM ' . $this->tableNames['revision_actor_temp'] . ' AS rev_aux_bef WHERE rev_aux_bef.revactor_page=rev.revactor_page AND rev_aux_bef.revactor_timestamp < ' . $this->convertTimestamp( $option ) . ')'\n+\t\t\t\t$this->tableNames['page'] . '.page_id = rev.rev_page',\n+\t\t\t\t'rev.rev_timestamp = (SELECT MAX(rev_aux_bef.rev_timestamp) FROM ' . $this->tableNames['revision'] . ' AS rev_aux_bef WHERE rev_aux_bef.rev_page=rev.rev_page AND rev_aux_bef.rev_timestamp < ' . $this->convertTimestamp( $option ) . ')'\n \t\t\t]\n \t\t);\n \t}\n \n \t/**\n \t * Set SQL for 'linksfrom' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _linksfrom( $option ) {\n+\t\t$where = [];\n+\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t$ors = [];\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ors[] = '(pl_from = ' . $link->getArticleID() . ')';\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where[] = '(' . implode( ' OR ', $ors ) . ')';\n \t\t} else {\n \t\t\t$this->addTable( 'pagelinks', 'plf' );\n@@ -1262,77 +1263,90 @@ private function _linksfrom( $option ) {\n \t\t\t\t\t'sel_ns' => 'pagesrc.page_namespace'\n \t\t\t\t]\n \t\t\t);\n+\n \t\t\t$where = [\n \t\t\t\t$this->tableNames['page'] . '.page_namespace = plf.pl_namespace',\n \t\t\t\t$this->tableNames['page'] . '.page_title = plf.pl_title',\n \t\t\t\t'pagesrc.page_id = plf.pl_from'\n \t\t\t];\n+\n \t\t\t$ors = [];\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ors[] = 'plf.pl_from = ' . $link->getArticleID();\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where[] = '(' . implode( ' OR ', $ors ) . ')';\n \t\t}\n+\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'linksto' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _linksto( $option ) {\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\tif ( count( $option ) > 0 ) {\n \t\t\t$this->addTable( 'pagelinks', 'pl' );\n \t\t\t$this->addSelect( [ 'sel_title' => 'pl.pl_title', 'sel_ns' => 'pl.pl_namespace' ] );\n+\n \t\t\tforeach ( $option as $index => $linkGroup ) {\n \t\t\t\tif ( $index == 0 ) {\n \t\t\t\t\t$where = $this->tableNames['page'] . '.page_id=pl.pl_from AND ';\n \t\t\t\t\t$ors = [];\n+\n \t\t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t\t$_or = '(pl.pl_namespace=' . intval( $link->getNamespace() );\n \t\t\t\t\t\tif ( strpos( $link->getDbKey(), '%' ) >= 0 ) {\n \t\t\t\t\t\t\t$operator = 'LIKE';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$operator = '=';\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n \t\t\t\t\t\t\t$_or .= ' AND LOWER(CAST(pl.pl_title AS char)) ' . $operator . ' LOWER(' . $this->DB->addQuotes( $link->getDbKey() ) . ')';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$_or .= ' AND pl.pl_title ' . $operator . ' ' . $this->DB->addQuotes( $link->getDbKey() );\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$_or .= ')';\n \t\t\t\t\t\t$ors[] = $_or;\n \t\t\t\t\t}\n+\n \t\t\t\t\t$where .= '(' . implode( ' OR ', $ors ) . ')';\n \t\t\t\t} else {\n \t\t\t\t\t$where = 'EXISTS(select pl_from FROM ' . $this->tableNames['pagelinks'] . ' WHERE (' . $this->tableNames['pagelinks'] . '.pl_from=page_id AND ';\n \t\t\t\t\t$ors = [];\n+\n \t\t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t\t$_or = '(' . $this->tableNames['pagelinks'] . '.pl_namespace=' . intval( $link->getNamespace() );\n \t\t\t\t\t\tif ( strpos( $link->getDbKey(), '%' ) >= 0 ) {\n \t\t\t\t\t\t\t$operator = 'LIKE';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$operator = '=';\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n \t\t\t\t\t\t\t$_or .= ' AND LOWER(CAST(' . $this->tableNames['pagelinks'] . '.pl_title AS char)) ' . $operator . ' LOWER(' . $this->DB->addQuotes( $link->getDbKey() ) . ')';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$_or .= ' AND ' . $this->tableNames['pagelinks'] . '.pl_title ' . $operator . ' ' . $this->DB->addQuotes( $link->getDbKey() );\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$_or .= ')';\n \t\t\t\t\t\t$ors[] = $_or;\n \t\t\t\t\t}\n+\n \t\t\t\t\t$where .= '(' . implode( ' OR ', $ors ) . ')';\n \t\t\t\t\t$where .= '))';\n \t\t\t\t}\n+\n \t\t\t\t$this->addWhere( $where );\n \t\t\t}\n \t\t}\n@@ -1341,49 +1355,52 @@ private function _linksto( $option ) {\n \t/**\n \t * Set SQL for 'notlinksfrom' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notlinksfrom( $option ) {\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t$ands = [];\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ands[] = 'pl_from <> ' . intval( $link->getArticleID() ) . ' ';\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where = '(' . implode( ' AND ', $ands ) . ')';\n \t\t} else {\n \t\t\t$where = 'CONCAT(page_namespace,page_title) NOT IN (SELECT CONCAT(' . $this->tableNames['pagelinks'] . '.pl_namespace,' . $this->tableNames['pagelinks'] . '.pl_title) FROM ' . $this->tableNames['pagelinks'] . ' WHERE ';\n \t\t\t$ors = [];\n+\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ors[] = $this->tableNames['pagelinks'] . '.pl_from = ' . intval( $link->getArticleID() );\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where .= implode( ' OR ', $ors ) . ')';\n \t\t}\n+\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'notlinksto' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notlinksto( $option ) {\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\tif ( count( $option ) ) {\n \t\t\t$where = $this->tableNames['page'] . '.page_id NOT IN (SELECT ' . $this->tableNames['pagelinks'] . '.pl_from FROM ' . $this->tableNames['pagelinks'] . ' WHERE ';\n \t\t\t$ors = [];\n+\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$_or = '(' . $this->tableNames['pagelinks'] . '.pl_namespace=' . intval( $link->getNamespace() );\n@@ -1392,50 +1409,59 @@ private function _notlinksto( $option ) {\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$operator = '=';\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n \t\t\t\t\t\t$_or .= ' AND LOWER(CAST(' . $this->tableNames['pagelinks'] . '.pl_title AS char)) ' . $operator . ' LOWER(' . $this->DB->addQuotes( $link->getDbKey() ) . '))';\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$_or .= ' AND ' . $this->tableNames['pagelinks'] . '.pl_title ' . $operator . ' ' . $this->DB->addQuotes( $link->getDbKey() ) . ')';\n \t\t\t\t\t}\n+\n \t\t\t\t\t$ors[] = $_or;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where .= '(' . implode( ' OR ', $ors ) . '))';\n \t\t}\n-\t\t$this->addWhere( $where );\n+\n+\t\t$this->addWhere( $where ?? '' );\n \t}\n \n \t/**\n \t * Set SQL for 'linkstoexternal' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _linkstoexternal( $option ) {\n \t\tif ( $this->parameters->getParameter( 'distinct' ) == 'strict' ) {\n \t\t\t$this->addGroupBy( 'page_title' );\n \t\t}\n+\n \t\tif ( count( $option ) > 0 ) {\n \t\t\t$this->addTable( 'externallinks', 'el' );\n \t\t\t$this->addSelect( [ 'el_to' => 'el.el_to' ] );\n+\n \t\t\tforeach ( $option as $index => $linkGroup ) {\n \t\t\t\tif ( $index == 0 ) {\n \t\t\t\t\t$where = $this->tableNames['page'] . '.page_id=el.el_from AND ';\n \t\t\t\t\t$ors = [];\n+\n \t\t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t\t$ors[] = 'el.el_to LIKE ' . $this->DB->addQuotes( $link );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$where .= '(' . implode( ' OR ', $ors ) . ')';\n \t\t\t\t} else {\n \t\t\t\t\t$where = 'EXISTS(SELECT el_from FROM ' . $this->tableNames['externallinks'] . ' WHERE (' . $this->tableNames['externallinks'] . '.el_from=page_id AND ';\n \t\t\t\t\t$ors = [];\n+\n \t\t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t\t$ors[] = $this->tableNames['externallinks'] . '.el_to LIKE ' . $this->DB->addQuotes( $link );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$where .= '(' . implode( ' OR ', $ors ) . ')';\n \t\t\t\t\t$where .= '))';\n \t\t\t\t}\n+\n \t\t\t\t$this->addWhere( $where );\n \t\t\t}\n \t\t}\n@@ -1444,62 +1470,48 @@ private function _linkstoexternal( $option ) {\n \t/**\n \t * Set SQL for 'maxrevisions' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _maxrevisions( $option ) {\n-\t\t$this->addWhere( \"((SELECT count(rev_aux3.revactor_page) FROM {$this->tableNames['revision_actor_temp']} AS rev_aux3 WHERE rev_aux3.revactor_page = {$this->tableNames['page']}.page_id) <= {$option})\" );\n+\t\t$this->addWhere( \"((SELECT count(rev_aux3.rev_page) FROM {$this->tableNames['revision']} AS rev_aux3 WHERE rev_aux3.rev_page = {$this->tableNames['page']}.page_id) <= {$option})\" );\n \t}\n \n \t/**\n \t * Set SQL for 'minoredits' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _minoredits( $option ) {\n \t\tif ( isset( $option ) && $option == 'exclude' ) {\n-\t\t\t$this->addTable( 'revision', 'revision' );\n-\t\t\t$this->addWhere( 'revision.rev_minor_edit = 0' );\n+\t\t\t$this->addTable( 'revision', 'rev' );\n+\t\t\t$this->addWhere( 'rev.rev_minor_edit = 0' );\n \t\t}\n \t}\n \n \t/**\n \t * Set SQL for 'minrevisions' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _minrevisions( $option ) {\n-\t\t$this->addWhere( \"((SELECT count(rev_aux2.revactor_page) FROM {$this->tableNames['revision_actor_temp']} AS rev_aux2 WHERE rev_aux2.revactor_page = {$this->tableNames['page']}.page_id) >= {$option})\" );\n+\t\t$this->addWhere( \"((SELECT count(rev_aux2.rev_page) FROM {$this->tableNames['revision']} AS rev_aux2 WHERE rev_aux2.rev_page = {$this->tableNames['page']}.page_id) >= {$option})\" );\n \t}\n \n \t/**\n \t * Set SQL for 'modifiedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _modifiedby( $option ) {\n-\t\t$this->addTable( 'revision_actor_temp', 'change_rev' );\n-\t\t$user = new \\User;\n-\n-\t\t$this->addWhere( $this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' = change_rev.revactor_actor AND change_rev.revactor_page = page_id' );\n+\t\t$this->userQueryBuilder->addModifiedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'namespace' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _namespace( $option ) {\n-\t\t$option === 0 ?? $option = '0';\n \t\tif ( is_array( $option ) && count( $option ) ) {\n \t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t\t$this->addWhere(\n@@ -1520,48 +1532,34 @@ private function _namespace( $option ) {\n \t/**\n \t * Set SQL for 'notcreatedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notcreatedby( $option ) {\n-\t\t$this->addTable( 'revision', 'no_creation_rev' );\n-\t\t$this->addTable( 'revision_actor_temp', 'no_creation_rev_actor' );\n-\t\t$user = new \\User;\n-\n-\t\t$this->addWhere( $this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' != no_creation_rev_actor.revactor_actor AND no_creation_rev_actor.revactor_page = page_id AND no_creation_rev.rev_parent_id = 0' );\n+\t\t$this->userQueryBuilder->addNotCreatedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'notlastmodifiedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notlastmodifiedby( $option ) {\n-\t\t$user = new \\User;\n-\t\t$this->addWhere( $this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' != (SELECT revactor_actor FROM ' . $this->tableNames['revision_actor_temp'] . ' WHERE ' . $this->tableNames['revision_actor_temp'] . '.revactor_page=page_id ORDER BY ' . $this->tableNames['revision_actor_temp'] . '.revactor_timestamp DESC LIMIT 1)' );\n+\t\t$this->userQueryBuilder->addNotLastModifiedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'notmodifiedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notmodifiedby( $option ) {\n-\t\t$user = new \\User;\n-\t\t$this->addWhere( 'NOT EXISTS (SELECT 1 FROM ' . $this->tableNames['revision_actor_temp'] . ' WHERE ' . $this->tableNames['revision_actor_temp'] . '.revactor_page=page_id AND ' . $this->tableNames['revision_actor_temp'] . '.revactor_actor = ' . $this->DB->addQuotes( $user->newFromName( $option )->getActorId() ) . ' LIMIT 1)' );\n+\t\t$this->userQueryBuilder->addNotModifiedByConstraint( $option );\n \t}\n \n \t/**\n \t * Set SQL for 'notnamespace' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notnamespace( $option ) {\n \t\tif ( is_array( $option ) && count( $option ) ) {\n@@ -1584,9 +1582,7 @@ private function _notnamespace( $option ) {\n \t/**\n \t * Set SQL for 'count' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _count( $option ) {\n \t\t$this->setLimit( $option );\n@@ -1595,9 +1591,7 @@ private function _count( $option ) {\n \t/**\n \t * Set SQL for 'offset' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _offset( $option ) {\n \t\t$this->setOffset( $option );\n@@ -1606,12 +1600,11 @@ private function _offset( $option ) {\n \t/**\n \t * Set SQL for 'order' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _order( $option ) {\n \t\t$orderMethod = $this->parameters->getParameter( 'ordermethod' );\n+\n \t\tif ( !empty( $orderMethod ) && is_array( $orderMethod ) && $orderMethod[0] !== 'none' ) {\n \t\t\tif ( $option === 'descending' || $option === 'desc' ) {\n \t\t\t\t$this->setOrderDir( 'DESC' );\n@@ -1624,9 +1617,8 @@ private function _order( $option ) {\n \t/**\n \t * Set SQL for 'ordercollation' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n+\t * @return bool\n \t */\n \tprivate function _ordercollation( $option ) {\n \t\t$option = mb_strtolower( $option );\n@@ -1642,46 +1634,54 @@ private function _ordercollation( $option ) {\n \t\t\t\tbreak;\n \t\t\t}\n \t\t}\n+\n \t\treturn true;\n \t}\n \n \t/**\n \t * Set SQL for 'ordermethod' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _ordermethod( $option ) {\n-\t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n-\n \t\tif ( $this->parameters->getParameter( 'goal' ) == 'categories' ) {\n-\t\t\t//No order methods for returning categories.\n+\t\t\t// No order methods for returning categories.\n \t\t\treturn true;\n \t\t}\n \n-\t\t$namespaces = $contLang->getNamespaces();\n-\t\t//$aStrictNs = array_slice((array) Config::getSetting('allowedNamespaces'), 1, count(Config::getSetting('allowedNamespaces')), true);\n+\t\t$services = MediaWikiServices::getInstance();\n+\t\t$namespaces = $services->getContentLanguage()->getNamespaces();\n+\n+\t\t// $aStrictNs = array_slice( (array)Config::getSetting( 'allowedNamespaces' ), 1, count( Config::getSetting( 'allowedNamespaces' ) ), true );\n+\n \t\t$namespaces = array_slice( $namespaces, 3, count( $namespaces ), true );\n \t\t$_namespaceIdToText = \"CASE {$this->tableNames['page']}.page_namespace\";\n+\n \t\tforeach ( $namespaces as $id => $name ) {\n \t\t\t$_namespaceIdToText .= ' WHEN ' . intval( $id ) . \" THEN \" . $this->DB->addQuotes( $name . ':' );\n \t\t}\n+\n \t\t$_namespaceIdToText .= ' END';\n \n \t\t$option = (array)$option;\n+\n+\t\t$willOrderByLastEdit = in_array( 'lastedit', $option );\n+\t\t$willOrderByFirstEdit = in_array( 'firstedit', $option );\n+\n \t\tforeach ( $option as $orderMethod ) {\n \t\t\tswitch ( $orderMethod ) {\n \t\t\t\tcase 'category':\n \t\t\t\t\t$this->addOrderBy( 'cl_head.cl_to' );\n-\t\t\t\t\t$this->addSelect( [ 'cl_head.cl_to' ] ); //Gives category headings in the result.\n+\t\t\t\t\t$this->addSelect( [ 'cl_head.cl_to' ] );\n+\n \t\t\t\t\tif ( ( is_array( $this->parameters->getParameter( 'catheadings' ) ) && in_array( '', $this->parameters->getParameter( 'catheadings' ) ) ) || ( is_array( $this->parameters->getParameter( 'catnotheadings' ) ) && in_array( '', $this->parameters->getParameter( 'catnotheadings' ) ) ) ) {\n \t\t\t\t\t\t$_clTableName = 'dpl_clview';\n \t\t\t\t\t\t$_clTableAlias = $_clTableName;\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$_clTableName = 'categorylinks';\n \t\t\t\t\t\t$_clTableAlias = 'cl_head';\n \t\t\t\t\t}\n+\n \t\t\t\t\t$this->addTable( $_clTableName, $_clTableAlias );\n \t\t\t\t\t$this->addJoin(\n \t\t\t\t\t\t$_clTableAlias,\n@@ -1690,13 +1690,15 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t\t\t\"page_id = cl_head.cl_from\"\n \t\t\t\t\t\t]\n \t\t\t\t\t);\n+\n \t\t\t\t\tif ( is_array( $this->parameters->getParameter( 'catheadings' ) ) && count( $this->parameters->getParameter( 'catheadings' ) ) ) {\n \t\t\t\t\t\t$this->addWhere(\n \t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\t\"cl_head.cl_to\"\t=> $this->parameters->getParameter( 'catheadings' )\n \t\t\t\t\t\t\t]\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( is_array( $this->parameters->getParameter( 'catnotheadings' ) ) && count( $this->parameters->getParameter( 'catnotheadings' ) ) ) {\n \t\t\t\t\t\t$this->addNotWhere(\n \t\t\t\t\t\t\t[\n@@ -1706,12 +1708,12 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'categoryadd':\n-\t\t\t\t\t//@TODO: See TODO in __addfirstcategorydate().\n+\t\t\t\t\t// @TODO: See TODO in __addfirstcategorydate().\n \t\t\t\t\t$this->addOrderBy( 'cl1.cl_timestamp' );\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'counter':\n \t\t\t\t\tif ( class_exists( \"\\\\HitCounters\\\\Hooks\" ) ) {\n-\t\t\t\t\t\t//If the \"addpagecounter\" parameter was not used the table and join need to be added now.\n+\t\t\t\t\t\t// If the \"addpagecounter\" parameter was not used the table and join need to be added now.\n \t\t\t\t\t\tif ( !array_key_exists( 'hit_counter', $this->tables ) ) {\n \t\t\t\t\t\t\t$this->addTable( 'hit_counter', 'hit_counter' );\n \n@@ -1725,48 +1727,31 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$this->addOrderBy( 'hit_counter.page_counter' );\n \t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'firstedit':\n-\t\t\t\t\t$this->addOrderBy( 'rev.revactor_timestamp' );\n-\t\t\t\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t\t\t\t$this->addSelect(\n-\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t'rev.revactor_timestamp'\n-\t\t\t\t\t\t]\n-\t\t\t\t\t);\n-\t\t\t\t\tif ( !$this->revisionAuxWhereAdded ) {\n-\t\t\t\t\t\t$this->addWhere(\n-\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t\"{$this->tableNames['page']}.page_id = rev.revactor_page\",\n-\t\t\t\t\t\t\t\t\"rev.revactor_timestamp = (SELECT MIN(rev_aux.revactor_timestamp) FROM {$this->tableNames['revision_actor_temp']} AS rev_aux WHERE rev_aux.revactor_page=rev.revactor_page)\"\n-\t\t\t\t\t\t\t]\n-\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t\t$this->revisionAuxWhereAdded = true;\n+\t\t\t\t\t$this->revisionJoinBuilder->addFieldsFromFirst( [\n+\t\t\t\t\t\t'first_rev_timestamp' => 'rev_timestamp'\n+\t\t\t\t\t] );\n+\n+\t\t\t\t\t$this->addOrderBy( 'first_rev_timestamp' );\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'lastedit':\n-\t\t\t\t\tif ( \\DynamicPageListHooks::isLikeIntersection() ) {\n+\t\t\t\t\tif ( DynamicPageListHooks::isLikeIntersection() ) {\n \t\t\t\t\t\t$this->addOrderBy( 'page_touched' );\n \t\t\t\t\t\t$this->addSelect(\n \t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\t\"page_touched\" => \"{$this->tableNames['page']}.page_touched\"\n \t\t\t\t\t\t\t]\n \t\t\t\t\t\t);\n \t\t\t\t\t} else {\n-\t\t\t\t\t\t$this->addOrderBy( 'rev.revactor_timestamp' );\n-\t\t\t\t\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t\t\t\t\t$this->addSelect( [ 'rev.revactor_timestamp' ] );\n-\t\t\t\t\t\tif ( !$this->revisionAuxWhereAdded ) {\n-\t\t\t\t\t\t\t$this->addWhere(\n-\t\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t\t\"{$this->tableNames['page']}.page_id = rev.revactor_page\",\n-\t\t\t\t\t\t\t\t\t\"rev.revactor_timestamp = (SELECT MAX(rev_aux.revactor_timestamp) FROM {$this->tableNames['revision_actor_temp']} AS rev_aux WHERE rev_aux.revactor_page = rev.revactor_page)\"\n-\t\t\t\t\t\t\t\t]\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\t$this->revisionAuxWhereAdded = true;\n+\t\t\t\t\t\t$this->revisionJoinBuilder->addFieldsFromLast( [\n+\t\t\t\t\t\t\t'latest_rev_timestamp' => 'rev_timestamp'\n+\t\t\t\t\t\t] );\n+\n+\t\t\t\t\t\t$this->addOrderBy( 'latest_rev_timestamp' );\n \t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'pagesel':\n@@ -1790,6 +1775,7 @@ private function _ordermethod( $option ) {\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'sortkey':\n \t\t\t\t\t$this->addOrderBy( 'sortkey' );\n+\n \t\t\t\t\t// If cl_sortkey is null (uncategorized page), generate a sortkey in the usual way (full page name, underscores replaced with spaces).\n \t\t\t\t\t// UTF-8 created problems with non-utf-8 MySQL databases\n \t\t\t\t\t$replaceConcat = \"REPLACE(CONCAT({$_namespaceIdToText}, \" . $this->tableNames['page'] . \".page_title), '_', ' ')\";\n@@ -1804,7 +1790,7 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t\t\t\t]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t//This runs on the assumption that at least one category parameter was used and that numbering starts at 1.\n+\t\t\t\t\t\t\t// This runs on the assumption that at least one category parameter was used and that numbering starts at 1.\n \t\t\t\t\t\t\t$this->addSelect(\n \t\t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\t\t'sortkey' => \"IFNULL(cl1.cl_sortkey, {$replaceConcat}) \" . $this->getCollateSQL()\n@@ -1825,6 +1811,7 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$this->addOrderBy( \"page_title\" );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$this->addSelect(\n \t\t\t\t\t\t[\n \t\t\t\t\t\t\t'sortkey' => \"{$this->tableNames['page']}.page_title \" . $this->getCollateSQL()\n@@ -1836,11 +1823,11 @@ private function _ordermethod( $option ) {\n \t\t\t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t\t\t\t$this->addSelect(\n \t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t'sortkey' => \"REPLACE(CONCAT(IF(pl_namespace  =0, '', CONCAT(\" . $_namespaceIdToText . \", ':')), pl_title), '_', ' ') \" . $this->getCollateSQL()\n+\t\t\t\t\t\t\t\t'sortkey' => \"REPLACE(CONCAT(IF(pl_namespace =0, '', CONCAT(\" . $_namespaceIdToText . \", ':')), pl_title), '_', ' ') \" . $this->getCollateSQL()\n \t\t\t\t\t\t\t]\n \t\t\t\t\t\t);\n \t\t\t\t\t} else {\n-\t\t\t\t\t\t//Generate sortkey like for category links. UTF-8 created problems with non-utf-8 MySQL databases.\n+\t\t\t\t\t\t// Generate sortkey like for category links. UTF-8 created problems with non-utf-8 MySQL databases.\n \t\t\t\t\t\t$this->addSelect(\n \t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\t'sortkey' => \"REPLACE(CONCAT(IF(\" . $this->tableNames['page'] . \".page_namespace = 0, '', CONCAT(\" . $_namespaceIdToText . \", ':')), \" . $this->tableNames['page'] . \".page_title), '_', ' ') \" . $this->getCollateSQL()\n@@ -1849,10 +1836,26 @@ private function _ordermethod( $option ) {\n \t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'user':\n-\t\t\t\t\t$user = new \\User;\n-\t\t\t\t\t$this->addOrderBy( $user->newFromName( 'rev.revactor_actor' )->getActorId() );\n-\t\t\t\t\t$this->addTable( 'revision_actor_temp', 'rev' );\n-\t\t\t\t\t$this->_adduser( null, 'rev' );\n+\t\t\t\t\t$actorQuery = $this->actorMigration->getJoin( 'rev_user' );\n+\t\t\t\t\t$sortField = $actorQuery['fields']['rev_actor'] !== 'NULL' ? 'rev_actor' : 'rev_user_text';\n+\n+\t\t\t\t\tif ( $willOrderByFirstEdit ) {\n+\t\t\t\t\t\t$this->revisionJoinBuilder->addFieldsFromFirst( [\n+\t\t\t\t\t\t\t'rev_user_text' => 'rev_user_text',\n+\t\t\t\t\t\t\t'first_rev_actor' => $sortField\n+\t\t\t\t\t\t] );\n+\n+\t\t\t\t\t\t$this->addOrderBy( 'first_rev_actor' );\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif ( $willOrderByLastEdit ) {\n+\t\t\t\t\t\t$this->revisionJoinBuilder->addFieldsFromLast( [\n+\t\t\t\t\t\t\t'rev_user_text' => 'rev_user_text',\n+\t\t\t\t\t\t\t'last_rev_actor' => $sortField\n+\t\t\t\t\t\t] );\n+\n+\t\t\t\t\t\t$this->addOrderBy( 'last_rev_actor' );\n+\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'none':\n \t\t\t\t\tbreak;\n@@ -1863,9 +1866,7 @@ private function _ordermethod( $option ) {\n \t/**\n \t * Set SQL for 'redirects' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _redirects( $option ) {\n \t\tif ( !$this->parameters->getParameter( 'openreferences' ) ) {\n@@ -1891,13 +1892,11 @@ private function _redirects( $option ) {\n \t/**\n \t * Set SQL for 'stablepages' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _stablepages( $option ) {\n \t\tif ( function_exists( 'efLoadFlaggedRevs' ) ) {\n-\t\t\t//Do not add this again if 'qualitypages' has already added it.\n+\t\t\t// Do not add this again if 'qualitypages' has already added it.\n \t\t\tif ( !$this->parametersProcessed['qualitypages'] ) {\n \t\t\t\t$this->addJoin(\n \t\t\t\t\t'flaggedpages',\n@@ -1907,6 +1906,7 @@ private function _stablepages( $option ) {\n \t\t\t\t\t]\n \t\t\t\t);\n \t\t\t}\n+\n \t\t\tswitch ( $option ) {\n \t\t\t\tcase 'only':\n \t\t\t\t\t$this->addWhere(\n@@ -1929,13 +1929,11 @@ private function _stablepages( $option ) {\n \t/**\n \t * Set SQL for 'qualitypages' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _qualitypages( $option ) {\n \t\tif ( function_exists( 'efLoadFlaggedRevs' ) ) {\n-\t\t\t//Do not add this again if 'stablepages' has already added it.\n+\t\t\t// Do not add this again if 'stablepages' has already added it.\n \t\t\tif ( !$this->parametersProcessed['stablepages'] ) {\n \t\t\t\t$this->addJoin(\n \t\t\t\t\t'flaggedpages',\n@@ -1945,6 +1943,7 @@ private function _qualitypages( $option ) {\n \t\t\t\t\t]\n \t\t\t\t);\n \t\t\t}\n+\n \t\t\tswitch ( $option ) {\n \t\t\t\tcase 'only':\n \t\t\t\t\t$this->addWhere( 'fp_quality >= 1' );\n@@ -1959,12 +1958,11 @@ private function _qualitypages( $option ) {\n \t/**\n \t * Set SQL for 'title' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _title( $option ) {\n \t\t$ors = [];\n+\n \t\tforeach ( $option as $comparisonType => $titles ) {\n \t\t\tforeach ( $titles as $title ) {\n \t\t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n@@ -1980,22 +1978,23 @@ private function _title( $option ) {\n \t\t\t\t\t\t$_or = \"{$this->tableNames['page']}.page_title {$comparisonType}\" . $this->DB->addQuotes( $title );\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t$ors[] = $_or;\n \t\t\t}\n \t\t}\n+\n \t\t$where = '(' . implode( ' OR ', $ors ) . ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'nottitle' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _nottitle( $option ) {\n \t\t$ors = [];\n+\n \t\tforeach ( $option as $comparisonType => $titles ) {\n \t\t\tforeach ( $titles as $title ) {\n \t\t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n@@ -2011,25 +2010,26 @@ private function _nottitle( $option ) {\n \t\t\t\t\t\t$_or = \"{$this->tableNames['page']}.page_title {$comparisonType}\" . $this->DB->addQuotes( $title );\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t$ors[] = $_or;\n \t\t\t}\n \t\t}\n+\n \t\t$where = 'NOT (' . implode( ' OR ', $ors ) . ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'titlegt' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _titlegt( $option ) {\n \t\t$where = '(';\n+\n \t\tif ( substr( $option, 0, 2 ) == '=_' ) {\n \t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n-\t\t\t\t$where .= 'pl_title >= ' . $this->DB->addQuotes( substr( $sTitleGE, 2 ) );\n+\t\t\t\t$where .= 'pl_title >= ' . $this->DB->addQuotes( substr( $option, 2 ) );\n \t\t\t} else {\n \t\t\t\t$where .= $this->tableNames['page'] . '.page_title >= ' . $this->DB->addQuotes( substr( $option, 2 ) );\n \t\t\t}\n@@ -2040,19 +2040,19 @@ private function _titlegt( $option ) {\n \t\t\t\t$where .= $this->tableNames['page'] . '.page_title > ' . $this->DB->addQuotes( $option );\n \t\t\t}\n \t\t}\n+\n \t\t$where .= ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'titlelt' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _titlelt( $option ) {\n \t\t$where = '(';\n+\n \t\tif ( substr( $option, 0, 2 ) == '=_' ) {\n \t\t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t\t$where .= 'pl_title <= ' . $this->DB->addQuotes( substr( $option, 2 ) );\n@@ -2066,25 +2066,26 @@ private function _titlelt( $option ) {\n \t\t\t\t$where .= $this->tableNames['page'] . '.page_title < ' . $this->DB->addQuotes( $option );\n \t\t\t}\n \t\t}\n+\n \t\t$where .= ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'usedby' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _usedby( $option ) {\n \t\tif ( $this->parameters->getParameter( 'openreferences' ) ) {\n \t\t\t$ors = [];\n+\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ors[] = 'tpl_from = ' . intval( $link->getArticleID() );\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where = '(' . implode( ' OR ', $ors ) . ')';\n \t\t} else {\n \t\t\t$this->addTable( 'templatelinks', 'tpl' );\n@@ -2093,56 +2094,61 @@ private function _usedby( $option ) {\n \t\t\t$where = $this->tableNames['page'] . '.page_namespace = tpl.tl_namespace AND ' .\n \t\t\t\t\t $this->tableNames['page'] . '.page_title = tpl.tl_title AND tplsrc.page_id = tpl.tl_from AND ';\n \t\t\t$ors = [];\n+\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$ors[] = 'tpl.tl_from = ' . intval( $link->getArticleID() );\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where .= '(' . implode( ' OR ', $ors ) . ')';\n \t\t}\n+\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'uses' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _uses( $option ) {\n \t\t$this->addTable( 'templatelinks', 'tl' );\n \t\t$where = $this->tableNames['page'] . '.page_id=tl.tl_from AND (';\n \t\t$ors = [];\n+\n \t\tforeach ( $option as $linkGroup ) {\n \t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t$_or = '(tl.tl_namespace=' . intval( $link->getNamespace() );\n+\n \t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n \t\t\t\t\t$_or .= \" AND LOWER(CAST(tl.tl_title AS char))=LOWER(\" . $this->DB->addQuotes( $link->getDbKey() ) . '))';\n \t\t\t\t} else {\n \t\t\t\t\t$_or .= \" AND tl.tl_title=\" . $this->DB->addQuotes( $link->getDbKey() ) . ')';\n \t\t\t\t}\n+\n \t\t\t\t$ors[] = $_or;\n \t\t\t}\n \t\t}\n+\n \t\t$where .= implode( ' OR ', $ors ) . ')';\n \t\t$this->addWhere( $where );\n \t}\n \n \t/**\n \t * Set SQL for 'notuses' parameter.\n \t *\n-\t * @private\n-\t * @param\tmixed\tParameter Option\n-\t * @return\tvoid\n+\t * @param mixed $option\n \t */\n \tprivate function _notuses( $option ) {\n \t\tif ( count( $option ) > 0 ) {\n \t\t\t$where = $this->tableNames['page'] . '.page_id NOT IN (SELECT ' . $this->tableNames['templatelinks'] . '.tl_from FROM ' . $this->tableNames['templatelinks'] . ' WHERE (';\n \t\t\t$ors = [];\n+\n \t\t\tforeach ( $option as $linkGroup ) {\n \t\t\t\tforeach ( $linkGroup as $link ) {\n \t\t\t\t\t$_or = '(' . $this->tableNames['templatelinks'] . '.tl_namespace=' . intval( $link->getNamespace() );\n+\n \t\t\t\t\tif ( $this->parameters->getParameter( 'ignorecase' ) ) {\n \t\t\t\t\t\t$_or .= ' AND LOWER(CAST(' . $this->tableNames['templatelinks'] . '.tl_title AS char))=LOWER(' . $this->DB->addQuotes( $link->getDbKey() ) . '))';\n \t\t\t\t\t} else {\n@@ -2151,8 +2157,10 @@ private function _notuses( $option ) {\n \t\t\t\t\t$ors[] = $_or;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$where .= implode( ' OR ', $ors ) . '))';\n \t\t}\n-\t\t$this->addWhere( $where );\n+\n+\t\t$this->addWhere( $where ?? '' );\n \t}\n }"
        },
        {
          "filename": "includes/RevisionJoinBuilder.php",
          "status": "added",
          "additions": 123,
          "deletions": 0,
          "patch": "@@ -0,0 +1,123 @@\n+<?php\n+\n+namespace DPL;\n+\n+use ActorMigration;\n+use CommentStore;\n+use Wikimedia\\Rdbms\\IDatabase;\n+\n+class RevisionJoinBuilder {\n+\t/** @var IDatabase */\n+\tprivate $dbr;\n+\n+\t/** @var ActorMigration */\n+\tprivate $actorMigration;\n+\n+\t/** @var CommentStore */\n+\tprivate $commentStore;\n+\n+\t/**\n+\t * List of fields to select from the first revision of the article, keyed by alias.\n+\t * @var string[]\n+\t */\n+\tprivate $firstRevisionFields = [];\n+\n+\t/**\n+\t * List of fields to select from the last revision of the article, keyed by alias.\n+\t * @var string[]\n+\t */\n+\tprivate $lastRevisionFields = [];\n+\n+\tpublic function __construct(\n+\t\tIDatabase $dbr,\n+\t\tActorMigration $actorMigration,\n+\t\tCommentStore $commentStore\n+\t) {\n+\t\t$this->dbr = $dbr;\n+\t\t$this->actorMigration = $actorMigration;\n+\t\t$this->commentStore = $commentStore;\n+\t}\n+\n+\tpublic function addFieldsFromFirst( array $fields ): void {\n+\t\t$this->firstRevisionFields += $fields;\n+\t}\n+\n+\tpublic function addFieldsFromLast( array $fields ): void {\n+\t\t$this->lastRevisionFields += $fields;\n+\t}\n+\n+\tpublic function getQueryInfo(): array {\n+\t\t$queryInfo = [\n+\t\t\t'fields' => [],\n+\t\t\t'tables' => [],\n+\t\t\t'joins' => [],\n+\t\t];\n+\n+\t\treturn array_merge_recursive(\n+\t\t\t$queryInfo,\n+\t\t\t$this->addRevisionQueryInfo(\n+\t\t\t\t'latest_rev',\n+\t\t\t\t$this->lastRevisionFields,\n+\t\t\t\t[ 'rev_id=page_latest' ]\n+\t\t\t),\n+\t\t\t$this->addRevisionQueryInfo(\n+\t\t\t\t'first_rev',\n+\t\t\t\t$this->firstRevisionFields,\n+\t\t\t\t[\n+\t\t\t\t\t// @phan-suppress-next-line PhanPluginMixedKeyNoKey\n+\t\t\t\t\t'rev_page=page_id',\n+\t\t\t\t\t'rev_parent_id' => 0,\n+\t\t\t\t]\n+\t\t\t)\n+\t\t);\n+\t}\n+\n+\tprivate function addRevisionQueryInfo(\n+\t\tstring $tableAlias,\n+\t\tarray $fieldsByAlias,\n+\t\tarray $joinConds\n+\t): array {\n+\t\tif ( !$fieldsByAlias ) {\n+\t\t\treturn [];\n+\t\t}\n+\n+\t\t$fieldsByAlias += [ 'rev_id', 'rev_page', 'rev_parent_id' ];\n+\n+\t\t$actorQuery = $this->actorMigration->getJoin( 'rev_user' );\n+\t\t$commentQuery = $this->commentStore->getJoin( 'rev_comment' );\n+\n+\t\t// Ensure we correctly fetch aliased fields such as rev_user\n+\t\t// from the revision_actor_temp table if it is active.\n+\t\t$actorFields = array_keys( $actorQuery['fields'] );\n+\t\t$revFields = array_diff( $fieldsByAlias, $actorFields );\n+\n+\t\t// Since multiple instances of the revision and associated actor tables may be used per\n+\t\t// query, join on the derived result of an aliased subquery to avoid naming conflicts.\n+\t\t$revQuery = $this->dbr->buildSelectSubquery(\n+\t\t\t[ $tableAlias => 'revision' ] + $actorQuery['tables'] + $commentQuery['tables'],\n+\t\t\t$actorQuery['fields'] + $commentQuery['fields'] + array_values( $revFields ),\n+\t\t\t[],\n+\t\t\t__METHOD__,\n+\t\t\t[],\n+\t\t\t$actorQuery['joins'] + $commentQuery['joins']\n+\t\t);\n+\n+\t\t$fieldsWithPrefix = [];\n+\t\t$quotedTableAlias = $this->dbr->addIdentifierQuotes( $tableAlias );\n+\n+\t\tforeach ( $fieldsByAlias as $alias => $revFieldName ) {\n+\t\t\t$quotedRevField = $this->dbr->addIdentifierQuotes( $revFieldName );\n+\t\t\t$fieldsWithPrefix[$alias] = \"$quotedTableAlias.$quotedRevField\";\n+\t\t}\n+\n+\t\treturn [\n+\t\t\t'fields' => $fieldsWithPrefix,\n+\t\t\t'tables' => [\n+\t\t\t\t$tableAlias => $revQuery\n+\t\t\t],\n+\t\t\t'joins' => [\n+\t\t\t\t$tableAlias => [ 'JOIN', $joinConds ]\n+\t\t\t]\n+\t\t];\n+\t}\n+}"
        },
        {
          "filename": "includes/UpdateArticle.php",
          "status": "modified",
          "additions": 226,
          "deletions": 120,
          "patch": "@@ -1,20 +1,20 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL UpdateArticle Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL;\n \n+use Article;\n+use CommentStoreComment;\n+use MediaWiki\\MediaWikiServices;\n+use MediaWiki\\Revision\\SlotRecord;\n+use ReadOnlyError;\n+use RequestContext;\n+use Title;\n+\n class UpdateArticle {\n \t/**\n \t * this fucntion hast three tasks (depending on $exec):\n \t * (1) show an edit dialogue for template fields (exec = edit)\n-\t * (2) set template parameters to  values specified in the query (exec=set)v\n+\t * (2) set template parameters to values specified in the query (exec=set)v\n \t * (2) preview the source code including any changes of these parameters made in the edit form or with other changes (exec=preview)\n \t * (3) save the article with the changed value set or with other changes (exec=save)\n \t * \"other changes\" means that a regexp can be applied to the source text or arbitrary text can be\n@@ -23,71 +23,75 @@ class UpdateArticle {\n \tpublic static function updateArticleByRule( $title, $text, $rulesText ) {\n \t\t// we use ; as command delimiter; \\; stands for a semicolon\n \t\t// \\n is translated to a real linefeed\n-\t\t$rulesText       = str_replace( \";\", '\u00b0', $rulesText );\n-\t\t$rulesText       = str_replace( '\\\u00b0', ';', $rulesText );\n-\t\t$rulesText       = str_replace( \"\\\\n\", \"\\n\", $rulesText );\n-\t\t$rules           = explode( '\u00b0', $rulesText );\n-\t\t$exec            = 'edit';\n-\t\t$replaceThis     = '';\n-\t\t$replacement     = '';\n-\t\t$after           = '';\n-\t\t$insertionAfter  = '';\n-\t\t$before          = '';\n+\t\t$rulesText = str_replace( \";\", '\u00b0', $rulesText );\n+\t\t$rulesText = str_replace( '\\\u00b0', ';', $rulesText );\n+\t\t$rulesText = str_replace( \"\\\\n\", \"\\n\", $rulesText );\n+\t\t$rules = explode( '\u00b0', $rulesText );\n+\t\t$exec = 'edit';\n+\t\t$replaceThis = '';\n+\t\t$replacement = '';\n+\t\t$after = '';\n+\t\t$insertionAfter = '';\n+\t\t$before = '';\n \t\t$insertionBefore = '';\n-\t\t$template        = '';\n-\t\t$parameter       = [];\n-\t\t$value           = [];\n-\t\t$afterparm       = [];\n-\t\t$format          = [];\n-\t\t$preview         = [];\n-\t\t$save            = [];\n-\t\t$tooltip         = [];\n-\t\t$optional        = [];\n-\n-\t\t$lastCmd         = '';\n-\t\t$message         = '';\n-\t\t$summary         = '';\n-\t\t$editForm        = false;\n-\t\t$action          = '';\n-\t\t$hidden          = [];\n-\t\t$legendPage      = '';\n+\t\t$template = '';\n+\t\t$parameter = [];\n+\t\t$value = [];\n+\t\t$afterparm = [];\n+\t\t$format = [];\n+\t\t$preview = [];\n+\t\t$save = [];\n+\t\t$tooltip = [];\n+\t\t$optional = [];\n+\n+\t\t$lastCmd = '';\n+\t\t$message = '';\n+\t\t$summary = '';\n+\t\t$editForm = false;\n+\t\t$action = '';\n+\t\t$hidden = [];\n+\t\t$legendPage = '';\n \t\t$instructionPage = '';\n-\t\t$table           = '';\n-\t\t$fieldFormat     = '';\n+\t\t$table = '';\n+\t\t$fieldFormat = '';\n \n-\t\t// $message .= 'updaterules=<pre><nowiki>';\n \t\t$nr = -1;\n \t\tforeach ( $rules as $rule ) {\n \t\t\tif ( preg_match( '/^\\s*#/', $rule ) > 0 ) {\n-\t\t\t\tcontinue; // # is comment symbol\n+\t\t\t\tcontinue;\n \t\t\t}\n \n-\t\t\t$rule = preg_replace( '/^[\\s]*/', '', $rule ); // strip leading white space\n-\t\t\t$cmd  = preg_split( \"/ +/\", $rule, 2 );\n+\t\t\t$rule = preg_replace( '/^[\\s]*/', '', $rule );\n+\t\t\t$cmd = preg_split( \"/ +/\", $rule, 2 );\n+\n \t\t\tif ( count( $cmd ) > 1 ) {\n \t\t\t\t$arg = $cmd[1];\n \t\t\t} else {\n \t\t\t\t$arg = '';\n \t\t\t}\n+\n \t\t\t$cmd[0] = trim( $cmd[0] );\n \n-\t\t\t// after ... insert ...     ,   before ... insert ...\n+\t\t\t// after ... insert ..., before ... insert ...\n \t\t\tif ( $cmd[0] == 'before' ) {\n-\t\t\t\t$before  = $arg;\n+\t\t\t\t$before = $arg;\n \t\t\t\t$lastCmd = 'B';\n \t\t\t}\n \t\t\tif ( $cmd[0] == 'after' ) {\n-\t\t\t\t$after   = $arg;\n+\t\t\t\t$after = $arg;\n \t\t\t\t$lastCmd = 'A';\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'insert' && $lastCmd != '' ) {\n \t\t\t\tif ( $lastCmd == 'A' ) {\n \t\t\t\t\t$insertionAfter = $arg;\n \t\t\t\t}\n+\n \t\t\t\tif ( $lastCmd == 'B' ) {\n \t\t\t\t\t$insertionBefore = $arg;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'template' ) {\n \t\t\t\t$template = $arg;\n \t\t\t}\n@@ -99,69 +103,85 @@ public static function updateArticleByRule( $title, $text, $rulesText ) {\n \t\t\t\t\t$afterparm[$nr] = [\n \t\t\t\t\t\t$parameter[$nr - 1]\n \t\t\t\t\t];\n-\t\t\t\t\t$n              = $nr - 1;\n+\n+\t\t\t\t\t$n = $nr - 1;\n \t\t\t\t\twhile ( $n > 0 && array_key_exists( $n, $optional ) ) {\n \t\t\t\t\t\t$n--;\n \t\t\t\t\t\t$afterparm[$nr][] = $parameter[$n];\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'value' ) {\n \t\t\t\t$value[$nr] = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'format' ) {\n \t\t\t\t$format[$nr] = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'tooltip' ) {\n \t\t\t\t$tooltip[$nr] = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'optional' ) {\n \t\t\t\t$optional[$nr] = true;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'afterparm' ) {\n \t\t\t\t$afterparm[$nr] = [\n \t\t\t\t\t$arg\n \t\t\t\t];\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'legend' ) {\n \t\t\t\t$legendPage = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'instruction' ) {\n \t\t\t\t$instructionPage = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'table' ) {\n \t\t\t\t$table = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'field' ) {\n \t\t\t\t$fieldFormat = $arg;\n \t\t\t}\n \n \t\t\tif ( $cmd[0] == 'replace' ) {\n \t\t\t\t$replaceThis = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'by' ) {\n \t\t\t\t$replacement = $arg;\n \t\t\t}\n \n \t\t\tif ( $cmd[0] == 'editform' ) {\n \t\t\t\t$editForm = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'action' ) {\n \t\t\t\t$action = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'hidden' ) {\n \t\t\t\t$hidden[] = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'preview' ) {\n \t\t\t\t$preview[] = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'save' ) {\n \t\t\t\t$save[] = $arg;\n \t\t\t}\n \n \t\t\tif ( $cmd[0] == 'summary' ) {\n \t\t\t\t$summary = $arg;\n \t\t\t}\n+\n \t\t\tif ( $cmd[0] == 'exec' ) {\n \t\t\t\t$exec = $arg; // desired action (set or edit or preview)\n \t\t\t}\n@@ -172,16 +192,16 @@ public static function updateArticleByRule( $title, $text, $rulesText ) {\n \t\t\tif ( $replaceThis != '' ) {\n \t\t\t\t$summary .= \"\\n replace $replaceThis\\n by $replacement\";\n \t\t\t}\n+\n \t\t\tif ( $before != '' ) {\n-\t\t\t\t$summary .= \"\\n before  $before\\n insertionBefore\";\n+\t\t\t\t$summary .= \"\\n before $before\\n insertionBefore\";\n \t\t\t}\n+\n \t\t\tif ( $after != '' ) {\n-\t\t\t\t$summary .= \"\\n after   $after\\n insertionAfter\";\n+\t\t\t\t$summary .= \"\\n after $after\\n insertionAfter\";\n \t\t\t}\n \t\t}\n \n-\t\t// $message.= '</nowiki></pre>';\n-\n \t\t// perform changes to the wiki source text =======================================\n \n \t\tif ( $replaceThis != '' ) {\n@@ -198,86 +218,109 @@ public static function updateArticleByRule( $title, $text, $rulesText ) {\n \n \t\t// deal with template parameters =================================================\n \n-\t\tglobal $wgRequest, $wgUser;\n+\t\tglobal $wgRequest;\n \n-\t\tif ( $template != '' ) {\n+\t\t$user = RequestContext::getMain()->getUser();\n \n+\t\tif ( $template != '' ) {\n \t\t\tif ( $exec == 'edit' ) {\n-\t\t\t\t$tpv        = self::getTemplateParmValues( $text, $template );\n+\t\t\t\t$tpv = self::getTemplateParmValues( $text, $template );\n \t\t\t\t$legendText = '';\n+\n \t\t\t\tif ( $legendPage != '' ) {\n \t\t\t\t\t$legendTitle = '';\n-\t\t\t\t\tglobal $wgParser, $wgUser;\n-\t\t\t\t\t$parser = clone $wgParser;\n+\n+\t\t\t\t\t$parser = clone MediaWikiServices::getInstance()->getParser();\n+\n \t\t\t\t\tLST::text( $parser, $legendPage, $legendTitle, $legendText );\n \t\t\t\t\t$legendText = preg_replace( '/^.*?\\<section\\s+begin\\s*=\\s*legend\\s*\\/\\>/s', '', $legendText );\n \t\t\t\t\t$legendText = preg_replace( '/\\<section\\s+end\\s*=\\s*legend\\s*\\/\\>.*/s', '', $legendText );\n \t\t\t\t}\n+\n \t\t\t\t$instructionText = '';\n-\t\t\t\t$instructions    = [];\n+\t\t\t\t$instructions = [];\n+\n \t\t\t\tif ( $instructionPage != '' ) {\n \t\t\t\t\t$instructionTitle = '';\n-\t\t\t\t\tglobal $wgParser, $wgUser;\n-\t\t\t\t\t$parser = clone $wgParser;\n+\n+\t\t\t\t\t$parser = clone MediaWikiServices::getInstance()->getParser();\n+\n \t\t\t\t\tLST::text( $parser, $instructionPage, $instructionTitle, $instructionText );\n \t\t\t\t\t$instructions = self::getTemplateParmValues( $instructionText, 'Template field' );\n \t\t\t\t}\n+\n \t\t\t\t// construct an edit form containing all template invocations\n \t\t\t\t$form = \"<html><form method=post action=\\\"$action\\\" $editForm>\\n\";\n+\n \t\t\t\tforeach ( $tpv as $call => $tplValues ) {\n \t\t\t\t\t$form .= \"<table $table>\\n\";\n \t\t\t\t\tforeach ( $parameter as $nr => $parm ) {\n \t\t\t\t\t\t// try to extract legend from the docs of the template\n \t\t\t\t\t\t$myToolTip = '';\n+\n \t\t\t\t\t\tif ( array_key_exists( $nr, $tooltip ) ) {\n \t\t\t\t\t\t\t$myToolTip = $tooltip[$nr];\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$myInstruction = '';\n-\t\t\t\t\t\t$myType        = '';\n+\t\t\t\t\t\t$myType = '';\n+\n \t\t\t\t\t\tforeach ( $instructions as $instruct ) {\n \t\t\t\t\t\t\tif ( array_key_exists( 'field', $instruct ) && $instruct['field'] == $parm ) {\n \t\t\t\t\t\t\t\tif ( array_key_exists( 'doc', $instruct ) ) {\n \t\t\t\t\t\t\t\t\t$myInstruction = $instruct['doc'];\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\tif ( array_key_exists( 'type', $instruct ) ) {\n \t\t\t\t\t\t\t\t\t$myType = $instruct['type'];\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$myFormat = '';\n \t\t\t\t\t\tif ( array_key_exists( $nr, $format ) ) {\n \t\t\t\t\t\t\t$myFormat = $format[$nr];\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$myOptional = array_key_exists( $nr, $optional );\n \t\t\t\t\t\tif ( $legendText != '' && $myToolTip == '' ) {\n \t\t\t\t\t\t\t$myToolTip = preg_replace( '/^.*\\<section\\s+begin\\s*=\\s*' . preg_quote( $parm, '/' ) . '\\s*\\/\\>/s', '', $legendText );\n+\n \t\t\t\t\t\t\tif ( strlen( $myToolTip ) == strlen( $legendText ) ) {\n \t\t\t\t\t\t\t\t$myToolTip = '';\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t$myToolTip = preg_replace( '/\\<section\\s+end\\s*=\\s*' . preg_quote( $parm, '/' ) . '\\s*\\/\\>.*/s', '', $myToolTip );\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$myValue = '';\n \t\t\t\t\t\tif ( array_key_exists( $parm, $tpv[$call] ) ) {\n \t\t\t\t\t\t\t$myValue = $tpv[$call][$parm];\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$form .= self::editTemplateCall( $text, $template, $call, $parm, $myType, $myValue, $myFormat, $myToolTip, $myInstruction, $myOptional, $fieldFormat );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$form .= \"</table>\\n<br/><br/>\";\n \t\t\t\t}\n+\n \t\t\t\tforeach ( $hidden as $hide ) {\n \t\t\t\t\t$form .= \"<input type='hidden' \" . $hide . \" />\";\n \t\t\t\t}\n-\t\t\t\t$form .= \"<input type='hidden' name='wpEditToken' value='{$wgUser->getEditToken()}'/>\";\n+\n+\t\t\t\t$form .= \"<input type='hidden' name='wpEditToken' value='{$user->getEditToken()}'/>\";\n \t\t\t\tforeach ( $preview as $prev ) {\n \t\t\t\t\t$form .= \"<input type='submit' \" . $prev . \" /> \";\n \t\t\t\t}\n+\n \t\t\t\t$form .= \"</form></html>\\n\";\n+\n \t\t\t\treturn $form;\n \t\t\t} elseif ( $exec == 'set' || $exec == 'preview' ) {\n \t\t\t\t// loop over all invocations and parameters, this could be improved to enhance performance\n \t\t\t\t$matchCount = 10;\n+\n \t\t\t\tfor ( $call = 0; $call < 10; $call++ ) {\n \t\t\t\t\tforeach ( $parameter as $nr => $parm ) {\n \t\t\t\t\t\t// set parameters to values specified in the dpl source or get them from the http request\n@@ -289,33 +332,41 @@ public static function updateArticleByRule( $title, $text, $rulesText ) {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t$myValue = $wgRequest->getVal( urlencode( $call . '_' . $parm ), '' );\n \t\t\t\t\t\t}\n-\t\t\t\t\t\t$myOptional  = array_key_exists( $nr, $optional );\n+\n+\t\t\t\t\t\t$myOptional = array_key_exists( $nr, $optional );\n \t\t\t\t\t\t$myAfterParm = [];\n+\n \t\t\t\t\t\tif ( array_key_exists( $nr, $afterparm ) ) {\n \t\t\t\t\t\t\t$myAfterParm = $afterparm[$nr];\n \t\t\t\t\t\t}\n-\t\t\t\t\t\t$text = self::updateTemplateCall( $matchCount, $text, $template, $call, $parm, $myValue, $myAfterParm, $myOptional );\n+\n+\t\t\t\t\t\t$text = self::updateTemplateCall( $matchCount, $text, $template, $call, $parm, $myValue ?? '', $myAfterParm, $myOptional );\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $exec == 'set' ) {\n-\t\t\t\t\t\tbreak; // values taken from dpl text only populate the first invocation\n+\t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \n \t\tif ( $exec == 'set' ) {\n-\t\t\treturn self::updateArticle( $title, $text, $summary );\n+\t\t\treturn self::doUpdateArticle( $title, $text, $summary );\n \t\t} elseif ( $exec == 'preview' ) {\n \t\t\tglobal $wgScriptPath, $wgRequest;\n-\t\t\t$titleX   = \\Title::newFromText( $title );\n-\t\t\t$articleX = new \\Article( $titleX );\n-\t\t\t$form     = '<html>\n+\n+\t\t\t$titleX = Title::newFromText( $title );\n+\t\t\t$articleX = new Article( $titleX );\n+\n+\t\t\t$userOptionsLookup = MediaWikiServices::getInstance()->getUserOptionsLookup();\n+\n+\t\t\t$form = '<html>\n \t<form id=\"editform\" name=\"editform\" method=\"post\" action=\"' . $wgScriptPath . '/index.php?title=' . urlencode( $title ) . '&action=submit\" enctype=\"multipart/form-data\">\n \t\t<input type=\"hidden\" value=\"\" name=\"wpSection\" />\n \t\t<input type=\"hidden\" value=\"' . wfTimestampNow() . '\" name=\"wpStarttime\" />\n-\t\t<input type=\"hidden\" value=\"' . $articleX->getTimestamp() . '\" name=\"wpEdittime\" />\n+\t\t<input type=\"hidden\" value=\"' . $articleX->getPage()->getTimestamp() . '\" name=\"wpEdittime\" />\n \t\t<input type=\"hidden\" value=\"\" name=\"wpScrolltop\" id=\"wpScrolltop\" />\n-\t\t<textarea tabindex=\"1\" accesskey=\",\" name=\"wpTextbox1\" id=\"wpTextbox1\" rows=\"' . $wgUser->getIntOption( 'rows' ) . '\" cols=\"' . $wgUser->getIntOption( 'cols' ) . '\" >' . htmlspecialchars( $text ) . '</textarea>\n+\t\t<textarea tabindex=\"1\" accesskey=\",\" name=\"wpTextbox1\" id=\"wpTextbox1\" rows=\"' . $userOptionsLookup->getIntOption( $user, 'rows' ) . '\" cols=\"' . $userOptionsLookup->getIntOption( $user, 'cols' ) . '\" >' . htmlspecialchars( $text ) . '</textarea>\n \t\t<input type=\"hidden\" name=\"wpSummary value=\"' . $summary . '\" id=\"wpSummary\" />\n \t\t<input name=\"wpAutoSummary\" type=\"hidden\" value=\"\" />\n \t\t<input id=\"wpSave\" name=\"wpSave\" type=\"submit\" value=\"Save page\" accesskey=\"s\" title=\"Save your changes [s]\" />\n@@ -324,97 +375,126 @@ public static function updateArticleByRule( $title, $text, $rulesText ) {\n </html>';\n \t\t\treturn $form;\n \t\t}\n+\n \t\treturn \"exec must be one of the following: edit, preview, set\";\n \t}\n \n-\tprivate static function updateArticle( $title, $text, $summary ) {\n-\t\tglobal $wgUser, $wgRequest, $wgOut;\n+\tprivate static function doUpdateArticle( $title, $text, $summary ) {\n+\t\tglobal $wgRequest, $wgOut;\n+\n+\t\t$user = RequestContext::getMain()->getUser();\n \n-\t\tif ( !$wgUser->matchEditToken( $wgRequest->getVal( 'wpEditToken' ) ) ) {\n+\t\tif ( !$user->matchEditToken( $wgRequest->getVal( 'wpEditToken' ) ) ) {\n \t\t\t$wgOut->addWikiMsg( 'sessionfailure' );\n+\n \t\t\treturn 'session failure';\n \t\t}\n \n-\t\t$titleX = \\Title::newFromText( $title );\n-\t\t$permission_errors = $titleX->getUserPermissionsErrors( 'edit', $wgUser );\n+\t\t$titleX = Title::newFromText( $title );\n+\t\t$permission_errors = MediaWikiServices::getInstance()->getPermissionManager()->getPermissionErrors( 'edit', $user, $titleX );\n+\n \t\tif ( count( $permission_errors ) == 0 ) {\n-\t\t\t$articleX = \\WikiPage::factory( $titleX );\n-\t\t\t$articleXContent = \\ContentHandler::makeContent( $text, $titleX );\n-\t\t\t$articleX->doEditContent( $articleXContent, $summary, EDIT_UPDATE | EDIT_DEFER_UPDATES | EDIT_AUTOSUMMARY );\n-\t\t\t$wgOut->redirect( $titleX->getFullUrl( $articleX->isRedirect() ? 'redirect=no' : '' ) );\n+\t\t\t$wikiPageFactory = MediaWikiServices::getInstance()->getWikiPageFactory();\n+\n+\t\t\t$page = $wikiPageFactory->newFromTitle( $titleX );\n+\t\t\t$updater = $page->newPageUpdater( $user );\n+\t\t\t$content = $page->getContentHandler()->makeContent( $text, $titleX );\n+\t\t\t$updater->setContent( SlotRecord::MAIN, $content );\n+\t\t\t$comment = CommentStoreComment::newUnsavedComment( $summary );\n+\n+\t\t\t$updater->saveRevision(\n+\t\t\t\t$comment,\n+\t\t\t\tEDIT_UPDATE | EDIT_DEFER_UPDATES | EDIT_AUTOSUMMARY\n+\t\t\t);\n+\n+\t\t\t$wgOut->redirect( $titleX->getFullUrl( $page->isRedirect() ? 'redirect=no' : '' ) );\n+\n \t\t\treturn '';\n \t\t} else {\n \t\t\t$wgOut->showPermissionsErrorPage( $permission_errors );\n+\n \t\t\treturn 'permission error';\n \t\t}\n \t}\n \n \tprivate static function editTemplateCall( $text, $template, $call, $parameter, $type, $value, $format, $legend, $instruction, $optional, $fieldFormat ) {\n \t\t$matches = [];\n \t\t$nlCount = preg_match_all( '/\\n/', $value, $matches );\n+\n \t\tif ( $nlCount > 0 ) {\n \t\t\t$rows = $nlCount + 1;\n \t\t} else {\n \t\t\t$rows = floor( strlen( $value ) / 50 ) + 1;\n \t\t}\n+\n \t\tif ( preg_match( '/rows\\s*=/', $format ) <= 0 ) {\n \t\t\t$format .= \" rows=$rows\";\n \t\t}\n+\n \t\t$cols = 50;\n \t\tif ( preg_match( '/cols\\s*=/', $format ) <= 0 ) {\n \t\t\t$format .= \" cols=$cols\";\n \t\t}\n+\n \t\t$textArea = \"<textarea name=\\\"\" . urlencode( $call . '_' . $parameter ) . \"\\\" $format/>\" . htmlspecialchars( $value ) . \"</textarea>\";\n+\n \t\treturn str_replace( '%NAME%', htmlspecialchars( str_replace( '_', ' ', $parameter ) ), str_replace( '%TYPE%', $type, str_replace( '%INPUT%', $textArea, str_replace( '%LEGEND%', \"</html>\" . htmlspecialchars( $legend ) . \"<html>\", str_replace( '%INSTRUCTION%', \"</html>\" . htmlspecialchars( $instruction ) . \"<html>\", $fieldFormat ) ) ) ) );\n \t}\n \n \t/**\n \t * return an array of template invocations; each element is an associative array of parameter and value\n \t */\n \tprivate static function getTemplateParmValues( $text, $template ) {\n-\t\t$matches   = [];\n+\t\t$matches = [];\n \t\t$noMatches = preg_match_all( '/\\{\\{\\s*' . preg_quote( $template, '/' ) . '\\s*[|}]/i', $text, $matches, PREG_OFFSET_CAPTURE );\n+\n \t\tif ( $noMatches <= 0 ) {\n \t\t\treturn '';\n \t\t}\n+\n \t\t$textLen = strlen( $text );\n-\t\t$tval    = []; // the result array of template values\n-\t\t$call    = -1; // index for tval\n+\t\t$tval = [];\n+\t\t$call = -1;\n \n \t\tforeach ( $matches as $matchA ) {\n \t\t\tforeach ( $matchA as $matchB ) {\n-\t\t\t\t$match         = $matchB[0];\n-\t\t\t\t$start         = $matchB[1];\n+\t\t\t\t$match = $matchB[0];\n+\t\t\t\t$start = $matchB[1];\n \t\t\t\t$tval[++$call] = [];\n-\t\t\t\t$nr            = 0; // number of parameter if no name given\n-\t\t\t\t$parmValue     = '';\n-\t\t\t\t$parmName      = '';\n-\t\t\t\t$parm          = '';\n+\t\t\t\t$nr = 0;\n+\t\t\t\t$parmValue = '';\n+\t\t\t\t$parmName = '';\n+\t\t\t\t$parm = '';\n \n \t\t\t\tif ( $match[strlen( $match ) - 1] == '}' ) {\n-\t\t\t\t\tbreak; // template was called without parameters, continue with next invocation\n+\t\t\t\t\tbreak;\n \t\t\t\t}\n \n \t\t\t\t// search to the end of the template call\n \t\t\t\t$cbrackets = 2;\n+\n \t\t\t\tfor ( $i = $start + strlen( $match ); $i < $textLen; $i++ ) {\n \t\t\t\t\t$c = $text[$i];\n \t\t\t\t\tif ( $c == '{' || $c == '[' ) {\n-\t\t\t\t\t\t$cbrackets++; // we count both types of brackets\n+\t\t\t\t\t\t$cbrackets++;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $c == '}' || $c == ']' ) {\n \t\t\t\t\t\t$cbrackets--;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( ( $cbrackets == 2 && $c == '|' ) || ( $cbrackets == 1 && $c == '}' ) ) {\n \t\t\t\t\t\t// parameter (name or value) found\n \t\t\t\t\t\tif ( $parmName == '' ) {\n \t\t\t\t\t\t\t$tval[$call][++$nr] = trim( $parm );\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$tval[$call][$parmName] = trim( $parmValue );\n \t\t\t\t\t\t}\n-\t\t\t\t\t\t$parmName  = '';\n+\n+\t\t\t\t\t\t$parmName = '';\n \t\t\t\t\t\t$parmValue = '';\n-\t\t\t\t\t\t$parm      = '';\n+\t\t\t\t\t\t$parm = '';\n+\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t} else {\n \t\t\t\t\t\tif ( $parmName == '' ) {\n@@ -425,13 +505,15 @@ private static function getTemplateParmValues( $text, $template ) {\n \t\t\t\t\t\t\t$parmValue .= $c;\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\n \t\t\t\t\t$parm .= $c;\n \t\t\t\t\tif ( $cbrackets == 0 ) {\n-\t\t\t\t\t\tbreak; // end of parameter list\n+\t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\treturn $tval;\n \t}\n \n@@ -444,59 +526,70 @@ private static function updateTemplateCall( &$matchCount, $text, $template, $cal\n \t\t\treturn $text;\n \t\t}\n \n-\t\t$matches   = [];\n+\t\t$matches = [];\n \t\t$noMatches = preg_match_all( '/\\{\\{\\s*' . preg_quote( $template, '/' ) . '\\s*[|}]/i', $text, $matches, PREG_OFFSET_CAPTURE );\n+\n \t\tif ( $noMatches <= 0 ) {\n \t\t\treturn $text;\n \t\t}\n-\t\t$beginSubst  = -1;\n-\t\t$endSubst    = -1;\n+\n+\t\t$beginSubst = -1;\n+\t\t$endSubst = -1;\n \t\t$posInsertAt = 0;\n-\t\t$apNrLast    = 1000; // last (optional) predecessor\n+\t\t$apNrLast = 1000;\n \n \t\tforeach ( $matches as $matchA ) {\n \t\t\t$matchCount = count( $matchA );\n+\n \t\t\tforeach ( $matchA as $occurence => $matchB ) {\n \t\t\t\tif ( $occurence < $call ) {\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n+\n \t\t\t\t$match = $matchB[0];\n \t\t\t\t$start = $matchB[1];\n \n \t\t\t\tif ( $match[strlen( $match ) - 1] == '}' ) {\n \t\t\t\t\t// template was called without parameters, add new parameter and value\n \t\t\t\t\t// append parameter and value\n-\t\t\t\t\t$beginSubst   = $i;\n-\t\t\t\t\t$endSubst     = $i;\n+\t\t\t\t\t$beginSubst = 0;\n+\t\t\t\t\t$endSubst = 0;\n \t\t\t\t\t$substitution = \"|$parameter = $value\";\n \t\t\t\t\tbreak;\n \t\t\t\t} else {\n \t\t\t\t\t// there is already a list of parameters; we search to the end of the template call\n \t\t\t\t\t$cbrackets = 2;\n-\t\t\t\t\t$parm      = '';\n-\t\t\t\t\t$pos       = $start + strlen( $match ) - 1;\n-\t\t\t\t\t$textLen   = strlen( $text );\n+\t\t\t\t\t$parm = '';\n+\t\t\t\t\t$pos = $start + strlen( $match ) - 1;\n+\t\t\t\t\t$textLen = strlen( $text );\n+\n \t\t\t\t\tfor ( $i = $pos + 1; $i < $textLen; $i++ ) {\n \t\t\t\t\t\t$c = $text[$i];\n+\n \t\t\t\t\t\tif ( $c == '{' || $c == '[' ) {\n \t\t\t\t\t\t\t$cbrackets++; // we count both types of brackets\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tif ( $c == '}' || $c == ']' ) {\n \t\t\t\t\t\t\t$cbrackets--;\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tif ( ( $cbrackets == 2 && $c == '|' ) || ( $cbrackets == 1 && $c == '}' ) ) {\n \t\t\t\t\t\t\t// parameter (name / value) found\n \n \t\t\t\t\t\t\t$token = explode( '=', $parm, 2 );\n \t\t\t\t\t\t\tif ( count( $token ) == 2 ) {\n \t\t\t\t\t\t\t\t// we need a pair of name / value\n \t\t\t\t\t\t\t\t$parmName = trim( $token[0] );\n+\n \t\t\t\t\t\t\t\tif ( $parmName == $parameter ) {\n \t\t\t\t\t\t\t\t\t// we found the parameter, now replace the current value\n \t\t\t\t\t\t\t\t\t$parmValue = trim( $token[1] );\n+\n \t\t\t\t\t\t\t\t\tif ( $parmValue == $value ) {\n \t\t\t\t\t\t\t\t\t\tbreak; // no need to change when values are identical\n \t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t// keep spaces;\n \t\t\t\t\t\t\t\t\tif ( $parmValue == '' ) {\n \t\t\t\t\t\t\t\t\t\tif ( strlen( $token[1] ) > 0 && $token[1][strlen( $token[1] ) - 1] == \"\\n\" ) {\n@@ -507,15 +600,16 @@ private static function updateTemplateCall( &$matchCount, $text, $template, $cal\n \t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\t$substitution = str_replace( $parmValue, $value, $token[1] );\n \t\t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t\t$beginSubst = $pos + strlen( $token[0] ) + 2;\n-\t\t\t\t\t\t\t\t\t$endSubst   = $i;\n+\t\t\t\t\t\t\t\t\t$endSubst = $i;\n \t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tforeach ( $afterParm as $apNr => $ap ) {\n \t\t\t\t\t\t\t\t\t\t// store position for insertion\n \t\t\t\t\t\t\t\t\t\tif ( $parmName == $ap && $apNr < $apNrLast ) {\n \t\t\t\t\t\t\t\t\t\t\t$posInsertAt = $i;\n-\t\t\t\t\t\t\t\t\t\t\t$apNrLast    = $apNr;\n+\t\t\t\t\t\t\t\t\t\t\t$apNrLast = $apNr;\n \t\t\t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n@@ -529,20 +623,23 @@ private static function updateTemplateCall( &$matchCount, $text, $template, $cal\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t$beginSubst = $i;\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t$substitution = \"|$parameter = $value\";\n \t\t\t\t\t\t\t\tif ( $text[$beginSubst - 1] == \"\\n\" ) {\n \t\t\t\t\t\t\t\t\t--$beginSubst;\n \t\t\t\t\t\t\t\t\t$substitution = \"\\n\" . $substitution;\n \t\t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t\t$endSubst = $beginSubst;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t$pos  = $i;\n+\t\t\t\t\t\t\t$pos = $i;\n \t\t\t\t\t\t\t$parm = '';\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t$parm .= $c;\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tif ( $cbrackets == 0 ) {\n \t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}\n@@ -557,11 +654,11 @@ private static function updateTemplateCall( &$matchCount, $text, $template, $cal\n \t\t\treturn $text;\n \t\t}\n \n-\t\treturn substr( $text, 0, $beginSubst ) . $substitution . substr( $text, $endSubst );\n+\t\treturn substr( $text, 0, $beginSubst ) . ( $substitution ?? '' ) . substr( $text, $endSubst );\n \t}\n \n-\tpublic function deleteArticleByRule( $title, $text, $rulesText ) {\n-\t\tglobal $wgUser, $wgOut;\n+\tpublic static function deleteArticleByRule( $title, $text, $rulesText ) {\n+\t\tglobal $wgOut;\n \n \t\t// return \"deletion of articles by DPL is disabled.\";\n \n@@ -570,23 +667,25 @@ public function deleteArticleByRule( $title, $text, $rulesText ) {\n \t\t$rulesText = str_replace( \";\", '\u00b0', $rulesText );\n \t\t$rulesText = str_replace( '\\\u00b0', ';', $rulesText );\n \t\t$rulesText = str_replace( \"\\\\n\", \"\\n\", $rulesText );\n-\t\t$rules     = explode( '\u00b0', $rulesText );\n-\t\t$exec      = false;\n-\t\t$message   = '';\n-\t\t$reason    = '';\n+\t\t$rules = explode( '\u00b0', $rulesText );\n+\t\t$exec = false;\n+\t\t$message = '';\n+\t\t$reason = '';\n \n \t\tforeach ( $rules as $rule ) {\n \t\t\tif ( preg_match( '/^\\s*#/', $rule ) > 0 ) {\n \t\t\t\tcontinue; // # is comment symbol\n \t\t\t}\n \n-\t\t\t$rule = preg_replace( '/^[\\s]*/', '', $rule ); // strip leading white space\n-\t\t\t$cmd  = preg_split( \"/ +/\", $rule, 2 );\n+\t\t\t$rule = preg_replace( '/^[\\s]*/', '', $rule );\n+\t\t\t$cmd = preg_split( \"/ +/\", $rule, 2 );\n+\n \t\t\tif ( count( $cmd ) > 1 ) {\n \t\t\t\t$arg = $cmd[1];\n \t\t\t} else {\n \t\t\t\t$arg = '';\n \t\t\t}\n+\n \t\t\t$cmd[0] = trim( $cmd[0] );\n \n \t\t\tif ( $cmd[0] == 'reason' ) {\n@@ -598,26 +697,33 @@ public function deleteArticleByRule( $title, $text, $rulesText ) {\n \t\t\t\t$exec = true;\n \t\t\t}\n \t\t}\n+\n \t\t$reason .= \"\\nbulk delete by DPL query\";\n \n-\t\t$titleX = \\Title::newFromText( $title );\n+\t\t$titleX = Title::newFromText( $title );\n+\n \t\tif ( $exec ) {\n+\t\t\t$user = RequestContext::getMain()->getUser();\n+\n \t\t\t# Check permissions\n-\t\t\t$permission_errors = $titleX->getUserPermissionsErrors( 'delete', $wgUser );\n+\t\t\t$permission_errors = MediaWikiServices::getInstance()->getPermissionManager()->getPermissionErrors( 'delete', $user, $titleX );\n+\t\t\t$isReadOnly = MediaWikiServices::getInstance()->getReadOnlyMode()->isReadOnly();\n+\n \t\t\tif ( count( $permission_errors ) > 0 ) {\n \t\t\t\t$wgOut->showPermissionsErrorPage( $permission_errors );\n \t\t\t\treturn 'permission error';\n-\t\t\t} elseif ( wfReadOnly() ) {\n-\t\t\t\t$wgOut->readOnlyPage();\n-\t\t\t\treturn 'DPL: read only mode';\n+\t\t\t} elseif ( $isReadOnly ) {\n+\t\t\t\tthrow new ReadOnlyError;\n \t\t\t} else {\n-\t\t\t\t$articleX = new \\Article( $titleX );\n+\t\t\t\t$articleX = new Article( $titleX );\n \t\t\t\t$articleX->doDelete( $reason );\n \t\t\t}\n \t\t} else {\n \t\t\t$message .= \"set 'exec yes' to delete &#160; &#160; <big>'''$title'''</big>\\n\";\n \t\t}\n-\t\t$message .= \"<pre><nowiki>\\n{$text}</nowiki></pre>\"; // <pre><nowiki>\\n\"; // .$text.\"\\n</nowiki></pre>\\n\";\n+\n+\t\t$message .= \"<pre><nowiki>\\n{$text}</nowiki></pre>\"; // <pre><nowiki>\\n\";\n+\n \t\treturn $message;\n \t}\n }"
        },
        {
          "filename": "includes/UserQueryBuilder.php",
          "status": "added",
          "additions": 161,
          "deletions": 0,
          "patch": "@@ -0,0 +1,161 @@\n+<?php\n+\n+namespace DPL;\n+\n+use ActorMigration;\n+use MediaWiki\\MediaWikiServices;\n+use MediaWiki\\User\\UserFactory;\n+use MediaWiki\\User\\UserIdentity;\n+use Wikimedia\\Rdbms\\IDatabase;\n+\n+class UserQueryBuilder {\n+\t/** @var IDatabase */\n+\tprivate $dbr;\n+\n+\t/** @var ActorMigration */\n+\tprivate $actorMigration;\n+\n+\t/** @var UserIdentity|array */\n+\tprivate $modifiedByConstraints = [];\n+\n+\t/** @var UserIdentity|array */\n+\tprivate $notModifiedByConstraints = [];\n+\n+\t/** @var UserIdentity|array */\n+\tprivate $notCreatedByConstraints = [];\n+\n+\t/** @var UserIdentity|array */\n+\tprivate $notLastModifiedByConstraints = [];\n+\n+\t/** @var UserIdentity|null */\n+\tprivate $createdByConstraint;\n+\n+\t/** @var UserIdentity|null */\n+\tprivate $lastModifiedByConstraint;\n+\n+\tpublic function __construct( IDatabase $dbr, ActorMigration $actorMigration ) {\n+\t\t$this->dbr = $dbr;\n+\t\t$this->actorMigration = $actorMigration;\n+\t}\n+\n+\tpublic function addModifiedByConstraint( string $userName ): void {\n+\t\t$this->modifiedByConstraints[] = $this->getUserForQuery( $userName );\n+\t}\n+\n+\tpublic function addNotModifiedByConstraint( string $userName ): void {\n+\t\t$this->notModifiedByConstraints[] = $this->getUserForQuery( $userName );\n+\t}\n+\n+\tpublic function addCreatedByConstraint( string $userName ): void {\n+\t\t$this->createdByConstraint = $this->getUserForQuery( $userName );\n+\t}\n+\n+\tpublic function addNotCreatedByConstraint( string $userName ): void {\n+\t\t$this->notCreatedByConstraints[] = $this->getUserForQuery( $userName );\n+\t}\n+\n+\tpublic function addLastModifiedByConstraint( string $userName ): void {\n+\t\t$this->lastModifiedByConstraint = $this->getUserForQuery( $userName );\n+\t}\n+\n+\tpublic function addNotLastModifiedByConstraint( string $userName ): void {\n+\t\t$this->notLastModifiedByConstraints[] = $this->getUserForQuery( $userName );\n+\t}\n+\n+\t/**\n+\t * Combine the constraints into a single condition suitable for inclusion in a WHERE clause.\n+\t * @return string\n+\t */\n+\tpublic function getWhere(): string {\n+\t\t$conds = [];\n+\n+\t\t$modifiedByQuery = $this->getSubqueryForConstraint( $this->modifiedByConstraints );\n+\t\tif ( $modifiedByQuery ) {\n+\t\t\t$conds[] = \"page_id IN $modifiedByQuery\";\n+\t\t}\n+\n+\t\t$notModifiedByQuery = $this->getSubqueryForConstraint( $this->notModifiedByConstraints );\n+\t\tif ( $notModifiedByQuery ) {\n+\t\t\t$conds[] = \"NOT EXISTS $notModifiedByQuery\";\n+\t\t}\n+\n+\t\t$lastModifiedByQuery = $this->getSubqueryForConstraint(\n+\t\t\t[ $this->lastModifiedByConstraint ],\n+\t\t\t$this->notLastModifiedByConstraints,\n+\t\t\t'rev_id'\n+\t\t);\n+\t\tif ( $lastModifiedByQuery ) {\n+\t\t\t$conds[] = \"page_latest IN $lastModifiedByQuery\";\n+\t\t}\n+\n+\t\t$createdByQuery = $this->getSubqueryForConstraint(\n+\t\t\t[ $this->createdByConstraint ],\n+\t\t\t$this->notCreatedByConstraints,\n+\t\t\t'rev_page',\n+\t\t\t[ 'rev_parent_id' => 0 ]\n+\t\t);\n+\t\tif ( $createdByQuery ) {\n+\t\t\t$conds[] = \"page_id IN $createdByQuery\";\n+\t\t}\n+\n+\t\treturn $this->dbr->makeList( $conds, IDatabase::LIST_AND );\n+\t}\n+\n+\tprivate function getUserForQuery( string $userName ): ?UserIdentity {\n+\t\t$userFactory = MediaWikiServices::getInstance()->getUserFactory();\n+\n+\t\treturn $userFactory->newFromName( $userName, UserFactory::RIGOR_NONE ) ?: null;\n+\t}\n+\n+\t/**\n+\t * Construct a subquery for filtering revisions based on given user-specific criteria.\n+\t * @param UserIdentity[] $constraints -users to include in the result set\n+\t * @param UserIdentity[] $notConstraints - users to exclude from the result set\n+\t * @param string $selectField - field name to select from the revision table\n+\t * @param array $conds - additional query conditions\n+\t * @return string|null - the subquery, or null if no constraints were given\n+\t */\n+\tprivate function getSubqueryForConstraint(\n+\t\tarray $constraints,\n+\t\tarray $notConstraints = [],\n+\t\tstring $selectField = 'rev_page',\n+\t\tarray $conds = []\n+\t): ?string {\n+\t\t$constraints = array_filter( $constraints );\n+\t\t$notConstraints = array_filter( $notConstraints );\n+\t\tif ( !$constraints && !$notConstraints ) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\t$constraintActorQuery = $this->actorMigration->getWhere(\n+\t\t\t$this->dbr,\n+\t\t\t'rev_user',\n+\t\t\t$constraints\n+\t\t);\n+\n+\t\t$notConstraintActorQuery = $this->actorMigration->getWhere(\n+\t\t\t$this->dbr,\n+\t\t\t'rev_user',\n+\t\t\t$notConstraints\n+\t\t);\n+\n+\t\tif ( $constraints ) {\n+\t\t\t$conds[] = $constraintActorQuery['conds'];\n+\t\t}\n+\n+\t\tif ( $notConstraints ) {\n+\t\t\t$conds[] = \"NOT ({$notConstraintActorQuery['conds']})\";\n+\t\t}\n+\n+\t\t$conds[] = 'rev_page=page_id';\n+\n+\t\treturn (string)$this->dbr->buildSelectSubquery(\n+\t\t\t[ 'revision' ] + $constraintActorQuery['tables'] + $notConstraintActorQuery['tables'],\n+\t\t\t[ $selectField ],\n+\t\t\t$conds,\n+\t\t\t__METHOD__,\n+\t\t\t[],\n+\t\t\t(array)$constraintActorQuery['joins'] + (array)$notConstraintActorQuery['joins']\n+\t\t);\n+\t}\n+}"
        },
        {
          "filename": "includes/Variables.php",
          "status": "modified",
          "additions": 38,
          "deletions": 17,
          "patch": "@@ -1,13 +1,5 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL Variables Class\n- *\n- * @author\t\tIlyaHaykinson, Unendlich, Dangerville, Algorithmix, Theaitetos, Alexia E. Smith\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL;\n \n class Variables {\n@@ -29,108 +21,137 @@ class Variables {\n \t// if the first parameter is empty it will be ignored {{#vardefine:|a|b}} is the same as {{#vardefine:a|b}}\n \tpublic static function setVar( $arg ) {\n \t\t$numargs = count( $arg );\n+\n \t\tif ( $numargs >= 3 && $arg[2] == '' ) {\n \t\t\t$start = 3;\n \t\t} else {\n \t\t\t$start = 2;\n \t\t}\n+\n \t\tfor ( $i = $start; $i < $numargs; $i++ ) {\n \t\t\t$var = $arg[$i];\n+\n \t\t\tif ( ++$i <= $numargs - 1 ) {\n \t\t\t\tself::$memoryVar[$var] = $arg[$i];\n \t\t\t} else {\n \t\t\t\tself::$memoryVar[$var] = '';\n \t\t\t}\n \t\t}\n+\n \t\treturn '';\n \t}\n \n \tpublic static function setVarDefault( $arg ) {\n \t\t$numargs = count( $arg );\n+\n \t\tif ( $numargs > 3 ) {\n \t\t\t$value = $arg[3];\n \t\t} else {\n \t\t\treturn '';\n \t\t}\n+\n \t\t$var = $arg[2];\n+\n \t\tif ( !array_key_exists( $var, self::$memoryVar ) || self::$memoryVar[$var] == '' ) {\n \t\t\tself::$memoryVar[$var] = $value;\n \t\t}\n+\n \t\treturn '';\n \t}\n \n \tpublic static function getVar( $var ) {\n \t\tif ( array_key_exists( $var, self::$memoryVar ) ) {\n \t\t\treturn self::$memoryVar[$var];\n \t\t}\n+\n \t\treturn '';\n \t}\n \n \tpublic static function setArray( $arg ) {\n \t\t$numargs = count( $arg );\n+\n \t\tif ( $numargs < 5 ) {\n \t\t\treturn '';\n \t\t}\n-\t\t$var       = trim( $arg[2] );\n-\t\t$value     = $arg[3];\n+\n+\t\t$var = trim( $arg[2] );\n+\t\t$value = $arg[3];\n \t\t$delimiter = $arg[4];\n+\n \t\tif ( $var == '' ) {\n \t\t\treturn '';\n \t\t}\n+\n \t\tif ( $value == '' ) {\n \t\t\tself::$memoryArray[$var] = [];\n \t\t\treturn;\n \t\t}\n+\n \t\tif ( $delimiter == '' ) {\n \t\t\tself::$memoryArray[$var] = [\n \t\t\t\t$value\n \t\t\t];\n+\n \t\t\treturn;\n \t\t}\n-\t\tif ( 0 !== strpos( $delimiter, '/' ) || ( strlen( $delimiter ) - 1 ) !== strrpos( $delimiter, '/' ) ) {\n+\n+\t\tif ( strpos( $delimiter, '/' ) !== 0 || ( strlen( $delimiter ) - 1 ) !== strrpos( $delimiter, '/' ) ) {\n \t\t\t$delimiter = '/\\s*' . $delimiter . '\\s*/';\n \t\t}\n+\n \t\tself::$memoryArray[$var] = preg_split( $delimiter, $value );\n+\n \t\treturn \"value={$value}, delimiter={$delimiter},\" . count( self::$memoryArray[$var] );\n \t}\n \n \tpublic static function dumpArray( $arg ) {\n \t\t$numargs = count( $arg );\n+\n \t\tif ( $numargs < 3 ) {\n \t\t\treturn '';\n \t\t}\n-\t\t$var  = trim( $arg[2] );\n+\n+\t\t$var = trim( $arg[2] );\n \t\t$text = \" array {$var} = {\";\n-\t\t$n    = 0;\n+\t\t$n = 0;\n+\n \t\tif ( array_key_exists( $var, self::$memoryArray ) ) {\n \t\t\tforeach ( self::$memoryArray[$var] as $value ) {\n \t\t\t\tif ( $n++ > 0 ) {\n \t\t\t\t\t$text .= ', ';\n \t\t\t\t}\n+\n \t\t\t\t$text .= \"{$value}\";\n \t\t\t}\n \t\t}\n+\n \t\treturn $text . \"}\\n\";\n \t}\n \n \tpublic static function printArray( $var, $delimiter, $search, $subject ) {\n \t\t$var = trim( $var );\n+\n \t\tif ( $var == '' ) {\n \t\t\treturn '';\n \t\t}\n+\n \t\tif ( !array_key_exists( $var, self::$memoryArray ) ) {\n \t\t\treturn '';\n \t\t}\n-\t\t$values          = self::$memoryArray[$var];\n+\n+\t\t$values = self::$memoryArray[$var];\n \t\t$rendered_values = [];\n+\n \t\tforeach ( $values as $v ) {\n \t\t\t$temp_result_value = str_replace( $search, $v, $subject );\n \t\t\t$rendered_values[] = $temp_result_value;\n \t\t}\n+\n \t\treturn [\n+\t\t\t// @phan-suppress-next-line PhanPluginMixedKeyNoKey\n \t\t\timplode( $delimiter, $rendered_values ),\n-\t\t\t'noparse'\t=> false,\n-\t\t\t'isHTML'\t=> false\n+\t\t\t'noparse' => false,\n+\t\t\t'isHTML' => false\n \t\t];\n \t}\n }"
        },
        {
          "filename": "includes/heading/DefinitionHeading.php",
          "status": "modified",
          "additions": 8,
          "deletions": 15,
          "patch": "@@ -1,12 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL DefinitionHeading Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Heading;\n \n@@ -74,21 +66,22 @@ class DefinitionHeading extends Heading {\n \t/**\n \t * Format a heading group.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tArticle start index for this heading.\n-\t * @param\tinteger\tArticle count for this heading.\n-\t * @param\tstring\tHeading link/text display.\n-\t * @param\tarray\tList of \\DPL\\Article.\n-\t * @param\tobject\tList of \\DPL\\Lister\\Lister\n-\t * @return\tstring\tHeading HTML\n+\t * @param int $headingStart\n+\t * @param int $headingCount\n+\t * @param string $headingLink\n+\t * @param array $articles\n+\t * @param Lister $lister\n+\t * @return string\n \t */\n \tpublic function formatItem( $headingStart, $headingCount, $headingLink, $articles, Lister $lister ) {\n \t\t$item = '';\n \n \t\t$item .= $this->headListStart . $headingLink;\n+\n \t\tif ( $this->showHeadingCount ) {\n \t\t\t$item .= $this->articleCountMessage( $headingCount );\n \t\t}\n+\n \t\t$item .= $this->headListEnd;\n \t\t$item .= $this->getItemStart() . $lister->formatList( $articles, $headingStart, $headingCount ) . $this->getItemEnd();\n "
        },
        {
          "filename": "includes/heading/Heading.php",
          "status": "modified",
          "additions": 93,
          "deletions": 86,
          "patch": "@@ -1,29 +1,23 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL List Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n+\n namespace DPL\\Heading;\n \n use DPL\\Article;\n use DPL\\Lister\\Lister;\n use DPL\\Parameters;\n+use Sanitizer;\n \n class Heading {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int|null\n \t */\n \tpublic $style = null;\n \n \t/**\n \t * List(Section) Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -38,7 +32,7 @@ class Heading {\n \n \t/**\n \t * Item Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -54,14 +48,14 @@ class Heading {\n \t/**\n \t * Extra list HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $listAttributes = '';\n \n \t/**\n \t * Extra item HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $itemAttributes = '';\n \n@@ -73,18 +67,14 @@ class Heading {\n \tprotected $showHeadingCount = false;\n \n \t/**\n-\t * \\DPL\\Parameters\n+\t * Parameters\n \t *\n-\t * @var object\n+\t * @var Parameters\n \t */\n-\tprotected $parameters = null;\n+\tprotected $parameters;\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n \t */\n \tpublic function __construct( Parameters $parameters ) {\n \t\t$this->setListAttributes( $parameters->getParameter( 'hlistattr' ) );\n@@ -96,17 +86,16 @@ public function __construct( Parameters $parameters ) {\n \t/**\n \t * Get a new List subclass based on user selection.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tHeading style.\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @param\tobject\tMediaWiki \\Parser\n-\t * @return\tmixed\tHeading subclass or null for a bad style.\n+\t * @param string $style\n+\t * @param Parameters $parameters\n+\t * @return mixed\n \t */\n-\tpublic static function newFromStyle( $style, \\DPL\\Parameters $parameters ) {\n+\tpublic static function newFromStyle( $style, Parameters $parameters ) {\n \t\t$style = strtolower( $style );\n+\n \t\tswitch ( $style ) {\n \t\t\tcase 'definition':\n-\t\t\t\t$class = 'DefinitionHeading';\n+\t\t\t\t$class = DefinitionHeading::class;\n \t\t\t\tbreak;\n \t\t\tcase 'h1':\n \t\t\tcase 'h2':\n@@ -115,28 +104,25 @@ public static function newFromStyle( $style, \\DPL\\Parameters $parameters ) {\n \t\t\tcase 'h5':\n \t\t\tcase 'h6':\n \t\t\tcase 'header':\n-\t\t\t\t$class = 'TieredHeading';\n+\t\t\t\t$class = TieredHeading::class;\n \t\t\t\tbreak;\n \t\t\tcase 'ordered':\n-\t\t\t\t$class = 'OrderedHeading';\n+\t\t\t\t$class = OrderedHeading::class;\n \t\t\t\tbreak;\n \t\t\tcase 'unordered':\n-\t\t\t\t$class = 'UnorderedHeading';\n+\t\t\t\t$class = UnorderedHeading::class;\n \t\t\t\tbreak;\n \t\t\tdefault:\n \t\t\t\treturn null;\n-\t\t\t\tbreak;\n \t\t}\n-\t\t$class = '\\DPL\\Heading\\\\' . $class;\n \n \t\treturn new $class( $parameters );\n \t}\n \n \t/**\n-\t * Get the \\DPL\\Parameters object this object was constructed with.\n+\t * Get the Parameters object this object was constructed with.\n \t *\n-\t * @access\tpublic\n-\t * @return\tobject\t\\DPL\\Parameters\n+\t * @return Parameters\n \t */\n \tpublic function getParameters() {\n \t\treturn $this->parameters;\n@@ -145,31 +131,25 @@ public function getParameters() {\n \t/**\n \t * Set extra list attributes.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setListAttributes( $attributes ) {\n-\t\t$this->listAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'ul' );\n+\t\t$this->listAttributes = Sanitizer::fixTagAttributes( $attributes, 'ul' );\n \t}\n \n \t/**\n \t * Set extra item attributes.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setItemAttributes( $attributes ) {\n-\t\t$this->itemAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'li' );\n+\t\t$this->itemAttributes = Sanitizer::fixTagAttributes( $attributes, 'li' );\n \t}\n \n \t/**\n \t * Set if the article count per heading should be shown.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Show Heading Count\n-\t * @return\tvoid\n+\t * @param bool $show\n \t */\n \tpublic function setShowHeadingCount( $show = false ) {\n \t\t$this->showHeadingCount = boolval( $show );\n@@ -178,8 +158,7 @@ public function setShowHeadingCount( $show = false ) {\n \t/**\n \t * Return the list style.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\tList style constant.\n+\t * @return int\n \t */\n \tpublic function getStyle() {\n \t\treturn $this->style;\n@@ -188,10 +167,9 @@ public function getStyle() {\n \t/**\n \t * Format a list of articles into all lists with headings as needed.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tobject\tList of \\DPL\\Lister\\Lister\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param Lister $lister\n+\t * @return string\n \t */\n \tpublic function format( $articles, Lister $lister ) {\n \t\t$columns = $this->getParameters()->getParameter( 'columns' );\n@@ -204,46 +182,57 @@ public function format( $articles, Lister $lister ) {\n \n \t\t$headings = Article::getHeadings();\n \t\t$output = '';\n+\n \t\tif ( !empty( $headings ) ) {\n \t\t\tif ( $columns != 1 || $rows != 1 ) {\n-\t\t\t\t$hspace = 2; // the extra space for headings\n+\t\t\t\t$hspace = 2;\n+\n \t\t\t\t// repeat outer tags for each of the specified columns / rows in the output\n \t\t\t\t// we assume that a heading roughly takes the space of two articles\n \t\t\t\t$count = count( $articles ) + $hspace * count( $headings );\n+\n \t\t\t\tif ( $columns != 1 ) {\n \t\t\t\t\t$iGroup = $columns;\n \t\t\t\t} else {\n \t\t\t\t\t$iGroup = $rows;\n \t\t\t\t}\n+\n \t\t\t\t$nsize = floor( $count / $iGroup );\n-\t\t\t\t$rest  = $count - ( floor( $nsize ) * floor( $iGroup ) );\n+\t\t\t\t$rest = $count - ( floor( $nsize ) * floor( $iGroup ) );\n+\n \t\t\t\tif ( $rest > 0 ) {\n \t\t\t\t\t$nsize += 1;\n \t\t\t\t}\n+\n \t\t\t\t$output .= \"{|\" . $rowColFormat . \"\\n|\\n\";\n+\n \t\t\t\tif ( $nsize < $hspace + 1 ) {\n-\t\t\t\t\t$nsize = $hspace + 1; // correction for result sets with one entry\n+\t\t\t\t\t$nsize = $hspace + 1;\n \t\t\t\t}\n+\n \t\t\t\t$output .= $this->getListStart();\n \t\t\t\t$nstart = 0;\n-\t\t\t\t$greml  = $nsize; // remaining lines in current group\n-\t\t\t\t$g      = 0;\n+\t\t\t\t$greml = $nsize;\n+\t\t\t\t$g = 0;\n \t\t\t\t$offset = 0;\n \t\t\t\tforeach ( $headings as $headingCount ) {\n \t\t\t\t\t$headingStart = $nstart - $offset;\n \t\t\t\t\t$headingLink = $articles[$headingStart]->mParentHLink;\n \t\t\t\t\t$output .= $this->getItemStart() . $headingLink . $this->getItemEnd();\n+\n \t\t\t\t\tif ( $this->showHeadingCount ) {\n \t\t\t\t\t\t$output .= $this->articleCountMessage( $headingCount );\n \t\t\t\t\t}\n+\n \t\t\t\t\t$offset += $hspace;\n \t\t\t\t\t$nstart += $hspace;\n \t\t\t\t\t$portion = $headingCount;\n \t\t\t\t\t$greml -= $hspace;\n \t\t\t\t\t$listOutput = '';\n+\n \t\t\t\t\tdo {\n \t\t\t\t\t\t$greml -= $portion;\n-\t\t\t\t\t\t// $output .= \"nsize=$nsize, portion=$portion, greml=$greml\";\n+\n \t\t\t\t\t\tif ( $greml > 0 ) {\n \t\t\t\t\t\t\t$output .= $lister->formatList( $articles, $nstart - $offset, $portion );\n \t\t\t\t\t\t\t$nstart += $portion;\n@@ -253,85 +242,104 @@ public function format( $articles, Lister $lister ) {\n \t\t\t\t\t\t\t$output .= $lister->formatList( $articles, $nstart - $offset, $portion + $greml );\n \t\t\t\t\t\t\t$nstart += ( $portion + $greml );\n \t\t\t\t\t\t\t$portion = ( -$greml );\n+\n \t\t\t\t\t\t\tif ( $columns != 1 ) {\n \t\t\t\t\t\t\t\t$output .= \"\\n|valign=top|\\n\";\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t$output .= \"\\n|-\\n|\\n\";\n \t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t++$g;\n-\t\t\t\t\t\t\t// if ($rest != 0 && $g==$rest) $nsize -= 1;\n+\n \t\t\t\t\t\t\tif ( $nstart + $nsize > $count ) {\n \t\t\t\t\t\t\t\t$nsize = $count - $nstart;\n \t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t$greml = $nsize;\n+\n \t\t\t\t\t\t\tif ( $greml <= 0 ) {\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t} while ( $portion > 0 );\n+\n \t\t\t\t\t$output .= $this->getItemEnd();\n \t\t\t\t}\n+\n \t\t\t\t$output .= $this->listEnd;\n \t\t\t\t$output .= \"\\n|}\\n\";\n \t\t\t} else {\n \t\t\t\t$output .= $this->getListStart();\n \t\t\t\t$headingStart = 0;\n+\n \t\t\t\tforeach ( $headings as $headingCount ) {\n \t\t\t\t\t$headingLink = $articles[$headingStart]->mParentHLink;\n \t\t\t\t\t$output .= $this->formatItem( $headingStart, $headingCount, $headingLink, $articles, $lister );\n \t\t\t\t\t$headingStart += $headingCount;\n \t\t\t\t}\n+\n \t\t\t\t$output .= $this->listEnd;\n \t\t\t}\n \t\t} elseif ( $columns != 1 || $rows != 1 ) {\n \t\t\t// repeat outer tags for each of the specified columns / rows in the output\n \t\t\t$nstart = 0;\n-\t\t\t$count  = count( $articles );\n+\t\t\t$count = count( $articles );\n+\n \t\t\tif ( $columns != 1 ) {\n \t\t\t\t$iGroup = $columns;\n \t\t\t} else {\n \t\t\t\t$iGroup = $rows;\n \t\t\t}\n+\n \t\t\t$nsize = floor( $count / $iGroup );\n-\t\t\t$rest  = $count - ( floor( $nsize ) * floor( $iGroup ) );\n+\t\t\t$rest = $count - ( floor( $nsize ) * floor( $iGroup ) );\n+\n \t\t\tif ( $rest > 0 ) {\n \t\t\t\t$nsize += 1;\n \t\t\t}\n+\n \t\t\t$output .= \"{|\" . $rowColFormat . \"\\n|\\n\";\n+\n \t\t\tfor ( $g = 0; $g < $iGroup; $g++ ) {\n-\t\t\t\t$output .= $lister->formatList( $articles, $nstart, $nsize );\n+\t\t\t\t$output .= $lister->formatList( $articles, $nstart, (int)$nsize );\n+\n \t\t\t\tif ( $columns != 1 ) {\n \t\t\t\t\t$output .= \"\\n|valign=top|\\n\";\n \t\t\t\t} else {\n \t\t\t\t\t$output .= \"\\n|-\\n|\\n\";\n \t\t\t\t}\n-\t\t\t\t$nstart = $nstart + $nsize;\n-\t\t\t\t// if ($rest != 0 && $g+1==$rest) $nsize -= 1;\n+\n+\t\t\t\t$nstart += $nsize;\n+\n \t\t\t\tif ( $nstart + $nsize > $count ) {\n \t\t\t\t\t$nsize = $count - $nstart;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$output .= \"\\n|}\\n\";\n \t\t} elseif ( $rowSize > 0 ) {\n \t\t\t// repeat row header after n lines of output\n \t\t\t$nstart = 0;\n-\t\t\t$nsize  = $rowSize;\n-\t\t\t$count  = count( $articles );\n+\t\t\t$nsize = $rowSize;\n+\t\t\t$count = count( $articles );\n \t\t\t$output .= '{|' . $rowColFormat . \"\\n|\\n\";\n+\n \t\t\tdo {\n \t\t\t\tif ( $nstart + $nsize > $count ) {\n \t\t\t\t\t$nsize = $count - $nstart;\n \t\t\t\t}\n-\t\t\t\t$output .= $lister->formatList( $articles, $nstart, $nsize );\n+\n+\t\t\t\t$output .= $lister->formatList( $articles, $nstart, (int)$nsize );\n \t\t\t\t$output .= \"\\n|-\\n|\\n\";\n-\t\t\t\t$nstart = $nstart + $nsize;\n+\t\t\t\t$nstart += $nsize;\n \t\t\t\tif ( $nstart >= $count ) {\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t} while ( true );\n+\n \t\t\t$output .= \"\\n|}\\n\";\n \t\t} else {\n-\t\t\t//Even though the headingmode is not none there were no headings, but still results.  Output them anyway.\n+\t\t\t// Even though the headingmode is not none there were no headings, but still results. Output them anyway.\n \t\t\t$output .= $lister->formatList( $articles, 0, count( $articles ) );\n \t\t}\n \n@@ -341,21 +349,22 @@ public function format( $articles, Lister $lister ) {\n \t/**\n \t * Format a heading group.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tArticle start index for this heading.\n-\t * @param\tinteger\tArticle count for this heading.\n-\t * @param\tstring\tHeading link/text display.\n-\t * @param\tarray\tList of \\DPL\\Article.\n-\t * @param\tobject\tList of \\DPL\\Lister\\Lister\n-\t * @return\tstring\tHeading HTML\n+\t * @param int $headingStart\n+\t * @param int $headingCount\n+\t * @param string $headingLink\n+\t * @param array $articles\n+\t * @param Lister $lister\n+\t * @return string\n \t */\n \tpublic function formatItem( $headingStart, $headingCount, $headingLink, $articles, Lister $lister ) {\n \t\t$item = '';\n \n \t\t$item .= $this->getItemStart() . $headingLink;\n+\n \t\tif ( $this->showHeadingCount ) {\n \t\t\t$item .= $this->articleCountMessage( $headingCount );\n \t\t}\n+\n \t\t$item .= $lister->formatList( $articles, $headingStart, $headingCount );\n \t\t$item .= $this->getItemEnd();\n \n@@ -365,8 +374,7 @@ public function formatItem( $headingStart, $headingCount, $headingLink, $article\n \t/**\n \t * Return $this->listStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tList Start\n+\t * @return string\n \t */\n \tpublic function getListStart() {\n \t\treturn sprintf( $this->listStart, $this->listAttributes );\n@@ -375,8 +383,7 @@ public function getListStart() {\n \t/**\n \t * Return $this->itemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem Start\n+\t * @return string\n \t */\n \tpublic function getItemStart() {\n \t\treturn sprintf( $this->itemStart, $this->itemAttributes );\n@@ -385,8 +392,7 @@ public function getItemStart() {\n \t/**\n \t * Return $this->itemEnd with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem End\n+\t * @return string\n \t */\n \tpublic function getItemEnd() {\n \t\treturn $this->itemEnd;\n@@ -395,17 +401,18 @@ public function getItemEnd() {\n \t/**\n \t * Get the article count message appropriate for this list.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tCount\n-\t * @return\tstring\tMessage\n+\t * @param int $count\n+\t * @return string\n \t */\n \tprotected function articleCountMessage( $count ) {\n \t\t$orderMethods = $this->getParameters()->getParameter( 'ordermethods' );\n+\n \t\tif ( isset( $orderMethods[0] ) && $orderMethods[0] === 'category' ) {\n \t\t\t$message = 'categoryarticlecount';\n \t\t} else {\n \t\t\t$message = 'dpl_articlecount';\n \t\t}\n+\n \t\treturn '<p>' . wfMessage( $message, $count )->escaped() . '</p>';\n \t}\n }"
        },
        {
          "filename": "includes/heading/OrderedHeading.php",
          "status": "modified",
          "additions": 0,
          "deletions": 8,
          "patch": "@@ -1,12 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL OrderedHeading Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Heading;\n "
        },
        {
          "filename": "includes/heading/TieredHeading.php",
          "status": "modified",
          "additions": 13,
          "deletions": 26,
          "patch": "@@ -1,12 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL TieredHeading Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Heading;\n \n@@ -50,35 +42,33 @@ class TieredHeading extends Heading {\n \tprivate $tierLevel = 'eader';\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n \t */\n \tpublic function __construct( Parameters $parameters ) {\n \t\tparent::__construct( $parameters );\n+\n \t\t$this->tierLevel = substr( $parameters->getParameter( 'headingmode' ), 1 );\n \t}\n \n \t/**\n \t * Format a heading group.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tArticle start index for this heading.\n-\t * @param\tinteger\tArticle count for this heading.\n-\t * @param\tstring\tHeading link/text display.\n-\t * @param\tarray\tList of \\DPL\\Article.\n-\t * @param\tobject\tList of \\DPL\\Lister\\Lister\n-\t * @return\tstring\tHeading HTML\n+\t * @param int $headingStart\n+\t * @param int $headingCount\n+\t * @param string $headingLink\n+\t * @param array $articles\n+\t * @param Lister $lister\n+\t * @return string\n \t */\n \tpublic function formatItem( $headingStart, $headingCount, $headingLink, $articles, Lister $lister ) {\n \t\t$item = '';\n \n \t\t$item .= $this->getItemStart() . $headingLink;\n+\n \t\tif ( $this->showHeadingCount ) {\n \t\t\t$item .= $this->articleCountMessage( $headingCount );\n \t\t}\n+\n \t\t$item .= $this->getItemEnd();\n \t\t$item .= $lister->formatList( $articles, $headingStart, $headingCount );\n \n@@ -88,8 +78,7 @@ public function formatItem( $headingStart, $headingCount, $headingLink, $article\n \t/**\n \t * Return $this->listStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tList Start\n+\t * @return string\n \t */\n \tpublic function getListStart() {\n \t\treturn sprintf( $this->listStart, $this->listAttributes );\n@@ -98,8 +87,7 @@ public function getListStart() {\n \t/**\n \t * Return $this->itemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem Start\n+\t * @return string\n \t */\n \tpublic function getItemStart() {\n \t\treturn sprintf( $this->itemStart, $this->itemAttributes, $this->tierLevel );\n@@ -108,8 +96,7 @@ public function getItemStart() {\n \t/**\n \t * Return $this->itemEnd with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem End\n+\t * @return string\n \t */\n \tpublic function getItemEnd() {\n \t\treturn sprintf( $this->itemEnd, $this->itemAttributes, $this->tierLevel );"
        },
        {
          "filename": "includes/heading/UnorderedHeading.php",
          "status": "modified",
          "additions": 0,
          "deletions": 8,
          "patch": "@@ -1,12 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL UnorderedHeading Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Heading;\n "
        },
        {
          "filename": "includes/lister/CategoryList.php",
          "status": "modified",
          "additions": 18,
          "deletions": 21,
          "patch": "@@ -1,61 +1,58 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL CategoryList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n+use CategoryViewer;\n use DPL\\Article;\n use DPL\\Config;\n \n class CategoryList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_CATEGORY;\n \n \t/**\n \t * Format the list of articles.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tinteger\tStart position of the array to process.\n-\t * @param\tinteger\tTotal objects from the array to process.\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param int $start\n+\t * @param int $count\n+\t * @return string Formatted list.\n \t */\n \tpublic function formatList( $articles, $start, $count ) {\n+\t\t$articleLinks = [];\n+\t\t$articleStartChars = [];\n+\n \t\t$filteredCount = 0;\n+\n \t\tfor ( $i = $start; $i < $start + $count; $i++ ) {\n \t\t\t$articleLinks[] = $articles[$i]->mLink;\n \t\t\t$articleStartChars[] = $articles[$i]->mStartChar;\n-\t\t\t$filteredCount = $filteredCount + 1;\n+\n+\t\t\t$filteredCount++;\n \t\t}\n \n \t\t$this->rowCount = $filteredCount;\n \n \t\tif ( count( $articleLinks ) > Config::getSetting( 'categoryStyleListCutoff' ) ) {\n-\t\t\treturn \"__NOTOC____NOEDITSECTION__\" . \\CategoryViewer::columnList( $articleLinks, $articleStartChars );\n+\t\t\treturn \"__NOTOC____NOEDITSECTION__\" . CategoryViewer::columnList( $articleLinks, $articleStartChars );\n \t\t} elseif ( count( $articleLinks ) > 0 ) {\n \t\t\t// for short lists of articles in categories.\n-\t\t\treturn \"__NOTOC____NOEDITSECTION__\" . \\CategoryViewer::shortList( $articleLinks, $articleStartChars );\n+\t\t\treturn \"__NOTOC____NOEDITSECTION__\" . CategoryViewer::shortList( $articleLinks, $articleStartChars );\n \t\t}\n+\n \t\treturn '';\n \t}\n \n \t/**\n \t * Format a single item.\n \t *\n-\t * @access\tpublic\n-\t * @param\tobject\tDPL\\Article\n-\t * @param\tstring\t[Optional] Page text to include.\n-\t * @return\tstring\tItem HTML\n+\t * @param Article $article\n+\t * @param string|null $pageText\n+\t * @return string\n \t */\n \tpublic function formatItem( Article $article, $pageText = null ) {\n \t\treturn '';"
        },
        {
          "filename": "includes/lister/DefinitionList.php",
          "status": "modified",
          "additions": 1,
          "deletions": 9,
          "patch": "@@ -1,20 +1,12 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL DefinitionList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n class DefinitionList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_DEFINITION;\n "
        },
        {
          "filename": "includes/lister/GalleryList.php",
          "status": "modified",
          "additions": 6,
          "deletions": 15,
          "patch": "@@ -1,12 +1,4 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL GalleryList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n@@ -16,7 +8,7 @@ class GalleryList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_GALLERY;\n \n@@ -46,21 +38,20 @@ class GalleryList extends Lister {\n \t *\n \t * @var string\n \t */\n-\tpublic $itemEnd = \"|\";\n+\tpublic $itemEnd = '|';\n \n \t/**\n \t * Format an item.\n \t *\n-\t * @access\tpublic\n-\t * @param\tobject\tDPL\\Article\n-\t * @param\tstring\t[Optional] Page text to include.include.\n-\t * @return\tstring\tItem HTML\n+\t * @param Article $article\n+\t * @param string|null $pageText\n+\t * @return string\n \t */\n \tpublic function formatItem( Article $article, $pageText = null ) {\n \t\t$item = $article->mTitle;\n \n \t\tif ( $pageText !== null ) {\n-\t\t\t//Include parsed/processed wiki markup content after each item before the closing tag.\n+\t\t\t// Include parsed/processed wiki markup content after each item before the closing tag.\n \t\t\t$item .= $pageText;\n \t\t}\n "
        },
        {
          "filename": "includes/lister/InlineList.php",
          "status": "modified",
          "additions": 10,
          "deletions": 19,
          "patch": "@@ -1,20 +1,15 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL InlineList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n+use DPL\\Parameters;\n+use Parser;\n+\n class InlineList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_INLINE;\n \n@@ -68,24 +63,20 @@ class InlineList extends Lister {\n \tprotected $textSeparator = '';\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @param\tobject\tMediaWiki \\Parser\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n+\t * @param Parser $parser\n \t */\n-\tpublic function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n+\tpublic function __construct( Parameters $parameters, Parser $parser ) {\n \t\tparent::__construct( $parameters, $parser );\n+\n \t\t$this->textSeparator = $parameters->getParameter( 'inlinetext' );\n \t}\n \n \t/**\n \t * Join together items after being processed by formatItem().\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tItems as formatted by formatItem().\n-\t * @return\tstring\tImploded items.\n+\t * @param array $items\n+\t * @return string\n \t */\n \tprotected function implodeItems( $items ) {\n \t\treturn implode( $this->textSeparator, $items );"
        },
        {
          "filename": "includes/lister/Lister.php",
          "status": "modified",
          "additions": 257,
          "deletions": 260,
          "patch": "@@ -1,40 +1,43 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL List Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n use DPL\\Article;\n use DPL\\LST;\n+use DPL\\Parameters;\n use DPL\\UpdateArticle;\n use MediaWiki\\MediaWikiServices;\n+use Parser;\n+use Sanitizer;\n+use Title;\n \n class Lister {\n-\tconst LIST_DEFINITION = 1;\n-\tconst LIST_GALLERY = 2;\n-\tconst LIST_HEADING = 3;\n-\tconst LIST_INLINE = 4;\n-\tconst LIST_ORDERED = 5;\n-\tconst LIST_UNORDERED = 6;\n-\tconst LIST_CATEGORY = 7;\n-\tconst LIST_USERFORMAT = 8;\n+\tpublic const LIST_DEFINITION = 1;\n+\n+\tpublic const LIST_GALLERY = 2;\n+\n+\tpublic const LIST_HEADING = 3;\n+\n+\tpublic const LIST_INLINE = 4;\n+\n+\tpublic const LIST_ORDERED = 5;\n+\n+\tpublic const LIST_UNORDERED = 6;\n+\n+\tpublic const LIST_CATEGORY = 7;\n+\n+\tpublic const LIST_USERFORMAT = 8;\n \n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int|null\n \t */\n \tpublic $style = null;\n \n \t/**\n \t * Heading List Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -49,7 +52,7 @@ class Lister {\n \n \t/**\n \t * Heading List Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -64,7 +67,7 @@ class Lister {\n \n \t/**\n \t * List(Section) Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -79,7 +82,7 @@ class Lister {\n \n \t/**\n \t * Item Start\n-\t * Use %s for attribute placement.  Example: <div%s>\n+\t * Use %s for attribute placement. Example: <div%s>\n \t *\n \t * @var string\n \t */\n@@ -95,28 +98,28 @@ class Lister {\n \t/**\n \t * Extra head list HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $headListAttributes = '';\n \n \t/**\n \t * Extra head item HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $headItemAttributes = '';\n \n \t/**\n \t * Extra list HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $listAttributes = '';\n \n \t/**\n \t * Extra item HTML attributes.\n \t *\n-\t * @var array\n+\t * @var string\n \t */\n \tpublic $itemAttributes = '';\n \n@@ -151,14 +154,19 @@ class Lister {\n \t/**\n \t * Index of the table column to sort by.\n \t *\n-\t * @var int\n+\t * @var int|null\n \t */\n \tprotected $tableSortColumn = null;\n \n+\t/**\n+\t * @var string|null\n+\t */\n+\tprotected $tableSortMethod = null;\n+\n \t/**\n \t * Maximum title length.\n \t *\n-\t * @var int\n+\t * @var int|null\n \t */\n \tprotected $titleMaxLength = null;\n \n@@ -186,7 +194,7 @@ class Lister {\n \t/**\n \t * Maximum length before truncated included wiki text.\n \t *\n-\t * @var int\n+\t * @var int|null\n \t */\n \tprotected $includePageMaxLength = null;\n \n@@ -195,21 +203,21 @@ class Lister {\n \t *\n \t * @var array\n \t */\n-\tprotected $pageTextMatch = null;\n+\tprotected $pageTextMatch;\n \n \t/**\n \t * Array of regex text matches for page transclusion. (includematch)\n \t *\n \t * @var array\n \t */\n-\tprotected $pageTextMatchRegex = null;\n+\tprotected $pageTextMatchRegex;\n \n \t/**\n \t * Array of not regex text matches for page transclusion. (includenotmatch)\n \t *\n \t * @var array\n \t */\n-\tprotected $pageTextMatchNotRegex = null;\n+\tprotected $pageTextMatchNotRegex;\n \n \t/**\n \t * Parsed wiki text into HTML before running include/includematch/includenotmatch.\n@@ -226,28 +234,24 @@ class Lister {\n \tpublic $rowCount = 0;\n \n \t/**\n-\t * \\DPL\\Parameters\n+\t * Parameters\n \t *\n-\t * @var object\n+\t * @var Parameters\n \t */\n-\tprotected $parameters = null;\n+\tprotected $parameters;\n \n \t/**\n \t * Parser\n \t *\n-\t * @var object\n+\t * @var Parser\n \t */\n-\tprotected $parser = null;\n+\tprotected $parser;\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @param\tobject\tMediaWiki \\Parser\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n+\t * @param Parser $parser\n \t */\n-\tpublic function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n+\tpublic function __construct( Parameters $parameters, Parser $parser ) {\n \t\t$this->setHeadListAttributes( $parameters->getParameter( 'hlistattr' ) );\n \t\t$this->setHeadItemAttributes( $parameters->getParameter( 'hitemattr' ) );\n \t\t$this->setListAttributes( $parameters->getParameter( 'listattr' ) );\n@@ -256,7 +260,7 @@ public function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n \t\t$this->setTemplateSuffix( $parameters->getParameter( 'defaulttemplatesuffix' ) );\n \t\t$this->setTrimIncluded( $parameters->getParameter( 'includetrim' ) );\n \t\t$this->setTableSortColumn( $parameters->getParameter( 'tablesortcol' ) );\n-\t\t$this->setTableSortMethod($parameters->getParameter('tablesortmethod'));\n+\t\t$this->setTableSortMethod( $parameters->getParameter( 'tablesortmethod' ) );\n \t\t$this->setTitleMaxLength( $parameters->getParameter( 'titlemaxlen' ) );\n \t\t$this->setEscapeLinks( $parameters->getParameter( 'escapelinks' ) );\n \t\t$this->setSectionSeparators( $parameters->getParameter( 'secseparators' ) );\n@@ -274,51 +278,49 @@ public function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n \t/**\n \t * Get a new List subclass based on user selection.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tList style.\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @param\tobject\tMediaWiki \\Parser\n-\t * @return\tobject\tLister subclass.\n+\t * @param string $style\n+\t * @param Parameters $parameters\n+\t * @param Parser $parser\n+\t * @return mixed\n \t */\n-\tpublic static function newFromStyle( $style, \\DPL\\Parameters $parameters, \\Parser $parser ) {\n+\tpublic static function newFromStyle( $style, Parameters $parameters, Parser $parser ) {\n \t\t$style = strtolower( $style );\n+\n \t\tswitch ( $style ) {\n \t\t\tcase 'category':\n-\t\t\t\t$class = 'CategoryList';\n+\t\t\t\t$class = CategoryList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'definition':\n-\t\t\t\t$class = 'DefinitionList';\n+\t\t\t\t$class = DefinitionList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'gallery':\n-\t\t\t\t$class = 'GalleryList';\n+\t\t\t\t$class = GalleryList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'inline':\n-\t\t\t\t$class = 'InlineList';\n+\t\t\t\t$class = InlineList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'ordered':\n-\t\t\t\t$class = 'OrderedList';\n+\t\t\t\t$class = OrderedList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'subpage':\n-\t\t\t\t$class = 'SubPageList';\n+\t\t\t\t$class = SubPageList::class;\n \t\t\t\tbreak;\n \t\t\tdefault:\n \t\t\tcase 'unordered':\n-\t\t\t\t$class = 'UnorderedList';\n+\t\t\t\t$class = UnorderedList::class;\n \t\t\t\tbreak;\n \t\t\tcase 'userformat':\n-\t\t\t\t$class = 'UserFormatList';\n+\t\t\t\t$class = UserFormatList::class;\n \t\t\t\tbreak;\n \t\t}\n-\t\t$class = '\\DPL\\Lister\\\\' . $class;\n \n \t\treturn new $class( $parameters, $parser );\n \t}\n \n \t/**\n-\t * Get the \\DPL\\Parameters object this object was constructed with.\n+\t * Get the Parameters object this object was constructed with.\n \t *\n-\t * @access\tpublic\n-\t * @return\tobject\t\\DPL\\Parameters\n+\t * @return Parameters\n \t */\n \tpublic function getParameters() {\n \t\treturn $this->parameters;\n@@ -327,53 +329,43 @@ public function getParameters() {\n \t/**\n \t * Set extra list attributes for header wraps.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setHeadListAttributes( $attributes ) {\n-\t\t$this->headListAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'ul' );\n+\t\t$this->headListAttributes = Sanitizer::fixTagAttributes( $attributes, 'ul' );\n \t}\n \n \t/**\n \t * Set extra item attributes for header items.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setHeadItemAttributes( $attributes ) {\n-\t\t$this->headItemAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'li' );\n+\t\t$this->headItemAttributes = Sanitizer::fixTagAttributes( $attributes, 'li' );\n \t}\n \n \t/**\n \t * Set extra list attributes.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setListAttributes( $attributes ) {\n-\t\t$this->listAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'ul' );\n+\t\t$this->listAttributes = Sanitizer::fixTagAttributes( $attributes, 'ul' );\n \t}\n \n \t/**\n \t * Set extra item attributes.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTag soup attributes, example: this=\"that\" thing=\"no\"\n-\t * @return\tvoid\n+\t * @param string $attributes\n \t */\n \tpublic function setItemAttributes( $attributes ) {\n-\t\t$this->itemAttributes = \\Sanitizer::fixTagAttributes( $attributes, 'li' );\n+\t\t$this->itemAttributes = Sanitizer::fixTagAttributes( $attributes, 'li' );\n \t}\n \n \t/**\n \t * Set the count of items to trigger a section as dominant.\n \t *\n-\t * @access\tpublic\n-\t * @param\tinteger\tCount\n-\t * @return\tvoid\n+\t * @param int $count\n \t */\n \tpublic function setDominantSectionCount( $count = -1 ) {\n \t\t$this->dominantSectionCount = intval( $count );\n@@ -382,8 +374,7 @@ public function setDominantSectionCount( $count = -1 ) {\n \t/**\n \t * Get the count of items to trigger a section as dominant.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\tCount\n+\t * @return int\n \t */\n \tpublic function getDominantSectionCount() {\n \t\treturn $this->dominantSectionCount;\n@@ -392,8 +383,7 @@ public function getDominantSectionCount() {\n \t/**\n \t * Return the list style.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\tList style constant.\n+\t * @return int\n \t */\n \tpublic function getStyle() {\n \t\treturn $this->style;\n@@ -402,9 +392,7 @@ public function getStyle() {\n \t/**\n \t * Set the template suffix for whatever the hell uses it.\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tTemplate Suffix\n-\t * @return\tvoid\n+\t * @param string $suffix\n \t */\n \tpublic function setTemplateSuffix( $suffix = '.default' ) {\n \t\t$this->templateSuffix = $suffix;\n@@ -413,8 +401,7 @@ public function setTemplateSuffix( $suffix = '.default' ) {\n \t/**\n \t * Get the template suffix for whatever the hell uses it.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\n+\t * @return string\n \t */\n \tpublic function getTemplateSuffix() {\n \t\treturn $this->templateSuffix;\n@@ -423,9 +410,7 @@ public function getTemplateSuffix() {\n \t/**\n \t * Set if included wiki text should be trimmed.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Trim\n-\t * @return\tvoid\n+\t * @param bool $trim\n \t */\n \tpublic function setTrimIncluded( $trim = false ) {\n \t\t$this->trimIncluded = boolval( $trim );\n@@ -434,8 +419,7 @@ public function setTrimIncluded( $trim = false ) {\n \t/**\n \t * Get if included wiki text should be trimmed.\n \t *\n-\t * @access\tpublic\n-\t * @return\tboolean\tTrim\n+\t * @return bool\n \t */\n \tpublic function getTrimIncluded() {\n \t\treturn $this->trimIncluded;\n@@ -445,9 +429,7 @@ public function getTrimIncluded() {\n \t * Set if links should be escaped?\n \t * @todo The naming of this parameter is weird and I am not sure what it does.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Escape\n-\t * @return\tvoid\n+\t * @param bool $escape\n \t */\n \tpublic function setEscapeLinks( $escape = true ) {\n \t\t$this->escapeLinks = boolval( $escape );\n@@ -456,8 +438,7 @@ public function setEscapeLinks( $escape = true ) {\n \t/**\n \t * Get if links should be escaped.\n \t *\n-\t * @access\tpublic\n-\t * @return\tboolean\tEscape\n+\t * @return bool\n \t */\n \tpublic function getEscapeLinks() {\n \t\treturn $this->escapeLinks;\n@@ -466,9 +447,7 @@ public function getEscapeLinks() {\n \t/**\n \t * Set the index of the table column to sort by.\n \t *\n-\t * @access\tpublic\n-\t * @param\tmixed\t[Optional] Integer index or null to disable.\n-\t * @return\tvoid\n+\t * @param int|null $index\n \t */\n \tpublic function setTableSortColumn( $index = null ) {\n \t\t$this->tableSortColumn = $index === null ? null : intval( $index );\n@@ -477,8 +456,7 @@ public function setTableSortColumn( $index = null ) {\n \t/**\n \t * Get the index of the table column to sort by.\n \t *\n-\t * @access\tpublic\n-\t * @return\tmixed\tInteger index or null to disable.\n+\t * @return int|null\n \t */\n \tpublic function getTableSortColumn() {\n \t\treturn $this->tableSortColumn;\n@@ -487,19 +465,16 @@ public function getTableSortColumn() {\n \t/**\n \t * Set the algorithm for table sorting\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tAlgorithm name\n-\t * @return\tvoid\n+\t * @param string|null $method\n \t */\n-\tpublic function setTableSortMethod($method = null) {\n+\tpublic function setTableSortMethod( $method = null ) {\n \t\t$this->tableSortMethod = $method === null ? 'standard' : $method;\n \t}\n \n \t/**\n \t * Get the algorithm for table sorting\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tAlgorithm name\n+\t * @return string\n \t */\n \tpublic function getTableSortMethod() {\n \t\treturn $this->tableSortMethod;\n@@ -508,9 +483,7 @@ public function getTableSortMethod() {\n \t/**\n \t * Set the maximum title length for display.\n \t *\n-\t * @access\tpublic\n-\t * @param\tmixed\t[Optional] Integer length or null to disable.\n-\t * @return\tvoid\n+\t * @param int|null $length\n \t */\n \tpublic function setTitleMaxLength( $length = null ) {\n \t\t$this->titleMaxLength = $length === null ? null : intval( $length );\n@@ -519,8 +492,7 @@ public function setTitleMaxLength( $length = null ) {\n \t/**\n \t * Get the maximum title length for display.\n \t *\n-\t * @access\tpublic\n-\t * @return\tmixed\tInteger length or null to disable.\n+\t * @return int|null\n \t */\n \tpublic function getTitleMaxLength() {\n \t\treturn $this->titleMaxLength;\n@@ -529,31 +501,25 @@ public function getTitleMaxLength() {\n \t/**\n \t * Set the separators that separate sections of matched page text.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\t[Optional] Array of section separators.\n-\t * @return\tvoid\n+\t * @param ?array $separators\n \t */\n \tpublic function setSectionSeparators( ?array $separators ) {\n-\t\t$this->sectionSeparators = (array)$separators ?? [];\n+\t\t$this->sectionSeparators = $separators ?? [];\n \t}\n \n \t/**\n \t * Set the separators that separate related sections of matched page text.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\t[Optional] Array of section separators.\n-\t * @return\tvoid\n+\t * @param ?array $separators\n \t */\n \tpublic function setMultiSectionSeparators( ?array $separators ) {\n-\t\t$this->multiSectionSeparators = (array)$separators ?? [];\n+\t\t$this->multiSectionSeparators = $separators ?? [];\n \t}\n \n \t/**\n \t * Set if wiki text should be included in output.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Parse\n-\t * @return\tvoid\n+\t * @param bool $include\n \t */\n \tpublic function setIncludePageText( $include = false ) {\n \t\t$this->includePageText = boolval( $include );\n@@ -562,9 +528,7 @@ public function setIncludePageText( $include = false ) {\n \t/**\n \t * Set the maximum included page text length before truncating.\n \t *\n-\t * @access\tpublic\n-\t * @param\tmixed\t[Optional] Integer length or null to disable.\n-\t * @return\tvoid\n+\t * @param int|null $length\n \t */\n \tpublic function setIncludePageMaxLength( $length = null ) {\n \t\t$this->includePageMaxLength = $length === null ? null : intval( $length );\n@@ -573,42 +537,34 @@ public function setIncludePageMaxLength( $length = null ) {\n \t/**\n \t * Set the plain string text matching for page transclusion.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\t[Optional] Array of plain string matches.\n-\t * @return\tvoid\n+\t * @param array\t$pageTextMatch\n \t */\n \tpublic function setPageTextMatch( array $pageTextMatch = [] ) {\n-\t\t$this->pageTextMatch = (array)$pageTextMatch;\n+\t\t$this->pageTextMatch = $pageTextMatch;\n \t}\n \n \t/**\n \t * Set the regex text matching for page transclusion.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\t[Optional] Array of regexes.\n-\t * @return\tvoid\n+\t * @param array\t$pageTextMatchRegex\n \t */\n \tpublic function setPageTextMatchRegex( array $pageTextMatchRegex = [] ) {\n-\t\t$this->pageTextMatchRegex = (array)$pageTextMatchRegex;\n+\t\t$this->pageTextMatchRegex = $pageTextMatchRegex;\n \t}\n \n \t/**\n \t * Set the not regex text matching for page transclusion.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\t[Optional] Array of regexes.\n-\t * @return\tvoid\n+\t * @param array\t$pageTextMatchNotRegex\n \t */\n \tpublic function setPageTextMatchNotRegex( array $pageTextMatchNotRegex = [] ) {\n-\t\t$this->pageTextMatchNotRegex = (array)$pageTextMatchNotRegex;\n+\t\t$this->pageTextMatchNotRegex = $pageTextMatchNotRegex;\n \t}\n \n \t/**\n \t * Set if included wiki text should be parsed before being matched against.\n \t *\n-\t * @access\tpublic\n-\t * @param\tboolean\t[Optional] Parse\n-\t * @return\tvoid\n+\t * @param bool $parse\n \t */\n \tpublic function setIncludePageParsed( $parse = false ) {\n \t\t$this->includePageParsed = boolval( $parse );\n@@ -617,9 +573,8 @@ public function setIncludePageParsed( $parse = false ) {\n \t/**\n \t * Shortcut to format all articles into a single formatted list.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @return string\n \t */\n \tpublic function format( $articles ) {\n \t\treturn $this->formatList( $articles, 0, count( $articles ) );\n@@ -628,17 +583,18 @@ public function format( $articles ) {\n \t/**\n \t * Format a list of articles into a singular list.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tinteger\tStart position of the array to process.\n-\t * @param\tinteger\tTotal objects from the array to process.\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param int $start\n+\t * @param int $count\n+\t * @return string\n \t */\n \tpublic function formatList( $articles, $start, $count ) {\n \t\t$filteredCount = 0;\n \t\t$items = [];\n+\n \t\tfor ( $i = $start; $i < $start + $count; $i++ ) {\n \t\t\t$article = $articles[$i];\n+\n \t\t\tif ( empty( $article ) || empty( $article->mTitle ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n@@ -663,20 +619,19 @@ public function formatList( $articles, $start, $count ) {\n \t/**\n \t * Format a single item.\n \t *\n-\t * @access\tpublic\n-\t * @param\tobject\tDPL\\Article\n-\t * @param\tstring\t[Optional] Page text to include.\n-\t * @return\tstring\tItem HTML\n+\t * @param Article $article\n+\t * @param string|null $pageText\n+\t * @return string\n \t */\n \tpublic function formatItem( Article $article, $pageText = null ) {\n \t\tglobal $wgLang;\n \n \t\t$item = '';\n \n-\t\t// DPL Article, not MediaWiki.\n \t\t$date = $article->getDate();\n \t\tif ( $date !== null ) {\n \t\t\t$item .= $date . ' ';\n+\n \t\t\tif ( $article->mRevision !== null ) {\n \t\t\t\t$item .= '[{{fullurl:' . $article->mTitle . '|oldid=' . $article->mRevision . '}} ' . htmlspecialchars( $article->mTitle ) . ']';\n \t\t\t} else {\n@@ -701,6 +656,7 @@ public function formatItem( Article $article, $pageText = null ) {\n \n \t\tif ( $article->mUserLink !== null ) {\n \t\t\t$item .= ' . . [[User:' . $article->mUser . '|' . $article->mUser . ']]';\n+\n \t\t\tif ( $article->mComment != '' ) {\n \t\t\t\t$item .= ' { ' . $article->mComment . ' }';\n \t\t\t}\n@@ -719,7 +675,7 @@ public function formatItem( Article $article, $pageText = null ) {\n \t\t}\n \n \t\tif ( $pageText !== null ) {\n-\t\t\t//Include parsed/processed wiki markup content after each item before the closing tag.\n+\t\t\t// Include parsed/processed wiki markup content after each item before the closing tag.\n \t\t\t$item .= $pageText;\n \t\t}\n \n@@ -733,8 +689,7 @@ public function formatItem( Article $article, $pageText = null ) {\n \t/**\n \t * Return $this->headListStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tHead List Start\n+\t * @return string\n \t */\n \tpublic function getHeadListStart() {\n \t\treturn sprintf( $this->headListStart, $this->headListAttributes );\n@@ -743,8 +698,7 @@ public function getHeadListStart() {\n \t/**\n \t * Return $this->headItemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tHead Item Start\n+\t * @return string\n \t */\n \tpublic function getHeadItemStart() {\n \t\treturn sprintf( $this->headItemStart, $this->headItemAttributes );\n@@ -753,8 +707,7 @@ public function getHeadItemStart() {\n \t/**\n \t * Return $this->headItemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tHead Item End\n+\t * @return string\n \t */\n \tpublic function getHeadItemEnd() {\n \t\treturn $this->headItemEnd;\n@@ -763,8 +716,7 @@ public function getHeadItemEnd() {\n \t/**\n \t * Return $this->listStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tList Start\n+\t * @return string\n \t */\n \tpublic function getListStart() {\n \t\treturn sprintf( $this->listStart, $this->listAttributes );\n@@ -773,8 +725,7 @@ public function getListStart() {\n \t/**\n \t * Return $this->itemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem Start\n+\t * @return string\n \t */\n \tpublic function getItemStart() {\n \t\treturn sprintf( $this->itemStart, $this->itemAttributes );\n@@ -783,8 +734,7 @@ public function getItemStart() {\n \t/**\n \t * Return $this->itemEnd with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem End\n+\t * @return string\n \t */\n \tpublic function getItemEnd() {\n \t\treturn $this->itemEnd;\n@@ -793,9 +743,8 @@ public function getItemEnd() {\n \t/**\n \t * Join together items after being processed by formatItem().\n \t *\n-\t * @protected\n-\t * @param\tarray\tItems as formatted by formatItem().\n-\t * @return\tstring\tImploded items.\n+\t * @param array $items\n+\t * @return string\n \t */\n \tprotected function implodeItems( $items ) {\n \t\treturn implode( '', $items );\n@@ -804,10 +753,9 @@ protected function implodeItems( $items ) {\n \t/**\n \t * Replace user tag parameters.\n \t *\n-\t * @protected\n-\t * @param\tstring\tText to perform replacements on.\n-\t * @param\tobject\t\\DPL\\Article\n-\t * @return\tstring\tText with replacements performed.\n+\t * @param string $tag\n+\t * @param Article $article\n+\t * @return string\n \t */\n \tprotected function replaceTagParameters( $tag, Article $article ) {\n \t\t$contLang = MediaWikiServices::getInstance()->getContentLanguage();\n@@ -827,31 +775,34 @@ protected function replaceTagParameters( $tag, Article $article ) {\n \t\t}\n \n \t\t$tag = str_replace( '%PAGE%', $pagename, $tag );\n-\t\t$tag = str_replace( '%PAGEID%', $article->mID, $tag );\n+\t\t$tag = str_replace( '%PAGEID%', (string)$article->mID, $tag );\n \t\t$tag = str_replace( '%NAMESPACE%', $namespaces[$article->mNamespace], $tag );\n \t\t$tag = str_replace( '%IMAGE%', $imageUrl, $tag );\n \t\t$tag = str_replace( '%EXTERNALLINK%', $article->mExternalLink, $tag );\n \t\t$tag = str_replace( '%EDITSUMMARY%', $article->mComment, $tag );\n \n \t\t$title = $article->mTitle->getText();\n \t\t$replaceInTitle = $this->getParameters()->getParameter( 'replaceintitle' );\n+\n \t\tif ( is_array( $replaceInTitle ) && count( $replaceInTitle ) === 2 ) {\n \t\t\t$title = preg_replace( $replaceInTitle[0], $replaceInTitle[1], $title );\n \t\t}\n+\n \t\t$titleMaxLength = $this->getTitleMaxLength();\n \t\tif ( $titleMaxLength !== null && ( strlen( $title ) > $titleMaxLength ) ) {\n \t\t\t$title = substr( $title, 0, $titleMaxLength ) . '...';\n \t\t}\n+\n \t\t$tag = str_replace( '%TITLE%', $title, $tag );\n \n-\t\t$tag = str_replace( '%COUNT%', $article->mCounter, $tag );\n-\t\t$tag = str_replace( '%COUNTFS%', floor( log( $article->mCounter ) * 0.7 ), $tag );\n-\t\t$tag = str_replace( '%COUNTFS2%', floor( sqrt( log( $article->mCounter ) ) ), $tag );\n-\t\t$tag = str_replace( '%SIZE%', $article->mSize, $tag );\n-\t\t$tag = str_replace( '%SIZEFS%', floor( sqrt( log( $article->mSize ) ) * 2.5 - 5 ), $tag );\n+\t\t$tag = str_replace( '%COUNT%', (string)$article->mCounter, $tag );\n+\t\t$tag = str_replace( '%COUNTFS%', (string)( floor( log( $article->mCounter ) * 0.7 ) ), $tag );\n+\t\t$tag = str_replace( '%COUNTFS2%', (string)( floor( sqrt( log( $article->mCounter ) ) ) ), $tag );\n+\t\t$tag = str_replace( '%SIZE%', (string)$article->mSize, $tag );\n+\t\t$tag = str_replace( '%SIZEFS%', (string)( floor( sqrt( log( $article->mSize ) ) * 2.5 - 5 ) ), $tag );\n \t\t$tag = str_replace( '%DATE%', $article->getDate(), $tag );\n-\t\t$tag = str_replace( '%REVISION%', $article->mRevision, $tag );\n-\t\t$tag = str_replace( '%CONTRIBUTION%', $article->mContribution, $tag );\n+\t\t$tag = str_replace( '%REVISION%', (string)$article->mRevision, $tag );\n+\t\t$tag = str_replace( '%CONTRIBUTION%', (string)$article->mContribution, $tag );\n \t\t$tag = str_replace( '%CONTRIB%', $article->mContrib, $tag );\n \t\t$tag = str_replace( '%CONTRIBUTOR%', $article->mContributor, $tag );\n \t\t$tag = str_replace( '%USER%', $article->mUser, $tag );\n@@ -863,6 +814,7 @@ protected function replaceTagParameters( $tag, Article $article ) {\n \t\t\t\t$tag = str_replace( '%PAGESEL%', $namespaces[$article->mSelNamespace] . ':' . str_replace( '_', ' ', $article->mSelTitle ), $tag );\n \t\t\t}\n \t\t}\n+\n \t\t$tag = str_replace( '%IMAGESEL%', str_replace( '_', ' ', $article->mImageSelTitle ), $tag );\n \n \t\t$tag = $this->replaceTagCategory( $tag, $article );\n@@ -873,10 +825,9 @@ protected function replaceTagParameters( $tag, Article $article ) {\n \t/**\n \t * Replace user tag parameters for categories.\n \t *\n-\t * @protected\n-\t * @param\tstring\tText to perform replacements on.\n-\t * @param\tobject\t\\DPL\\Article\n-\t * @return\tstring\tText with replacements performed.\n+\t * @param string $tag\n+\t * @param Article $article\n+\t * @return string\n \t */\n \tprotected function replaceTagCategory( $tag, Article $article ) {\n \t\tif ( !empty( $article->mCategoryLinks ) ) {\n@@ -895,89 +846,92 @@ protected function replaceTagCategory( $tag, Article $article ) {\n \t/**\n \t * Replace the %NR%(current article sequence number) in text.\n \t *\n-\t * @protected\n-\t * @param\tstring\tText to perform replacements on.\n-\t * @param\tinteger\tThe current article sequence number (starting from 1).\n-\t * @return\tstring\tText with replacements performed.\n+\t * @param string $tag\n+\t * @param int $nr\n+\t * @return string\n \t */\n \tprotected function replaceTagCount( $tag, $nr ) {\n-\t\treturn str_replace( '%NR%', $nr, $tag );\n+\t\treturn str_replace( '%NR%', (string)$nr, $tag );\n \t}\n \n-\t//\n-\n \t/**\n \t * Format one single item of an entry in the output list (i.e. one occurence of one item from the include parameter).\n-\t * @todo I am not exactly sure how this function differs from replaceTagParameters().  It has something to do with table row formatting.  --Alexia\n \t *\n-\t * @private\n-\t * @param\tarray\tString pieces to perform replacements on.\n-\t * @param\tmixed\tIndex of the table row position.\n-\t * @param\tobject\t\\DPL\\Article\n-\t * @return\tvoid\n+\t * @param array &$pieces\n+\t * @param mixed $s Index of the table row position.\n+\t * @param Article $article\n \t */\n \tprivate function replaceTagTableRow( &$pieces, $s, Article $article ) {\n \t\t$tableFormat = $this->getParameters()->getParameter( 'tablerow' );\n \t\t$firstCall = true;\n+\n \t\tforeach ( $pieces as $key => $val ) {\n \t\t\tif ( isset( $tableFormat[$s] ) ) {\n \t\t\t\tif ( $s == 0 || $firstCall ) {\n \t\t\t\t\t$pieces[$key] = str_replace( '%%', $val, $tableFormat[$s] );\n \t\t\t\t} else {\n \t\t\t\t\t$n = strpos( $tableFormat[$s], '|' );\n+\n \t\t\t\t\tif ( $n === false || !( strpos( substr( $tableFormat[$s], 0, $n ), '{' ) === false ) || !( strpos( substr( $tableFormat[$s], 0, $n ), '[' ) === false ) ) {\n \t\t\t\t\t\t$pieces[$key] = str_replace( '%%', $val, $tableFormat[$s] );\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$pieces[$key] = str_replace( '%%', $val, substr( $tableFormat[$s], $n + 1 ) );\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\t$pieces[$key] = str_replace( '%IMAGE%', $this->parseImageUrlWithPath( $val ), $pieces[$key] );\n \t\t\t\t$pieces[$key] = str_replace( '%PAGE%', $article->mTitle->getPrefixedText(), $pieces[$key] );\n \n \t\t\t\t$pieces[$key] = $this->replaceTagCategory( $pieces[$key], $article );\n \t\t\t}\n+\n \t\t\t$firstCall = false;\n \t\t}\n \t}\n \n \t/**\n-\t * Format one single template argument of one occurence of one item from the include parameter.  This is called via a backlink from LST::includeTemplate().\n-\t * @todo Again, another poorly documented function with vague functionality.  --Alexia\n+\t * Format one single template argument of one occurence of one item from the include parameter. This is called via a backlink from LST::includeTemplate().\n \t *\n-\t * @access\tpublic\n-\t * @param\tstring\tArgument to parse and replace.\n-\t * @param\tmixed\tIndex of the table row position.\n-\t * @param\tmixed\tOther part of the index of the table row position?\n-\t * @param\tboolean\tIs this the first time this function was called in this context?\n-\t * @param\tinteger\tMaximum text length allowed.\n-\t * @param\tobject\t\\DPL\\Article\n-\t * @return\tstrig\tFormatted text.\n+\t * @param string $arg\n+\t * @param mixed\t$s Index of the table row position.\n+\t * @param mixed $argNr Other part of the index of the table row position?\n+\t * @param bool $firstCall\n+\t * @param int $maxLength\n+\t * @param Article $article\n+\t * @return string\n \t */\n \tpublic function formatTemplateArg( $arg, $s, $argNr, $firstCall, $maxLength, Article $article ) {\n \t\t$tableFormat = $this->getParameters()->getParameter( 'tablerow' );\n+\n \t\t// we could try to format fields differently within the first call of a template\n \t\t// currently we do not make such a difference\n \n \t\t// if the result starts with a '-' we add a leading space; thus we avoid a misinterpretation of |- as\n \t\t// a start of a new row (wiki table syntax)\n \t\tif ( array_key_exists( \"$s.$argNr\", $tableFormat ) ) {\n \t\t\t$n = -1;\n+\n \t\t\tif ( $s >= 1 && $argNr == 0 && !$firstCall ) {\n \t\t\t\t$n = strpos( $tableFormat[\"$s.$argNr\"], '|' );\n \t\t\t\tif ( $n === false || !( strpos( substr( $tableFormat[\"$s.$argNr\"], 0, $n ), '{' ) === false ) || !( strpos( substr( $tableFormat[\"$s.$argNr\"], 0, $n ), '[' ) === false ) ) {\n \t\t\t\t\t$n = -1;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\t$result = str_replace( '%%', $arg, substr( $tableFormat[\"$s.$argNr\"], $n + 1 ) );\n \t\t\t$result = str_replace( '%PAGE%', $article->mTitle->getPrefixedText(), $result );\n-\t\t\t$result = str_replace( '%IMAGE%', $this->parseImageUrlWithPath( $arg ), $result ); //@TODO: This just blindly passes the argument through hoping it is an image.  --Alexia\n+\n+\t\t\t// @TODO: This just blindly passes the argument through hoping it is an image.\n+\t\t\t$result = str_replace( '%IMAGE%', $this->parseImageUrlWithPath( $arg ), $result );\n \t\t\t$result = $this->cutAt( $maxLength, $result );\n+\n \t\t\tif ( strlen( $result ) > 0 && $result[0] == '-' ) {\n \t\t\t\treturn ' ' . $result;\n \t\t\t} else {\n \t\t\t\treturn $result;\n \t\t\t}\n \t\t}\n+\n \t\t$result = $this->cutAt( $maxLength, $arg );\n \t\tif ( strlen( $result ) > 0 && $result[0] == '-' ) {\n \t\t\treturn ' ' . $result;\n@@ -992,50 +946,55 @@ public function formatTemplateArg( $arg, $s, $argNr, $firstCall, $maxLength, Art\n \t * ... it is balanced in terms of braces, brackets and tags\n \t * ... can be used as content of a wikitable field without spoiling the whole surrounding wikitext structure\n \t *\n-\t * @private\n-\t * @param  $lim     limit of character count for the result\n-\t * @param  $text    the wikitext to be truncated\n-\t * @return the truncated text; note that in some cases it may be slightly longer than the given limit\n-\t *         if the text is alread shorter than the limit or if the limit is negative, the text\n-\t *         will be returned without any checks for balance of tags\n+\t * @param int $lim\n+\t * @param string $text\n+\t *\n+\t * @return string the truncated text; note that in some cases it may be slightly longer than the given limit\n+\t * if the text is alread shorter than the limit or if the limit is negative, the text\n+\t * will be returned without any checks for balance of tags\n \t */\n \tprivate function cutAt( $lim, $text ) {\n \t\tif ( $lim < 0 ) {\n \t\t\treturn $text;\n \t\t}\n+\n \t\treturn LST::limitTranscludedText( $text, $lim );\n \t}\n \n \t/**\n \t * Prepends an image name with its hash path.\n \t *\n-\t * @protected\n-\t * @param \tmixed\t\\DPL\\Article or string image name of the image (may start with Image: or File:).\n-\t * @return\tstring\tImage URL\n+\t * @param Article|string $article\n+\t * @return string\n \t */\n \tprotected function parseImageUrlWithPath( $article ) {\n+\t\t$repoGroup = MediaWikiServices::getInstance()->getRepoGroup();\n+\n \t\t$imageUrl = '';\n-\t\tif ( $article instanceof \\DPL\\Article ) {\n+\t\tif ( $article instanceof Article ) {\n \t\t\tif ( $article->mNamespace == NS_FILE ) {\n \t\t\t\t// calculate URL for existing images\n-\t\t\t\t// $img = Image::newFromName($article->mTitle->getText());\n-\t\t\t\t$img = wfFindFile( \\Title::makeTitle( NS_FILE, $article->mTitle->getText() ) );\n+\t\t\t\t// $img = Image::newFromName( $article->mTitle->getText() );\n+\n+\t\t\t\t$img = $repoGroup->findFile( Title::makeTitle( NS_FILE, $article->mTitle->getText() ) );\n \t\t\t\tif ( $img && $img->exists() ) {\n \t\t\t\t\t$imageUrl = $img->getURL();\n \t\t\t\t} else {\n-\t\t\t\t\t$fileTitle = \\Title::makeTitleSafe( NS_FILE, $article->mTitle->getDBKey() );\n-\t\t\t\t\t$imageUrl = \\RepoGroup::singleton()->getLocalRepo()->newFile( $fileTitle )->getPath();\n+\t\t\t\t\t$fileTitle = Title::makeTitleSafe( NS_FILE, $article->mTitle->getDBKey() );\n+\t\t\t\t\t$imageUrl = $repoGroup->getLocalRepo()->newFile( $fileTitle )->getPath();\n \t\t\t\t}\n \t\t\t}\n \t\t} else {\n-\t\t\t$title = \\Title::newfromText( 'File:' . $article );\n+\t\t\t$title = Title::newfromText( 'File:' . $article );\n+\n \t\t\tif ( $title !== null ) {\n-\t\t\t\t$fileTitle   = \\Title::makeTitleSafe( 6, $title->getDBKey() );\n-\t\t\t\t$imageUrl = \\RepoGroup::singleton()->getLocalRepo()->newFile( $fileTitle )->getPath();\n+\t\t\t\t$fileTitle = Title::makeTitleSafe( 6, $title->getDBKey() );\n+\n+\t\t\t\t$imageUrl = $repoGroup->getLocalRepo()->newFile( $fileTitle )->getPath();\n \t\t\t}\n \t\t}\n \n-\t\t//@TODO: Check this preg_replace.  Probably only works for stock file repositories.  --Alexia\n+\t\t// @TODO: Check this preg_replace. Probably only works for stock file repositories.\n \t\t$imageUrl = preg_replace( '~^.*images/(.*)~', '\\1', $imageUrl );\n \n \t\treturn $imageUrl;\n@@ -1044,36 +1003,43 @@ protected function parseImageUrlWithPath( $article ) {\n \t/**\n \t * Transclude a page contents.\n \t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Article\n-\t * @param\tinteger\tFiltered Article Count\n-\t * @return\tstring\tPage Text\n+\t * @param Article $article\n+\t * @param int &$filteredCount\n+\t * @return string\n \t */\n \tpublic function transcludePage( Article $article, &$filteredCount ) {\n \t\t$matchFailed = false;\n+\t\t$septag = [];\n+\n \t\tif ( empty( $this->pageTextMatch ) || $this->pageTextMatch[0] == '*' ) { // include whole article\n \t\t\t$title = $article->mTitle->getPrefixedText();\n+\n \t\t\tif ( $this->getStyle() == self::LIST_USERFORMAT ) {\n \t\t\t\t$pageText = '';\n \t\t\t} else {\n \t\t\t\t$pageText = '<br/>';\n \t\t\t}\n-\t\t\t$text = $this->parser->fetchTemplate( \\Title::newFromText( $title ) );\n-\t\t\tif ( ( count( $this->pageTextMatchRegex ) <= 0 || $this->pageTextMatchRegex[0] == '' || !preg_match( $this->pageTextMatchRegex[0], $text ) == false ) && ( count( $this->pageTextMatchNotRegex ) <= 0 || $this->pageTextMatchNotRegex[0] == '' || preg_match( $this->pageTextMatchNotRegex[0], $text ) == false ) ) {\n+\n+\t\t\t$text = $this->parser->fetchTemplateAndTitle( Title::newFromText( $title ) )[0];\n+\t\t\tif ( ( count( $this->pageTextMatchRegex ) <= 0 || $this->pageTextMatchRegex[0] == '' || !( !preg_match( $this->pageTextMatchRegex[0], $text ) ) ) && ( count( $this->pageTextMatchNotRegex ) <= 0 || $this->pageTextMatchNotRegex[0] == '' || preg_match( $this->pageTextMatchNotRegex[0], $text ) == false ) ) {\n \t\t\t\tif ( $this->includePageMaxLength > 0 && ( strlen( $text ) > $this->includePageMaxLength ) ) {\n \t\t\t\t\t$text = LST::limitTranscludedText( $text, $this->includePageMaxLength, ' [[' . $title . '|..\u2192]]' );\n \t\t\t\t}\n-\t\t\t\t$filteredCount = $filteredCount + 1;\n+\n+\t\t\t\t$filteredCount++;\n \n \t\t\t\t// update article if include=* and updaterules are given\n \t\t\t\t$updateRules = $this->getParameters()->getParameter( 'updaterules' );\n \t\t\t\t$deleteRules = $this->getParameters()->getParameter( 'deleterules' );\n+\n \t\t\t\tif ( !empty( $updateRules ) ) {\n \t\t\t\t\t$ruleOutput = UpdateArticle::updateArticleByRule( $title, $text, $updateRules );\n+\n \t\t\t\t\t// append update message to output\n \t\t\t\t\t$pageText .= $ruleOutput;\n \t\t\t\t} elseif ( !empty( $deleteRules ) ) {\n \t\t\t\t\t$ruleOutput = UpdateArticle::deleteArticleByRule( $title, $text, $deleteRules );\n+\n \t\t\t\t\t// append delete message to output\n \t\t\t\t\t$pageText .= $ruleOutput;\n \t\t\t\t} else {\n@@ -1083,6 +1049,7 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t\t\t$pieces = [\n \t\t\t\t\t\t\t0 => $text\n \t\t\t\t\t\t];\n+\n \t\t\t\t\t\t$this->replaceTagTableRow( $pieces, 0, $article );\n \t\t\t\t\t\t$pageText .= $pieces[0];\n \t\t\t\t\t} else {\n@@ -1094,17 +1061,20 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t}\n \t\t} else {\n \t\t\t// identify section pieces\n-\t\t\t$secPiece       = [];\n+\t\t\t$secPiece = [];\n \t\t\t$dominantPieces = false;\n+\n \t\t\t// ONE section can be marked as \"dominant\"; if this section contains multiple entries\n \t\t\t// we will create a separate output row for each value of the dominant section\n \t\t\t// the values of all other columns will be repeated\n \n \t\t\tforeach ( $this->pageTextMatch as $s => $sSecLabel ) {\n \t\t\t\t$sSecLabel = trim( $sSecLabel );\n+\n \t\t\t\tif ( $sSecLabel == '' ) {\n \t\t\t\t\tbreak;\n \t\t\t\t}\n+\n \t\t\t\t// if sections are identified by number we have a % at the beginning\n \t\t\t\tif ( $sSecLabel[0] == '%' ) {\n \t\t\t\t\t$sSecLabel = '#' . $sSecLabel;\n@@ -1117,29 +1087,36 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t\t$secPieces = [\n \t\t\t\t\t\t''\n \t\t\t\t\t];\n+\n \t\t\t\t\t$this->replaceTagTableRow( $secPieces, $s, $article );\n \t\t\t\t} elseif ( $sSecLabel[0] != '{' ) {\n-\t\t\t\t\t$limpos      = strpos( $sSecLabel, '[' );\n-\t\t\t\t\t$cutLink     = 'default';\n+\t\t\t\t\t$limpos = strpos( $sSecLabel, '[' );\n+\t\t\t\t\t$cutLink = 'default';\n \t\t\t\t\t$skipPattern = [];\n+\n \t\t\t\t\tif ( $limpos > 0 && $sSecLabel[strlen( $sSecLabel ) - 1] == ']' ) {\n \t\t\t\t\t\t// regular expressions which define a skip pattern may precede the text\n \t\t\t\t\t\t$fmtSec = explode( '~', substr( $sSecLabel, $limpos + 1, strlen( $sSecLabel ) - $limpos - 2 ) );\n \t\t\t\t\t\t$sSecLabel = substr( $sSecLabel, 0, $limpos );\n-\t\t\t\t\t\t$cutInfo = explode( \" \", $fmtSec[count( $fmtSec ) - 1], 2 );\n+\t\t\t\t\t\t$cutInfo = explode( ' ', $fmtSec[count( $fmtSec ) - 1], 2 );\n \t\t\t\t\t\t$maxLength = intval( $cutInfo[0] );\n+\n \t\t\t\t\t\tif ( array_key_exists( '1', $cutInfo ) ) {\n \t\t\t\t\t\t\t$cutLink = $cutInfo[1];\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tforeach ( $fmtSec as $skipKey => $skipPat ) {\n \t\t\t\t\t\t\tif ( $skipKey == count( $fmtSec ) - 1 ) {\n \t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t}\n+\n \t\t\t\t\t\t\t$skipPattern[] = $skipPat;\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $maxLength < 0 ) {\n-\t\t\t\t\t\t$maxLength = -1; // without valid limit include whole section\n+\t\t\t\t\t\t// without valid limit include whole section\n+\t\t\t\t\t\t$maxLength = -1;\n \t\t\t\t\t}\n \t\t\t\t}\n \n@@ -1149,30 +1126,38 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t} else {\n \t\t\t\t\t$mustMatch = '';\n \t\t\t\t}\n+\n \t\t\t\tif ( is_array( $this->pageTextMatchNotRegex ) && count( $this->pageTextMatchNotRegex ) > $s && !empty( $this->pageTextMatchNotRegex[$s] ) ) {\n \t\t\t\t\t$mustNotMatch = $this->pageTextMatchNotRegex[$s];\n \t\t\t\t} else {\n \t\t\t\t\t$mustNotMatch = '';\n \t\t\t\t}\n \n \t\t\t\t// if chapters are selected by number, text or regexp we get the heading from LST::includeHeading\n+\t\t\t\t$sectionHeading = [];\n \t\t\t\t$sectionHeading[0] = '';\n+\n \t\t\t\tif ( $sSecLabel == '-' ) {\n \t\t\t\t\t$secPiece[$s] = $secPieces[0];\n \t\t\t\t} elseif ( $sSecLabel[0] == '#' || $sSecLabel[0] == '@' ) {\n \t\t\t\t\t$sectionHeading[0] = substr( $sSecLabel, 1 );\n+\n \t\t\t\t\t// Uses LST::includeHeading() from LabeledSectionTransclusion extension to include headings from the page\n-\t\t\t\t\t$secPieces = LST::includeHeading( $this->parser, $article->mTitle->getPrefixedText(), substr( $sSecLabel, 1 ), '', $sectionHeading, false, $maxLength, $cutLink, $this->getTrimIncluded(), $skipPattern );\n+\t\t\t\t\t$secPieces = LST::includeHeading( $this->parser, $article->mTitle->getPrefixedText(), substr( $sSecLabel, 1 ), '', $sectionHeading, false, $maxLength, $cutLink ?? 'default', $this->getTrimIncluded(), $skipPattern ?? [] );\n+\n \t\t\t\t\tif ( $mustMatch != '' || $mustNotMatch != '' ) {\n \t\t\t\t\t\t$secPiecesTmp = $secPieces;\n-\t\t\t\t\t\t$offset       = 0;\n+\t\t\t\t\t\t$offset = 0;\n+\n \t\t\t\t\t\tforeach ( $secPiecesTmp as $nr => $onePiece ) {\n \t\t\t\t\t\t\tif ( ( $mustMatch != '' && preg_match( $mustMatch, $onePiece ) == false ) || ( $mustNotMatch != '' && preg_match( $mustNotMatch, $onePiece ) != false ) ) {\n \t\t\t\t\t\t\t\tarray_splice( $secPieces, $nr - $offset, 1 );\n+\n \t\t\t\t\t\t\t\t$offset++;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\n \t\t\t\t\t// if maxlen was 0 we suppress all output; note that for matching we used the full text\n \t\t\t\t\tif ( $maxLength == 0 ) {\n \t\t\t\t\t\t$secPieces = [\n@@ -1189,18 +1174,22 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n+\n \t\t\t\t\t$secPiece[$s] = $secPieces[0];\n \t\t\t\t\tfor ( $sp = 1; $sp < count( $secPieces ); $sp++ ) {\n \t\t\t\t\t\tif ( isset( $this->multiSectionSeparators[$s] ) ) {\n-\t\t\t\t\t\t\t$secPiece[$s] .= str_replace( '%SECTION%', $sectionHeading[$sp], $this->replaceTagCount( $this->multiSectionSeparators[$s], $filteredCount ) );\n+\t\t\t\t\t\t\t$secPiece[$s] .= str_replace( '%SECTION%', $sectionHeading[$sp] ?? '', $this->replaceTagCount( $this->multiSectionSeparators[$s], $filteredCount ) );\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$secPiece[$s] .= $secPieces[$sp];\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( $this->getDominantSectionCount() >= 0 && $s == $this->getDominantSectionCount() && count( $secPieces ) > 1 ) {\n \t\t\t\t\t\t$dominantPieces = $secPieces;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( ( $mustMatch != '' || $mustNotMatch != '' ) && count( $secPieces ) <= 0 ) {\n-\t\t\t\t\t\t$matchFailed = true; // NOTHING MATCHED\n+\t\t\t\t\t\t$matchFailed = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \n@@ -1209,28 +1198,34 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t\t// primary syntax {template}suffix\n \t\t\t\t\t$template1 = trim( substr( $sSecLabel, 1, strpos( $sSecLabel, '}' ) - 1 ) );\n \t\t\t\t\t$template2 = trim( str_replace( '}', '', substr( $sSecLabel, 1 ) ) );\n+\n \t\t\t\t\t// alternate syntax: {template|surrogate}\n \t\t\t\t\tif ( $template2 == $template1 && strpos( $template1, '|' ) > 0 ) {\n \t\t\t\t\t\t$template1 = preg_replace( '/\\|.*/', '', $template1 );\n \t\t\t\t\t\t$template2 = preg_replace( '/^.+\\|/', '', $template2 );\n \t\t\t\t\t}\n-\t\t\t\t\t//Why the hell was defaultTemplateSuffix be passed all over the place for just fucking here?  --Alexia\n-\t\t\t\t\t$secPieces    = LST::includeTemplate( $this->parser, $this, $s, $article, $template1, $template2, $template2 . $this->getTemplateSuffix(), $mustMatch, $mustNotMatch, $this->includePageParsed, implode( ', ', $article->mCategoryLinks ) );\n+\n+\t\t\t\t\t// Why was defaultTemplateSuffix passed all over the place for just here?\n+\t\t\t\t\t$secPieces = LST::includeTemplate( $this->parser, $this, $s, $article, $template1, $template2, $template2 . $this->getTemplateSuffix(), $mustMatch, $mustNotMatch, $this->includePageParsed, implode( ', ', $article->mCategoryLinks ) );\n \t\t\t\t\t$secPiece[$s] = implode( isset( $this->multiSectionSeparators[$s] ) ? $this->replaceTagCount( $this->multiSectionSeparators[$s], $filteredCount ) : '', $secPieces );\n+\n \t\t\t\t\tif ( $this->getDominantSectionCount() >= 0 && $s == $this->getDominantSectionCount() && count( $secPieces ) > 1 ) {\n \t\t\t\t\t\t$dominantPieces = $secPieces;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( ( $mustMatch != '' || $mustNotMatch != '' ) && count( $secPieces ) <= 1 && $secPieces[0] == '' ) {\n-\t\t\t\t\t\t$matchFailed = true; // NOTHING MATCHED\n+\t\t\t\t\t\t$matchFailed = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\t// Uses LST::includeSection() from LabeledSectionTransclusion extension to include labeled sections from the page\n-\t\t\t\t\t$secPieces    = LST::includeSection( $this->parser, $article->mTitle->getPrefixedText(), $sSecLabel, '', false, $this->getTrimIncluded(), $skipPattern );\n+\t\t\t\t\t$secPieces = LST::includeSection( $this->parser, $article->mTitle->getPrefixedText(), $sSecLabel, '', false, $this->getTrimIncluded(), $skipPattern ?? [] );\n \t\t\t\t\t$secPiece[$s] = implode( isset( $this->multiSectionSeparators[$s] ) ? $this->replaceTagCount( $this->multiSectionSeparators[$s], $filteredCount ) : '', $secPieces );\n+\n \t\t\t\t\tif ( $this->getDominantSectionCount() >= 0 && $s == $this->getDominantSectionCount() && count( $secPieces ) > 1 ) {\n \t\t\t\t\t\t$dominantPieces = $secPieces;\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( ( $mustMatch != '' && preg_match( $mustMatch, $secPiece[$s] ) == false ) || ( $mustNotMatch != '' && preg_match( $mustNotMatch, $secPiece[$s] ) != false ) ) {\n \t\t\t\t\t\t$matchFailed = true;\n \t\t\t\t\t\tbreak;\n@@ -1246,6 +1241,7 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t} else {\n \t\t\t\t\t$septag[$s * 2] = '';\n \t\t\t\t}\n+\n \t\t\t\tif ( isset( $this->sectionSeparators[$s * 2 + 1] ) ) {\n \t\t\t\t\t$septag[$s * 2 + 1] = str_replace( '%SECTION%', $sectionHeading[0], $this->replaceTagCount( $this->sectionSeparators[$s * 2 + 1], $filteredCount ) );\n \t\t\t\t} else {\n@@ -1257,10 +1253,12 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\tif ( $matchFailed ) {\n \t\t\t\treturn '';\n \t\t\t}\n-\t\t\t$filteredCount = $filteredCount + 1;\n+\n+\t\t\t$filteredCount++;\n \n \t\t\t// assemble parts with separators\n \t\t\t$pageText = '';\n+\n \t\t\tif ( $dominantPieces != false ) {\n \t\t\t\tforeach ( $dominantPieces as $dominantPiece ) {\n \t\t\t\t\tforeach ( $secPiece as $s => $piece ) {\n@@ -1277,17 +1275,17 @@ public function transcludePage( Article $article, &$filteredCount ) {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\treturn $pageText;\n \t}\n \n \t/**\n \t * Wrap seciton pieces with start and end tags.\n \t *\n-\t * @protected\n-\t * @param\tstring\tPiece to be wrapped.\n-\t * @param\tstring\tText to prepend.\n-\t * @param\tstring\tText to append.\n-\t * @return\tstring\tWrapped text.\n+\t * @param string $piece\n+\t * @param string $start\n+\t * @param string $end\n+\t * @return string\n \t */\n \tprotected function joinSectionTagPieces( $piece, $start, $end ) {\n \t\treturn $start . $piece . $end;\n@@ -1296,8 +1294,7 @@ protected function joinSectionTagPieces( $piece, $start, $end ) {\n \t/**\n \t * Get the count of listed items after formatting, transcluding, and such.\n \t *\n-\t * @access\tpublic\n-\t * @return\tinteger\tRow Count\n+\t * @return int\n \t */\n \tpublic function getRowCount() {\n \t\treturn $this->rowCount;"
        },
        {
          "filename": "includes/lister/OrderedList.php",
          "status": "modified",
          "additions": 10,
          "deletions": 19,
          "patch": "@@ -1,20 +1,12 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL OrderedList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n class OrderedList extends UnorderedList {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_ORDERED;\n \n@@ -42,31 +34,30 @@ class OrderedList extends UnorderedList {\n \t/**\n \t * Format the list of articles.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tinteger\tStart position of the array to process.\n-\t * @param\tinteger\tTotal objects from the array to process.\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param int $start\n+\t * @param int $count\n+\t * @return string\n \t */\n \tpublic function formatList( $articles, $start, $count ) {\n \t\t$this->offsetCount = $count;\n+\n \t\treturn parent::formatList( $articles, $start, $count );\n \t}\n \n \t/**\n \t * Return $this->listStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tList Start\n+\t * @return string\n \t */\n \tpublic function getListStart() {\n \t\t// increase start value of ordered lists at multi-column output\n-\t\t//The offset that comes from the URL parameter is zero based, but has to be +1'ed for display.\n+\t\t// The offset that comes from the URL parameter is zero based, but has to be +1'ed for display.\n \t\t$offset = $this->getParameters()->getParameter( 'offset' ) + 1;\n \n \t\tif ( $offset != 0 ) {\n-\t\t\t//@TODO: So this adds the total count of articles to the offset.  I have not found a case where this does not mess up the displayed count.  I am commenting this out for now.\n-\t\t\t//$offset += $this->offsetCount;\n+\t\t\t// @TODO: So this adds the total count of articles to the offset. I have not found a case where this does not mess up the displayed count. I am commenting this out for now.\n+\t\t\t// $offset += $this->offsetCount;\n \t\t}\n \n \t\treturn sprintf( $this->listStart, $this->listAttributes . ' start=\"' . $offset . '\"' );"
        },
        {
          "filename": "includes/lister/SubPageList.php",
          "status": "modified",
          "additions": 21,
          "deletions": 22,
          "patch": "@@ -1,20 +1,12 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL SubPageList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n class SubPageList extends UnorderedList {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_UNORDERED;\n \n@@ -49,17 +41,18 @@ class SubPageList extends UnorderedList {\n \t/**\n \t * Format a list of articles into a singular list.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tinteger\tStart position of the array to process.\n-\t * @param\tinteger\tTotal objects from the array to process.\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param int $start\n+\t * @param int $count\n+\t * @return string\n \t */\n \tpublic function formatList( $articles, $start, $count ) {\n \t\t$filteredCount = 0;\n \t\t$items = [];\n+\n \t\tfor ( $i = $start; $i < $start + $count; $i++ ) {\n \t\t\t$article = $articles[$i];\n+\n \t\t\tif ( empty( $article ) || empty( $article->mTitle ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n@@ -84,22 +77,26 @@ public function formatList( $articles, $start, $count ) {\n \t/**\n \t * Nest items down to the proper level.\n \t *\n-\t * @private\n-\t * @param\tarray\tPart levels to nest down to.\n-\t * @param\tarray\tItems holder to nest the item into.\n-\t * @param\tstring\tFormatted Item\n-\t * @return\tarray\tNest Items\n+\t * @param array &$parts\n+\t * @param array $items\n+\t * @param string $item\n+\t * @return array\n \t */\n \tprivate function nestItem( &$parts, $items, $item ) {\n \t\t$firstPart = reset( $parts );\n+\n \t\tif ( count( $parts ) > 1 ) {\n \t\t\tarray_shift( $parts );\n+\n \t\t\tif ( !isset( $items[$firstPart] ) ) {\n \t\t\t\t$items[$firstPart] = [];\n \t\t\t}\n+\n \t\t\t$items[$firstPart] = $this->nestItem( $parts, $items[$firstPart], $item );\n+\n \t\t\treturn $items;\n \t\t}\n+\n \t\t$items[$firstPart][] = $item;\n \n \t\treturn $items;\n@@ -108,21 +105,23 @@ private function nestItem( &$parts, $items, $item ) {\n \t/**\n \t * Join together items after being processed by formatItem().\n \t *\n-\t * @protected\n-\t * @param\tarray\tItems as formatted by formatItem().\n-\t * @return\tstring\tImploded items.\n+\t * @param array $items\n+\t * @return string\n \t */\n \tprotected function implodeItems( $items ) {\n \t\t$list = '';\n+\n \t\tforeach ( $items as $key => $item ) {\n \t\t\tif ( is_string( $item ) ) {\n \t\t\t\t$list .= $item;\n \t\t\t\tcontinue;\n \t\t\t}\n+\n \t\t\tif ( is_array( $item ) ) {\n \t\t\t\t$list .= $this->getItemStart() . $key . $this->getListStart() . $this->implodeItems( $item ) . $this->listEnd . $this->getItemEnd();\n \t\t\t}\n \t\t}\n+\n \t\treturn $list;\n \t}\n }"
        },
        {
          "filename": "includes/lister/UnorderedList.php",
          "status": "modified",
          "additions": 1,
          "deletions": 9,
          "patch": "@@ -1,20 +1,12 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL UnorderedList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n class UnorderedList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_UNORDERED;\n "
        },
        {
          "filename": "includes/lister/UserFormatList.php",
          "status": "modified",
          "additions": 55,
          "deletions": 54,
          "patch": "@@ -1,22 +1,16 @@\n <?php\n-/**\n- * DynamicPageList3\n- * DPL UserFormatList Class\n- *\n- * @license\t\tGPL-2.0-or-later\n- * @package\t\tDynamicPageList3\n- *\n- */\n \n namespace DPL\\Lister;\n \n use DPL\\Article;\n+use DPL\\Parameters;\n+use Parser;\n \n class UserFormatList extends Lister {\n \t/**\n \t * Listing style for this class.\n \t *\n-\t * @var constant\n+\t * @var int\n \t */\n \tpublic $style = parent::LIST_USERFORMAT;\n \n@@ -28,26 +22,27 @@ class UserFormatList extends Lister {\n \tprotected $textSeparator = '';\n \n \t/**\n-\t * Main Constructor\n-\t *\n-\t * @access\tpublic\n-\t * @param\tobject\t\\DPL\\Parameters\n-\t * @param\tobject\tMediaWiki \\Parser\n-\t * @return\tvoid\n+\t * @param Parameters $parameters\n+\t * @param Parser $parser\n \t */\n-\tpublic function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n+\tpublic function __construct( Parameters $parameters, Parser $parser ) {\n \t\tparent::__construct( $parameters, $parser );\n+\n \t\t$this->textSeparator = $parameters->getParameter( 'inlinetext' );\n \t\t$listSeparators = $parameters->getParameter( 'listseparators' );\n+\n \t\tif ( isset( $listSeparators[0] ) ) {\n \t\t\t$this->listStart = $listSeparators[0];\n \t\t}\n+\n \t\tif ( isset( $listSeparators[1] ) ) {\n \t\t\t$this->itemStart = $listSeparators[1];\n \t\t}\n+\n \t\tif ( isset( $listSeparators[2] ) ) {\n \t\t\t$this->itemEnd = $listSeparators[2];\n \t\t}\n+\n \t\tif ( isset( $listSeparators[3] ) ) {\n \t\t\t$this->listEnd = $listSeparators[3];\n \t\t}\n@@ -56,17 +51,18 @@ public function __construct( \\DPL\\Parameters $parameters, \\Parser $parser ) {\n \t/**\n \t * Format the list of articles.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tList of \\DPL\\Article\n-\t * @param\tinteger\tStart position of the array to process.\n-\t * @param\tinteger\tTotal objects from the array to process.\n-\t * @return\tstring\tFormatted list.\n+\t * @param array $articles\n+\t * @param int $start\n+\t * @param int $count\n+\t * @return string\n \t */\n \tpublic function formatList( $articles, $start, $count ) {\n \t\t$filteredCount = 0;\n \t\t$items = [];\n+\n \t\tfor ( $i = $start; $i < $start + $count; $i++ ) {\n \t\t\t$article = $articles[$i];\n+\n \t\t\tif ( empty( $article ) || empty( $article->mTitle ) ) {\n \t\t\t\tcontinue;\n \t\t\t}\n@@ -86,39 +82,50 @@ public function formatList( $articles, $start, $count ) {\n \t\t$this->rowCount = $filteredCount;\n \n \t\t// if requested we sort the table by the contents of a given column\n-\t\t$sortColumn\t= $this->getTableSortColumn();\n+\t\t$sortColumn = $this->getTableSortColumn();\n \t\tif ( $sortColumn != 0 ) {\n \t\t\t$rowsKey = [];\n+\n \t\t\tforeach ( $items as $index => $item ) {\n \t\t\t\t$item = trim( $item );\n+\n \t\t\t\tif ( strpos( $item, '|-' ) === 0 ) {\n \t\t\t\t\t$item = explode( '|-', $item, 2 );\n+\n \t\t\t\t\tif ( count( $item ) == 2 ) {\n \t\t\t\t\t\t$item = $item[1];\n \t\t\t\t\t} else {\n \t\t\t\t\t\t$rowsKey[$index] = $item;\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t}\n+\n \t\t\t\tif ( strlen( $item ) > 0 ) {\n \t\t\t\t\t$word = explode( \"\\n|\", $item );\n+\n \t\t\t\t\tif ( isset( $word[0] ) && empty( $word[0] ) ) {\n \t\t\t\t\t\tarray_shift( $word );\n \t\t\t\t\t}\n+\n \t\t\t\t\tif ( isset( $word[abs( $sortColumn ) - 1] ) ) {\n \t\t\t\t\t\t$test = trim( $word[abs( $sortColumn ) - 1] );\n+\n \t\t\t\t\t\tif ( strpos( $test, '|' ) > 0 ) {\n \t\t\t\t\t\t\t$test = trim( explode( '|', $test )[1] );\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\t$rowsKey[$index] = $test;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n-\t\t\t$this->sort($rowsKey, $sortColumn);\n+\n+\t\t\t$this->sort( $rowsKey, $sortColumn );\n \t\t\t$newItems = [];\n+\n \t\t\tforeach ( $rowsKey as $index => $val ) {\n \t\t\t\t$newItems[] = $items[$index];\n \t\t\t}\n+\n \t\t\t$items = $newItems;\n \t\t}\n \n@@ -128,53 +135,50 @@ public function formatList( $articles, $start, $count ) {\n \t/**\n \t * Sort the data of a table column in place. Preserves array keys.\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tTable column data\n-\t * @param\tint\t\tIndex of the column to sort\n-\t * @return\tvoid\n+\t * @param array\t&$rowsKey\n+\t * @param int $sortColumn\n \t */\n-\tprotected function sort(&$rowsKey, $sortColumn) {\n+\tprotected function sort( &$rowsKey, $sortColumn ) {\n \t\t$sortMethod = $this->getTableSortMethod();\n-\t\n-\t\tif ($sortColumn < 0) {\n-\t\t\tswitch ($sortMethod) {\n+\n+\t\tif ( $sortColumn < 0 ) {\n+\t\t\tswitch ( $sortMethod ) {\n \t\t\t\tcase 'natural':\n \t\t\t\t\t// Reverse natsort()\n-                    uasort($rowsKey, function($first, $second) {\n-                    \treturn strnatcmp($second, $first);\n-\t\t\t\t\t});\n+\t\t\t\t\tuasort( $rowsKey, static function ( $first, $second ) {\n+\t\t\t\t\t\treturn strnatcmp( $second, $first );\n+\t\t\t\t\t} );\n \t\t\t\t\tbreak;\n \t\t\t\tcase 'standard':\n \t\t\t\tdefault:\n-\t\t\t\t\tarsort($rowsKey);\n+\t\t\t\t\tarsort( $rowsKey );\n \t\t\t\t\tbreak;\n \t\t\t}\n \t\t} else {\n-\t\t\tswitch ($sortMethod) {\n+\t\t\tswitch ( $sortMethod ) {\n \t\t\t\tcase 'natural':\n-\t\t\t\tnatsort($rowsKey);\n-\t\t\t\tbreak;\n-\t\t\tcase 'standard':\n-\t\t\tdefault:\n-\t\t\t\tasort($rowsKey);\n-\t\t\t\tbreak;\n+\t\t\t\t\tnatsort( $rowsKey );\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 'standard':\n+\t\t\t\tdefault:\n+\t\t\t\t\tasort( $rowsKey );\n+\t\t\t\t\tbreak;\n \t\t\t}\n \t\t}\n \t}\n \n \t/**\n \t * Format a single item.\n \t *\n-\t * @access\tpublic\n-\t * @param\tobject\tDPL\\Article\n-\t * @param\tstring\t[Optional] Page text to include.\n-\t * @return\tstring\tItem HTML\n+\t * @param Article $article\n+\t * @param string|null $pageText\n+\t * @return string\n \t */\n \tpublic function formatItem( Article $article, $pageText = null ) {\n \t\t$item = '';\n \n \t\tif ( $pageText !== null ) {\n-\t\t\t//Include parsed/processed wiki markup content after each item before the closing tag.\n+\t\t\t// Include parsed/processed wiki markup content after each item before the closing tag.\n \t\t\t$item .= $pageText;\n \t\t}\n \n@@ -188,8 +192,7 @@ public function formatItem( Article $article, $pageText = null ) {\n \t/**\n \t * Return $this->itemStart with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem Start\n+\t * @return string\n \t */\n \tpublic function getItemStart() {\n \t\treturn $this->replaceTagCount( $this->itemStart, $this->getRowCount() );\n@@ -198,8 +201,7 @@ public function getItemStart() {\n \t/**\n \t * Return $this->itemEnd with attributes replaced.\n \t *\n-\t * @access\tpublic\n-\t * @return\tstring\tItem End\n+\t * @return string\n \t */\n \tpublic function getItemEnd() {\n \t\treturn $this->replaceTagCount( $this->itemEnd, $this->getRowCount() );\n@@ -208,9 +210,8 @@ public function getItemEnd() {\n \t/**\n \t * Join together items after being processed by formatItem().\n \t *\n-\t * @access\tpublic\n-\t * @param\tarray\tItems as formatted by formatItem().\n-\t * @return\tstring\tImploded items.\n+\t * @param array $items\n+\t * @return string\n \t */\n \tprotected function implodeItems( $items ) {\n \t\treturn implode( $this->textSeparator, $items );"
        },
        {
          "filename": "maintenance/createTemplate.php",
          "status": "modified",
          "additions": 8,
          "deletions": 12,
          "patch": "@@ -1,21 +1,13 @@\n <?php\n-/**\n- * DynamicPageList3\n- * CreateTemplate\n- *\n- * @license GPL-2.0-or-later\n- * @package DynamicPageList3\n- *\n- */\n \n namespace DPL\\Maintenance;\n \n use CommentStoreComment;\n use LoggedUpdateMaintenance;\n+use MediaWiki\\MediaWikiServices;\n use MediaWiki\\Revision\\SlotRecord;\n use Title;\n use User;\n-use WikiPage;\n \n $IP = getenv( 'MW_INSTALL_PATH' );\n if ( $IP === false ) {\n@@ -31,6 +23,7 @@ class CreateTemplate extends LoggedUpdateMaintenance {\n \n \tpublic function __construct() {\n \t\tparent::__construct();\n+\n \t\t$this->addDescription( 'Handle inserting DPL\\'s necessary template for content inclusion.' );\n \t}\n \n@@ -62,11 +55,14 @@ protected function doDBUpdates() {\n \n \t\t// Make sure template does not already exist\n \t\tif ( !$title->exists() ) {\n-\t\t\t$wikipage = WikiPage::factory( $title );\n-\t\t\t$updater = $wikipage->newPageUpdater( User::newSystemUser( 'DynamicPageList3 extension' ) );\n-\t\t\t$content = $wikipage->getContentHandler()->makeContent( '<noinclude>This page was automatically created.  It serves as an anchor page for all \\'\\'\\'[[Special:WhatLinksHere/Template:Extension_DPL|invocations]]\\'\\'\\' of [https://www.mediawiki.org/wiki/Special:MyLanguage/Extension:DynamicPageList3 Extension:DynamicPageList3].</noinclude>', $title );\n+\t\t\t$wikiPageFactory = MediaWikiServices::getInstance()->getWikiPageFactory();\n+\n+\t\t\t$page = $wikiPageFactory->newFromTitle( $title );\n+\t\t\t$updater = $page->newPageUpdater( User::newSystemUser( 'DynamicPageList3 extension' ) );\n+\t\t\t$content = $page->getContentHandler()->makeContent( '<noinclude>This page was automatically created. It serves as an anchor page for all \\'\\'\\'[[Special:WhatLinksHere/Template:Extension_DPL|invocations]]\\'\\'\\' of [https://www.mediawiki.org/wiki/Special:MyLanguage/Extension:DynamicPageList3 Extension:DynamicPageList3].</noinclude>', $title );\n \t\t\t$updater->setContent( SlotRecord::MAIN, $content );\n \t\t\t$comment = CommentStoreComment::newUnsavedComment( 'Autogenerated DPL\\'s necessary template for content inclusion' );\n+\n \t\t\t$updater->saveRevision(\n \t\t\t\t$comment,\n \t\t\t\tEDIT_NEW | EDIT_FORCE_BOT"
        },
        {
          "filename": "tests/phpunit/DPLIntegrationTestCase.php",
          "status": "added",
          "additions": 158,
          "deletions": 0,
          "patch": "@@ -0,0 +1,158 @@\n+<?php\n+\n+namespace DPL;\n+\n+use DOMDocument;\n+use DOMXPath;\n+use ImportStreamSource;\n+use MediaWiki\\Auth\\AuthManager;\n+use MediaWiki\\MediaWikiServices;\n+use MediaWiki\\User\\UserFactory;\n+use MediaWikiTestCase;\n+use ParserOptions;\n+use RequestContext;\n+use Title;\n+use User;\n+use WikiImporter;\n+\n+abstract class DPLIntegrationTestCase extends MediaWikiTestCase {\n+\t/**\n+\t * Guard condition to ensure we only import seed data once per test suite run.\n+\t * @var bool\n+\t */\n+\tprivate static $wasSeedDataImported = false;\n+\n+\tpublic function addDBData() {\n+\t\tif ( self::$wasSeedDataImported ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t$seedDataPath = __DIR__ . '/../seed-data.xml';\n+\t\t$this->seedTestUsers( $seedDataPath );\n+\t\t$importer = $this->getWikiImporter( $seedDataPath );\n+\t\t$importer->disableStatisticsUpdate();\n+\t\t// Ensure we actually create local user accounts in the DB\n+\t\t$importer->setUsernamePrefix( '', true );\n+\t\t$importer->doImport();\n+\n+\t\tself::$wasSeedDataImported = true;\n+\t}\n+\n+\t/**\n+\t * Import test accounts from seed data so that DPL queries can refer to them.\n+\t * @param string $seedDataPath - path to seed data to be loaded\n+\t */\n+\tprivate function seedTestUsers( string $seedDataPath ): void {\n+\t\t$doc = new DOMDocument();\n+\t\t$doc->preserveWhiteSpace = false;\n+\t\t$doc->load( $seedDataPath );\n+\n+\t\t$xpath = new DOMXPath( $doc );\n+\t\t$xpath->registerNamespace( 'mw', 'http://www.mediawiki.org/xml/export-0.11/' );\n+\n+\t\t$userNodes = $xpath->query( '//mw:mediawiki/mw:page/mw:revision/mw:contributor/mw:username' );\n+\t\t$usersByName = [];\n+\n+\t\t$authManager = $this->getAuthManager();\n+\n+\t\tforeach ( $userNodes as $node ) {\n+\t\t\t$userName = $node->nodeValue;\n+\n+\t\t\t// Already created\n+\t\t\tif ( isset( $usersByName[$userName] ) ) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\n+\t\t\t$usersByName[$userName] = true;\n+\t\t\t$user = $this->newUserFromName( $userName );\n+\n+\t\t\tif ( !$user || $user->idForName() !== 0 ) {\n+\t\t\t\treturn; // sanity\n+\t\t\t}\n+\n+\t\t\t$status = $authManager->autoCreateUser(\n+\t\t\t\t$user,\n+\t\t\t\t$authManager::AUTOCREATE_SOURCE_MAINT,\n+\t\t\t\tfalse\n+\t\t\t);\n+\n+\t\t\tif ( !$status->isOK() ) {\n+\t\t\t\treturn;\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate function getWikiImporter( string $seedDataPath ): WikiImporter {\n+\t\t$seedDataFile = fopen( $seedDataPath, 'rt' );\n+\t\t$source = new ImportStreamSource( $seedDataFile );\n+\t\t$services = MediaWikiServices::getInstance();\n+\n+\t\tif ( $services->hasService( 'WikiImporterFactory' ) ) {\n+\t\t\treturn $services->getWikiImporterFactory()->getWikiImporter( $source );\n+\t\t}\n+\n+\t\t// MW 1.36\n+\t\treturn new WikiImporter( $source, $services->getMainConfig() );\n+\t}\n+\n+\tprivate function getAuthManager(): AuthManager {\n+\t\t$services = MediaWikiServices::getInstance();\n+\n+\t\treturn $services->getAuthManager();\n+\t}\n+\n+\tprivate function newUserFromName( string $name ): ?User {\n+\t\t$services = MediaWikiServices::getInstance();\n+\n+\t\treturn $services->getUserFactory()->newFromName( $name, UserFactory::RIGOR_CREATABLE );\n+\t}\n+\n+\t/**\n+\t * Convenience function to return the list of page titles matching a DPL query\n+\t * @param array $params - DPL invocation parameters\n+\t * @return string[]\n+\t */\n+\tprotected function getDPLQueryResults( array $params, string $format = '%PAGE%' ): array {\n+\t\t$params += [\n+\t\t\t// Use a custom format for executing the query to allow easily extracting results\n+\t\t\t'format' => \"<div id=\\\"dpl-test-query\\\">,$format,|,</div>\"\n+\t\t];\n+\n+\t\t$html = $this->runDPLQuery( $params );\n+\t\t$doc = new DOMDocument();\n+\t\t$doc->loadHTML( $html );\n+\t\t$queryResults = $doc->getElementById( 'dpl-test-query' );\n+\t\tif ( $queryResults ) {\n+\t\t\treturn explode( \"|\", rtrim( $queryResults->textContent, \"|\" ) );\n+\t\t}\n+\n+\t\treturn [];\n+\t}\n+\n+\t/**\n+\t * Build and execute a DPL invocation using the given parameters and return the HTML output.\n+\t * @param array $params\n+\t * @return string\n+\t */\n+\tprotected function runDPLQuery( array $params ): string {\n+\t\t$invocation = '<dpl>';\n+\n+\t\tforeach ( $params as $paramName => $values ) {\n+\t\t\t$values = (array)$values; // multi-value parameters\n+\t\t\tforeach ( $values as $value ) {\n+\t\t\t\t$invocation .= \"$paramName=$value\\n\";\n+\t\t\t}\n+\t\t}\n+\n+\t\t$invocation .= '</dpl>';\n+\n+\t\t$parser = MediaWikiServices::getInstance()->getParser();\n+\t\t$title = Title::makeTitle( NS_MAIN, 'DPLQueryTest' );\n+\t\t$parserOptions = ParserOptions::newCanonical(\n+\t\t\tRequestContext::getMain()\n+\t\t);\n+\t\t$parserOutput = $parser->parse( $invocation, $title, $parserOptions );\n+\n+\t\treturn $parserOutput->getText();\n+\t}\n+}"
        },
        {
          "filename": "tests/phpunit/DPLQueryIntegrationTest.php",
          "status": "added",
          "additions": 350,
          "deletions": 0,
          "patch": "@@ -0,0 +1,350 @@\n+<?php\n+\n+namespace DPL;\n+\n+/**\n+ * @group DynamicPageList3\n+ * @group Database\n+ */\n+class DPLQueryIntegrationTest extends DPLIntegrationTestCase {\n+\n+\tpublic function testFindPagesInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 2', 'DPLTestArticle 3', 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [ 'category' => 'DPLTestCategory' ] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryWithOrderAndLimit(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleMultipleCategories', 'DPLTestArticle 3', ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'ordermethod' => 'sortkey',\n+\t\t\t\t'order' => 'descending',\n+\t\t\t\t'count' => '2'\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesNotInCategory(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'namespace' => '', // NS_MAIN\n+\t\t\t'notcategory' => 'DPLTestCategory'\n+\t\t] );\n+\n+\t\t$this->assertContains( 'DPLTestArticleNoCategory', $results );\n+\t\tforeach ( [ 'DPLTestArticle 1', 'DPLTestArticle 2', 'DPLTestArticle 3' ] as $pageInCat ) {\n+\t\t\t$this->assertNotContains( $pageInCat, $results );\n+\t\t}\n+\t}\n+\n+\tpublic function testFindPagesNotInCategoryByPrefix(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'namespace' => '', // NS_MAIN\n+\t\t\t'titlematch' => 'DPLTest%',\n+\t\t\t'notcategory' => 'DPLTestCategory'\n+\t\t] );\n+\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleNoCategory', 'DPLTestArticleOtherCategoryWithInfobox' ],\n+\t\t\t$results,\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesByPrefix(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'namespace' => '', // NS_MAIN\n+\t\t\t'titlematch' => 'DPLTest%',\n+\t\t] );\n+\n+\t\t$this->assertNotEmpty( $results );\n+\n+\t\tforeach ( $results as $result ) {\n+\t\t\t$this->assertStringStartsWith( 'DPLTest', $result );\n+\t\t}\n+\t}\n+\n+\tpublic function testFindPagesInCategoryIntersection(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => [ 'DPLTestCategory', 'DPLTestOtherCategory' ]\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesUsingTemplate(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticleOtherCategoryWithInfobox' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'uses' => 'Template:DPLInfobox'\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryUsingTemplate(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleOtherCategoryWithInfobox' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestOtherCategory',\n+\t\t\t\t'uses' => 'Template:DPLInfobox'\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesNotInCategoryUsingTemplate(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'notcategory' => 'DPLTestOtherCategory',\n+\t\t\t\t'uses' => 'Template:DPLInfobox'\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindTemplatesUsedByPage(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'Template:DPLInfobox' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'usedby' => 'DPLTestArticleOtherCategoryWithInfobox'\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesByTitleRegexpInNamespace(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 2' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'namespace' => '', // NS_MAIN\n+\t\t\t\t'titleregexp' => 'DPLTestArticle [12]'\n+\t\t\t] )\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesBeforeTitleInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 2' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'titlelt' => 'DPLTestArticle 3',\n+\t\t\t\t'count' => '2'\n+\t\t\t] )\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryWithMaxRevisionLimit(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 2', 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'maxrevisions' => '1',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryWithMinRevisionLimit(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 3' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'minrevisions' => '2',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesByCategoryMin(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'categoriesminmax' => '2',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesByCategoryMinMax(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 2', 'DPLTestArticle 3' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'categoriesminmax' => '1,1',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesNotModifiedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 2', 'DPLTestArticle 3', 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'notmodifiedby' => 'DPLTestUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesCreatedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleOtherCategoryWithInfobox' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestOtherCategory',\n+\t\t\t\t'createdby' => 'DPLTestSystemUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesLastModifiedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'lastmodifiedby' => 'DPLTestUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesNotLastModifiedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 2', 'DPLTestArticle 3', 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'notlastmodifiedby' => 'DPLTestUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesEverModifiedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticle 1', 'DPLTestArticle 2', 'DPLTestArticle 3', 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t\t'modifiedby' => 'DPLTestAdmin',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesNotCreatedByUserInCategory(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLTestArticleMultipleCategories' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'category' => 'DPLTestOtherCategory',\n+\t\t\t\t'notcreatedby' => 'DPLTestSystemUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesViaUserFilterCombinations(): void {\n+\t\t$this->assertArrayEquals(\n+\t\t\t[ 'DPLUncategorizedPage' ],\n+\t\t\t$this->getDPLQueryResults( [\n+\t\t\t\t'modifiedby' => 'DPLTestUser',\n+\t\t\t\t'notcreatedby' => 'DPLTestAdmin',\n+\t\t\t\t'notlastmodifiedby' => 'DPLTestUser',\n+\t\t\t] ),\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryOrderedByLastEdit(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t'ordermethod' => 'lastedit',\n+\t\t\t'order' => 'descending',\n+\t\t] );\n+\n+\t\t$this->assertArrayEquals(\n+\t\t\t[\n+\t\t\t\t'DPLTestArticle 3',\n+\t\t\t\t'DPLTestArticle 2',\n+\t\t\t\t'DPLTestArticleMultipleCategories',\n+\t\t\t\t'DPLTestArticle 1',\n+\t\t\t],\n+\t\t\t$results,\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testFindPagesInCategoryOrderedByFirstEdit(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t'ordermethod' => 'firstedit',\n+\t\t\t'order' => 'descending',\n+\t\t] );\n+\n+\t\t$this->assertArrayEquals(\n+\t\t\t[\n+\t\t\t\t'DPLTestArticle 2',\n+\t\t\t\t'DPLTestArticleMultipleCategories',\n+\t\t\t\t'DPLTestArticle 1',\n+\t\t\t\t'DPLTestArticle 3',\n+\t\t\t],\n+\t\t\t$results,\n+\t\t\ttrue\n+\t\t);\n+\t}\n+\n+\tpublic function testOrderByLastEditAndUser(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t'ordermethod' => 'lastedit,user',\n+\t\t\t'order' => 'descending',\n+\t\t\t'adduser' => 'true',\n+\t\t\t'createdby' => 'DPLTestAdmin'\n+\t\t], '%PAGE% %USER%' );\n+\n+\t\t$this->assertEquals( [\n+\t\t\t'DPLTestArticle 3 DPLTestAdmin',\n+\t\t\t'DPLTestArticle 2 DPLTestAdmin',\n+\t\t\t'DPLTestArticleMultipleCategories DPLTestAdmin',\n+\t\t\t'DPLTestArticle 1 DPLTestUser',\n+\t\t], $results );\n+\t}\n+\n+\tpublic function testGetPageAuthors(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t'addauthor' => 'true',\n+\t\t\t'order' => 'ascending',\n+\t\t\t'ordermethod' => 'title'\n+\t\t], '%PAGE% %USER%' );\n+\n+\t\t$this->assertEquals( [\n+\t\t\t'DPLTestArticle 1 DPLTestAdmin',\n+\t\t\t'DPLTestArticle 2 DPLTestAdmin',\n+\t\t\t'DPLTestArticle 3 DPLTestAdmin',\n+\t\t\t'DPLTestArticleMultipleCategories DPLTestAdmin',\n+\t\t], $results );\n+\t}\n+\n+\tpublic function testGetLastEditorsByPage(): void {\n+\t\t$results = $this->getDPLQueryResults( [\n+\t\t\t'category' => 'DPLTestCategory',\n+\t\t\t'addlasteditor' => 'true'\n+\t\t], '%PAGE% %USER%' );\n+\n+\t\t$this->assertEquals( [\n+\t\t\t'DPLTestArticle 1 DPLTestUser',\n+\t\t\t'DPLTestArticle 2 DPLTestAdmin',\n+\t\t\t'DPLTestArticle 3 DPLTestAdmin',\n+\t\t\t'DPLTestArticleMultipleCategories DPLTestAdmin',\n+\t\t], $results );\n+\t}\n+}"
        },
        {
          "filename": "tests/seed-data.xml",
          "status": "added",
          "additions": 267,
          "deletions": 0,
          "patch": "@@ -0,0 +1,267 @@\n+<mediawiki xmlns=\"http://www.mediawiki.org/xml/export-0.11/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.mediawiki.org/xml/export-0.11/ http://www.mediawiki.org/xml/export-0.11.xsd\" version=\"0.11\" xml:lang=\"en\">\n+\t<siteinfo>\n+\t\t<sitename>MediaWiki</sitename>\n+\t\t<dbname>mwdev</dbname>\n+\t\t<base>http://localhost:8080/wiki/Main_Page</base>\n+\t\t<generator>MediaWiki 1.37.0-alpha</generator>\n+\t\t<case>first-letter</case>\n+\t\t<namespaces>\n+\t\t\t<namespace key=\"-2\" case=\"first-letter\">Media</namespace>\n+\t\t\t<namespace key=\"-1\" case=\"first-letter\">Special</namespace>\n+\t\t\t<namespace key=\"0\" case=\"first-letter\" />\n+\t\t\t<namespace key=\"1\" case=\"first-letter\">Talk</namespace>\n+\t\t\t<namespace key=\"2\" case=\"first-letter\">User</namespace>\n+\t\t\t<namespace key=\"3\" case=\"first-letter\">User talk</namespace>\n+\t\t\t<namespace key=\"4\" case=\"first-letter\">Project</namespace>\n+\t\t\t<namespace key=\"5\" case=\"first-letter\">Project talk</namespace>\n+\t\t\t<namespace key=\"6\" case=\"first-letter\">File</namespace>\n+\t\t\t<namespace key=\"7\" case=\"first-letter\">File talk</namespace>\n+\t\t\t<namespace key=\"8\" case=\"first-letter\">MediaWiki</namespace>\n+\t\t\t<namespace key=\"9\" case=\"first-letter\">MediaWiki talk</namespace>\n+\t\t\t<namespace key=\"10\" case=\"first-letter\">Template</namespace>\n+\t\t\t<namespace key=\"11\" case=\"first-letter\">Template talk</namespace>\n+\t\t\t<namespace key=\"12\" case=\"first-letter\">Help</namespace>\n+\t\t\t<namespace key=\"13\" case=\"first-letter\">Help talk</namespace>\n+\t\t\t<namespace key=\"14\" case=\"first-letter\">Category</namespace>\n+\t\t\t<namespace key=\"15\" case=\"first-letter\">Category talk</namespace>\n+\t\t</namespaces>\n+\t</siteinfo>\n+\t<page>\n+\t\t<title>Template:DPLInfobox</title>\n+\t\t<ns>10</ns>\n+\t\t<id>13</id>\n+\t\t<revision>\n+\t\t\t<id>13</id>\n+\t\t\t<timestamp>2017-09-07T10:45:24Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestSystemUser</username>\n+\t\t\t</contributor>\n+\t\t\t<comment>Test template</comment>\n+\t\t\t<origin>13</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\" bytes=\"13\">Test template</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>Category:DPLTestCategory</title>\n+\t\t<ns>14</ns>\n+\t\t<id>14</id>\n+\t\t<revision>\n+\t\t\t<id>17</id>\n+\t\t\t<timestamp>2021-09-02T14:42:11Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Created page with \"DPL Test category\"</comment>\n+\t\t\t<origin>17</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"17\" sha1=\"7fvwcsar4s6wpu5l22vedd9yaek5js6\" xml:space=\"preserve\">DPL Test category</text>\n+\t\t\t<sha1>7fvwcsar4s6wpu5l22vedd9yaek5js6</sha1>\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticle 1</title>\n+\t\t<ns>0</ns>\n+\t\t<id>15</id>\n+\t\t<revision>\n+\t\t\t<id>18</id>\n+\t\t\t<timestamp>2021-09-02T14:43:05Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Initial page version</comment>\n+\t\t\t<origin>18</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\">Donec non dolor ipsum.\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t\t<revision>\n+\t\t\t<id>19</id>\n+\t\t\t<parentid>18</parentid>\n+\t\t\t<timestamp>2021-09-02T14:43:16Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestUser</username>\n+\t\t\t\t<id>2</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Edited version</comment>\n+\t\t\t<origin>19</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\">Sed mollis dignissim [[DPLTestArticle 2]] purus, auctor faucibus [[DPLTestArticleNoCategory]] purus tincidunt at. {{DPLInfobox}}\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticle 2</title>\n+\t\t<ns>0</ns>\n+\t\t<id>16</id>\n+\t\t<revision>\n+\t\t\t<id>20</id>\n+\t\t\t<timestamp>2021-09-02T14:44:02Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Initial page version</comment>\n+\t\t\t<origin>20</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"72\" sha1=\"gykofop7mtvar8ajsyppok80uy6fiti\" xml:space=\"preserve\">Sed dapibus enim ac quam pharetra suscipit.\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1>gykofop7mtvar8ajsyppok80uy6fiti</sha1>\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticle 3</title>\n+\t\t<ns>0</ns>\n+\t\t<id>17</id>\n+\t\t<revision>\n+\t\t\t<id>21</id>\n+\t\t\t<timestamp>2019-08-12T00:11:23Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Initial page version</comment>\n+\t\t\t<origin>21</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"95\" sha1=\"og8hxtaxjfid8cinjh7nq5g2zxv0cdj\" xml:space=\"preserve\">Vestibulum a ante aliquet, vestibulum risus vitae, imperdiet sem.\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1>og8hxtaxjfid8cinjh7nq5g2zxv0cdj</sha1>\n+\t\t</revision>\n+\t\t<revision>\n+\t\t\t<id>22</id>\n+\t\t\t<parentid>21</parentid>\n+\t\t\t<timestamp>2021-09-02T14:44:47Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Edited version</comment>\n+\t\t\t<origin>22</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"73\" sha1=\"9caafrpllg2n9zyk52h0ov4bajyxjpj\" xml:space=\"preserve\"> Duis vel dapibus tellus, eu vehicula metus.\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1>9caafrpllg2n9zyk52h0ov4bajyxjpj</sha1>\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticleNoCategory</title>\n+\t\t<ns>0</ns>\n+\t\t<id>18</id>\n+\t\t<revision>\n+\t\t\t<id>23</id>\n+\t\t\t<timestamp>2021-09-03T00:12:20Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestUser</username>\n+\t\t\t\t<id>2</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Create test page without category</comment>\n+\t\t\t<origin>23</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"40\" xml:space=\"preserve\">Urbem praeclaram statui, mea moenia vidi</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>Category:DPLTestOtherCategory</title>\n+\t\t<ns>14</ns>\n+\t\t<id>24</id>\n+\t\t<revision>\n+\t\t\t<id>24</id>\n+\t\t\t<timestamp>2021-09-02T14:42:11Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Created page with \"DPL Test category\"</comment>\n+\t\t\t<origin>24</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"18\" xml:space=\"preserve\">DPL other category</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticleMultipleCategories</title>\n+\t\t<ns>0</ns>\n+\t\t<id>25</id>\n+\t\t<revision>\n+\t\t\t<id>25</id>\n+\t\t\t<timestamp>2021-09-02T14:44:01Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestAdmin</username>\n+\t\t\t\t<id>1</id>\n+\t\t\t</contributor>\n+\t\t\t<comment>Page with multiple categories</comment>\n+\t\t\t<origin>25</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text bytes=\"117\" xml:space=\"preserve\">Quo usque tandem abutere, Catilina, patientia nostra?!\n+[[Category:DPLTestOtherCategory]]\n+[[Category:DPLTestCategory]]</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLTestArticleOtherCategoryWithInfobox</title>\n+\t\t<ns>0</ns>\n+\t\t<id>26</id>\n+\t\t<revision>\n+\t\t\t<id>26</id>\n+\t\t\t<timestamp>2021-09-02T14:44:01Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestSystemUser</username>\n+\t\t\t</contributor>\n+\t\t\t<comment>Page with infobox</comment>\n+\t\t\t<origin>25</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\">{{DPLInfobox}} some content\n+[[Category:DPLTestOtherCategory]]]</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+\t<page>\n+\t\t<title>DPLUncategorizedPage</title>\n+\t\t<ns>0</ns>\n+\t\t<id>27</id>\n+\t\t<revision>\n+\t\t\t<id>27</id>\n+\t\t\t<timestamp>2021-09-04T03:01:00Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestSystemUser</username>\n+\t\t\t</contributor>\n+\t\t\t<comment>Create test uncategorized page</comment>\n+\t\t\t<origin>27</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\">Uncategorized test page</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t\t<revision>\n+\t\t\t<id>28</id>\n+\t\t\t<timestamp>2021-09-04T03:01:00Z</timestamp>\n+\t\t\t<contributor>\n+\t\t\t\t<username>DPLTestUser</username>\n+\t\t\t</contributor>\n+\t\t\t<comment>Page edited</comment>\n+\t\t\t<origin>27</origin>\n+\t\t\t<model>wikitext</model>\n+\t\t\t<format>text/x-wiki</format>\n+\t\t\t<text xml:space=\"preserve\">Uncategorized test page edit</text>\n+\t\t\t<sha1 />\n+\t\t</revision>\n+\t</page>\n+</mediawiki>"
        }
      ],
      "file_patterns": {
        "security_files": 0,
        "config_files": 88,
        "dependency_files": 0,
        "test_files": 4,
        "unique_directories": 11,
        "max_directory_depth": 2
      },
      "context": {
        "surrounding_commits": [
          {
            "sha": "26b8978260c81ce7988a7b06d8ac5b110022d591",
            "date": "2024-11-05T14:27:26Z",
            "author_login": "translatewiki"
          },
          {
            "sha": "1f0a1a4dff5111b87647dcaf91a55d63de6df013",
            "date": "2024-10-03T12:11:08Z",
            "author_login": "translatewiki"
          },
          {
            "sha": "2fb5d554a85f3580dc5a25f3e72de4ce69877b02",
            "date": "2024-09-30T04:06:20Z",
            "author_login": "amire80"
          },
          {
            "sha": "955be3fefd7567314ea26480c316afbc1ea79f6f",
            "date": "2024-09-02T12:10:14Z",
            "author_login": "translatewiki"
          },
          {
            "sha": "498c396c790ca90845714a8c4ff4942be5c2c27d",
            "date": "2024-08-19T12:12:20Z",
            "author_login": "translatewiki"
          }
        ]
      }
    }
  },
  "vulnerability_details": {
    "cvss_score": 5.3,
    "cvss_vector": "CVSS:3.1/AV:N/AC:H/PR:N/UI:R/S:U/C:N/I:N/A:H",
    "cwe_id": "CWE-400",
    "description": "The DynamicPageList3 extension is a reporting tool for MediaWiki, listing category members and intersections with various formats and details. In affected versions unsanitised input of regular expression date within the parameters of the DPL parser function, allowed for the possibility of ReDoS (Regex Denial of Service). This has been resolved in version 3.3.6. If you are unable to update you may also set `$wgDplSettings['functionalRichness'] = 0;` or disable DynamicPageList3 to mitigate.",
    "attack_vector": "NETWORK",
    "attack_complexity": "HIGH"
  },
  "temporal_data": {
    "published_date": "2021-10-04T19:15:08.570",
    "last_modified": "2024-11-21T06:25:30.483",
    "fix_date": "2021-10-01T22:52:30Z"
  },
  "references": [
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/commit/2c04dafb37a14d9ccfe070f53e7f11bbca0156e7",
      "source": "security-advisories@github.com",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/releases/tag/3.3.6",
      "source": "security-advisories@github.com",
      "tags": [
        "Release Notes",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/security/advisories/GHSA-8f24-q75c-jhf4",
      "source": "security-advisories@github.com",
      "tags": [
        "Mitigation",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/commit/2c04dafb37a14d9ccfe070f53e7f11bbca0156e7",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/releases/tag/3.3.6",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Release Notes",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/Universal-Omega/DynamicPageList3/security/advisories/GHSA-8f24-q75c-jhf4",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Mitigation",
        "Third Party Advisory"
      ]
    }
  ],
  "collection_metadata": {
    "collected_at": "2025-01-11T23:02:07.809483",
    "processing_status": "raw"
  },
  "repository_context": {
    "name": "DynamicPageList3",
    "owner": "Universal-Omega",
    "created_at": "2020-11-22T19:55:07Z",
    "updated_at": "2024-11-05T14:27:31Z",
    "pushed_at": "2024-11-05T14:27:27Z",
    "size": 853,
    "stars": 18,
    "forks": 22,
    "open_issues": 36,
    "watchers": 18,
    "has_security_policy": false,
    "default_branch": "master",
    "protected_branches": [],
    "languages": {
      "PHP": 331559
    },
    "commit_activity": {
      "total_commits_last_year": 0,
      "avg_commits_per_week": 0,
      "days_active_last_year": 0
    },
    "security_features": {
      "has_security_policy": false,
      "has_protected_branches": false,
      "has_wiki": true,
      "has_issues": true,
      "allow_forking": true,
      "is_template": false,
      "license": "gpl-3.0"
    },
    "collected_at": "2025-01-14T15:15:55.569953"
  }
}