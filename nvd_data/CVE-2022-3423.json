{
  "cve_id": "CVE-2022-3423",
  "github_data": {
    "repository": "nocodb/nocodb",
    "fix_commit": "000ecd886738b965b5997cd905825e3244f48b95",
    "related_commits": [
      "000ecd886738b965b5997cd905825e3244f48b95",
      "000ecd886738b965b5997cd905825e3244f48b95"
    ],
    "patch_url": "https://github.com/nocodb/nocodb/commit/000ecd886738b965b5997cd905825e3244f48b95.patch",
    "fix_commit_details": {
      "sha": "000ecd886738b965b5997cd905825e3244f48b95",
      "commit_date": "2022-06-28T07:29:52Z",
      "author": {
        "login": "wingkwong",
        "type": "User",
        "stats": {
          "total_commits": 5352,
          "average_weekly_commits": 14.196286472148541,
          "total_additions": 0,
          "total_deletions": 0,
          "weeks_active": 125
        }
      },
      "commit_message": {
        "title": "Merge pull request #2495 from nocodb/develop",
        "length": 64,
        "has_description": true,
        "references_issue": true
      },
      "stats": {
        "total": 10173,
        "additions": 9522,
        "deletions": 651
      },
      "files": [
        {
          "filename": ".github/workflows/ci-cd.yml",
          "status": "modified",
          "additions": 12,
          "deletions": 24,
          "patch": "@@ -49,7 +49,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/cypress/docker-compose-pg.yml up -d\n@@ -61,7 +60,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-pg-restTableOps-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-pg-restViews-run-cache:\n@@ -94,7 +93,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/cypress/docker-compose-pg.yml up -d\n@@ -106,7 +104,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-pg-restViews-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-pg-restRoles-run-cache:\n@@ -139,7 +137,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/cypress/docker-compose-pg.yml up -d\n@@ -151,7 +148,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-pg-restRoles-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-pg-restMisc-run-cache:\n@@ -184,7 +181,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/cypress/docker-compose-pg.yml up -d\n@@ -196,7 +192,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-pg-restMisc-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-restTableOps-run-cache:\n@@ -229,7 +225,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -241,7 +236,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-restTableOps-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-restViews-run-cache:\n@@ -274,7 +269,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -286,7 +280,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-restViews-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-restRoles-run-cache:\n@@ -319,7 +313,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -331,7 +324,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-restRoles-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-restMisc-run-cache:\n@@ -364,7 +357,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -376,7 +368,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-restMisc-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-xcdb-restTableOps-run-cache:\n@@ -409,7 +401,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:xcdb-api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -421,7 +412,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-xcdb-restTableOps-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-xcdb-restViews-run-cache:\n@@ -454,7 +445,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:xcdb-api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -466,7 +456,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-xcdb-restViews-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-xcdb-restRoles-run-cache:\n@@ -499,7 +489,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:xcdb-api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -511,7 +500,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-xcdb-restRoles-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n     cypress-xcdb-restMisc-run-cache:\n@@ -544,7 +533,6 @@ jobs:\n               uses: cypress-io/github-action@v2\n               with:\n                   start: |\n-                      npm run build:common\n                       npm run start:xcdb-api:cache\n                       npm run start:web\n                       docker-compose -f ./scripts/docker-compose-cypress.yml up -d\n@@ -556,7 +544,7 @@ jobs:\n               if: always()\n               uses: actions/upload-artifact@v2\n               with:\n-                  name: restTableOps-snapshots\n+                  name: cypress-xcdb-restMisc-run-cache-snapshots\n                   path: scripts/cypress/screenshots\n                   retention-days: 2\n #    docker:"
        },
        {
          "filename": ".github/workflows/release-executables.yml",
          "status": "added",
          "additions": 266,
          "deletions": 0,
          "patch": "@@ -0,0 +1,266 @@\n+name: \"Release : Executables\"\n+\n+on:\n+  # Triggered manually\n+  workflow_dispatch:\n+    inputs:\n+      tag:\n+        description: \"Tag name\"\n+        required: true\n+  # Triggered by release-nocodb.yml\n+  workflow_call:\n+    inputs:\n+      tag:\n+        description: \"Tag name\"\n+        required: true\n+        type: string\n+    secrets:\n+      NC_GITHUB_TOKEN:\n+        required: true\n+jobs:\n+  build-executables:\n+    runs-on: ubuntu-latest\n+    steps:\n+      # Get the latest draft release for asset upload url\n+      - uses: cardinalby/git-get-release-action@v1\n+        id: get_release\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.NC_GITHUB_TOKEN }}\n+        with:\n+          latest: 1\n+          draft: true\n+      - uses: actions/checkout@v3\n+      - name: Cache node modules\n+        id: cache-npm\n+        uses: actions/cache@v3\n+        env:\n+          cache-name: cache-node-modules\n+        with:\n+          # npm cache files are stored in `~/.npm` on Linux/macOS\n+          path: ~/.npm\n+          key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}\n+          restore-keys: |\n+            ${{ runner.os }}-build-${{ env.cache-name }}-\n+            ${{ runner.os }}-build-\n+            ${{ runner.os }}-\n+\n+      - name: Cache pkg modules\n+        id: cache-pkg\n+        uses: actions/cache@v3\n+        env:\n+          cache-name: cache-pkg\n+        with:\n+          # pkg cache files are stored in `~/.pkg-cache`\n+          path: ~/.pkg-cache\n+          key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}\n+          restore-keys: |\n+            ${{ runner.os }}-build-${{ env.cache-name }}-\n+            ${{ runner.os }}-build-\n+            ${{ runner.os }}-\n+\n+      # for building images for all platforms these libraries are required in Linux\n+      - name: Install QEMU and ldid\n+        run: |\n+          sudo apt update\n+          # Install qemu\n+          sudo apt install qemu binfmt-support qemu-user-static\n+          # install ldid\n+          git clone https://github.com/daeken/ldid.git\n+          cd ./ldid\n+          ./make.sh\n+          sudo cp ./ldid /usr/local/bin\n+\n+      - uses: actions/setup-node@v3\n+        with:\n+          node-version: 16\n+\n+      - name : Install nocodb, other dependencies and build executables\n+        run: |\n+          cd ./scripts/pkg-executable\n+\n+          # Install nocodb version based on provided tag name\n+          npm i -E nocodb@$TAG\n+\n+          # install npm dependendencies\n+          npm i\n+\n+          # Copy sqlite binaries\n+          rsync -rvzhP ./binaries/binding/ ./node_modules/sqlite3/lib/binding/\n+\n+          # clean up code to optimize size\n+          npx modclean --patterns=\"default:*\" --ignore=\"nc-lib-gui/**,dayjs/**,express-status-monitor/**,sqlite3/**\" --run\n+\n+          # build executables\n+          npm run build\n+\n+          ls ./dist\n+\n+          # Move macOS executables for signing\n+          mkdir ./mac-dist\n+          mv ./dist/Noco-macos-arm64 ./mac-dist/\n+          mv ./dist/Noco-macos-x64 ./mac-dist/\n+\n+      - name: Upload win-arm64 build to asset\n+        id: upload-release-asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ steps.get_release.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/dist/Noco-win-arm64.exe\n+          asset_name: Noco-win-arm64\n+          asset_content_type: application/octet-stream\n+\n+      - name: Upload win-x64 build to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ steps.get_release.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/dist/Noco-win-x64.exe\n+          asset_name: Noco-win-x64\n+          asset_content_type: application/octet-stream\n+\n+      - name: Upload linux-arm64 build to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ steps.get_release.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/dist/Noco-linux-arm64\n+          asset_name: Noco-linux-arm64\n+          asset_content_type: application/octet-stream\n+\n+      - name: Upload linux-x64 build to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ steps.get_release.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/dist/Noco-linux-x64\n+          asset_name: Noco-linux-x64\n+          asset_content_type: application/octet-stream\n+\n+      - uses: actions/upload-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: scripts/pkg-executable/mac-dist\n+          retention-days: 1\n+    outputs:\n+      upload_url: ${{ steps.get_release.outputs.upload_url }}\n+  sign-mac-executables:\n+    runs-on: macos-latest\n+    needs: build-executables\n+    steps:\n+\n+      - uses: actions/download-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: scripts/pkg-executable/mac-dist\n+\n+      - name: Sign macOS executables\n+        run: |\n+          /usr/bin/codesign --force -s - ./scripts/pkg-executable/mac-dist/Noco-macos-arm64 -v\n+          /usr/bin/codesign --force -s - ./scripts/pkg-executable/mac-dist/Noco-macos-x64 -v\n+\n+      - uses: actions/upload-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: scripts/pkg-executable/mac-dist\n+          retention-days: 1\n+\n+\n+  publish-mac-executables-and-homebrew:\n+    needs: [sign-mac-executables,build-executables]\n+    runs-on: ubuntu-latest\n+    steps:\n+      - uses: actions/download-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: scripts/pkg-executable/mac-dist\n+\n+\n+\n+      - uses: actions/checkout@v3\n+        with:\n+          path: 'homebrew-nocodb'\n+          token: ${{ secrets.NC_GITHUB_TOKEN }}\n+          repository: 'nocodb/homebrew-nocodb'\n+          fetch-depth: 0\n+\n+      - name: Compress files and calculate checksum\n+        run: |\n+          cd ./scripts/pkg-executable\n+          cp ./mac-dist/Noco-macos-x64 ./mac-dist/nocodb\n+          tar -czf ./mac-dist/nocodb.tar.gz ./mac-dist/nocodb\n+          rm ./mac-dist/nocodb\n+          echo \"::set-output name=CHECKSUM::$(shasum -a 256 ./mac-dist/nocodb.tar.gz | awk '{print $1}')\"\n+        id: compress\n+\n+\n+      - name: Upload macos-x64 build to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ needs.build-executables.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/mac-dist/Noco-macos-x64\n+          asset_name: Noco-macos-x64\n+          asset_content_type: application/octet-stream\n+\n+\n+\n+      - name: Upload macos-arm64 build to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ needs.build-executables.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/mac-dist/Noco-macos-arm64\n+          asset_name: Noco-macos-arm64\n+          asset_content_type: application/octet-stream\n+\n+\n+\n+      - name: Upload macos compressed build(for homebrew) to asset\n+        uses: actions/upload-release-asset@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+        with:\n+          upload_url: ${{ needs.build-executables.outputs.upload_url }}\n+          asset_path: ./scripts/pkg-executable/mac-dist/nocodb.tar.gz\n+          asset_name: nocodb.tar.gz\n+          asset_content_type: application/octet-stream\n+\n+\n+      - name: Generate Homebrew Formula class and push\n+        run: |\n+          FORMULA_CLASS_STR=$(cat << EOF\n+          class Nocodb < Formula\n+            desc \"Get Human Readable file size information. - CLI\"\n+            homepage \"https://github.com/nocodb/nocodb\"\n+            url \"https://github.com/nocodb/nocodb/releases/download/${{ github.event.inputs.tag || inputs.tag }}/nocodb.tar.gz\"\n+            sha256 \"${{ steps.compress.outputs.CHECKSUM }}\"\n+            license \"MIT\"\n+            version \"${{ github.event.inputs.tag || inputs.tag }}\"\n+\n+            def install\n+              bin.install \"nocodb\"\n+            end\n+          end\n+          EOF\n+          )\n+\n+          cd ./homebrew-nocodb\n+\n+          printf \"$FORMULA_CLASS_STR\" > ./Formula/nocodb.rb\n+\n+          git config user.name 'github-actions[bot]'\n+          git config user.email 'github-actions[bot]@users.noreply.github.com'\n+\n+          git commit ./Formula/nocodb.rb -m \"Automatic publish\"\n+          git push\n+\n+\n+\n+"
        },
        {
          "filename": ".github/workflows/release-nightly-dev.yml",
          "status": "modified",
          "additions": 10,
          "deletions": 1,
          "patch": "@@ -37,7 +37,7 @@ jobs:\n     outputs:\n       nightly_build_tag: ${{ steps.tag-step.outputs.NIGHTLY_BUILD_TAG }}\n       is_daily: ${{ steps.tag-step.outputs.IS_DAILY }}\n-      current_version: ${{ steps.tag-step.outputs.CURRENT_VERSION }} \n+      current_version: ${{ steps.tag-step.outputs.CURRENT_VERSION }}\n   # Build frontend and backend and publish to npm\n   release-npm:\n     needs: set-tag\n@@ -48,6 +48,15 @@ jobs:\n     secrets:\n       NPM_TOKEN: \"${{ secrets.NPM_TOKEN }}\"\n \n+  # Build executables and publish to GitHub\n+  release-executables:\n+    needs: [set-tag, release-npm]\n+    uses: ./.github/workflows/release-timely-executables.yml\n+    with:\n+      tag: ${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.nightly_build_tag }}\n+    secrets:\n+      NC_GITHUB_TOKEN: \"${{ secrets.NC_GITHUB_TOKEN }}\"\n+\n   # Build docker image and push to docker hub\n   release-docker:\n     needs: [set-tag, release-npm]"
        },
        {
          "filename": ".github/workflows/release-nocodb.yml",
          "status": "modified",
          "additions": 12,
          "deletions": 3,
          "patch": "@@ -44,14 +44,14 @@ jobs:\n             # bump the version from PREV_TAG\n             TARGET_TAG=$(echo ${PREV_TAG} | awk -F. -v OFS=. '{$NF += 1 ; print}')\n           fi\n-          \n+\n           echo target version: ${TARGET_TAG}\n           echo previous version: ${PREV_TAG}\n           echo \"::set-output name=target_tag::${TARGET_TAG}\"\n           echo \"::set-output name=prev_tag::${PREV_TAG}\"\n       - name: Verify\n         run : |\n-          echo ${{ steps.process-input.outputs.target_tag }} \n+          echo ${{ steps.process-input.outputs.target_tag }}\n \n   # Merge develop to master\n   pr-to-master:\n@@ -94,14 +94,23 @@ jobs:\n       DOCKERHUB_USERNAME: \"${{ secrets.DOCKERHUB_USERNAME }}\"\n       DOCKERHUB_TOKEN: \"${{ secrets.DOCKERHUB_TOKEN }}\"\n \n+  # Build executables and publish to GitHub\n+  release-executables:\n+    needs: [release-draft-note, process-input]\n+    uses: ./.github/workflows/release-executables.yml\n+    with:\n+      tag: ${{ needs.process-input.outputs.target_tag }}\n+    secrets:\n+      NC_GITHUB_TOKEN: \"${{ secrets.NC_GITHUB_TOKEN }}\"\n+\n   # Close all issues with target tags 'Fixed' & 'Resolved'\n   close-fixed-issues:\n     needs: [release-docker, process-input]\n     uses: ./.github/workflows/release-close-issue.yml\n     with:\n       issue_label: 'Status: Fixed'\n       version: ${{ needs.process-input.outputs.target_tag }}\n-  \n+\n   close-resolved-issues:\n     needs: [close-fixed-issues, process-input]\n     uses: ./.github/workflows/release-close-issue.yml"
        },
        {
          "filename": ".github/workflows/release-pr.yml",
          "status": "modified",
          "additions": 48,
          "deletions": 3,
          "patch": "@@ -50,7 +50,7 @@ jobs:\n           echo ${{ steps.tag-step.outputs.CURRENT_VERSION }}\n     outputs:\n       target_tag: ${{ steps.tag-step.outputs.TARGET_TAG }}\n-      current_version: ${{ steps.tag-step.outputs.CURRENT_VERSION }} \n+      current_version: ${{ steps.tag-step.outputs.CURRENT_VERSION }}\n \n   # Build, install, publish frontend and backend to npm\n   release-npm:\n@@ -77,13 +77,22 @@ jobs:\n       DOCKERHUB_USERNAME: \"${{ secrets.DOCKERHUB_USERNAME }}\"\n       DOCKERHUB_TOKEN: \"${{ secrets.DOCKERHUB_TOKEN }}\"\n \n+  # Build executables and publish to GitHub\n+  release-executables:\n+    needs: [set-tag, release-npm]\n+    uses: ./.github/workflows/release-timely-executables.yml\n+    with:\n+      tag: ${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}\n+    secrets:\n+      NC_GITHUB_TOKEN: \"${{ secrets.NC_GITHUB_TOKEN }}\"\n+\n   # leave-comment:\n   #   runs-on: 'ubuntu-latest'\n   #   needs: [release-docker, set-tag]\n   #   steps:\n   #     - run: |\n   #         echo docker run -d -p 8888:8080 nocodb/nocodb-timely:${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}\n-  \n+\n   leave-comment:\n     if: ${{ github.actor != 'dependabot[bot]' && github.event.pull_request.draft == false }}\n     runs-on: 'ubuntu-latest'\n@@ -96,7 +105,43 @@ jobs:\n             ```\n             docker run -d -p 8888:8080 nocodb/nocodb-timely:${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}\n             ```\n-  \n+\n+  leave-executable-comment:\n+    if: ${{ github.actor != 'dependabot[bot]' && github.event.pull_request.draft == false }}\n+    runs-on: 'ubuntu-latest'\n+    needs: [release-executables, set-tag]\n+    steps:\n+      - uses: peter-evans/commit-comment@v2\n+        with:\n+          body: |\n+            ### Run Executables\n+\n+            #### MacOS\n+\n+            ```bash\n+            mkdir -p ./${{ needs.set-tag.outputs.current_version }}/${{ needs.set-tag.outputs.target_tag }} && cd \"$_\" \\\n+                && curl http://dl.nocodb.com/${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}/Noco-macos-arm64 -o noco -L \\\n+                && chmod +x noco \\\n+                && ./noco\n+            ```\n+            #### Linux\n+\n+            ```bash\n+            mkdir -p ./${{ needs.set-tag.outputs.current_version }}/${{ needs.set-tag.outputs.target_tag }} && cd \"$_\" \\\n+               && curl http://dl.nocodb.com/${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}/Noco-linux-x64 -o noco -L \\\n+               && chmod +x noco \\\n+               && ./noco\n+            ```\n+            #### Windows\n+\n+            ```bash\n+            iwp http://dl.nocodb.com/${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }}/Noco-win-arm64.exe\n+            .\\Noco-win-arm64.exe\n+            ```\n+\n+            For executables visit [here](https://github.com/nocodb/nocodb-timely/releases/tag/${{ needs.set-tag.outputs.current_version }}-${{ needs.set-tag.outputs.target_tag }})\n+\n+\n   # if-merged:\n   #   if: github.event.pull_request.merged == true\n   #   runs-on: ubuntu-latest"
        },
        {
          "filename": ".github/workflows/release-timely-executables.yml",
          "status": "added",
          "additions": 158,
          "deletions": 0,
          "patch": "@@ -0,0 +1,158 @@\n+name: \"Release : Timely Executables\"\n+\n+on:\n+  # Triggered manually\n+  workflow_dispatch:\n+    inputs:\n+      tag:\n+        description: \"Timely version\"\n+        required: true\n+  # Triggered by release-nightly-dev.yml / release-pr.yml\n+  workflow_call:\n+    inputs:\n+      tag:\n+        description: \"Timely version\"\n+        required: true\n+        type: string\n+    secrets:\n+      NC_GITHUB_TOKEN:\n+        required: true\n+jobs:\n+  build-executables:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - uses: actions/checkout@v3\n+        with:\n+          token: ${{ secrets.NC_GITHUB_TOKEN }}\n+          repository: 'nocodb/nocodb-timely'\n+      - name: Cache node modules\n+        id: cache-npm\n+        uses: actions/cache@v3\n+        env:\n+          cache-name: cache-node-modules\n+        with:\n+          # npm cache files are stored in `~/.npm` on Linux/macOS\n+          path: ~/.npm\n+          key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}\n+          restore-keys: |\n+            ${{ runner.os }}-build-${{ env.cache-name }}-\n+            ${{ runner.os }}-build-\n+            ${{ runner.os }}-\n+      - name: Cache pkg modules\n+        id: cache-pkg\n+        uses: actions/cache@v3\n+        env:\n+          cache-name: cache-pkg\n+        with:\n+          # pkg cache files are stored in `~/.pkg-cache`\n+          path: ~/.pkg-cache\n+          key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}\n+          restore-keys: |\n+            ${{ runner.os }}-build-${{ env.cache-name }}-\n+            ${{ runner.os }}-build-\n+            ${{ runner.os }}-\n+      - name: Install QEMU and ldid\n+        run: |\n+          sudo apt update\n+          # Install qemu\n+          sudo apt install qemu binfmt-support qemu-user-static\n+          # install ldid\n+          git clone https://github.com/daeken/ldid.git\n+          cd ./ldid\n+          ./make.sh\n+          sudo cp ./ldid /usr/local/bin\n+\n+      - name: Update nocodb-timely\n+        env:\n+          TAG: ${{ github.event.inputs.tag || inputs.tag }}\n+        run: |\n+          npm i -E nocodb-daily@$TAG\n+\n+          git config user.name 'github-actions[bot]'\n+          git config user.email 'github-actions[bot]@users.noreply.github.com'\n+\n+          git commit package.json -m \"Update to $TAG\"\n+          git tag $TAG\n+          git push --tags\n+\n+\n+      - uses: actions/setup-node@v3\n+        with:\n+          node-version: 16\n+\n+      - name : Install dependencies and build executables\n+        run: |\n+          # install npm dependendencies\n+          npm i\n+\n+          # Copy sqlite binaries\n+          rsync -rvzhP ./binaries/binding/ ./node_modules/sqlite3/lib/binding/\n+\n+          # clean up code to optimize size\n+          npx modclean --patterns=\"default:*\" --ignore=\"nc-lib-gui-daily/**,dayjs/**,express-status-monitor/**,sqlite3/**\" --run\n+\n+          # build executables\n+          npm run build\n+\n+          mkdir ./mac-dist\n+          mv ./dist/Noco-macos-arm64 ./mac-dist/\n+          mv ./dist/Noco-macos-x64 ./mac-dist/\n+\n+      - name: Upload executables(except mac executables) to release\n+        uses: svenstaro/upload-release-action@v2\n+        with:\n+          repo_token: ${{ secrets.NC_GITHUB_TOKEN }}\n+          file: dist/**\n+          tag: ${{ github.event.inputs.tag || inputs.tag }}\n+          overwrite: true\n+          file_glob: true\n+          repo_name: nocodb/nocodb-timely\n+\n+      - uses: actions/upload-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: mac-dist\n+          retention-days: 1\n+\n+  sign-mac-executables:\n+    runs-on: macos-latest\n+    needs: build-executables\n+    steps:\n+\n+      - uses: actions/download-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: mac-dist\n+\n+      - name: Sign macOS executables\n+        run: |\n+          /usr/bin/codesign --force -s - ./mac-dist/Noco-macos-arm64 -v\n+          /usr/bin/codesign --force -s - ./mac-dist/Noco-macos-x64 -v\n+\n+      - uses: actions/upload-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: mac-dist\n+          retention-days: 1\n+\n+\n+  publish-mac-executables:\n+    needs: sign-mac-executables\n+    runs-on: ubuntu-latest\n+    steps:\n+      - uses: actions/download-artifact@master\n+        with:\n+          name: ${{ github.event.inputs.tag || inputs.tag }}\n+          path: mac-dist\n+\n+      - name: Upload mac executables to release\n+        uses: svenstaro/upload-release-action@v2\n+        with:\n+          repo_token: ${{ secrets.NC_GITHUB_TOKEN }}\n+          file: mac-dist/**\n+          tag: ${{ github.event.inputs.tag || inputs.tag }}\n+          overwrite: true\n+          file_glob: true\n+          repo_name: nocodb/nocodb-timely\n+\n+"
        },
        {
          "filename": "package.json",
          "status": "modified",
          "additions": 6,
          "deletions": 5,
          "patch": "@@ -15,11 +15,12 @@\n   \"scripts\": {\n     \"build:common\": \"cd ./packages/nocodb-sdk; npm install; npm run build\",\n     \"install:common\": \"cd ./packages/nocodb; npm install ../nocodb-sdk; cd ../nc-gui; npm install ../nocodb-sdk\",\n-    \"start:api\": \"cd ./packages/nocodb; npm install; NC_DISABLE_CACHE=true NC_DISABLE_TELE=true npm run watch:run:cypress\",\n-    \"start:xcdb-api\": \"cd ./packages/nocodb; npm install; NC_DISABLE_CACHE=true NC_DISABLE_TELE=true NC_INFLECTION=camelize DATABASE_URL=sqlite:../../../scripts/cypress/fixtures/sqlite-sakila/sakila.db npm run watch:run:cypress\",\n-    \"start:api:cache\": \"cd ./packages/nocodb; npm install; NC_DISABLE_TELE=true npm run watch:run:cypress\",\n-    \"start:xcdb-api:cache\": \"cd ./packages/nocodb; npm install; NC_DISABLE_TELE=true NC_INFLECTION=camelize DATABASE_URL=sqlite:../../../scripts/cypress/fixtures/sqlite-sakila/sakila.db npm run watch:run:cypress\",\n-    \"start:web\": \"cd ./packages/nc-gui; npm install; npm run dev\",\n+    \"start:api\": \"npm run build:common ; cd ./packages/nocodb; npm install ../nocodb-sdk; npm install; NC_DISABLE_CACHE=true NC_DISABLE_TELE=true npm run watch:run:cypress\",\n+    \"start:xcdb-api\": \"npm run build:common ; cd ./packages/nocodb; npm install ../nocodb-sdk;npm install; NC_DISABLE_CACHE=true NC_DISABLE_TELE=true NC_INFLECTION=camelize DATABASE_URL=sqlite:../../../scripts/cypress/fixtures/sqlite-sakila/sakila.db npm run watch:run:cypress\",\n+    \"start:api:cache\": \"npm run build:common ; cd ./packages/nocodb; npm install ../nocodb-sdk;npm install; NC_DISABLE_TELE=true npm run watch:run:cypress\",\n+    \"start:api:cache:pg\": \"npm run build:common ; cd ./packages/nocodb; npm install ../nocodb-sdk; npm install; NC_DISABLE_TELE=true npm run watch:run:cypress:pg\",\n+    \"start:xcdb-api:cache\": \"npm run build:common ; cd ./packages/nocodb; npm install ../nocodb-sdk; npm install; NC_DISABLE_TELE=true NC_INFLECTION=camelize DATABASE_URL=sqlite:../../../scripts/cypress/fixtures/sqlite-sakila/sakila.db npm run watch:run:cypress\",\n+    \"start:web\": \"npm run build:common ; cd ./packages/nc-gui; npm install ../nocodb-sdk; npm install; npm run dev\",\n     \"cypress:run\": \"cypress run --config-file ./scripts/cypress/cypress.json\",\n     \"cypress:open\": \"cypress open --config-file ./scripts/cypress/cypress.json\",\n     \"cypress:clear\": \"cypress cache clear\","
        },
        {
          "filename": "packages/nc-gui/components/CreateOrEditProject.vue",
          "status": "modified",
          "additions": 10,
          "deletions": 10,
          "patch": "@@ -89,7 +89,7 @@\n                       ref=\"name\"\n                       v-model=\"project.title\"\n                       v-ge=\"['project', 'name']\"\n-                      :rules=\"form.titleRequiredRule\"\n+                      :rules=\"form.titleValidationRule\"\n                       :height=\"20\"\n                       :label=\"$t('placeholder.projName')\"\n                       autofocus\n@@ -453,14 +453,14 @@\n                                             \"\n                                           />\n                                         </v-col>\n-                                        <!--  todo : Schema name -->\n+                                        <!--  Schema name -->\n                                         <v-col\n                                           v-if=\"db.client === 'mssql' || db.client === 'pg'\"\n                                           cols=\"4\"\n                                           class=\"py-0\"\n                                         >\n                                           <v-text-field\n-                                            v-model=\"schema\"\n+                                            v-model=\"db.searchPath[0]\"\n                                             :disabled=\"edit && enableDbEdit < 2\"\n                                             class=\"body-2 database-field\"\n                                             :rules=\"form.requiredRule\"\n@@ -891,7 +891,6 @@ export default {\n   layout: 'empty',\n   data() {\n     return {\n-      schema: 'public',\n       testSuccess: false,\n       projectCreated: false,\n       allSchemas: false,\n@@ -963,7 +962,10 @@ export default {\n       /** ************** START : form related ****************/\n       form: {\n         portValidationRule: [v => /^\\d+$/.test(v) || 'Not a valid port'],\n-        titleRequiredRule: [v => !!v || 'Title is required'],\n+        titleValidationRule: [\n+          v => !!v || 'Title is required',\n+          v => v.length <= 50 || 'Project name exceeds 50 characters',\n+        ],\n         requiredRule: [v => !!v || 'Field is required'],\n         folderRequiredRule: [v => !!v || 'Folder path is required']\n       },\n@@ -1539,9 +1541,7 @@ export default {\n       this.projectReloading = true\n \n       const con = projectJson.envs._noco.db[0]\n-      if (con.client === 'pg' || con.client === 'mssql') {\n-        con.searchPath = [this.schema]\n-      } else if ('searchPath' in con) {\n+      if (con.client !== 'pg' && con.client !== 'mssql' && 'searchPath' in con) {\n         delete con.searchPath\n       }\n \n@@ -1892,9 +1892,9 @@ export default {\n     },\n     onDatabaseTypeChanged(client, db1, index, env) {\n       if (this.databaseNames[client] === 'mssql') {\n-        this.schema = 'dbo'\n+        this.project.envs[env].db[index].searchPath[0] = 'dbo'\n       } else if (this.databaseNames[client] === 'pg') {\n-        this.schema = 'public'\n+        this.project.envs[env].db[index].searchPath[0] = 'public'\n       }\n \n       for (const env in this.project.envs) {"
        },
        {
          "filename": "packages/nc-gui/components/ProjectTabs.vue",
          "status": "modified",
          "additions": 26,
          "deletions": 1,
          "patch": "@@ -315,6 +315,21 @@\n               </span>\n             </v-list-item-title>\n           </v-list-item>\n+          <v-list-item\n+            v-if=\"_isUIAllowed('jsonImport')\"\n+            v-t=\"['a:actions:import-json']\"\n+            @click=\"jsonImportModal = true\"\n+          >\n+            <v-list-item-title>\n+              <v-icon small>\n+                mdi-code-json\n+              </v-icon>\n+              <span class=\"caption\">\n+                <!-- TODO: i18n -->\n+                JSON file\n+              </span>\n+            </v-list-item-title>\n+          </v-list-item>\n           <v-list-item\n             v-if=\"_isUIAllowed('excelQuickImport')\"\n             v-t=\"['a:actions:import-excel']\"\n@@ -370,6 +385,13 @@\n       @closeModal=\"quickImportModal = false\"\n     />\n \n+    <!-- Import From JSON string / file -->\n+    <json-import\n+      v-model=\"jsonImportModal\"\n+      hide-label\n+      @closeModal=\"jsonImportModal = false\"\n+    />\n+\n     <import-from-airtable v-if=\"airtableImportModal\" v-model=\"airtableImportModal\" />\n   </v-container>\n </template>\n@@ -404,9 +426,11 @@ import GlobalAcl from '~/components/GlobalAcl'\n import AuditTab from '~/components/project/AuditTab'\n import QuickImport from '~/components/import/QuickImport'\n import ImportFromAirtable from '~/components/import/ImportFromAirtable'\n+import JsonImport from '~/components/import/JSONImport'\n \n export default {\n   components: {\n+    JsonImport,\n     ImportFromAirtable,\n     SwaggerClient,\n     // Screensaver,\n@@ -447,7 +471,8 @@ export default {\n       showScreensaver: false,\n       quickImportModal: false,\n       quickImportType: '',\n-      airtableImportModal: false\n+      airtableImportModal: false,\n+      jsonImportModal: false\n     }\n   },\n   methods: {"
        },
        {
          "filename": "packages/nc-gui/components/import/ImportFromAirtable.vue",
          "status": "modified",
          "additions": 13,
          "deletions": 7,
          "patch": "@@ -8,7 +8,6 @@\n         <div\n           v-t=\"['c:airtable-import:turbo-mode']\"\n           class=\"ml-2 mt-3 title pointer nc-btn-enable-turbo\"\n-          @click=\"enableTurbo\"\n         >\n           \ud83d\ude80\n         </div>\n@@ -86,6 +85,13 @@\n                         hide-details\n                         dense\n                       />\n+                      <v-checkbox\n+                        v-model=\"syncSource.details.options.syncViews\"\n+                        class=\"caption\"\n+                        label=\"Import Secondary Views\"\n+                        hide-details\n+                        dense\n+                      />\n                       <v-checkbox\n                         v-model=\"syncSource.details.options.syncRollup\"\n                         class=\"caption\"\n@@ -225,7 +231,7 @@ export default {\n         apiKey: '',\n         shareId: '',\n         options: {\n-          syncViews: false,\n+          syncViews: true,\n           syncData: true,\n           syncRollup: false,\n           syncLookup: true,\n@@ -327,7 +333,7 @@ export default {\n             apiKey: '',\n             shareId: '',\n             options: {\n-              syncViews: false,\n+              syncViews: true,\n               syncData: true,\n               syncRollup: false,\n               syncLookup: true,\n@@ -350,10 +356,10 @@ export default {\n         this.$toast.error(await this._extractSdkResponseErrorMsg(e)).goAway(3000)\n       }\n     },\n-    enableTurbo() {\n-      this.$set(this.syncSource.details.options, 'syncViews', true)\n-      this.$toast.success('\ud83d\ude80\ud83d\ude80 Ludicrous mode activated! Let\\'s go! \ud83d\ude80\ud83d\ude80').goAway(3000)\n-    },\n+    // enableTurbo() {\n+    //   this.$set(this.syncSource.details.options, 'syncViews', true)\n+    //   this.$toast.success('\ud83d\ude80\ud83d\ude80 Ludicrous mode activated! Let\\'s go! \ud83d\ude80\ud83d\ude80').goAway(3000)\n+    // },\n     migrateSync(src) {\n       if (!src.details?.options) {\n         src.details.options = {"
        },
        {
          "filename": "packages/nc-gui/components/import/JSONImport.vue",
          "status": "added",
          "additions": 484,
          "deletions": 0,
          "patch": "@@ -0,0 +1,484 @@\n+<template>\n+  <div :class=\"{'pt-10':!hideLabel}\">\n+    <v-dialog v-model=\"dropOrUpload\" max-width=\"600\">\n+      <v-card max-width=\"600\">\n+        <v-tabs height=\"30\">\n+          <v-tab>\n+            <v-icon small class=\"mr-1\">\n+              mdi-file-upload-outline\n+            </v-icon>\n+            <span class=\"caption text-capitalize\">Upload</span>\n+          </v-tab>\n+          <!--          <v-tab>-->\n+          <!--            <v-icon small class=\"mr-1\">\n+              mdi-link-variant\n+            </v-icon>\n+            <span class=\"caption text-capitalize\">URL</span>\n+          </v-tab>-->\n+          <v-tab>\n+            <v-icon small class=\"mr-1\">\n+              mdi-link-variant\n+            </v-icon>\n+            <span class=\"caption text-capitalize\">String</span>\n+          </v-tab>\n+\n+          <v-tab-item>\n+            <div class=\"nc-json-import-tab-item \">\n+              <div\n+                class=\"nc-droppable d-flex align-center justify-center flex-column\"\n+                :style=\"{\n+                  background : dragOver ? '#7772' : ''\n+                }\"\n+                @click=\"$refs.file.click()\"\n+                @drop.prevent=\"dropHandler\"\n+                @dragover.prevent=\"dragOver = true\"\n+                @dragenter.prevent=\"dragOver = true\"\n+                @dragexit=\"dragOver = false\"\n+                @dragleave=\"dragOver = false\"\n+                @dragend=\"dragOver = false\"\n+              >\n+                <x-icon :color=\"['primary','grey']\" size=\"50\">\n+                  mdi-file-plus-outline\n+                </x-icon>\n+                <p class=\"title  mb-1 mt-2\">\n+                  <!-- Select File to Upload-->\n+                  {{ $t('msg.info.upload') }}\n+                </p>\n+                <p class=\"grey--text mb-1\">\n+                  <!-- or drag and drop file-->\n+                  {{ $t('msg.info.upload_sub') }}\n+                </p>\n+\n+                <p v-if=\"quickImportType == 'excel'\" class=\"caption grey--text\">\n+                  <!-- Supported: .xls, .xlsx, .xlsm, .ods, .ots -->\n+                  {{ $t('msg.info.excelSupport') }}\n+                </p>\n+              </div>\n+            </div>\n+          </v-tab-item>\n+          <!--          <v-tab-item>\n+            <div class=\"nc-json-import-tab-item align-center\">\n+              <div class=\"pa-4 d-100 h-100\">\n+                <v-form ref=\"form\" v-model=\"valid\">\n+                  <div class=\"d-flex\">\n+                    &lt;!&ndash; todo:  i18n label&ndash;&gt;\n+                    <v-text-field\n+                      v-model=\"url\"\n+                      hide-details=\"auto\"\n+                      type=\"url\"\n+                      label=\"Enter JSON file url\"\n+                      class=\"caption\"\n+                      outlined\n+                      dense\n+                      :rules=\"\n+                        [\n+                          v => !!v || $t('general.required'),\n+                          v => !(/(10)(\\.([2]([0-5][0-5]|[01234][6-9])|[1][0-9][0-9]|[1-9][0-9]|[0-9])){3}|(172)\\.(1[6-9]|2[0-9]|3[0-1])(\\.(2[0-4][0-9]|25[0-5]|[1][0-9][0-9]|[1-9][0-9]|[0-9])){2}|(192)\\.(168)(\\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){2}|(0.0.0.0)|localhost?/g).test(v) || errorMessages.ipBlockList\n+                        ]\"\n+                    />\n+                    <v-btn v-t=\"['c:project:create:json:load-url']\" class=\"ml-3\" color=\"primary\" @click=\"loadUrl\">\n+                      &lt;!&ndash;Load&ndash;&gt;\n+                      {{ $t('general.load') }}\n+                    </v-btn>\n+                  </div>\n+                </v-form>\n+              </div>\n+            </div>\n+          </v-tab-item>-->\n+          <v-tab-item>\n+            <div class=\"nc-json-import-tab-item align-center\">\n+              <div class=\"pa-4 d-100 h-100\">\n+                <v-form ref=\"form\" v-model=\"valid\">\n+                  <div class=\"nc-json-editor-wrapper\">\n+                    <v-btn small class=\"nc-json-format-btn\" @click=\"formatJson\">\n+                      Format\n+                    </v-btn>\n+\n+                    <!--label=\"Enter excel file url\"-->\n+                    <monaco-json-editor\n+                      ref=\"editor\"\n+                      v-model=\"jsonString\"\n+                      style=\"height:320px\"\n+                    />\n+                    <div class=\"text-center mt-4\">\n+                      <v-btn v-t=\"['c:project:create:excel:load-url']\" class=\"ml-3\" color=\"primary\" @click=\"loadJsonString\">\n+                        <!--Load-->\n+                        {{ $t('general.load') }}\n+                      </v-btn>\n+                    </div>\n+                  </div>\n+                </v-form>\n+              </div>\n+            </div>\n+          </v-tab-item>\n+        </v-tabs>\n+\n+        <div class=\"px-4 pb-2\">\n+          <div class=\"d-flex\">\n+            <v-spacer />\n+            <span class=\"caption pointer grey--text\" @click=\"showMore = !showMore\">\n+              {{ showMore ? $t('general.hideAll') : $t('general.showMore') }}\n+              <v-icon small color=\"grey lighten-1\">mdi-menu-{{ showMore ? 'up' : 'down' }}</v-icon>\n+            </span>\n+          </div>\n+          <div class=\"mb-2 pt-2 nc-json-import-options\" :style=\"{ maxHeight: showMore ? '200px' : '0'}\">\n+            <p />\n+            <!--hint=\"# of rows to parse to infer data type\"-->\n+            <v-text-field\n+              v-model=\"parserConfig.maxRowsToParse\"\n+              style=\"max-width: 250px\"\n+              class=\"caption mx-auto\"\n+              dense\n+              persistent-hint\n+              :hint=\"$t('msg.info.footMsg')\"\n+              outlined\n+              type=\"number\"\n+            />\n+\n+            <v-checkbox\n+              v-model=\"parserConfig.normalizeNested\"\n+              style=\"width: 250px\"\n+              class=\"mx-auto mb-2\"\n+              dense\n+              hide-details\n+            >\n+              <template #label>\n+                <span class=\"caption\">Flatten nested</span>\n+                <v-tooltip bottom position-y=\"\">\n+                  <template #activator=\"{ on }\">\n+                    <v-icon small class=\"ml-1\" v-on=\"on\">\n+                      mdi-information-outline\n+                    </v-icon>\n+                  </template>\n+                  <div class=\"caption\" style=\"width: 260px\">\n+                    If flatten nested option is set it will flatten nested object as root level property. In normal case nested object will treat as JSON column.\n+                    <br>\n+                    <br>\n+                    For example the following input: <code class=\"caption font-weight-bold\">{\n+                      \"prop1\": {\n+                      \"prop2\": \"value\"\n+                      },\n+                      \"prop3\": \"value\",\n+                      \"prop4\": 1\n+                      }</code> will treat as:\n+                    <code class=\"caption font-weight-bold\">{\n+                      \"prop1_prop2\": \"value\",\n+                      \"prop3\": \"value\",\n+                      \"prop4\": 1\n+                      }</code>\n+                  </div>\n+                </v-tooltip>\n+              </template>\n+            </v-checkbox>\n+            <v-checkbox\n+              v-model=\"parserConfig.importData\"\n+              style=\"width: 250px\"\n+              class=\"mx-auto mb-2\"\n+              dense\n+              hide-details\n+            >\n+              <template #label>\n+                <span class=\"caption\">Import data</span>\n+              </template>\n+            </v-checkbox>\n+          </div>\n+        </div>\n+      </v-card>\n+    </v-dialog>\n+\n+    <v-tooltip bottom>\n+      <template #activator=\"{on}\">\n+        <input\n+          ref=\"file\"\n+          class=\"nc-json-import-input\"\n+          type=\"file\"\n+          style=\"display: none\"\n+          accept=\".json\"\n+          @change=\"_change($event)\"\n+        >\n+        <v-btn\n+\n+          v-if=\"!hideLabel\"\n+          small\n+          outlined\n+          v-on=\"on\"\n+          @click=\"$refs.file.click()\"\n+        >\n+          <v-icon small class=\"mr-1\">\n+            mdi-file-excel-outline\n+          </v-icon>\n+          <!--Import-->\n+          {{ $t('activity.import') }}\n+        </v-btn>\n+      </template>\n+      <span class=\"caption\">Create template from JSON</span>\n+    </v-tooltip>\n+\n+    <v-dialog v-if=\"templateData\" v-model=\"templateEditorModal\" max-width=\"1000\">\n+      <v-card class=\"pa-6\" min-width=\"500\">\n+        <template-editor :project-template.sync=\"templateData\" json-import :quick-import-type=\"quickImportType\">\n+          <template #toolbar=\"{valid}\">\n+            <h3 class=\"mt-2 grey--text\">\n+              <span>\n+                JSON Import\n+              </span>\n+            </h3>\n+            <v-spacer />\n+            <v-spacer />\n+            <create-project-from-template-btn\n+              :template-data=\"templateData\"\n+              :import-data=\"importData\"\n+              :import-to-project=\"importToProject\"\n+              json-import\n+              :valid=\"valid\"\n+              create-gql-text=\"Import as GQL Project\"\n+              create-rest-text=\"Import as REST Project\"\n+              @closeModal=\"$emit('closeModal'),templateEditorModal = false\"\n+            >\n+              <!--Import Excel-->\n+              <span v-if=\"quickImportType === 'excel'\">\n+                {{ $t('activity.importExcel') }}\n+              </span>\n+              <!--Import CSV-->\n+              <span v-if=\"quickImportType === 'csv'\">\n+                {{ $t('activity.importCSV') }}\n+              </span>\n+            </create-project-from-template-btn>\n+          </template>\n+        </template-editor>\n+      </v-card>\n+    </v-dialog>\n+  </div>\n+</template>\n+\n+<script>\n+\n+import TemplateEditor from '~/components/templates/Editor'\n+import CreateProjectFromTemplateBtn from '~/components/templates/CreateProjectFromTemplateBtn'\n+import MonacoJsonEditor from '~/components/monaco/MonacoJsonEditor'\n+import JSONTemplateAdapter from '~/components/import/templateParsers/JSONTemplateAdapter'\n+import JSONUrlTemplateAdapter from '~/components/import/templateParsers/JSONUrlTemplateAdapter'\n+\n+export default {\n+  name: 'JsonImport',\n+  components: { MonacoJsonEditor, CreateProjectFromTemplateBtn, TemplateEditor },\n+  props: {\n+    hideLabel: Boolean,\n+    value: Boolean,\n+    importToProject: Boolean,\n+    quickImportType: String\n+  },\n+  data() {\n+    return {\n+      templateEditorModal: false,\n+      valid: null,\n+      templateData: null,\n+      importData: null,\n+      dragOver: false,\n+      url: '',\n+      showMore: false,\n+      parserConfig: {\n+        maxRowsToParse: 500,\n+        normalizeNested: true,\n+        importData: true\n+      },\n+      filename: '',\n+      jsonString: '',\n+      errorMessages: {\n+        ipBlockList: 'IP Not allowed!',\n+        importJSON: 'Target file is not an accepted file type. The accepted file type is .json!'\n+      }\n+    }\n+  },\n+  computed: {\n+    dropOrUpload: {\n+      set(v) {\n+        this.$emit('input', v)\n+      },\n+      get() {\n+        return this.value\n+      }\n+    },\n+    tables() {\n+      return this.$store.state.project.tables || []\n+    }\n+  },\n+  mounted() {\n+    if (this.$route && this.$route.query && this.$route.query.excelUrl) {\n+      this.url = this.$route.query.excelUrl\n+      this.loadUrl()\n+    }\n+  },\n+  methods: {\n+    formatJson() {\n+      console.log(this.$refs.editor)\n+      this.$refs.editor.format()\n+    },\n+\n+    selectFile() {\n+      this.$refs.file.files = null\n+      this.$refs.file.click()\n+    },\n+\n+    _change(event) {\n+      const files = event.target.files\n+      if (files && files[0]) {\n+        this._file(files[0])\n+        event.target.value = ''\n+      }\n+    },\n+    async _file(file) {\n+      this.templateData = null\n+      this.importData = null\n+      this.$store.commit('loader/MutMessage', 'Loading excel file')\n+      let i = 0\n+      const int = setInterval(() => {\n+        this.$store.commit('loader/MutMessage', `Loading excel file${'.'.repeat(++i % 4)}`)\n+      }, 1000)\n+      this.dropOrUpload = false\n+      const reader = new FileReader()\n+      this.filename = file.name\n+\n+      reader.onload = async(e) => {\n+        const ab = e.target.result\n+        await this.parseAndExtractData('file', ab, file.name)\n+        this.$store.commit('loader/MutMessage', null)\n+\n+        clearInterval(int)\n+      }\n+\n+      const handleEvent = (event) => {\n+        this.$store.commit('loader/MutMessage', `${event.type}: ${event.loaded} bytes transferred`)\n+      }\n+\n+      reader.addEventListener('progress', handleEvent)\n+      reader.onerror = (e) => {\n+        console.log('error', e)\n+        this.$store.commit('loader/MutClear')\n+      }\n+      reader.readAsText(file)\n+    },\n+\n+    async parseAndExtractData(type, val, name) {\n+      try {\n+        let templateGenerator\n+        this.templateData = null\n+        this.importData = null\n+        switch (type) {\n+          case 'file':\n+            templateGenerator = new JSONTemplateAdapter(name, val, this.parserConfig)\n+            break\n+          case 'url':\n+            templateGenerator = new JSONUrlTemplateAdapter(val, this.$store, this.parserConfig, this.$api)\n+            break\n+          case 'string':\n+            templateGenerator = new JSONTemplateAdapter(name, val, this.parserConfig)\n+            break\n+        }\n+        await templateGenerator.init()\n+        templateGenerator.parse()\n+        this.templateData = templateGenerator.getTemplate()\n+\n+        this.templateData.tables[0].table_name = this.populateUniqueTableName()\n+\n+        this.importData = templateGenerator.getData()\n+        this.templateEditorModal = true\n+      } catch (e) {\n+        console.log(e)\n+        this.$toast\n+          .error(await this._extractSdkResponseErrorMsg(e))\n+          .goAway(3000)\n+      }\n+    },\n+\n+    dropHandler(ev) {\n+      this.dragOver = false\n+      let file\n+      if (ev.dataTransfer.items) {\n+        // Use DataTransferItemList interface to access the file(s)\n+        if (ev.dataTransfer.items.length && ev.dataTransfer.items[0].kind === 'file') {\n+          file = ev.dataTransfer.items[0].getAsFile()\n+        }\n+      } else if (ev.dataTransfer.files.length) {\n+        file = ev.dataTransfer.files[0]\n+      }\n+\n+      if (!file) {\n+        return\n+      }\n+\n+      if (!/.*\\.json/.test(file.name)) {\n+        return this.$toast.error(this.errorMessages.importJSON).goAway(3000)\n+      }\n+\n+      this._file(file)\n+    },\n+    dragOverHandler(ev) {\n+      // Prevent default behavior (Prevent file from being opened)\n+      ev.preventDefault()\n+    },\n+    populateUniqueTableName() {\n+      let c = 1\n+      while (this.tables.some(t => t.title === `Sheet${c}`)) { c++ }\n+      return `Sheet${c}`\n+    },\n+    async loadUrl() {\n+      if ((this.$refs.form && !this.$refs.form.validate()) || !this.url) {\n+        return\n+      }\n+\n+      this.$store.commit('loader/MutMessage', 'Loading json file from url')\n+\n+      let i = 0\n+      const int = setInterval(() => {\n+        this.$store.commit('loader/MutMessage', `Loading json file${'.'.repeat(++i % 4)}`)\n+      }, 1000)\n+\n+      this.dropOrUpload = false\n+\n+      await this.parseAndExtractData('url', this.url, '')\n+      clearInterval(int)\n+      this.$store.commit('loader/MutClear')\n+    },\n+\n+    async loadJsonString() {\n+      await this.parseAndExtractData('string', this.jsonString)\n+      this.$store.commit('loader/MutClear')\n+    }\n+\n+  }\n+}\n+</script>\n+\n+<style scoped>\n+.nc-droppable {\n+  width: 100%;\n+  min-height: 200px;\n+  border-radius: 4px;\n+  border: 2px dashed #ddd;\n+}\n+\n+.nc-json-import-tab-item {\n+  min-height: 400px;\n+  padding: 20px;\n+  display: flex;\n+  align-items: stretch;\n+  width: 100%;\n+}\n+\n+.nc-json-import-options {\n+  transition: .4s max-height;\n+  overflow: hidden;\n+}\n+\n+.nc-json-editor-wrapper{\n+  position: relative;\n+}\n+\n+.nc-json-format-btn{\n+  position:absolute;\n+  right:4px;\n+  top:4px;\n+  z-index:9;\n+}\n+</style>"
        },
        {
          "filename": "packages/nc-gui/components/import/QuickImport.vue",
          "status": "modified",
          "additions": 18,
          "deletions": 6,
          "patch": "@@ -60,11 +60,18 @@\n                       v-model=\"url\"\n                       hide-details=\"auto\"\n                       type=\"url\"\n-                      :label=\"quickImportType == 'excel' ? $t('msg.info.excelURL') : $t('msg.info.csvURL') \"\n+                      :label=\"quickImportType === 'excel' ? $t('msg.info.excelURL') : $t('msg.info.csvURL') \"\n                       class=\"caption\"\n                       outlined\n                       dense\n-                      :rules=\"[v => !!v || $t('general.required') ]\"\n+                      :rules=\"\n+                        [\n+                          v => !!v || $t('general.required'), \n+                          v => !(/(10)(\\.([2]([0-5][0-5]|[01234][6-9])|[1][0-9][0-9]|[1-9][0-9]|[0-9])){3}|(172)\\.(1[6-9]|2[0-9]|3[0-1])(\\.(2[0-4][0-9]|25[0-5]|[1][0-9][0-9]|[1-9][0-9]|[0-9])){2}|(192)\\.(168)(\\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){2}|(0.0.0.0)|localhost?/g).test(v) || errorMessages.ipBlockList,\n+                          v => quickImportType === 'excel' ?\n+                            (/.*\\.(xls|xlsx|xlsm|ods|ots)/.test(v) || errorMessages.importExcel) :\n+                            (/.*\\.(csv)/.test(v) || errorMessages.importCSV),\n+                        ]\"\n                     />\n                     <v-btn v-t=\"['c:project:create:excel:load-url']\" class=\"ml-3\" color=\"primary\" @click=\"loadUrl\">\n                       <!--Load-->\n@@ -213,7 +220,12 @@ export default {\n       parserConfig: {\n         maxRowsToParse: 500\n       },\n-      filename: ''\n+      filename: '',\n+      errorMessages: {\n+        importExcel: \"Target file is not an accepted file type. The accepted file types are .xls, .xlsx, .xlsm, .ods, .ots!\",\n+        importCSV: \"Target file is not an accepted file type. The accepted file type is .csv!\",\n+        ipBlockList: \"IP Not allowed!\"\n+      }\n     }\n   },\n   computed: {\n@@ -288,7 +300,7 @@ export default {\n             templateGenerator = new ExcelTemplateAdapter(name, val, this.parserConfig)\n             break\n           case 'url':\n-            templateGenerator = new ExcelUrlTemplateAdapter(val, this.$store, this.parserConfig, this.$api)\n+            templateGenerator = new ExcelUrlTemplateAdapter(val, this.$store, this.parserConfig, this.$api, this.quickImportType)\n             break\n         }\n         await templateGenerator.init()\n@@ -322,11 +334,11 @@ export default {\n \n       if (this.quickImportType === 'excel') {\n         if (!/.*\\.(xls|xlsx|xlsm|ods|ots)/.test(file.name)) {\n-          return this.$toast.error('Dropped file is not an accepted file type. The accepted file types are .xls, .xlsx, .xlsm, .ods, .ots!').goAway(3000)\n+          return this.$toast.error(this.errorMessages.importExcel).goAway(3000)\n         }\n       } else if (this.quickImportType === 'csv') {\n         if (!/.*\\.(csv)/.test(file.name)) {\n-          return this.$toast.error('Dropped file is not an accepted file type. The accepted file type is .csv!').goAway(3000)\n+          return this.$toast.error(this.errorMessages.importCSV).goAway(3000)\n         }\n       }\n       this._file(file)"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/CSVTemplateAdapter.js",
          "status": "modified",
          "additions": 0,
          "deletions": 1,
          "patch": "@@ -1,6 +1,5 @@\n import Papaparse from 'papaparse'\n import TemplateGenerator from '~/components/import/templateParsers/TemplateGenerator'\n-\n export default class CSVTemplateAdapter extends TemplateGenerator {\n   constructor(name, data) {\n     super()"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/ExcelTemplateAdapter.js",
          "status": "modified",
          "additions": 19,
          "deletions": 1,
          "patch": "@@ -27,7 +27,25 @@ export default class ExcelTemplateAdapter extends TemplateGenerator {\n   }\n \n   async init() {\n-    this.wb = XLSX.read(new Uint8Array(this.excelData), { type: 'array', cellText: true, cellDates: true })\n+    const options = {\n+      cellText: true, \n+      cellDates: true \n+    }\n+    if (this.name.slice(-3) === 'csv') {\n+      this.wb = XLSX.read(\n+        (new TextDecoder).decode(new Uint8Array(this.excelData)), \n+        { \n+          type: \"string\",\n+          ...options\n+        });\n+    } else {\n+      this.wb = XLSX.read(\n+        new Uint8Array(this.excelData), \n+        { \n+          type: 'array', \n+          ...options\n+        })\n+    }\n   }\n \n   parse() {"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/ExcelUrlTemplateAdapter.js",
          "status": "modified",
          "additions": 3,
          "deletions": 3,
          "patch": "@@ -1,19 +1,19 @@\n import ExcelTemplateAdapter from '~/components/import/templateParsers/ExcelTemplateAdapter'\n \n export default class ExcelUrlTemplateAdapter extends ExcelTemplateAdapter {\n-  constructor(url, $store, parserConfig, $api) {\n+  constructor(url, $store, parserConfig, $api, quickImportType) {\n     const name = url.split('/').pop()\n     super(name, null, parserConfig)\n     this.url = url\n     this.$api = $api\n     this.$store = $store\n+    this.quickImportType = quickImportType\n   }\n \n   async init() {\n     const data = await this.$api.utils.axiosRequestMake({\n       apiMeta: {\n-        url: this.url,\n-        responseType: 'arraybuffer'\n+        url: this.url\n       }\n     })\n     this.excelData = data.data"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/JSONTemplateAdapter.js",
          "status": "added",
          "additions": 150,
          "deletions": 0,
          "patch": "@@ -0,0 +1,150 @@\n+import { TemplateGenerator, UITypes } from 'nocodb-sdk'\n+import {\n+  extractMultiOrSingleSelectProps,\n+  getCheckboxValue,\n+  isCheckboxType, isDecimalType, isEmailType,\n+  isMultiLineTextType, isUrlType\n+} from '~/components/import/templateParsers/parserHelpers'\n+\n+const jsonTypeToUidt = {\n+  number: UITypes.Number,\n+  string: UITypes.SingleLineText,\n+  date: UITypes.DateTime,\n+  boolean: UITypes.Checkbox,\n+  object: UITypes.JSON\n+}\n+\n+const extractNestedData = (obj, path) => path.reduce((val, key) => val && val[key], obj)\n+\n+export default class JSONTemplateAdapter extends TemplateGenerator {\n+  constructor(name = 'test', data, parserConfig = {}) {\n+    super()\n+    this.config = {\n+      maxRowsToParse: 500,\n+      ...parserConfig\n+    }\n+    this.name = name\n+    this._jsonData = typeof data === 'string' ? JSON.parse(data) : data\n+    this.project = {\n+      title: this.name,\n+      tables: []\n+    }\n+    this.data = {}\n+  }\n+\n+  async init() {\n+  }\n+\n+  parseData() {\n+    this.columns = this.csv.meta.fields\n+    this.data = this.csv.data\n+  }\n+\n+  getColumns() {\n+    return this.columns\n+  }\n+\n+  getData() {\n+    return this.data\n+  }\n+\n+  get jsonData() {\n+    return Array.isArray(this._jsonData) ? this._jsonData : [this._jsonData]\n+  }\n+\n+  parse() {\n+    const jsonData = this.jsonData\n+    const tn = 'table'\n+    const table = { table_name: tn, ref_table_name: tn, columns: [] }\n+\n+    this.data[tn] = []\n+\n+    for (const col of Object.keys(jsonData[0])) {\n+      const columns = this._parseColumn([col], jsonData)\n+      table.columns.push(...columns)\n+    }\n+\n+    if (this.config.importData) { this._parseTableData(table) }\n+\n+    this.project.tables.push(table)\n+  }\n+\n+  getTemplate() {\n+    return this.project\n+  }\n+\n+  _parseColumn(path = [], jsonData = this.jsonData, firstRowVal = path.reduce((val, k) => val && val[k], this.jsonData[0])) {\n+    const columns = []\n+    // parse nested\n+    if (firstRowVal && typeof firstRowVal === 'object' && !Array.isArray(firstRowVal) && this.config.normalizeNested) {\n+      for (const key of Object.keys(firstRowVal)) {\n+        const normalizedNestedColumns = this._parseColumn([...path, key], this.jsonData, firstRowVal[key])\n+        columns.push(...normalizedNestedColumns)\n+      }\n+    } else {\n+      const cn = path.join('_').replace(/\\W/g, '_').trim()\n+\n+      const column = {\n+        column_name: cn,\n+        ref_column_name: cn,\n+        path\n+      }\n+\n+      column.uidt = jsonTypeToUidt[typeof firstRowVal] || UITypes.SingleLineText\n+\n+      const colData = jsonData.map(r => extractNestedData(r, path))\n+      Object.assign(column, this._getColumnUIDTAndMetas(colData, column.uidt))\n+      columns.push(column)\n+    }\n+\n+    return columns\n+  }\n+\n+  _getColumnUIDTAndMetas(colData, defaultType) {\n+    const colProps = { uidt: defaultType }\n+    // todo: optimize\n+    if (colProps.uidt === UITypes.SingleLineText) {\n+      // check for long text\n+      if (isMultiLineTextType(colData)) {\n+        colProps.uidt = UITypes.LongText\n+      } if (isEmailType(colData)) {\n+        colProps.uidt = UITypes.Email\n+      } if (isUrlType(colData)) {\n+        colProps.uidt = UITypes.URL\n+      } else {\n+        const checkboxType = isCheckboxType(colData)\n+        if (checkboxType.length === 1) {\n+          colProps.uidt = UITypes.Checkbox\n+        } else {\n+          Object.assign(colProps, extractMultiOrSingleSelectProps(colData))\n+        }\n+      }\n+    } else if (colProps.uidt === UITypes.Number) {\n+      if (isDecimalType(colData)) {\n+        colProps.uidt = UITypes.Decimal\n+      }\n+    }\n+    return colProps\n+  }\n+\n+  _parseTableData(tableMeta) {\n+    for (const row of this.jsonData) {\n+      const rowData = {}\n+      for (let i = 0; i < tableMeta.columns.length; i++) {\n+        const value = extractNestedData(row, tableMeta.columns[i].path || [])\n+        if (tableMeta.columns[i].uidt === UITypes.Checkbox) {\n+          rowData[tableMeta.columns[i].ref_column_name] = getCheckboxValue(value)\n+        } else if (tableMeta.columns[i].uidt === UITypes.SingleSelect || tableMeta.columns[i].uidt === UITypes.MultiSelect) {\n+          rowData[tableMeta.columns[i].ref_column_name] = (value || '').toString().trim() || null\n+        } else if (tableMeta.columns[i].uidt === UITypes.JSON) {\n+          rowData[tableMeta.columns[i].ref_column_name] = JSON.stringify(value)\n+        } else {\n+          // toto: do parsing if necessary based on type\n+          rowData[tableMeta.columns[i].column_name] = value\n+        }\n+      }\n+      this.data[tableMeta.ref_table_name].push(rowData)\n+      // rowIndex++\n+    }\n+  }\n+}"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/JSONUrlTemplateAdapter.js",
          "status": "added",
          "additions": 21,
          "deletions": 0,
          "patch": "@@ -0,0 +1,21 @@\n+import JSONTemplateAdapter from '~/components/import/templateParsers/JSONTemplateAdapter'\n+\n+export default class JSONUrlTemplateAdapter extends JSONTemplateAdapter {\n+  constructor(url, $store, parserConfig, $api) {\n+    const name = url.split('/').pop()\n+    super(name, null, parserConfig)\n+    this.url = url\n+    this.$api = $api\n+    this.$store = $store\n+  }\n+\n+  async init() {\n+    const data = await this.$api.utils.axiosRequestMake({\n+      apiMeta: {\n+        url: this.url\n+      }\n+    })\n+    this._jsonData = data\n+    await super.init()\n+  }\n+}"
        },
        {
          "filename": "packages/nc-gui/components/import/templateParsers/parserHelpers.js",
          "status": "modified",
          "additions": 54,
          "deletions": 4,
          "patch": "@@ -1,3 +1,6 @@\n+import { UITypes } from 'nocodb-sdk'\n+import { isEmail, isValidURL } from '~/helpers'\n+\n const booleanOptions = [\n   { checked: true, unchecked: false },\n   { x: true, '': false },\n@@ -11,14 +14,24 @@ const booleanOptions = [\n   { '\u2714': true, '': false },\n   { enabled: true, disabled: false },\n   { on: true, off: false },\n-  { done: true, '': false }\n+  { done: true, '': false },\n+  { true: true, false: false }\n ]\n const aggBooleanOptions = booleanOptions.reduce((obj, o) => ({ ...obj, ...o }), {})\n-export const isCheckboxType = (values, col = '') => {\n+\n+const getColVal = (row, col = null) => {\n+  return row && col ? row[col] : row\n+}\n+\n+export const isCheckboxType = (values, col = null) => {\n   let options = booleanOptions\n   for (let i = 0; i < values.length; i++) {\n-    let val = col ? values[i][col] : values[i]\n-    val = val === null || val === undefined ? '' : val\n+    const val = getColVal(values[i], col)\n+\n+    if (val === null || val === undefined || val.toString().trim() === '') {\n+      continue\n+    }\n+\n     options = options.filter(v => val in v)\n     if (!options.length) {\n       return false\n@@ -29,3 +42,40 @@ export const isCheckboxType = (values, col = '') => {\n export const getCheckboxValue = (value) => {\n   return value && aggBooleanOptions[value]\n }\n+\n+export const isMultiLineTextType = (values, col = null) => {\n+  return values.some(r =>\n+    (getColVal(r, col) || '').toString().match(/[\\r\\n]/) ||\n+    (getColVal(r, col) || '').toString().length > 255)\n+}\n+\n+export const extractMultiOrSingleSelectProps = (colData) => {\n+  const colProps = {}\n+  if (colData.some(v => v && (v || '').toString().includes(','))) {\n+    let flattenedVals = colData.flatMap(v => v ? v.toString().trim().split(/\\s*,\\s*/) : [])\n+    const uniqueVals = flattenedVals = flattenedVals\n+      .filter((v, i, arr) => i === arr.findIndex(v1 => v.toLowerCase() === v1.toLowerCase()))\n+    if (flattenedVals.length > uniqueVals.length && uniqueVals.length <= Math.ceil(flattenedVals.length / 2)) {\n+      colProps.uidt = UITypes.MultiSelect\n+      colProps.dtxp = `'${uniqueVals.join(\"','\")}'`\n+    }\n+  } else {\n+    const uniqueVals = colData.map(v => (v || '').toString().trim()).filter((v, i, arr) => i === arr.findIndex(v1 => v.toLowerCase() === v1.toLowerCase()))\n+    if (colData.length > uniqueVals.length && uniqueVals.length <= Math.ceil(colData.length / 2)) {\n+      colProps.uidt = UITypes.SingleSelect\n+      colProps.dtxp = `'${uniqueVals.join(\"','\")}'`\n+    }\n+  }\n+  return colProps\n+}\n+\n+export const isDecimalType = colData => colData.some((v) => {\n+  return v && parseInt(+v) !== +v\n+})\n+\n+export const isEmailType = colData => !colData.some((v) => {\n+  return v && !isEmail(v)\n+})\n+export const isUrlType = colData => !colData.some((v) => {\n+  return v && !isValidURL(v)\n+})"
        },
        {
          "filename": "packages/nc-gui/components/monaco/MonacoJsonEditor.js",
          "status": "modified",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -83,6 +83,9 @@ export default {\n   },\n \n   methods: {\n+    format() {\n+      this.editor.getAction('editor.action.formatDocument').run()\n+    },\n     resizeLayout() {\n       this.editor.layout();\n     },"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/Cell.vue",
          "status": "modified",
          "additions": 3,
          "deletions": 1,
          "patch": "@@ -17,6 +17,7 @@\n   <date-time-cell v-else-if=\"isDateTime\" :value=\"value\" />\n   <time-cell v-else-if=\"isTime\" :value=\"value\" />\n   <boolean-cell v-else-if=\"isBoolean\" :value=\"value\" read-only />\n+  <duration-cell v-else-if=\"isDuration\" :column=\"column\" :value=\"value\" read-only />\n   <rating-cell v-else-if=\"isRating\" :value=\"value\" read-only />\n   <currency-cell v-else-if=\"isCurrency\" :value=\"value\" :column=\"column\" />\n \n@@ -37,10 +38,11 @@ import BooleanCell from '~/components/project/spreadsheet/components/cell/Boolea\n import EmailCell from '~/components/project/spreadsheet/components/cell/EmailCell'\n import RatingCell from '~/components/project/spreadsheet/components/editableCell/RatingCell'\n import CurrencyCell from '@/components/project/spreadsheet/components/cell/CurrencyCell'\n+import DurationCell from '@/components/project/spreadsheet/components/cell/DurationCell'\n \n export default {\n   name: 'TableCell',\n-  components: { RatingCell, EmailCell, TimeCell, DateTimeCell, DateCell, JsonCell, UrlCell, EditableAttachmentCell, EnumCell, SetListCell, BooleanCell, CurrencyCell },\n+  components: { RatingCell, EmailCell, TimeCell, DateTimeCell, DateCell, JsonCell, UrlCell, EditableAttachmentCell, EnumCell, SetListCell, BooleanCell, CurrencyCell, DurationCell },\n   mixins: [cell],\n   props: ['value', 'dbAlias', 'isLocked', 'selected', 'column'],\n   computed: {"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/EditColumn.vue",
          "status": "modified",
          "additions": 31,
          "deletions": 20,
          "patch": "@@ -172,7 +172,6 @@\n                   :column=\"newColumn\"\n                   :meta=\"meta\"\n                 />\n-\n                 <v-col\n                   v-if=\"accordion\"\n                   cols=\"12\"\n@@ -210,7 +209,31 @@\n                       />\n                     </v-col>\n \n-                    <template v-if=\"newColumn.uidt !== 'Formula'\">\n+                    <template v-if=\"newColumn.uidt === 'Formula'\">\n+                      <v-col cols=\"12\">\n+                        <formula-options\n+                          ref=\"formula\"\n+                          :column=\"newColumn\"\n+                          :nodes=\"nodes\"\n+                          :meta=\"meta\"\n+                          :is-s-q-lite=\"isSQLite\"\n+                          :alias=\"newColumn.column_name\"\n+                          :is-m-s-s-q-l=\"isMSSQL\"\n+                          :sql-ui=\"sqlUi\"\n+                          v-on=\"$listeners\"\n+                        />\n+                      </v-col>\n+                    </template>\n+                    <template v-else-if=\"newColumn.uidt === 'Duration'\">\n+                      <v-col cols=\"12\">\n+                        <duration-options\n+                          v-model=\"newColumn.meta\"\n+                          :column=\"newColumn\"\n+                          :meta=\"meta\"\n+                        />\n+                      </v-col>\n+                    </template>\n+                    <template v-else>\n                       <v-col v-if=\"isLookup\" cols=\"12\">\n                         <lookup-options\n                           ref=\"lookup\"\n@@ -497,21 +520,6 @@\n                         </v-col>\n                       </template>\n                     </template>\n-                    <template v-else>\n-                      <v-col cols=\"12\">\n-                        <formula-options\n-                          ref=\"formula\"\n-                          :column=\"newColumn\"\n-                          :nodes=\"nodes\"\n-                          :meta=\"meta\"\n-                          :is-s-q-lite=\"isSQLite\"\n-                          :alias=\"newColumn.column_name\"\n-                          :is-m-s-s-q-l=\"isMSSQL\"\n-                          :sql-ui=\"sqlUi\"\n-                          v-on=\"$listeners\"\n-                        />\n-                      </v-col>\n-                    </template>\n                   </v-row>\n                 </v-col>\n               </template>\n@@ -572,6 +580,7 @@ import { validateColumnName } from '~/helpers'\n import RatingOptions from '~/components/project/spreadsheet/components/editColumn/RatingOptions'\n import CheckboxOptions from '~/components/project/spreadsheet/components/editColumn/CheckboxOptions'\n import CurrencyOptions from '@/components/project/spreadsheet/components/editColumn/CurrencyOptions'\n+import DurationOptions from '@/components/project/spreadsheet/components/editColumn/DurationOptions'\n \n const columnToValidate = [UITypes.Email, UITypes.URL, UITypes.PhoneNumber]\n \n@@ -587,7 +596,8 @@ export default {\n     DlgLabelSubmitCancel,\n     RelationOptions,\n     CustomSelectOptions,\n-    CurrencyOptions\n+    CurrencyOptions,\n+    DurationOptions\n   },\n   props: {\n     nodes: Object,\n@@ -617,7 +627,8 @@ export default {\n         UITypes.Lookup,\n         UITypes.Rollup,\n         UITypes.SpecificDBType,\n-        UITypes.Formula\n+        UITypes.Formula,\n+        UITypes.Duration\n       ].includes(this.newColumn && this.newColumn.uidt)\n     },\n     uiTypes() {\n@@ -631,7 +642,7 @@ export default {\n       ]\n     },\n     isEditDisabled() {\n-      return this.editColumn && this.sqlUi === SqliteUi\n+      return this.editColumn && this.sqlUi === SqliteUi && this.column.uidt !== UITypes.Duration\n     },\n     isSQLite() {\n       return this.sqlUi === SqliteUi"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/EditableCell.vue",
          "status": "modified",
          "additions": 24,
          "deletions": 7,
          "patch": "@@ -35,6 +35,16 @@\n       v-on=\"$listeners\"\n     />\n \n+    <duration-cell\n+      v-else-if=\"isDuration\"\n+      v-model=\"localState\"\n+      :active=\"active\"\n+      :is-form=\"isForm\"\n+      :column=\"column\"\n+      :is-locked=\"isLocked\"\n+      v-on=\"parentListeners\"\n+    />\n+\n     <boolean-cell\n       v-else-if=\"isBoolean\"\n       v-model=\"localState\"\n@@ -65,6 +75,7 @@\n       v-else-if=\"isTime\"\n       v-model=\"localState\"\n       v-on=\"parentListeners\"\n+      @save=\"$emit('save')\"\n     />\n \n     <date-time-picker-cell\n@@ -86,7 +97,6 @@\n       :is-form=\"isForm\"\n       :column=\"column\"\n       v-on=\"parentListeners\"\n-      @input=\"$emit('save')\"\n     />\n \n     <json-editable-cell\n@@ -102,7 +112,6 @@\n       v-model=\"localState\"\n       :column=\"column\"\n       v-on=\"parentListeners\"\n-      @input=\"$emit('save')\"\n     />\n     <set-list-cell\n       v-else-if=\"isSet\"\n@@ -148,6 +157,7 @@ import EnumCell from '~/components/project/spreadsheet/components/cell/EnumCell'\n import SetListEditableCell from '~/components/project/spreadsheet/components/editableCell/SetListEditableCell'\n import SetListCell from '~/components/project/spreadsheet/components/cell/SetListCell'\n import RatingCell from '~/components/project/spreadsheet/components/editableCell/RatingCell'\n+import DurationCell from '~/components/project/spreadsheet/components/editableCell/DurationCell'\n \n export default {\n   name: 'EditableCell',\n@@ -167,7 +177,8 @@ export default {\n     TextAreaCell,\n     DateTimePickerCell,\n     TextCell,\n-    DatePickerCell\n+    DatePickerCell,\n+    DurationCell\n   },\n   mixins: [cell],\n   props: {\n@@ -199,10 +210,10 @@ export default {\n         if (val !== this.value) {\n           this.changed = true\n           this.$emit('input', val)\n-          if (this.isAttachment || this.isBoolean || this.isRating || this.isTime || this.isDateTime || this.isDate) {\n-            this.syncData()\n-          } else if (!this.isCurrency && !this.isEnum && !this.isSet) {\n+          if (this.isAutoSaved) {\n             this.syncDataDebounce(this)\n+          } else if (!this.isManualSaved) {\n+            this.saveData()\n           }\n         }\n       }\n@@ -230,7 +241,7 @@ export default {\n     // this.$refs.input.focus();\n   },\n   beforeDestroy() {\n-    if (this.changed && !(this.isAttachment || this.isBoolean || this.isRating || this.isTime || this.isDateTime)) {\n+    if (this.changed && this.isAutoSaved) {\n       this.changed = false\n       this.$emit('change')\n     }\n@@ -242,6 +253,12 @@ export default {\n         this.changed = false\n         this.$emit('update')\n       }\n+    },\n+    saveData() {\n+      if (this.changed && !this.destroyed) {\n+        this.changed = false\n+        this.$emit('save')\n+      }\n     }\n   }\n }"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/cell/DurationCell.vue",
          "status": "added",
          "additions": 69,
          "deletions": 0,
          "patch": "@@ -0,0 +1,69 @@\n+<template>\n+  <input\n+    v-model=\"localValue\"\n+    :placeholder=\"durationPlaceholder\"\n+    readonly\n+  >\n+</template>\n+\n+<script>\n+import { durationOptions, convertMS2Duration } from '~/helpers/durationHelper'\n+\n+export default {\n+  name: 'DurationCell',\n+  props: {\n+    column: Object,\n+    value: [String, Number]\n+  },\n+  data: () => ({\n+    showWarningMessage: false,\n+    localValue: null\n+  }),\n+  computed: {\n+    durationPlaceholder() {\n+      return durationOptions[this.column?.meta?.duration || 0].title\n+    }\n+  },\n+  watch: {\n+    'column.meta.duration'(newValue, oldValue) {\n+      if (oldValue !== newValue) {\n+        this.localValue = convertMS2Duration(this.value, newValue)\n+      }\n+    },\n+    value(val, oldVal) {\n+      this.localValue = convertMS2Duration(val !== oldVal && (!val && val !== 0) ? oldVal : val, this.column?.meta?.duration || 0)\n+    }\n+  },\n+  created() {\n+    this.localValue = convertMS2Duration(this.value, this.column?.meta?.duration || 0)\n+  }\n+}\n+</script>\n+\n+<style scoped>\n+\n+</style>\n+\n+<!--\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */\n+-->"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/editColumn/DurationOptions.vue",
          "status": "added",
          "additions": 72,
          "deletions": 0,
          "patch": "@@ -0,0 +1,72 @@\n+<template>\n+  <v-row class=\"duration-wrapper\">\n+    <div class=\"caption\">\n+      A duration of time in minutes or seconds (e.g. 1:23).\n+    </div>\n+    <!-- TODO: i18n -->\n+    <v-autocomplete\n+      v-model=\"colMeta.duration\"\n+      hide-details\n+      class=\"caption ui-type nc-ui-dt-dropdown\"\n+      label=\"Duration Format\"\n+      dense\n+      outlined\n+      item-value=\"id\"\n+      item-text=\"title\"\n+      :items=\"durationOptionList\"\n+    >\n+      <template #selection=\"{ item }\">\n+        <div>\n+          <span class=\"caption grey--text text--darken-4\">\n+            {{ item.title }}\n+          </span>\n+        </div>\n+      </template>\n+      <template #item=\"{ item }\">\n+        <div class=\"caption\">\n+          {{ item.title }}\n+        </div>\n+      </template>\n+    </v-autocomplete>\n+  </v-row>\n+</template>\n+\n+<script>\n+import { durationOptions } from '~/helpers/durationHelper'\n+\n+export default {\n+  name: 'DuractionOptions',\n+  props: ['column', 'meta', 'value'],\n+  data: () => ({\n+    durationOptionList: durationOptions.map(o => ({\n+        ...o,\n+        // h:mm:ss (e.g. 3:45, 1:23:40)\n+        title: `${o.title} ${o.example}`\n+    })),\n+    colMeta: {\n+        duration: 0\n+    }\n+  }),\n+  watch: {\n+    value() {\n+      this.colMeta = this.value || {}\n+    },\n+    colMeta(v) {\n+      this.$emit('input', v)\n+    }\n+  },\n+  created() {\n+    this.colMeta = this.value ? { ...this.value } : { ...this.colMeta }\n+  }\n+}\n+</script>\n+\n+<style scoped>\n+.duration-wrapper {\n+  margin: 0;\n+}\n+\n+.duration-wrapper .caption:first-child {\n+    margin: -10px 0px 10px 5px;\n+}\n+</style>"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/editColumn/FormulaOptions.vue",
          "status": "modified",
          "additions": 1,
          "deletions": 4,
          "patch": "@@ -267,10 +267,7 @@ export default {\n         // validate data type\n         if (parsedTree.callee.type === jsep.IDENTIFIER) {\n           const expectedType = formulas[parsedTree.callee.name].type\n-          if (\n-            expectedType === formulaTypes.NUMERIC ||\n-            expectedType === formulaTypes.STRING\n-          ) {\n+          if (expectedType === formulaTypes.NUMERIC) {\n             parsedTree.arguments.map(arg => this.validateAgainstType(arg, expectedType, null, typeErrors))\n           } else if (expectedType === formulaTypes.DATE) {\n             if (parsedTree.callee.name === 'DATEADD') {"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/editableCell/DurationCell.vue",
          "status": "added",
          "additions": 139,
          "deletions": 0,
          "patch": "@@ -0,0 +1,139 @@\n+<template>\n+  <div class=\"duration-cell-wrapper\">\n+    <input\n+      ref=\"durationInput\"\n+      v-model=\"localState\"\n+      :placeholder=\"durationPlaceholder\"\n+      @blur=\"onBlur\"\n+      @keypress=\"checkDurationFormat($event)\"\n+      @keydown.enter=\"isEdited && $emit('input', durationInMS)\"\n+      v-on=\"parentListeners\"\n+    >\n+    <div v-if=\"showWarningMessage == true\" class=\"duration-warning\">\n+      <!-- TODO: i18n -->\n+      Please enter a number\n+    </div>\n+  </div>\n+</template>\n+\n+<script>\n+import { durationOptions, convertMS2Duration, convertDurationToSeconds } from '~/helpers/durationHelper'\n+\n+export default {\n+  name: 'DurationCell',\n+  props: {\n+    column: Object,\n+    value: [Number, String],\n+    readOnly: Boolean\n+  },\n+  data: () => ({\n+    // flag to determine to show warning message or not\n+    showWarningMessage: false,\n+    // duration in milliseconds\n+    durationInMS: null,\n+    // check if the cell is edited or not\n+    isEdited: false\n+  }),\n+  computed: {\n+    localState: {\n+      get() {\n+        return convertMS2Duration(this.value, this.durationType)\n+      },\n+      set(val) {\n+        this.isEdited = true\n+        const res = convertDurationToSeconds(val, this.durationType)\n+        if (res._isValid) {\n+          this.durationInMS = res._sec\n+        }\n+      }\n+    },\n+    durationPlaceholder() {\n+      return durationOptions[this.durationType].title\n+    },\n+    durationType() {\n+      return this.column?.meta?.duration || 0\n+    },\n+    parentListeners() {\n+      const $listeners = {}\n+\n+      if (this.$listeners.blur) {\n+        $listeners.blur = this.$listeners.blur\n+      }\n+      if (this.$listeners.focus) {\n+        $listeners.focus = this.$listeners.focus\n+      }\n+\n+      return $listeners\n+    }\n+  },\n+  mounted() {\n+    window.addEventListener('keypress', (_) => {\n+      if (this.$refs.durationInput) {\n+        this.$refs.durationInput.focus()\n+      }\n+    })\n+  },\n+  methods: {\n+    checkDurationFormat(evt) {\n+      evt = evt || window.event\n+      const charCode = (evt.which) ? evt.which : evt.keyCode\n+      // ref: http://www.columbia.edu/kermit/ascii.html\n+      const PRINTABLE_CTL_RANGE = charCode > 31\n+      const NON_DIGIT = charCode < 48 || charCode > 57\n+      const NON_COLON = charCode !== 58\n+      const NON_PERIOD = charCode !== 46\n+      if (PRINTABLE_CTL_RANGE && NON_DIGIT && NON_COLON && NON_PERIOD) {\n+        this.showWarningMessage = true\n+        evt.preventDefault()\n+      } else {\n+        this.showWarningMessage = false\n+        // only allow digits, '.' and ':' (without quotes)\n+        return true\n+      }\n+    },\n+    onBlur() {\n+      if (this.isEdited) {\n+        this.$emit('input', this.durationInMS)\n+      }\n+      this.isEdited = false\n+    }\n+  }\n+}\n+</script>\n+\n+<style scoped>\n+\n+.duration-cell-wrapper {\n+  padding: 10px;\n+}\n+\n+.duration-warning {\n+  text-align: left;\n+  margin-top: 10px;\n+  color: #E65100;\n+}\n+</style>\n+\n+<!--\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */\n+-->"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/components/editableCell/TimePickerCell.vue",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -5,7 +5,7 @@\n     </template>\n     <div class=\"d-flex flex-column justify-center\" @click.stop>\n       <v-time-picker v-model=\"localState\" v-on=\"parentListeners\" />\n-      <v-btn small color=\"primary\" @click=\"$emit('update')\">\n+      <v-btn small color=\"primary\" @click=\"$emit('save')\">\n         <!-- Save -->\n         {{ $t('general.save') }}\n       </v-btn>\n@@ -15,7 +15,6 @@\n \n <script>\n import dayjs from 'dayjs'\n-import { MysqlUi } from 'nocodb-sdk'\n \n export default {\n   name: 'TimePickerCell',"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/mixins/cell.js",
          "status": "modified",
          "additions": 28,
          "deletions": 1,
          "patch": "@@ -67,15 +67,42 @@ export default {\n     },\n     isCurrency() {\n       return this.uiDatatype === 'Currency'\n+    },\n+    isDuration() {\n+      return this.uiDatatype === UITypes.Duration\n+    },\n+    isAutoSaved() {\n+      return [\n+        UITypes.SingleLineText,\n+        UITypes.LongText,\n+        UITypes.PhoneNumber,\n+        UITypes.Email,\n+        UITypes.URL,\n+        UITypes.Number,\n+        UITypes.Decimal,\n+        UITypes.Percent,\n+        UITypes.Count,\n+        UITypes.AutoNumber,\n+        UITypes.SpecificDBType,\n+        UITypes.Geometry\n+      ].includes(this.uiDatatype)\n+    },\n+    isManualSaved() {\n+      return [\n+        UITypes.Currency,\n+        UITypes.Year,\n+        UITypes.Time,\n+        UITypes.Duration\n+      ].includes(this.uiDatatype)\n     }\n-\n   }\n }\n /**\n  * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n  *\n  * @author Naveen MR <oof1lab@gmail.com>\n  * @author Pranav C Balan <pranavxc@gmail.com>\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n  *\n  * @license GNU AGPL version 3 or any later version\n  *"
        },
        {
          "filename": "packages/nc-gui/components/project/spreadsheet/views/FormView.vue",
          "status": "modified",
          "additions": 7,
          "deletions": 21,
          "patch": "@@ -617,35 +617,21 @@ export default {\n       ) {\n         continue\n       }\n-      if (\n-        !column.virtual &&\n-        (((column.rqd || column.notnull) && !column.cdf) ||\n-          (column.pk && !(column.ai || column.default)) ||\n-          this.localParams.fields[column.title].required)\n-      ) {\n+      if (!isVirtualCol(column) && (((column.rqd || column.notnull) && !column.cdf) || (column.pk && !(column.ai || column.cdf)) || column.required)) {\n         obj.localState[column.title] = { required }\n-      } else if (column.bt) {\n-        const col = this.meta.columns.find(\n-          c => c.column_name === column.bt.column_name\n-        )\n-        if (\n-          (col.rqd && !col.default) ||\n-          this.localParams.fields[column.title].required\n-        ) {\n-          obj.localState[col.title] = { required }\n+      } else if (column.uidt === UITypes.LinkToAnotherRecord && column.colOptions && column.colOptions.type === RelationTypes.BELONGS_TO) {\n+        const col = this.meta.columns.find(c => c.id === column.colOptions.fk_child_column_id)\n+\n+        if ((col && col.rqd && !col.cdf) || column.required) {\n+          if (col) { obj.virtual[column.title] = { required } }\n         }\n-      } else if (\n-        column.virtual &&\n-        this.localParams.fields[column.title].required &&\n-        (column.mm || column.hm)\n-      ) {\n+      } else if (isVirtualCol(column) && column.required) {\n         obj.virtual[column.title] = {\n           minLength: minLength(1),\n           required\n         }\n       }\n     }\n-\n     return obj\n   },\n   computed: {"
        },
        {
          "filename": "packages/nc-gui/helpers/durationHelper.js",
          "status": "added",
          "additions": 192,
          "deletions": 0,
          "patch": "@@ -0,0 +1,192 @@\n+export const durationOptions = [\n+  {\n+    id: 0,\n+    title: 'h:mm',\n+    example: '(e.g. 1:23)',\n+    regex: /(\\d+)(?::(\\d+))?/\n+  }, {\n+    id: 1,\n+    title: 'h:mm:ss',\n+    example: '(e.g. 3:45, 1:23:40)',\n+    regex: /(\\d+)?(?::(\\d+))?(?::(\\d+))?/\n+  }, {\n+    id: 2,\n+    title: 'h:mm:ss.s',\n+    example: '(e.g. 3:34.6, 1:23:40.0)',\n+    regex: /(\\d+)?(?::(\\d+))?(?::(\\d+))?(?:.(\\d{0,4})?)?/\n+  }, {\n+    id: 3,\n+    title: 'h:mm:ss.ss',\n+    example: '(e.g. 3.45.67, 1:23:40.00)',\n+    regex: /(\\d+)?(?::(\\d+))?(?::(\\d+))?(?:.(\\d{0,4})?)?/\n+  }, {\n+    id: 4,\n+    title: 'h:mm:ss.sss',\n+    example: '(e.g. 3.45.678, 1:23:40.000)',\n+    regex: /(\\d+)?(?::(\\d+))?(?::(\\d+))?(?:.(\\d{0,4})?)?/\n+  }\n+]\n+\n+// pad zero\n+// mm && ss\n+// e.g.  3 -> 03\n+// e.g. 12 -> 12\n+// sss\n+// e.g.  1 -> 001\n+// e.g. 10 -> 010\n+const padZero = (val, isSSS = false) => {\n+  return (val + '').padStart(isSSS ? 3 : 2, '0')\n+}\n+\n+export const convertMS2Duration = (val, durationType) => {\n+  if (val === \"\" || val === null || val === undefined) { return val }\n+  // 600.000 s --> 10:00 (10 mins)\n+  const milliseconds = Math.round((val % 1) * 1000)\n+  const centiseconds = Math.round(milliseconds / 10)\n+  const deciseconds = Math.round(centiseconds / 10)\n+  const hours = Math.floor(parseInt(val, 10) / (60 * 60))\n+  const minutes = Math.floor((parseInt(val, 10) - (hours * 60 * 60)) / 60)\n+  const seconds = parseInt(val, 10) - (hours * 60 * 60) - (minutes * 60)\n+\n+  if (durationType === 0) {\n+    // h:mm\n+    return `${padZero(hours)}:${padZero(minutes + (seconds >= 30))}`\n+  } else if (durationType === 1) {\n+    // h:mm:ss\n+    return `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}`\n+  } else if (durationType === 2) {\n+    // h:mm:ss.s\n+    return `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}.${deciseconds}`\n+  } else if (durationType === 3) {\n+    // h:mm:ss.ss\n+    return `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}.${padZero(centiseconds)}`\n+  } else if (durationType === 4) {\n+    // h:mm:ss.sss\n+    return `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}.${padZero(milliseconds, true)}`\n+  }\n+  return val\n+}\n+\n+export const convertDurationToSeconds = (val, durationType) => {\n+  // 10:00 (10 mins) -> 600.000 s\n+  const res = {\n+    _ms: null,\n+    _isValid: true\n+  }\n+  const durationRegex = durationOptions[durationType].regex\n+  if (durationRegex.test(val)) {\n+    let h, mm, ss\n+    const groups = val.match(durationRegex)\n+    if (groups[0] && groups[1] && !groups[2] && !groups[3] && !groups[4]) {\n+      const val = parseInt(groups[1], 10)\n+      if (groups.input.slice(-1) === ':') {\n+        // e.g. 30:\n+        h = groups[1]\n+        mm = 0\n+        ss = 0\n+      } else if (durationType === 0) {\n+        // consider it as minutes\n+        // e.g. 360 -> 06:00\n+        h = Math.floor(val / 60)\n+        mm = Math.floor((val - ((h * 3600)) / 60))\n+        ss = 0\n+      } else {\n+        // consider it as seconds\n+        // e.g. 3600 -> 01:00:00\n+        h = Math.floor(groups[1] / 3600)\n+        mm = Math.floor(groups[1] / 60) % 60\n+        ss = val % 60\n+      }\n+    } else if (durationType !== 0 && groups[1] && groups[2] && !groups[3]) {\n+      // 10:10 means mm:ss instead of h:mm\n+      // 10:10:10 means h:mm:ss\n+      h = 0\n+      mm = groups[1]\n+      ss = groups[2]\n+    } else {\n+      h = groups[1] || 0\n+      mm = groups[2] || 0\n+      ss = groups[3] || 0\n+    }\n+\n+    if (durationType === 0) {\n+      // h:mm\n+      res._sec = h * 3600 + mm * 60\n+    } else if (durationType === 1) {\n+      // h:mm:ss\n+      res._sec = h * 3600 + mm * 60 + ss * 1\n+    } else if (durationType === 2) {\n+      // h:mm:ss.s (deciseconds)\n+      const ds = groups[4] || 0\n+      const len = Math.log(ds) * Math.LOG10E + 1 | 0\n+      const ms = (\n+        // e.g. len = 4: 1234 -> 1, 1456 -> 1\n+        // e.g. len = 3:  123 -> 1,  191 -> 2\n+        // e.g. len = 2:   12 -> 1 ,  16 -> 2\n+        len === 4\n+          ? Math.round(ds / 1000)\n+          : len === 3\n+            ? Math.round(ds / 100)\n+            : len === 2\n+              ? Math.round(ds / 10)\n+              // take whatever it is\n+              : ds\n+      ) * 100\n+      res._sec = h * 3600 + mm * 60 + ss * 1 + ms / 1000\n+    } else if (durationType === 3) {\n+      // h:mm:ss.ss (centiseconds)\n+      const cs = groups[4] || 0\n+      const len = Math.log(cs) * Math.LOG10E + 1 | 0\n+      const ms = (\n+        // e.g. len = 4: 1234 -> 12, 1285 -> 13\n+        // e.g. len = 3:  123 -> 12,  128 -> 13\n+        // check the third digit\n+        len === 4\n+          ? Math.round(cs / 100)\n+          : len === 3\n+            ? Math.round(cs / 10)\n+            // take whatever it is\n+            : cs\n+      ) * 10\n+      res._sec = h * 3600 + mm * 60 + ss * 1 + ms / 1000\n+    } else if (durationType === 4) {\n+      // h:mm:ss.sss (milliseconds)\n+      let ms = groups[4] || 0\n+      const len = Math.log(ms) * Math.LOG10E + 1 | 0\n+      ms = (\n+        // e.g. 1235 -> 124\n+        // e.g. 1234 -> 123\n+        len === 4\n+          ? Math.round(ms / 10)\n+          // take whatever it is\n+          : ms\n+      ) * 1\n+      res._sec = h * 3600 + mm * 60 + ss * 1 + ms / 1000\n+    }\n+  } else {\n+    res._isValid = false\n+  }\n+  return res\n+}\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */"
        },
        {
          "filename": "packages/nc-gui/lang/it_IT.json",
          "status": "modified",
          "additions": 145,
          "deletions": 145,
          "patch": "@@ -1,77 +1,77 @@\n {\n   \"general\": {\n-    \"home\": \"Casa\",\n-    \"load\": \"Caricare\",\n-    \"open\": \"Aprire\",\n-    \"close\": \"Vicino\",\n-    \"yes\": \"s\u00ec\",\n+    \"home\": \"Home\",\n+    \"load\": \"Carica\",\n+    \"open\": \"Apri\",\n+    \"close\": \"Chiudi\",\n+    \"yes\": \"S\u00ec\",\n     \"no\": \"No\",\n-    \"ok\": \"ok\",\n+    \"ok\": \"OK\",\n     \"and\": \"e\",\n     \"or\": \"o\",\n-    \"add\": \"Aggiungere\",\n-    \"edit\": \"Modificare\",\n-    \"remove\": \"Rimuovere\",\n+    \"add\": \"Aggiungi\",\n+    \"edit\": \"Modifica\",\n+    \"remove\": \"Rimuovi\",\n     \"save\": \"Salva\",\n     \"cancel\": \"Annulla\",\n     \"submit\": \"Invia\",\n     \"create\": \"Crea\",\n-    \"insert\": \"Inserire\",\n-    \"delete\": \"Eliminare\",\n-    \"update\": \"Aggiornare\",\n-    \"rename\": \"Rinominare\",\n-    \"reload\": \"Ricaricare\",\n+    \"insert\": \"Inserisci\",\n+    \"delete\": \"Elimina\",\n+    \"update\": \"Aggiorna\",\n+    \"rename\": \"Rinomina\",\n+    \"reload\": \"Ricarica\",\n     \"reset\": \"Ripristina\",\n-    \"install\": \"Installare\",\n-    \"show\": \"Spettacolo\",\n-    \"hide\": \"Nascondere\",\n+    \"install\": \"Installa\",\n+    \"show\": \"Mostra\",\n+    \"hide\": \"Nascondi\",\n     \"showAll\": \"Mostra tutto\",\n     \"hideAll\": \"Nascondi tutto\",\n     \"showMore\": \"Mostra di pi\u00f9\",\n     \"showOptions\": \"Mostra le opzioni\",\n-    \"hideOptions\": \"Nascondi opzioni\",\n-    \"showMenu\": \"Mostra menu.\",\n-    \"hideMenu\": \"Nascondere il menu\",\n+    \"hideOptions\": \"Nascondi le opzioni\",\n+    \"showMenu\": \"Mostra il menu\",\n+    \"hideMenu\": \"Nascondi il menu\",\n     \"addAll\": \"Aggiungi tutto\",\n     \"removeAll\": \"Rimuovi tutto\",\n-    \"signUp\": \"Iscriviti\",\n+    \"signUp\": \"REGISTRATI\",\n     \"signIn\": \"ACCEDI\",\n-    \"signOut\": \"Disconnessione\",\n+    \"signOut\": \"Esci\",\n     \"required\": \"Richiesto\",\n     \"preferred\": \"Preferito\",\n     \"mandatory\": \"Obbligatorio\",\n     \"loading\": \"Caricamento ...\",\n     \"title\": \"Titolo\",\n-    \"upload\": \"Caricamento\",\n-    \"download\": \"Scaricamento\",\n+    \"upload\": \"Carica\",\n+    \"download\": \"Scarica\",\n     \"default\": \"Predefinito\",\n     \"more\": \"Di pi\u00f9\",\n     \"less\": \"Meno\",\n     \"event\": \"Evento\",\n     \"condition\": \"Condizione\",\n     \"after\": \"Dopo\",\n     \"before\": \"Prima\",\n-    \"search\": \"Ricerca\",\n+    \"search\": \"Cerca\",\n     \"notification\": \"Notifica\",\n     \"reference\": \"Riferimento\",\n     \"function\": \"Funzione\"\n   },\n   \"objects\": {\n     \"project\": \"Progetto\",\n     \"projects\": \"Progetti\",\n-    \"table\": \"Tavolo\",\n+    \"table\": \"Tabella\",\n     \"tables\": \"Tabelle\",\n     \"field\": \"Campo\",\n     \"fields\": \"Campi\",\n     \"column\": \"Colonna\",\n     \"columns\": \"Colonne\",\n     \"page\": \"Pagina\",\n     \"pages\": \"Pagine\",\n-    \"record\": \"Disco\",\n-    \"records\": \"Record\",\n-    \"webhook\": \"Webhook.\",\n-    \"webhooks\": \"Webhooks.\",\n-    \"view\": \"Visualizzazione\",\n+    \"record\": \"Record\",\n+    \"records\": \"Records\",\n+    \"webhook\": \"Webhook\",\n+    \"webhooks\": \"Webhooks\",\n+    \"view\": \"Vista\",\n     \"views\": \"Viste\",\n     \"viewType\": {\n       \"grid\": \"Griglia\",\n@@ -97,39 +97,39 @@\n     \"ForeignKey\": \"Chiave straniera\",\n     \"SingleLineText\": \"Testo a riga singola\",\n     \"LongText\": \"Testo lungo\",\n-    \"Attachment\": \"Attaccamento\",\n+    \"Attachment\": \"Allegato\",\n     \"Checkbox\": \"Casella di controllo\",\n     \"MultiSelect\": \"Selezione multipla\",\n-    \"SingleSelect\": \"Seleziona singola\",\n+    \"SingleSelect\": \"Selezione singola\",\n     \"Collaborator\": \"Collaboratore\",\n     \"Date\": \"Data\",\n     \"Year\": \"Anno\",\n-    \"Time\": \"Volta\",\n+    \"Time\": \"Orario\",\n     \"PhoneNumber\": \"Numero di telefono\",\n     \"Email\": \"E-mail\",\n     \"URL\": \"URL\",\n     \"Number\": \"Numero\",\n     \"Decimal\": \"Decimale\",\n     \"Currency\": \"Moneta\",\n-    \"Percent\": \"Per cento\",\n+    \"Percent\": \"Percento\",\n     \"Duration\": \"Durata\",\n     \"Rating\": \"Valutazione\",\n     \"Formula\": \"Formula\",\n-    \"Rollup\": \"Rollup.\",\n-    \"Count\": \"Contare\",\n-    \"Lookup\": \"Consultare\",\n-    \"DateTime\": \"Appuntamento\",\n-    \"CreateTime\": \"Creare tempo\",\n-    \"LastModifiedTime\": \"Ultimo tempo modificato\",\n-    \"AutoNumber\": \"Numero Auto.\",\n-    \"Barcode\": \"Codici a barre\",\n+    \"Rollup\": \"Rollup\",\n+    \"Count\": \"Contatore\",\n+    \"Lookup\": \"Consultazione\",\n+    \"DateTime\": \"Data e ora\",\n+    \"CreateTime\": \"Data di creazione\",\n+    \"LastModifiedTime\": \"Data di ultima modifica\",\n+    \"AutoNumber\": \"Numerazione automatica\",\n+    \"Barcode\": \"Codice a barre\",\n     \"Button\": \"Pulsante\",\n-    \"Password\": \"Parola d'ordine\",\n+    \"Password\": \"Password\",\n     \"relationProperties\": {\n       \"noAction\": \"Nessuna azione\",\n       \"cascade\": \"Cascata\",\n-      \"restrict\": \"Limitare\",\n-      \"setNull\": \"Set null.\",\n+      \"restrict\": \"Limitata\",\n+      \"setNull\": \"Lascia vuoto\",\n       \"setDefault\": \"Imposta default\"\n     }\n   },\n@@ -140,79 +140,79 @@\n     \"isNot like\": \"non \u00e8 come\",\n     \"isEmpty\": \"\u00e8 vuoto\",\n     \"isNotEmpty\": \"non \u00e8 vuoto\",\n-    \"isNull\": \"\u00e8 zero\",\n+    \"isNull\": \"\u00e8 nullo\",\n     \"isNotNull\": \"non \u00e8 nullo\"\n   },\n   \"title\": {\n     \"newProj\": \"Nuovo progetto\",\n     \"myProject\": \"I miei progetti\",\n     \"formTitle\": \"Titolo del modulo\",\n     \"collabView\": \"Vista collaborativa\",\n-    \"lockedView\": \"Vista chiusa\",\n+    \"lockedView\": \"Vista bloccata\",\n     \"personalView\": \"Vista personale\",\n     \"appStore\": \"App Store\",\n-    \"teamAndAuth\": \"Team & Autorizzazioni\",\n+    \"teamAndAuth\": \"Team e Autorizzazioni\",\n     \"rolesUserMgmt\": \"Gestione dei ruoli e degli utenti\",\n     \"userMgmt\": \"Gestione degli utenti\",\n     \"apiTokenMgmt\": \"Gestione dei token API\",\n     \"rolesMgmt\": \"Gestione dei ruoli\",\n     \"projMeta\": \"Metadati del progetto\",\n     \"metaMgmt\": \"Gestione metadati\",\n     \"metadata\": \"Metadati\",\n-    \"exportImportMeta\": \"Esportazione / importazione metadati\",\n-    \"uiACL\": \"Controllo degli accessi ui.\",\n+    \"exportImportMeta\": \"Esporta / Importa metadati\",\n+    \"uiACL\": \"Controllo degli accessi interfaccia grafica (ACL)\",\n     \"metaOperations\": \"Operazioni sui metadati\",\n-    \"audit\": \"Audit.\",\n-    \"auditLogs\": \"Registro di audizione\",\n-    \"sqlMigrations\": \"Migrazioni SQL.\",\n+    \"audit\": \"Audit\",\n+    \"auditLogs\": \"Registro audit\",\n+    \"sqlMigrations\": \"Migrazioni SQL\",\n     \"dbCredentials\": \"Credenziali del database\",\n     \"advancedParameters\": \"SSL e parametri avanzati\",\n     \"headCreateProject\": \"Crea progetto | NocoDB\",\n     \"headLogin\": \"Accedi | NocoDB\",\n     \"resetPassword\": \"Reimposta la tua password\",\n-    \"teamAndSettings\": \"Team & Settings\",\n-    \"apiDocs\": \"API Docs\",\n-    \"importFromAirtable\": \"Import From Airtable\"\n+    \"teamAndSettings\": \"Team e Impostazioni\",\n+    \"apiDocs\": \"Documentazione API\",\n+    \"importFromAirtable\": \"Importa da Airtable\"\n   },\n   \"labels\": {\n-    \"notifyVia\": \"Notifica via.\",\n+    \"notifyVia\": \"Notifica tramite\",\n     \"projName\": \"Nome del progetto\",\n     \"tableName\": \"Nome della tabella\",\n-    \"viewName\": \"Visualizza nome.\",\n-    \"viewLink\": \"Visualizza link.\",\n+    \"viewName\": \"Visualizza nome\",\n+    \"viewLink\": \"Visualizza link\",\n     \"columnName\": \"Nome della colonna\",\n     \"columnType\": \"Tipo di colonna\",\n     \"roleName\": \"Nome del ruolo\",\n     \"roleDescription\": \"Descrizione del ruolo\",\n-    \"databaseType\": \"Digita il database\",\n-    \"lengthValue\": \"Lunghezza / valore\",\n+    \"databaseType\": \"Digita nel database\",\n+    \"lengthValue\": \"Lunghezza / Valore\",\n     \"dbType\": \"Tipo di database\",\n     \"sqliteFile\": \"File di SQLite\",\n-    \"hostAddress\": \"Indirizzo host\",\n+    \"hostAddress\": \"Indirizzo dell'host\",\n     \"port\": \"Numero di porta\",\n     \"username\": \"Nome utente\",\n     \"password\": \"Password\",\n-    \"schemaName\": \"Schema name\",\n+    \"schemaName\": \"Nome schema\",\n     \"action\": \"Azione\",\n     \"actions\": \"Azioni\",\n     \"operation\": \"Operazione\",\n-    \"operationType\": \"Tipo di funzionamento\",\n-    \"operationSubType\": \"Operazione Sub-Type\",\n+    \"operationType\": \"Tipo di operazioni\",\n+    \"operationSubType\": \"Sottotipo di operazioni\",\n     \"description\": \"Descrizione\",\n     \"authentication\": \"Autenticazione\",\n-    \"token\": \"Gettone\",\n+    \"token\": \"Chiave (Token)\",\n     \"where\": \"Dove\",\n-    \"cache\": \"Cache.\",\n-    \"chat\": \"Chiacchierata\",\n+    \"cache\": \"Cache\",\n+    \"chat\": \"Chat\",\n     \"email\": \"E-mail\",\n-    \"storage\": \"Conservazione\",\n+    \"storage\": \"Archiviazione\",\n     \"uiAcl\": \"UI-ACL\",\n     \"models\": \"Modelli\",\n-    \"syncState\": \"Sincronizza State.\",\n+    \"syncState\": \"Sincronizza stato\",\n     \"created\": \"Creato\",\n-    \"sqlOutput\": \"Uscita SQL.\",\n-    \"addOption\": \"Aggiungi opzione.\",\n-    \"aggregateFunction\": \"Funzione aggregata\",\n+    \"sqlOutput\": \"Output SQL\",\n+    \"addOption\": \"Aggiungi opzione\",\n+    \"aggregateFunction\": \"Aggrega funzione\",\n     \"dbCreateIfNotExists\": \"Database: crea se non esiste\",\n     \"clientKey\": \"Chiave client\",\n     \"clientCert\": \"Certificato client\",\n@@ -224,25 +224,25 @@\n       \"columnName\": \"Inflessione - Nome della colonna\"\n     },\n     \"community\": {\n-      \"starUs1\": \"Dacci una stella\",\n+      \"starUs1\": \"Mettici una stella\",\n       \"starUs2\": \"su Github\",\n       \"bookDemo\": \"Prenota una demo gratuita\",\n       \"getAnswered\": \"Ottieni risposte alle tue domande\",\n       \"joinDiscord\": \"Unisciti su Discord\",\n-      \"joinCommunity\": \"Join NocoDB Community\",\n-      \"joinReddit\": \"Iscriviti /r/NocoDB\",\n+      \"joinCommunity\": \"Unisciti alla community di NocoDB\",\n+      \"joinReddit\": \"Unisciti a /r/NocoDB su Reddit\",\n       \"followNocodb\": \"Segui NocoDB\"\n     },\n     \"docReference\": \"Riferimento del documento\",\n     \"selectUserRole\": \"Seleziona il ruolo utente\",\n-    \"childTable\": \"Tavolo da bambino\",\n-    \"childColumn\": \"Colonna del bambino\",\n-    \"onUpdate\": \"Su Aggiorna.\",\n-    \"onDelete\": \"Su Elimina\"\n+    \"childTable\": \"Sottotabella\",\n+    \"childColumn\": \"Sottocolonna\",\n+    \"onUpdate\": \"All'aggiornamento\",\n+    \"onDelete\": \"All'eliminazione\"\n   },\n   \"activity\": {\n     \"createProject\": \"Crea progetto\",\n-    \"importProject\": \"Progetto di importazione\",\n+    \"importProject\": \"Importa progetto\",\n     \"searchProject\": \"Cerca progetto\",\n     \"editProject\": \"Modifica progetto\",\n     \"stopProject\": \"Interrompi progetto\",\n@@ -254,7 +254,7 @@\n     \"createProjectExtended\": {\n       \"extDB\": \"Crea collegandoti <br>ad un database esterno\",\n       \"excel\": \"Crea un progetto da Excel\",\n-      \"template\": \"Crea progetto dal modello\"\n+      \"template\": \"Crea progetto da un modello\"\n     },\n     \"OkSaveProject\": \"OK & Salva progetto\",\n     \"upgrade\": {\n@@ -279,14 +279,14 @@\n       \"enable\": \"Chiunque con il link\",\n       \"link\": \"Collegamento base condiviso\"\n     },\n-    \"invite\": \"Invitare\",\n+    \"invite\": \"Invita\",\n     \"inviteMore\": \"Invita di pi\u00f9\",\n-    \"inviteTeam\": \"Invita il team.\",\n-    \"inviteToken\": \"Invita il token.\",\n+    \"inviteTeam\": \"Invita un team.\",\n+    \"inviteToken\": \"Invita con una chiave\",\n     \"newUser\": \"Nuovo utente\",\n     \"editUser\": \"Modifica utente\",\n     \"deleteUser\": \"Rimuovi utente dal progetto\",\n-    \"resendInvite\": \"Inserisci inviti e-mail\",\n+    \"resendInvite\": \"Reinvia e-mail di invito\",\n     \"copyInviteURL\": \"Copia l'URL dell'invito\",\n     \"newRole\": \"Nuovo ruolo\",\n     \"reloadRoles\": \"Ricarica ruoli\",\n@@ -295,10 +295,10 @@\n     \"nextRecord\": \"Prossimo record.\",\n     \"previousRecord\": \"Record precedente\",\n     \"copyApiURL\": \"Copia l'URL delle API\",\n-    \"createTable\": \"Creare la tabella.\",\n-    \"refreshTable\": \"Tavoli aggiornati\",\n-    \"renameTable\": \"Tabella Rinomina.\",\n-    \"deleteTable\": \"Tabella Elimina.\",\n+    \"createTable\": \"Crea tabella.\",\n+    \"refreshTable\": \"Aggiorna tabella\",\n+    \"renameTable\": \"Rinomina tabella\",\n+    \"deleteTable\": \"Elimina tabella\",\n     \"addField\": \"Aggiungi un nuovo campo a questa tabella\",\n     \"setPrimary\": \"Impostare come valore primario\",\n     \"addRow\": \"Aggiungi nuova riga\",\n@@ -308,30 +308,30 @@\n     \"deleteSelectedRow\": \"Elimina righe selezionate\",\n     \"importExcel\": \"Importa Excel.\",\n     \"importCSV\": \"Import CSV\",\n-    \"downloadCSV\": \"Scarica come csv.\",\n-    \"uploadCSV\": \"Carica csv.\",\n+    \"downloadCSV\": \"Scarica come CSV.\",\n+    \"uploadCSV\": \"Carica CSV.\",\n     \"import\": \"Importa\",\n     \"importMetadata\": \"Importa metadati\",\n     \"exportMetadata\": \"Esporta metadati\",\n     \"clearMetadata\": \"Cancella metadati\",\n     \"exportToFile\": \"Esporta su file\",\n-    \"changePwd\": \"Cambiare la password\",\n+    \"changePwd\": \"Cambia password\",\n     \"createView\": \"Crea una vista\",\n     \"shareView\": \"Condividi vista\",\n     \"listSharedView\": \"Elenco di visualizzazione condivisa\",\n     \"ListView\": \"Lista viste\",\n     \"copyView\": \"Copia vista\",\n     \"renameView\": \"Rinomina vista\",\n     \"deleteView\": \"Elimina vista\",\n-    \"createGrid\": \"Creare Grid View.\",\n-    \"createGallery\": \"Crea vista Galleria\",\n-    \"createCalendar\": \"Crea vista del calendario\",\n+    \"createGrid\": \"Crea vista griglia\",\n+    \"createGallery\": \"Crea vista galleria\",\n+    \"createCalendar\": \"Crea vista calendario\",\n     \"createKanban\": \"Crea vista Kanban.\",\n     \"createForm\": \"Crea vista modulo\",\n     \"showSystemFields\": \"Mostra campi di sistema\",\n     \"copyUrl\": \"Copia URL.\",\n-    \"openTab\": \"Apri la nuova scheda\",\n-    \"iFrame\": \"Copia codice HTML incorporato\",\n+    \"openTab\": \"Apri una nuova scheda\",\n+    \"iFrame\": \"Copia codice HTML incorporabile\",\n     \"addWebhook\": \"Aggiungi nuovo webhook.\",\n     \"newToken\": \"Aggiungi nuovo token.\",\n     \"exportZip\": \"Esporta zip\",\n@@ -340,36 +340,36 @@\n     \"settings\": \"Impostazioni\",\n     \"previewAs\": \"Anteprima come\",\n     \"resetReview\": \"Ripristina anteprima\",\n-    \"testDbConn\": \"Testa connessione al database\",\n+    \"testDbConn\": \"Verifica connessione al database\",\n     \"removeDbFromEnv\": \"Rimuovi il database dall'ambiente\",\n     \"editConnJson\": \"Modifica JSON della connessione\",\n     \"sponsorUs\": \"Sponsorizzaci\",\n     \"sendEmail\": \"INVIA EMAIL\"\n   },\n   \"tooltip\": {\n-    \"saveChanges\": \"Salvare le modifiche\",\n+    \"saveChanges\": \"Salva le modifiche\",\n     \"xcDB\": \"Crea un nuovo progetto\",\n     \"extDB\": \"Supporta MySQL, PostgreSQL, SQL Server & SQLite\",\n     \"apiRest\": \"Accessibile tramite API REST\",\n     \"apiGQL\": \"Accessibile tramite API GraphQL\",\n     \"theme\": {\n-      \"dark\": \"Viene in nero (^ \u21e7b)\",\n-      \"light\": \"Viene in nero? (^ \u21e7b)\"\n+      \"dark\": \"C'\u00e8 la modalit\u00e0 scura (^ \u21e7b)\",\n+      \"light\": \"C'\u00e8 la modalit\u00e0 scura? (^ \u21e7b)\"\n     },\n     \"addTable\": \"Aggiungi nuova tabella\",\n     \"inviteMore\": \"Invita pi\u00f9 utenti\",\n-    \"toggleNavDraw\": \"Disattivazione del cassetto di navigazione\",\n-    \"reloadApiToken\": \"Ricarica i token API.\",\n-    \"generateNewApiToken\": \"Genera nuovo token API\",\n+    \"toggleNavDraw\": \"Attiva / Disattiva il pannello di navigazione\",\n+    \"reloadApiToken\": \"Ricarica le chiavi API.\",\n+    \"generateNewApiToken\": \"Genera nuova chiave API\",\n     \"addRole\": \"Aggiungi un nuovo ruolo\",\n-    \"reloadList\": \"Elenco di ricarica\",\n-    \"metaSync\": \"Sincronizzazione metadati.\",\n+    \"reloadList\": \"Ricarica lista\",\n+    \"metaSync\": \"Sincronizza metadati\",\n     \"sqlMigration\": \"Ricarica le migrazioni\",\n     \"updateRestart\": \"Aggiorna e riavvia\",\n     \"cancelReturn\": \"Annulla e torna indietro\",\n-    \"exportMetadata\": \"Esporta tutti i metadati dalle tabelle meta alla cartella meta.\",\n-    \"importMetadata\": \"Importa tutti i metadati dalla cartella meta alle tabelle meta.\",\n-    \"clearMetadata\": \"Cancella tutti i metadati dalle tabelle meta.\",\n+    \"exportMetadata\": \"Esporta tutti i metadati dalla sopratabella alla sopracartella\",\n+    \"importMetadata\": \"Importa tutti i metadati dalla sopracartella alla sopratabella\",\n+    \"clearMetadata\": \"Cancella tutti i metadati dalle sopratabelle\",\n     \"clientKey\": \"Seleziona file .key\",\n     \"clientCert\": \"Seleziona file .cert\",\n     \"clientCA\": \"Seleziona file CA\"\n@@ -386,59 +386,59 @@\n     \"searchProjectTree\": \"Cerca tabelle\",\n     \"searchFields\": \"Campi di ricerca\",\n     \"searchColumn\": \"Cerca {Cerca} colonna\",\n-    \"searchApps\": \"Cerca apps.\",\n+    \"searchApps\": \"Cerca app\",\n     \"searchModels\": \"Modelli di ricerca\",\n-    \"noItemsFound\": \"Nessun articolo trovato\",\n+    \"noItemsFound\": \"Nessun elemento trovato\",\n     \"defaultValue\": \"Valore di default\",\n     \"filterByEmail\": \"Filtra per e-mail\"\n   },\n   \"msg\": {\n     \"info\": {\n       \"footerInfo\": \"Righe per pagina\",\n       \"upload\": \"Seleziona il file da caricare\",\n-      \"upload_sub\": \"o trascinare e rilasciare il file\",\n-      \"excelSupport\": \"Supportato: .xls, .xlsx, .xlsm, .ods, .ots\",\n+      \"upload_sub\": \"o trascinalo qui\",\n+      \"excelSupport\": \"Tipi supportati: .xls, .xlsx, .xlsm, .ods, .ots\",\n       \"excelURL\": \"Inserisci l'URL del file Excel\",\n       \"csvURL\": \"Enter CSV file URL\",\n-      \"footMsg\": \"# di righe per analizzare per dedurre il tipo di dati\",\n+      \"footMsg\": \"Numero di righe per analizzare per dedurre il tipo di dati\",\n       \"excelImport\": \"foglio (i) sono disponibili per l'importazione\",\n-      \"exportMetadata\": \"Vuoi esportare i metadati da Meta Tables?\",\n-      \"importMetadata\": \"Vuoi importare i metadati da Meta Tables?\",\n-      \"clearMetadata\": \"Vuoi cancellare i metadati da Meta Tables?\",\n+      \"exportMetadata\": \"Vuoi esportare i metadati dalle sopracartelle?\",\n+      \"importMetadata\": \"Vuoi importare i metadati dalle sopracartelle?\",\n+      \"clearMetadata\": \"Vuoi cancellare i metadati dalle sopracartelle?\",\n       \"projectEmptyMessage\": \"Inizia creando un nuovo progetto\",\n       \"stopProject\": \"Vuoi fermare il progetto?\",\n-      \"startProject\": \"Vuoi iniziare il progetto?\",\n+      \"startProject\": \"Vuoi avviare il progetto?\",\n       \"restartProject\": \"Vuoi riavviare il progetto?\",\n       \"deleteProject\": \"Vuoi cancellare il progetto?\",\n-      \"shareBasePrivate\": \"Genera base readonly condivisibile pubblicamente condivisa\",\n+      \"shareBasePrivate\": \"Genera base readonly condivisibile pubblicamente\",\n       \"shareBasePublic\": \"Chiunque su Internet con questo link pu\u00f2 visualizzare\",\n-      \"userInviteNoSMTP\": \"Sembra che non abbia ancora configurato mailer!\\nSi prega di copiare sopra Invita link e invialo a\",\n-      \"dragDropHide\": \"Trascina e rilascia i campi qui per nascondersi\",\n+      \"userInviteNoSMTP\": \"Sembra che non abbia ancora configurato il mailer! \\\\n Manda il link d'invito sopra a\",\n+      \"dragDropHide\": \"Rilascia qui i campi da nascondere\",\n       \"formInput\": \"Inserisci l'etichetta di input del modulo\",\n-      \"formHelpText\": \"Aggiungi un po 'di testo di aiuto\",\n+      \"formHelpText\": \"Aggiungi testo di aiuto\",\n       \"onlyCreator\": \"Solo visibile al creatore\",\n-      \"formDesc\": \"Aggiungi modulo Descrizione\",\n-      \"beforeEnablePwd\": \"Limitare l'accesso con una password\",\n+      \"formDesc\": \"Aggiungi descrizione del modulo\",\n+      \"beforeEnablePwd\": \"Limita l'accesso con una password\",\n       \"afterEnablePwd\": \"L'accesso \u00e8 protetto da una password\",\n       \"privateLink\": \"Questa vista \u00e8 condivisa tramite un collegamento privato\",\n       \"privateLinkAdditionalInfo\": \"Le persone con collegamento privato possono vedere solo le celle visibili in questa vista\",\n-      \"afterFormSubmitted\": \"Dopo la forma \u00e8 presentato\",\n+      \"afterFormSubmitted\": \"Dopo che il modulo \u00e8 stato inviato\",\n       \"apiOptions\": \"Accedi al progetto tramite\",\n       \"submitAnotherForm\": \"Mostra \\\"Invia un altro modulo\\\"\",\n       \"showBlankForm\": \"Mostra un modulo vuoto dopo 5 secondi\",\n-      \"emailForm\": \"E-mail me a\",\n+      \"emailForm\": \"Mandami un'e-mail a\",\n       \"showSysFields\": \"Mostra campi di sistema\",\n       \"filterAutoApply\": \"Auto Apply.\",\n       \"showMessage\": \"Mostra questo messaggio\",\n       \"viewNotShared\": \"La vista corrente non \u00e8 condivisa!\",\n       \"showAllViews\": \"Mostra tutte le viste condivise di questa tabella\",\n-      \"collabView\": \"I collaboratori con autorizzazioni di modifica o superiore possono modificare la configurazione di visualizzazione.\",\n-      \"lockedView\": \"Nessuno pu\u00f2 modificare la configurazione di visualizzazione finch\u00e9 non \u00e8 sbloccata.\",\n-      \"personalView\": \"Solo \u00e8 possibile modificare la configurazione di visualizzazione. Le viste personali di altri collaboratori sono nascoste per impostazione predefinita.\",\n-      \"ownerDesc\": \"Pu\u00f2 aggiungere / rimuovere i creatori. E strutture di database di modifica completa e campi.\",\n+      \"collabView\": \"I collaboratori con autorizzazioni di modifica o superiore possono modificare la configurazione della vista\",\n+      \"lockedView\": \"Nessuno pu\u00f2 modificare la configurazione della vista finch\u00e9 non \u00e8 sbloccata.\",\n+      \"personalView\": \"Solo tu puoi modificare la visualizzazione della vista. Le viste personali degli altri collaboratori sono nascoste di default\",\n+      \"ownerDesc\": \"Pu\u00f2 aggiungere / rimuovere i creatori. E modificare completamente strutture e campi\",\n       \"creatorDesc\": \"Pu\u00f2 modificare completamente la struttura e i valori del database.\",\n-      \"editorDesc\": \"Pu\u00f2 modificare i record ma non pu\u00f2 cambiare la struttura del database / campi.\",\n-      \"commenterDesc\": \"Pu\u00f2 visualizzare e commentare i record ma non \u00e8 possibile modificare nulla\",\n+      \"editorDesc\": \"Pu\u00f2 modificare i record ma non pu\u00f2 cambiare la struttura del database / dei campi.\",\n+      \"commenterDesc\": \"Pu\u00f2 visualizzare e commentare i record ma non pu\u00f2 modificare nulla\",\n       \"viewerDesc\": \"Pu\u00f2 visualizzare i record ma non pu\u00f2 modificare nulla\",\n       \"addUser\": \"Aggiungi nuovo utente\",\n       \"staticRoleInfo\": \"I ruoli definiti dal sistema non possono essere modificati\",\n@@ -455,7 +455,7 @@\n       },\n       \"sponsor\": {\n         \"header\": \"Puoi aiutarci!\",\n-        \"message\": \"Siamo un piccolo team che lavora a tempo pieno per rendere l'open-source di NOCODB. Crediamo che uno strumento come NOCODB dovrebbe essere disponibile liberamente per ogni risolutore di problemi su Internet.\"\n+        \"message\": \"Siamo un piccolo team che lavora a tempo pieno per rendere NocoDB open-source. Crediamo che uno strumento come NocoDB dovrebbe essere disponibile liberamente per problem-solver su Internet.\"\n       },\n       \"loginMsg\": \"Accedi a NocoDB\",\n       \"passwordRecovery\": {\n@@ -478,8 +478,8 @@\n         \"kanban\": \"Aggiungi vista kanban\",\n         \"calendar\": \"Aggiungi vista calendario\"\n       },\n-      \"tablesMetadataInSync\": \"Le tabelle i metadati sono sincronizzati\",\n-      \"addMultipleUsers\": \"Puoi aggiungere pi\u00f9 e-mail di virgola (,) separate\",\n+      \"tablesMetadataInSync\": \"I metadati delle tabelle sono sincronizzati\",\n+      \"addMultipleUsers\": \"Puoi aggiungere pi\u00f9 e-mail separate da virgole(,)\",\n       \"enterTableName\": \"Inserisci il nome della tabella\",\n       \"addDefaultColumns\": \"Aggiungi colonne predefinite\",\n       \"tableNameInDb\": \"Nome della tabella come salvato nel database\"\n@@ -488,8 +488,8 @@\n       \"searchProject\": \"La tua ricerca di {search} non ha trovato risultati\",\n       \"invalidChar\": \"Carattere non valido nel percorso della cartella.\",\n       \"invalidDbCredentials\": \"Credenziali del database non valide.\",\n-      \"unableToConnectToDb\": \"Impossibile connettersi al database, controllare che il database sia attivo.\",\n-      \"userDoesntHaveSufficientPermission\": \"L'utente non esiste o non dispone di autorizzazioni sufficienti per creare schema.\",\n+      \"unableToConnectToDb\": \"Impossibile connettersi al database, controllare che il database sia avviato.\",\n+      \"userDoesntHaveSufficientPermission\": \"L'utente non esiste o non dispone di autorizzazioni sufficienti per creare uno schema.\",\n       \"dbConnectionStatus\": \"Parametri del database non validi\",\n       \"dbConnectionFailed\": \"Connessione fallita:\",\n       \"signUpRules\": {\n@@ -502,15 +502,15 @@\n     \"toast\": {\n       \"exportMetadata\": \"Metadati del progetto esportati con successo\",\n       \"importMetadata\": \"Metadati del progetto importati con successo\",\n-      \"clearMetadata\": \"I metadati del progetto hanno cancellato con successo\",\n-      \"stopProject\": \"Il progetto si \u00e8 fermato con successo\",\n-      \"startProject\": \"Il progetto \u00e8 iniziato con successo\",\n+      \"clearMetadata\": \"Metadati del progetto cancellati con successo\",\n+      \"stopProject\": \"Progetto fermato con successo\",\n+      \"startProject\": \"Progetto avviato con successo\",\n       \"restartProject\": \"Progetto riavviato con successo\",\n       \"deleteProject\": \"Progetto cancellato con successo\",\n-      \"authToken\": \"Autunque Token copiava negli Appunti\",\n+      \"authToken\": \"Chiave di autenticazione copiata negli Appunti\",\n       \"projInfo\": \"Informazioni del progetto copiate negli Appunti\",\n-      \"inviteUrlCopy\": \"Copiato Invita URL negli Appunti\",\n-      \"createView\": \"Visualizza creato con successo\",\n+      \"inviteUrlCopy\": \"Copiato URL di invito negli Appunti\",\n+      \"createView\": \"Vista creata con successo\",\n       \"formEmailSMTP\": \"Si prega di attivare il plugin SMTP in App Store per abilitare la notifica e-mail\",\n       \"collabView\": \"Passato correttamente alla vista collaborativa\",\n       \"lockedView\": \"Passato correttamente alla vista bloccata\","
        },
        {
          "filename": "packages/nc-gui/package-lock.json",
          "status": "modified",
          "additions": 28,
          "deletions": 16,
          "patch": "@@ -28,7 +28,7 @@\n         \"monaco-editor\": \"^0.19.3\",\n         \"monaco-themes\": \"^0.2.5\",\n         \"nano-assign\": \"^1.0.1\",\n-        \"nocodb-sdk\": \"0.91.10\",\n+        \"nocodb-sdk\": \"file:../nocodb-sdk\",\n         \"nuxt\": \"^2.14.0\",\n         \"odometer\": \"^0.4.8\",\n         \"papaparse\": \"^5.3.1\",\n@@ -76,7 +76,6 @@\n     },\n     \"../nocodb-sdk\": {\n       \"version\": \"0.91.10\",\n-      \"extraneous\": true,\n       \"license\": \"MIT\",\n       \"dependencies\": {\n         \"axios\": \"^0.21.1\",\n@@ -10899,16 +10898,8 @@\n       }\n     },\n     \"node_modules/nocodb-sdk\": {\n-      \"version\": \"0.91.10\",\n-      \"resolved\": \"https://registry.npmjs.org/nocodb-sdk/-/nocodb-sdk-0.91.10.tgz\",\n-      \"integrity\": \"sha512-mdddLp+HgpPJwrKwmZrOPvjHaEbKbjdUP8vkJ9icQPXTJizclPBLugKhvp2hPlNPfJ3BIdfAj38RKBYlFu+now==\",\n-      \"dependencies\": {\n-        \"axios\": \"^0.21.1\",\n-        \"jsep\": \"^1.3.6\"\n-      },\n-      \"engines\": {\n-        \"node\": \">=10\"\n-      }\n+      \"resolved\": \"../nocodb-sdk\",\n+      \"link\": true\n     },\n     \"node_modules/node-fetch\": {\n       \"version\": \"2.6.7\",\n@@ -26326,12 +26317,33 @@\n       }\n     },\n     \"nocodb-sdk\": {\n-      \"version\": \"0.91.10\",\n-      \"resolved\": \"https://registry.npmjs.org/nocodb-sdk/-/nocodb-sdk-0.91.10.tgz\",\n-      \"integrity\": \"sha512-mdddLp+HgpPJwrKwmZrOPvjHaEbKbjdUP8vkJ9icQPXTJizclPBLugKhvp2hPlNPfJ3BIdfAj38RKBYlFu+now==\",\n+      \"version\": \"file:../nocodb-sdk\",\n       \"requires\": {\n+        \"@ava/typescript\": \"^1.1.1\",\n+        \"@istanbuljs/nyc-config-typescript\": \"^1.0.1\",\n+        \"@typescript-eslint/eslint-plugin\": \"^4.0.1\",\n+        \"@typescript-eslint/parser\": \"^4.0.1\",\n+        \"ava\": \"^3.12.1\",\n         \"axios\": \"^0.21.1\",\n-        \"jsep\": \"^1.3.6\"\n+        \"codecov\": \"^3.5.0\",\n+        \"cspell\": \"^4.1.0\",\n+        \"cz-conventional-changelog\": \"^3.3.0\",\n+        \"eslint\": \"^7.8.0\",\n+        \"eslint-config-prettier\": \"^6.11.0\",\n+        \"eslint-plugin-eslint-comments\": \"^3.2.0\",\n+        \"eslint-plugin-functional\": \"^3.0.2\",\n+        \"eslint-plugin-import\": \"^2.22.0\",\n+        \"eslint-plugin-prettier\": \"^4.0.0\",\n+        \"gh-pages\": \"^3.1.0\",\n+        \"jsep\": \"^1.3.6\",\n+        \"npm-run-all\": \"^4.1.5\",\n+        \"nyc\": \"^15.1.0\",\n+        \"open-cli\": \"^6.0.1\",\n+        \"prettier\": \"^2.1.1\",\n+        \"standard-version\": \"^9.0.0\",\n+        \"ts-node\": \"^9.0.0\",\n+        \"typedoc\": \"^0.19.0\",\n+        \"typescript\": \"^4.0.2\"\n       }\n     },\n     \"node-fetch\": {"
        },
        {
          "filename": "packages/nc-gui/package.json",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -31,7 +31,7 @@\n     \"monaco-editor\": \"^0.19.3\",\n     \"monaco-themes\": \"^0.2.5\",\n     \"nano-assign\": \"^1.0.1\",\n-    \"nocodb-sdk\": \"0.91.10\",\n+    \"nocodb-sdk\": \"file:../nocodb-sdk\",\n     \"nuxt\": \"^2.14.0\",\n     \"odometer\": \"^0.4.8\",\n     \"papaparse\": \"^5.3.1\","
        },
        {
          "filename": "packages/nc-gui/pages/project/id.vue",
          "status": "modified",
          "additions": 5,
          "deletions": 2,
          "patch": "@@ -84,7 +84,7 @@\n                   <v-text-field\n                     v-model=\"project.title\"\n                     v-ge=\"['project','name']\"\n-                    :rules=\"form.titleRequiredRule\"\n+                    :rules=\"form.titleValidationRule\"\n                     :height=\"20\"\n                     label=\"Enter Project Name\"\n                     autofocus\n@@ -650,7 +650,10 @@ export default {\n       /** ************** START : form related ****************/\n       form: {\n         portValidationRule: [v => /^\\d+$/.test(v) || 'Not a valid port'],\n-        titleRequiredRule: [v => !!v || 'Title is required'],\n+        titleValidationRule: [\n+          v => !!v || 'Title is required',\n+          v => v.length <= 50 || 'Project name exceeds 50 characters',\n+        ],\n         requiredRule: [v => !!v || 'Field is required'],\n         folderRequiredRule: [v => !!v || 'Folder path is required']\n       },"
        },
        {
          "filename": "packages/nc-gui/pages/project/xcdb.vue",
          "status": "modified",
          "additions": 8,
          "deletions": 2,
          "patch": "@@ -39,7 +39,7 @@\n               :full-width=\"false\"\n               class=\"nc-metadb-project-name\"\n               :label=\"$t('placeholder.projName')\"\n-              :rules=\"[v => !!v || $t('general.required')]\"\n+              :rules=\"form.titleValidationRule\"\n             />\n \n             <!--            <div class=\"wrapper mb-5 mt-5\">\n@@ -109,7 +109,13 @@ export default {\n            icon: require('@/assets/img/grpc-icon-color.png'),\n            type: 'img'\n          }, */\n-    ]\n+    ],\n+    form: {\n+      titleValidationRule: [\n+        v => !!v || 'Title is required',\n+        v => v.length <= 50 || 'Project name exceeds 50 characters',\n+      ],\n+    },\n   }),\n   computed: {\n     typeIcon() {"
        },
        {
          "filename": "packages/nc-gui/pages/user/authentication/passwordValidateMixin.js",
          "status": "modified",
          "additions": 54,
          "deletions": 44,
          "patch": "@@ -1,3 +1,5 @@\n+import { validatePassword } from 'nocodb-sdk'\n+\n export default {\n   data: () => ({\n     passwordProgress: 0,\n@@ -20,54 +22,62 @@ export default {\n       return this.formUtil.progressColorValue\n     },\n     PasswordValidate(p) {\n-      if (!p) {\n-        this.passwordProgress = 0\n-        this.passwordValidateMsg = 'At least 8 letters with one Uppercase, one number and one special letter'\n-        return false\n-      }\n-\n-      let msg = ''\n-      let validation = true\n-      let progress = 0\n-\n-      if (!(p.length >= 8)) {\n-        msg += 'Atleast 8 letters. '\n-        validation = validation && false\n-      } else {\n-        progress = Math.min(100, progress + 25)\n-      }\n-\n-      if (!(p.match(/.*[A-Z].*/))) {\n-        msg += 'One Uppercase Letter. '\n-        validation = validation && false\n-      } else {\n-        progress = Math.min(100, progress + 25)\n-      }\n-\n-      if (!(p.match(/.*[0-9].*/))) {\n-        msg += 'One Number. '\n-        validation = validation && false\n-      } else {\n-        progress = Math.min(100, progress + 25)\n-      }\n-\n-      if (!(p.match(/[$&+,:;=?@#|'<>.^*()%!_-]/))) {\n-        msg += 'One special letter. '\n-        validation = validation && false\n-      } else {\n-        progress = Math.min(100, progress + 25)\n-      }\n+      const { error, progress, valid } = validatePassword(p)\n+      if (valid) { return true }\n \n       this.formUtil.passwordProgress = progress\n-      // console.log('progress', progress);\n-      // console.log('color', this.progressColor(this.formUtil.passwordProgress));\n       this.progressColorValue = this.progressColor(this.formUtil.passwordProgress)\n \n-      this.formUtil.passwordValidateMsg = msg\n-\n-      // console.log('msg', msg, validation);\n-\n-      return validation\n+      this.formUtil.passwordValidateMsg = error\n+      return error\n+      // if (!p) {\n+      //   this.passwordProgress = 0\n+      //   this.passwordValidateMsg = 'At least 8 letters with one Uppercase, one number and one special letter'\n+      //   return false\n+      // }\n+      //\n+      // let msg = ''\n+      // let validation = true\n+      // let progress = 0\n+      //\n+      // if (!(p.length >= 8)) {\n+      //   msg += 'Atleast 8 letters. '\n+      //   validation = validation && false\n+      // } else {\n+      //   progress = Math.min(100, progress + 25)\n+      // }\n+      //\n+      // if (!(p.match(/.*[A-Z].*/))) {\n+      //   msg += 'One Uppercase Letter. '\n+      //   validation = validation && false\n+      // } else {\n+      //   progress = Math.min(100, progress + 25)\n+      // }\n+      //\n+      // if (!(p.match(/.*[0-9].*/))) {\n+      //   msg += 'One Number. '\n+      //   validation = validation && false\n+      // } else {\n+      //   progress = Math.min(100, progress + 25)\n+      // }\n+      //\n+      // if (!(p.match(/[$&+,:;=?@#|'<>.^*()%!_-]/))) {\n+      //   msg += 'One special letter. '\n+      //   validation = validation && false\n+      // } else {\n+      //   progress = Math.min(100, progress + 25)\n+      // }\n+      //\n+      // this.formUtil.passwordProgress = progress\n+      // // console.log('progress', progress);\n+      // // console.log('color', this.progressColor(this.formUtil.passwordProgress));\n+      // this.progressColorValue = this.progressColor(this.formUtil.passwordProgress)\n+      //\n+      // this.formUtil.passwordValidateMsg = msg\n+      //\n+      // // console.log('msg', msg, validation);\n+      //\n+      // return validation\n     }\n \n   }"
        },
        {
          "filename": "packages/nc-gui/pages/user/authentication/signin.vue",
          "status": "modified",
          "additions": 1,
          "deletions": 4,
          "patch": "@@ -244,10 +244,7 @@ export default {\n         ],\n         password: [\n           // Password is required\n-          v => !!v || this.$t('msg.error.signUpRules.passwdRequired'),\n-          // You password must be atleast 8 characters\n-          v =>\n-            (v && v.length >= 8) || this.$t('msg.error.signUpRules.passwdLength')\n+          v => !!v || this.$t('msg.error.signUpRules.passwdRequired')\n         ]\n       },\n       formUtil: {"
        },
        {
          "filename": "packages/nc-plugin/package-lock.json",
          "status": "modified",
          "additions": 8,
          "deletions": 8,
          "patch": "@@ -1,12 +1,12 @@\n {\n   \"name\": \"nc-plugin\",\n-  \"version\": \"0.1.1\",\n+  \"version\": \"0.1.3\",\n   \"lockfileVersion\": 2,\n   \"requires\": true,\n   \"packages\": {\n     \"\": {\n       \"name\": \"nc-plugin\",\n-      \"version\": \"0.1.1\",\n+      \"version\": \"0.1.3\",\n       \"license\": \"MIT\",\n       \"dependencies\": {\n         \"@bitauth/libauth\": \"^1.17.1\",\n@@ -10298,9 +10298,9 @@\n       }\n     },\n     \"node_modules/shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\",\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\",\n       \"dev\": true\n     },\n     \"node_modules/shelljs\": {\n@@ -19881,9 +19881,9 @@\n       \"dev\": true\n     },\n     \"shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\",\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\",\n       \"dev\": true\n     },\n     \"shelljs\": {"
        },
        {
          "filename": "packages/noco-blog/package-lock.json",
          "status": "modified",
          "additions": 7,
          "deletions": 7,
          "patch": "@@ -5836,16 +5836,16 @@\n       }\n     },\n     \"got\": {\n-      \"version\": \"11.8.2\",\n-      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.2.tgz\",\n-      \"integrity\": \"sha512-D0QywKgIe30ODs+fm8wMZiAcZjypcCodPNuMz5H9Mny7RJ+IjJ10BdmGW7OM7fHXP+O7r6ZwapQ/YQmMSvB0UQ==\",\n+      \"version\": \"11.8.5\",\n+      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.5.tgz\",\n+      \"integrity\": \"sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==\",\n       \"requires\": {\n         \"@sindresorhus/is\": \"^4.0.0\",\n         \"@szmarczak/http-timer\": \"^4.0.5\",\n         \"@types/cacheable-request\": \"^6.0.1\",\n         \"@types/responselike\": \"^1.0.0\",\n         \"cacheable-lookup\": \"^5.0.3\",\n-        \"cacheable-request\": \"^7.0.1\",\n+        \"cacheable-request\": \"^7.0.2\",\n         \"decompress-response\": \"^6.0.0\",\n         \"http2-wrapper\": \"^1.0.0-beta.5.2\",\n         \"lowercase-keys\": \"^2.0.0\",\n@@ -10797,9 +10797,9 @@\n       \"integrity\": \"sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==\"\n     },\n     \"shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\"\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\"\n     },\n     \"side-channel\": {\n       \"version\": \"1.0.4\","
        },
        {
          "filename": "packages/noco-docs-prev/package-lock.json",
          "status": "modified",
          "additions": 14,
          "deletions": 14,
          "patch": "@@ -7390,16 +7390,16 @@\n       }\n     },\n     \"node_modules/got\": {\n-      \"version\": \"11.8.2\",\n-      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.2.tgz\",\n-      \"integrity\": \"sha512-D0QywKgIe30ODs+fm8wMZiAcZjypcCodPNuMz5H9Mny7RJ+IjJ10BdmGW7OM7fHXP+O7r6ZwapQ/YQmMSvB0UQ==\",\n+      \"version\": \"11.8.5\",\n+      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.5.tgz\",\n+      \"integrity\": \"sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==\",\n       \"dependencies\": {\n         \"@sindresorhus/is\": \"^4.0.0\",\n         \"@szmarczak/http-timer\": \"^4.0.5\",\n         \"@types/cacheable-request\": \"^6.0.1\",\n         \"@types/responselike\": \"^1.0.0\",\n         \"cacheable-lookup\": \"^5.0.3\",\n-        \"cacheable-request\": \"^7.0.1\",\n+        \"cacheable-request\": \"^7.0.2\",\n         \"decompress-response\": \"^6.0.0\",\n         \"http2-wrapper\": \"^1.0.0-beta.5.2\",\n         \"lowercase-keys\": \"^2.0.0\",\n@@ -13804,9 +13804,9 @@\n       }\n     },\n     \"node_modules/shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\"\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\"\n     },\n     \"node_modules/side-channel\": {\n       \"version\": \"1.0.4\",\n@@ -22650,16 +22650,16 @@\n       }\n     },\n     \"got\": {\n-      \"version\": \"11.8.2\",\n-      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.2.tgz\",\n-      \"integrity\": \"sha512-D0QywKgIe30ODs+fm8wMZiAcZjypcCodPNuMz5H9Mny7RJ+IjJ10BdmGW7OM7fHXP+O7r6ZwapQ/YQmMSvB0UQ==\",\n+      \"version\": \"11.8.5\",\n+      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.5.tgz\",\n+      \"integrity\": \"sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==\",\n       \"requires\": {\n         \"@sindresorhus/is\": \"^4.0.0\",\n         \"@szmarczak/http-timer\": \"^4.0.5\",\n         \"@types/cacheable-request\": \"^6.0.1\",\n         \"@types/responselike\": \"^1.0.0\",\n         \"cacheable-lookup\": \"^5.0.3\",\n-        \"cacheable-request\": \"^7.0.1\",\n+        \"cacheable-request\": \"^7.0.2\",\n         \"decompress-response\": \"^6.0.0\",\n         \"http2-wrapper\": \"^1.0.0-beta.5.2\",\n         \"lowercase-keys\": \"^2.0.0\",\n@@ -27611,9 +27611,9 @@\n       \"integrity\": \"sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==\"\n     },\n     \"shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\"\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\"\n     },\n     \"side-channel\": {\n       \"version\": \"1.0.4\","
        },
        {
          "filename": "packages/noco-docs/content/en/developer-resources/rest-apis.md",
          "status": "modified",
          "additions": 13,
          "deletions": 11,
          "patch": "@@ -21,15 +21,15 @@ Currently, the default value for {orgs} is <b>noco</b>. Users will be able to ch\n \n | Category | Method | Tag | Function Name | Path |\n |---|---|---|---|---|\n-| Auth | Post | auth | signup | /api/v1/db/auth/user/signup |\n-| Auth | Post | auth | signin | /api/v1/db/auth/user/signin |\n-| Auth | Get | auth | me | /api/v1/db/auth/user/me |\n-| Auth | Post | auth | passwordForgot | /api/v1/db/auth/password/forgot |\n-| Auth | Post | auth | passwordChange | /api/v1/db/auth/password/change |\n-| Auth | Post | auth | passwordReset | /api/v1/db/auth/password/reset/{token} |\n-| Auth | Post | auth | tokenRefresh | /api/v1/db/auth/token/refresh |\n-| Auth | Post | auth | passwordResetTokenValidate | /api/v1/db/auth/token/validate/{token} |\n-| Auth | Post | auth | emailValidate | /api/v1/db/auth/email/validate/{email} |\n+| Auth | Post | auth | signup | /api/v1/auth/user/signup |\n+| Auth | Post | auth | signin | /api/v1/auth/user/signin |\n+| Auth | Get | auth | me | /api/v1/auth/user/me |\n+| Auth | Post | auth | passwordForgot | /api/v1/auth/password/forgot |\n+| Auth | Post | auth | passwordChange | /api/v1/auth/password/change |\n+| Auth | Post | auth | passwordReset | /api/v1/auth/password/reset/{token} |\n+| Auth | Post | auth | tokenRefresh | /api/v1/auth/token/refresh |\n+| Auth | Post | auth | passwordResetTokenValidate | /api/v1/auth/token/validate/{token} |\n+| Auth | Post | auth | emailValidate | /api/v1/auth/email/validate/{email} |\n \n ### Public APIs\n \n@@ -166,7 +166,8 @@ Currently, the default value for {orgs} is <b>noco</b>. Users will be able to ch\n | Meta | Delete| utils | cacheDelete | /api/v1/db/meta/cache |\n | Meta | Post | utils | testConnection | /api/v1/db/meta/projects/connection/test |\n | Meta | Get | utils | appInfo | /api/v1/db/meta/nocodb/info |\n-| Meta | Get | utils | appVersion | /api/v1/db/meta/nocodb/version |\n+| Meta | Get | utils | appVersion | /api/v1/version |\n+| Meta | Get | utils | appHealth | /api/v1/health |\n \n ## Query params\n \n@@ -193,7 +194,8 @@ Currently, the default value for {orgs} is <b>noco</b>. Users will be able to ch\n | Operation | Meaning | Example |\n |---|---|---|\n | eq | equal | (colName,eq,colValue) |\n-| not | not equal | (colName,not,colValue) |\n+| neq | not equal | (colName,neq,colValue) |\n+| not | not equal (alias of neq) | (colName,not,colValue) |\n | gt | greater than | (colName,gt,colValue) |\n | ge | greater or equal | (colName,ge,colValue) |\n | lt | less than | (colName,lt,colValue) |"
        },
        {
          "filename": "packages/noco-docs/content/en/engineering/timely-build.md",
          "status": "added",
          "additions": 42,
          "deletions": 0,
          "patch": "@@ -0,0 +1,42 @@\n+---\n+title: \"Timely Build\"\n+description: \"Timely Build\"\n+position: 5000\n+category: \"Engineering\"\n+menuTitle: \"Timely Build\"\n+---\n+\n+NocoDB provides timely build versions on Docker and Executables by compiling our source code and packaging as a deliverable so that it can\n+\n+- reduce pull request cycle time\n+- allow issue reporters / reviewers to verify the fix without setting up their local machines\n+\n+## Docker\n+\n+When a non-draft Pull Request is created, reopened or synchronized, a timely build for Docker would be triggered for the changes only included in the following paths.\n+\n+- `packages/nocodb-sdk/**`\n+- `packages/nc-gui/**`\n+- `packages/nc-plugin/**`\n+- `packages/nocodb/**`\n+\n+The docker images will be built and pushed to Docker Hub (See [nocodb/nocodb-timely](https://hub.docker.com/r/nocodb/nocodb-timely/tags) for the full list). Once the image is ready, Github bot will add a comment with the command in the pull request. The tag would be `<NOCODB_CURRENT_VERSION>-pr-<PR_NUMBER>-<YYYYMMDD>-<HHMM>`. \n+\n+![image](https://user-images.githubusercontent.com/35857179/175012097-240dab05-da93-4c4e-87c1-1c36fb1350bd.png)\n+\n+## Executables\n+\n+Similarly, we provide a timely build for executables for non-docker users. The source code will be built, packaged as binary files, and pushed to Github (See [nocodb/nocodb-timely](https://github.com/nocodb/nocodb-timely/releases) for the full list). \n+\n+Currently, we only support the following targets:\n+\n+- `node16-linux-arm64`\n+- `node16-macos-arm64`\n+- `node16-win-arm64`\n+- `node16-linux-x64`\n+- `node16-macos-x64`\n+- `node16-win-x64`\n+\n+Once the executables are ready, Github bot will add a comment with the commands in the pull request. \n+\n+![image](https://user-images.githubusercontent.com/35857179/175012070-f5f3e7b8-6dc5-4d1c-9f7e-654bc5039521.png)"
        },
        {
          "filename": "packages/noco-docs/content/en/getting-started/installation.md",
          "status": "modified",
          "additions": 21,
          "deletions": 0,
          "patch": "@@ -57,6 +57,14 @@ npm install\n npm start\n ```\n \n+### Homebrew\n+\n+```bash\n+brew tap nocodb/nocodb\n+brew install nocodb\n+nocodb\n+```\n+\n ### Docker \n \n If you are a Docker user, you may try this way!\n@@ -206,6 +214,19 @@ It is mandatory to configure `NC_DB` environment variables for production usecas\n | AWS_SECRET_ACCESS_KEY              | No        | For Litestream - S3 secret access key                                                                                   | If Litestream is configured and NC_DB is not present. SQLite gets backed up to S3              |   |\n | AWS_BUCKET                         | No        | For Litestream - S3 bucket                                                                                              | If Litestream is configured and NC_DB is not present. SQLite gets backed up to S3              |   |\n | AWS_BUCKET_PATH                    | No        | For Litestream - S3 bucket path (like folder within S3 bucket)                                                          | If Litestream is configured and NC_DB is not present. SQLite gets backed up to S3              |   |\n+| NC_SMTP_FROM                       | No        | For SMTP plugin - Email sender address                                                                                  |                                                                                                |   |\n+| NC_SMTP_HOST                       | No        | For SMTP plugin - SMTP host value                                                                                       |                                                                                                |   |\n+| NC_SMTP_PORT                       | No        | For SMTP plugin - SMTP port value                                                                                       |                                                                                                |   |\n+| NC_SMTP_USERNAME                   | No        | For SMTP plugin (Optional) - SMTP username value for authentication                                                                |                                                                                                |   |\n+| NC_SMTP_PASSWORD                   | No        | For SMTP plugin (Optional) - SMTP password value for authentication                                                                |                                                                                                |   |\n+| NC_SMTP_SECURE                     | No        | For SMTP plugin (Optional) - To enable secure set value as `true` any other value treated as false                      |                                                                                                |   |\n+| NC_SMTP_IGNORE_TLS                 | No        | For SMTP plugin (Optional) - To ignore tls set value as `true` any other value treated as false. For more info visit https://nodemailer.com/smtp/ |                                                                      |   |\n+| NC_S3_BUCKET_NAME                  | No        | For S3 storage plugin - AWS S3 bucket name                                                                              |                                                                                                |   |\n+| NC_S3_REGION                       | No        | For S3 storage plugin - AWS S3 region                                                                                   |                                                                                                |   |\n+| NC_S3_ACCESS_KEY                   | No        | For S3 storage plugin - AWS access key credential for accessing resource                                                |                                                                                                |   |\n+| NC_S3_ACCESS_SECRET                | No        | For S3 storage plugin - AWS access secret credential for accessing resource                                             |                                                                                                |   |\n+| NC_ADMIN_EMAIL                     | No        | For updating/creating super admin with provided email and password                                                      |                                                                                                |   |\n+| NC_ADMIN_PASSWORD                  | No        | For updating/creating super admin with provided email and password. Your password should have at least 8 letters with one uppercase, one number and one special letter(Allowed special chars <code>$&+,:;=?@#&#124;'.^*()%!_-\"</code> )                                                     |                                                                                                |   |\n \n ### AWS ECS (Fargate)\n "
        },
        {
          "filename": "packages/noco-docs/content/en/setup-and-usages/dashboard.md",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -16,7 +16,7 @@ Click `Let's Begin` button to sign up.\n \n Enter your work email and your password.\n \n-<alert>\n+<alert id=\"password-conditions\">\n   Your password has at least 8 letters with one uppercase, one number and one special letter\n </alert>\n \n@@ -98,4 +98,4 @@ Tip 3: You can click Edit Connection JSON and specify the schema you want to use\n \n Click `Test Database Connection` to see if the connection can be established or not. NocoDB creates a new **empty database** with specified parameters if the database doesn't exist.\n \n-![image](https://user-images.githubusercontent.com/35857179/163136039-ad521d74-6996-4173-84ba-cfc55392c3b7.png)\n\\ No newline at end of file\n+![image](https://user-images.githubusercontent.com/35857179/163136039-ad521d74-6996-4173-84ba-cfc55392c3b7.png)"
        },
        {
          "filename": "packages/noco-docs/content/en/setup-and-usages/primary-key.md",
          "status": "added",
          "additions": 44,
          "deletions": 0,
          "patch": "@@ -0,0 +1,44 @@\n+---\n+title: \"Primary Key\"\n+description: \"Primary Key\"\n+position: 575\n+category: \"Product\"\n+menuTitle: \"Primary Key\"\n+---\n+\n+## What is a Primary Key ?\n+- A primary key is a special database table column designated to uniquely identify each table record.\n+\n+## What is the use of Primary Key ?\n+- As it uniquely identifies an individual record of a table, it is used internally by NocoDB for all operations associated with a record\n+\n+## Primary Key in NocoDB\n+- Primary Key that gets defined / used in NocoDB depends on how underlying table was created. Summary is captured below\n+1. From UI, Create new table / Import from Excel / Import from CSV\n+    1. An `ID` [datatype: Integer] system field created by default during table creation is used as primary key\n+    2. Additional system fields `created-at`, `updated-at` are inserted by default & can be omitted optionally; these fields can be deleted after table creation\n+2. Connect to existing external database\n+    1. Existing `primary key` field defined for a table is retained as is; NocoDB doesn't insert a new ID field\n+    2. Additional system fields `created-at`, `updated-at` are not inserted by default\n+3. Import from Airtable\n+    1. Airtable record ID is marked as primary key for imported records, and is mapped to field `ncRecordId`  [datatype: varchar]\n+    2. If a new record is inserted after migration & if ncRecordId field was omitted during record insertion - auto generated string will be inserted by NocoDB\n+    3. Computed hash value for the entire record is stored in system field `ncRecordHash`\n+    4. Additional system fields `created-at`, `updated-at` are not inserted by default\n+4. Create new table using SDK / API\n+    1. No default primary key field is introduced by NocoDB. It has to be explicitly specified during table creation (using attribute `pk: true`)\n+\n+## What if Primary Key was missing?\n+It is possible to have a table without any primary key. \n+- External database table can be created without primary key configuration.\n+- New table can be created using SDK / API without primary key\n+In such scenario's, new records can be created in NocoDB for this table, but records can't be updated or deleted [as there is now way for NocoDB to uniquely identify these records]\n+\n+#### Example : Primary Key & optional system fields during new table creation\n+![Screenshot 2022-06-16 at 12 15 43 PM](https://user-images.githubusercontent.com/86527202/174010350-8610b9c1-a761-4bff-a53d-dc728df47e1b.png)\n+\n+#### Example : Show System Fields\n+![Screenshot 2022-06-16 at 12 16 07 PM](https://user-images.githubusercontent.com/86527202/174010379-9e300d42-ad89-4653-afa2-f70fca407ca8.png)\n+\n+## Can I change the Primary Key to another column within tables ?\n+- You can't update Primary Key from NocoDB UI. You can reconfigure it at database level directly & trigger `metasync` explicitly"
        },
        {
          "filename": "packages/noco-docs/content/en/setup-and-usages/primary-value.md",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1,7 +1,7 @@\n ---\n title: \"Primary value\"\n description: \"Primary value\"\n-position: 575\n+position: 580\n category: \"Product\"\n menuTitle: \"Primary value\"\n ---"
        },
        {
          "filename": "packages/noco-docs/package-lock.json",
          "status": "modified",
          "additions": 14,
          "deletions": 14,
          "patch": "@@ -7390,16 +7390,16 @@\n       }\n     },\n     \"node_modules/got\": {\n-      \"version\": \"11.8.2\",\n-      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.2.tgz\",\n-      \"integrity\": \"sha512-D0QywKgIe30ODs+fm8wMZiAcZjypcCodPNuMz5H9Mny7RJ+IjJ10BdmGW7OM7fHXP+O7r6ZwapQ/YQmMSvB0UQ==\",\n+      \"version\": \"11.8.5\",\n+      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.5.tgz\",\n+      \"integrity\": \"sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==\",\n       \"dependencies\": {\n         \"@sindresorhus/is\": \"^4.0.0\",\n         \"@szmarczak/http-timer\": \"^4.0.5\",\n         \"@types/cacheable-request\": \"^6.0.1\",\n         \"@types/responselike\": \"^1.0.0\",\n         \"cacheable-lookup\": \"^5.0.3\",\n-        \"cacheable-request\": \"^7.0.1\",\n+        \"cacheable-request\": \"^7.0.2\",\n         \"decompress-response\": \"^6.0.0\",\n         \"http2-wrapper\": \"^1.0.0-beta.5.2\",\n         \"lowercase-keys\": \"^2.0.0\",\n@@ -13804,9 +13804,9 @@\n       }\n     },\n     \"node_modules/shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\"\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\"\n     },\n     \"node_modules/side-channel\": {\n       \"version\": \"1.0.4\",\n@@ -22650,16 +22650,16 @@\n       }\n     },\n     \"got\": {\n-      \"version\": \"11.8.2\",\n-      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.2.tgz\",\n-      \"integrity\": \"sha512-D0QywKgIe30ODs+fm8wMZiAcZjypcCodPNuMz5H9Mny7RJ+IjJ10BdmGW7OM7fHXP+O7r6ZwapQ/YQmMSvB0UQ==\",\n+      \"version\": \"11.8.5\",\n+      \"resolved\": \"https://registry.npmjs.org/got/-/got-11.8.5.tgz\",\n+      \"integrity\": \"sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==\",\n       \"requires\": {\n         \"@sindresorhus/is\": \"^4.0.0\",\n         \"@szmarczak/http-timer\": \"^4.0.5\",\n         \"@types/cacheable-request\": \"^6.0.1\",\n         \"@types/responselike\": \"^1.0.0\",\n         \"cacheable-lookup\": \"^5.0.3\",\n-        \"cacheable-request\": \"^7.0.1\",\n+        \"cacheable-request\": \"^7.0.2\",\n         \"decompress-response\": \"^6.0.0\",\n         \"http2-wrapper\": \"^1.0.0-beta.5.2\",\n         \"lowercase-keys\": \"^2.0.0\",\n@@ -27611,9 +27611,9 @@\n       \"integrity\": \"sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==\"\n     },\n     \"shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\"\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\"\n     },\n     \"side-channel\": {\n       \"version\": \"1.0.4\","
        },
        {
          "filename": "packages/noco-i18n/package-lock.json",
          "status": "modified",
          "additions": 3,
          "deletions": 3,
          "patch": "@@ -9793,9 +9793,9 @@\n       \"dev\": true\n     },\n     \"shell-quote\": {\n-      \"version\": \"1.7.2\",\n-      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.2.tgz\",\n-      \"integrity\": \"sha512-mRz/m/JVscCrkMyPqHc/bczi3OQHkLTqXHEFu0zDhK/qfv3UcOA4SVmRCLmos4bhjr9ekVQubj/R7waKapmiQg==\",\n+      \"version\": \"1.7.3\",\n+      \"resolved\": \"https://registry.npmjs.org/shell-quote/-/shell-quote-1.7.3.tgz\",\n+      \"integrity\": \"sha512-Vpfqwm4EnqGdlsBFNmHhxhElJYrdfcxPThu+ryKS5J8L/fhAwLazFZtq+S+TWZ9ANj2piSQLGj6NQg+lKPmxrw==\",\n       \"dev\": true\n     },\n     \"side-channel\": {"
        },
        {
          "filename": "packages/nocodb-sdk/src/index.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 2,
          "patch": "@@ -5,5 +5,7 @@ export * from './lib/sqlUi';\n export * from './lib/globals';\n export * from './lib/helperFunctions';\n export * from './lib/formulaHelpers';\n-export {default as UITypes, isVirtualCol} from './lib/UITypes';\n-export {default as CustomAPI} from './lib/CustomAPI';\n+export { default as UITypes, isVirtualCol } from './lib/UITypes';\n+export { default as CustomAPI } from './lib/CustomAPI';\n+export { default as TemplateGenerator } from './lib/TemplateGenerator';\n+export * from './lib/passwordHelpers';"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/Api.ts",
          "status": "modified",
          "additions": 36,
          "deletions": 20,
          "patch": "@@ -805,7 +805,7 @@ export class Api<\n      * @tags Auth\n      * @name Signup\n      * @summary Signup\n-     * @request POST:/api/v1/db/auth/user/signup\n+     * @request POST:/api/v1/auth/user/signup\n      * @response `200` `{ token?: string }` OK\n      * @response `400` `{ msg?: string }` Bad Request\n      * @response `401` `void` Unauthorized\n@@ -816,7 +816,7 @@ export class Api<\n       params: RequestParams = {}\n     ) =>\n       this.request<{ token?: string }, { msg?: string } | void>({\n-        path: `/api/v1/db/auth/user/signup`,\n+        path: `/api/v1/auth/user/signup`,\n         method: 'POST',\n         body: data,\n         format: 'json',\n@@ -829,7 +829,7 @@ export class Api<\n      * @tags Auth\n      * @name Signin\n      * @summary Signin\n-     * @request POST:/api/v1/db/auth/user/signin\n+     * @request POST:/api/v1/auth/user/signin\n      * @response `200` `{ token?: string }` OK\n      * @response `400` `{ msg?: string }` Bad Request\n      */\n@@ -838,7 +838,7 @@ export class Api<\n       params: RequestParams = {}\n     ) =>\n       this.request<{ token?: string }, { msg?: string }>({\n-        path: `/api/v1/db/auth/user/signin`,\n+        path: `/api/v1/auth/user/signin`,\n         method: 'POST',\n         body: data,\n         type: ContentType.Json,\n@@ -852,12 +852,12 @@ export class Api<\n      * @tags Auth\n      * @name Me\n      * @summary User info\n-     * @request GET:/api/v1/db/auth/user/me\n+     * @request GET:/api/v1/auth/user/me\n      * @response `200` `UserInfoType` OK\n      */\n     me: (query?: { project_id?: string }, params: RequestParams = {}) =>\n       this.request<UserInfoType, any>({\n-        path: `/api/v1/db/auth/user/me`,\n+        path: `/api/v1/auth/user/me`,\n         method: 'GET',\n         query: query,\n         format: 'json',\n@@ -870,13 +870,13 @@ export class Api<\n      * @tags Auth\n      * @name PasswordForgot\n      * @summary Password forgot\n-     * @request POST:/api/v1/db/auth/password/forgot\n+     * @request POST:/api/v1/auth/password/forgot\n      * @response `200` `void` OK\n      * @response `401` `void` Unauthorized\n      */\n     passwordForgot: (data: { email?: string }, params: RequestParams = {}) =>\n       this.request<void, void>({\n-        path: `/api/v1/db/auth/password/forgot`,\n+        path: `/api/v1/auth/password/forgot`,\n         method: 'POST',\n         body: data,\n         type: ContentType.Json,\n@@ -889,7 +889,7 @@ export class Api<\n      * @tags Auth\n      * @name PasswordChange\n      * @summary Password change\n-     * @request POST:/api/v1/db/auth/password/change\n+     * @request POST:/api/v1/auth/password/change\n      * @response `200` `{ msg?: string }` OK\n      * @response `400` `{ msg?: string }` Bad request\n      */\n@@ -898,7 +898,7 @@ export class Api<\n       params: RequestParams = {}\n     ) =>\n       this.request<{ msg?: string }, { msg?: string }>({\n-        path: `/api/v1/db/auth/password/change`,\n+        path: `/api/v1/auth/password/change`,\n         method: 'POST',\n         body: data,\n         type: ContentType.Json,\n@@ -912,12 +912,12 @@ export class Api<\n      * @tags Auth\n      * @name PasswordResetTokenValidate\n      * @summary Reset token verify\n-     * @request POST:/api/v1/db/auth/token/validate/{token}\n+     * @request POST:/api/v1/auth/token/validate/{token}\n      * @response `200` `void` OK\n      */\n     passwordResetTokenValidate: (token: string, params: RequestParams = {}) =>\n       this.request<void, any>({\n-        path: `/api/v1/db/auth/token/validate/${token}`,\n+        path: `/api/v1/auth/token/validate/${token}`,\n         method: 'POST',\n         ...params,\n       }),\n@@ -928,12 +928,12 @@ export class Api<\n      * @tags Auth\n      * @name EmailValidate\n      * @summary Verify email\n-     * @request POST:/api/v1/db/auth/email/validate/{token}\n+     * @request POST:/api/v1/auth/email/validate/{token}\n      * @response `200` `void` OK\n      */\n     emailValidate: (token: string, params: RequestParams = {}) =>\n       this.request<void, any>({\n-        path: `/api/v1/db/auth/email/validate/${token}`,\n+        path: `/api/v1/auth/email/validate/${token}`,\n         method: 'POST',\n         ...params,\n       }),\n@@ -944,7 +944,7 @@ export class Api<\n      * @tags Auth\n      * @name PasswordReset\n      * @summary Password reset\n-     * @request POST:/api/v1/db/auth/password/reset/{token}\n+     * @request POST:/api/v1/auth/password/reset/{token}\n      * @response `200` `void` OK\n      */\n     passwordReset: (\n@@ -953,7 +953,7 @@ export class Api<\n       params: RequestParams = {}\n     ) =>\n       this.request<void, any>({\n-        path: `/api/v1/db/auth/password/reset/${token}`,\n+        path: `/api/v1/auth/password/reset/${token}`,\n         method: 'POST',\n         body: data,\n         type: ContentType.Json,\n@@ -966,12 +966,12 @@ export class Api<\n      * @tags Auth\n      * @name TokenRefresh\n      * @summary Refresh token\n-     * @request POST:/api/v1/db/auth/token/refresh\n+     * @request POST:/api/v1/auth/token/refresh\n      * @response `200` `void` OK\n      */\n     tokenRefresh: (params: RequestParams = {}) =>\n       this.request<void, any>({\n-        path: `/api/v1/db/auth/token/refresh`,\n+        path: `/api/v1/auth/token/refresh`,\n         method: 'POST',\n         ...params,\n       }),\n@@ -3197,12 +3197,28 @@ export class Api<\n      *\n      * @tags Utils\n      * @name AppVersion\n-     * @request GET:/api/v1/db/meta/nocodb/version\n+     * @request GET:/api/v1/version\n      * @response `200` `any` OK\n      */\n     appVersion: (params: RequestParams = {}) =>\n       this.request<any, any>({\n-        path: `/api/v1/db/meta/nocodb/version`,\n+        path: `/api/v1/version`,\n+        method: 'GET',\n+        format: 'json',\n+        ...params,\n+      }),\n+\n+    /**\n+     * No description\n+     *\n+     * @tags Utils\n+     * @name AppHealth\n+     * @request GET:/api/v1/health\n+     * @response `200` `any` OK\n+     */\n+    appHealth: (params: RequestParams = {}) =>\n+      this.request<any, any>({\n+        path: `/api/v1/health`,\n         method: 'GET',\n         format: 'json',\n         ...params,"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/TemplateGenerator.ts",
          "status": "added",
          "additions": 30,
          "deletions": 0,
          "patch": "@@ -0,0 +1,30 @@\n+import UITypes from './UITypes';\n+\n+export interface Column {\n+  column_name: string;\n+  ref_column_name: string;\n+  uidt?: UITypes;\n+  dtxp?: any;\n+  dt?: any;\n+}\n+export interface Table {\n+  table_name: string;\n+  ref_table_name: string;\n+  columns: Array<Column>;\n+}\n+export interface Template {\n+  title: string;\n+  tables: Array<Table>;\n+}\n+\n+export default abstract class TemplateGenerator {\n+  abstract parse(): Promise<any>;\n+  abstract parseTemplate(): Promise<Template>;\n+  abstract getColumns(): Promise<any>;\n+  abstract parseData(): Promise<any>;\n+  abstract getData(): Promise<{\n+    [table_name: string]: Array<{\n+      [key: string]: any;\n+    }>;\n+  }>;\n+}"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/passwordHelpers.ts",
          "status": "added",
          "additions": 41,
          "deletions": 0,
          "patch": "@@ -0,0 +1,41 @@\n+export function validatePassword(p) {\n+  let error = '';\n+  let progress = 0;\n+  let hint = null;\n+  let valid = true;\n+  if (!p) {\n+    error =\n+      'At least 8 letters with one Uppercase, one number and one special letter';\n+    valid = false;\n+  } else {\n+    if (!(p.length >= 8)) {\n+      error += 'Atleast 8 letters. ';\n+      valid = false;\n+    } else {\n+      progress = Math.min(100, progress + 25);\n+    }\n+\n+    if (!p.match(/.*[A-Z].*/)) {\n+      error += 'One Uppercase Letter. ';\n+      valid = false;\n+    } else {\n+      progress = Math.min(100, progress + 25);\n+    }\n+\n+    if (!p.match(/.*[0-9].*/)) {\n+      error += 'One Number. ';\n+      valid = false;\n+    } else {\n+      progress = Math.min(100, progress + 25);\n+    }\n+\n+    if (!p.match(/[$&+,:;=?@#|'<>.^*()%!_-]/)) {\n+      error += 'One special letter. ';\n+      hint = \"Allowed special character list :  $&+,:;=?@#|'<>.^*()%!_-\";\n+      valid = false;\n+    } else {\n+      progress = Math.min(100, progress + 25);\n+    }\n+  }\n+  return { error, valid, progress, hint };\n+}"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/sqlUi/MssqlUi.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 2,
          "patch": "@@ -123,6 +123,7 @@ export class MssqlUi {\n         pk: false,\n         un: false,\n         ai: false,\n+        au: true,\n         cdf: 'GETDATE()',\n         clen: 45,\n         np: null,\n@@ -919,7 +920,9 @@ export class MssqlUi {\n     // if (1) {\n     col.altered = col.altered || 2;\n     // }\n-\n+    if (col.au) {\n+      col.cdf = 'GETDATE()';\n+    }\n     // if (!col.ai) {\n     //   col.dtx = 'specificType'\n     // } else {\n@@ -1144,7 +1147,7 @@ export class MssqlUi {\n         colProp.dt = 'double';\n         break;\n       case 'Duration':\n-        colProp.dt = 'int';\n+        colProp.dt = 'decimal';\n         break;\n       case 'Rating':\n         colProp.dt = 'int';"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/sqlUi/MysqlUi.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1036,7 +1036,7 @@ export class MysqlUi {\n         colProp.dt = 'double';\n         break;\n       case 'Duration':\n-        colProp.dt = 'int';\n+        colProp.dt = 'decimal';\n         break;\n       case 'Rating':\n         colProp.dt = 'int';"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/sqlUi/PgUi.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -1660,7 +1660,7 @@ export class PgUi {\n         colProp.dt = 'double precision';\n         break;\n       case 'Duration':\n-        colProp.dt = 'int8';\n+        colProp.dt = 'decimal';\n         break;\n       case 'Rating':\n         colProp.dt = 'smallint';\n@@ -1740,7 +1740,7 @@ export class PgUi {\n         return ['json', 'char', 'character', 'character varying', 'text'];\n \n       case 'JSON':\n-        return ['json', 'text'];\n+        return ['json', 'jsonb', 'text'];\n       case 'Checkbox':\n         return [\n           'bit',"
        },
        {
          "filename": "packages/nocodb-sdk/src/lib/sqlUi/SqliteUi.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -853,7 +853,7 @@ export class SqliteUi {\n         colProp.dt = 'double';\n         break;\n       case 'Duration':\n-        colProp.dt = 'integer';\n+        colProp.dt = 'decimal';\n         break;\n       case 'Rating':\n         colProp.dt = 'integer';"
        },
        {
          "filename": "packages/nocodb/README.md",
          "status": "modified",
          "additions": 3,
          "deletions": 2,
          "patch": "@@ -1,10 +1,11 @@\n-# nocodb\n+# Nocodb\n \n ## Running locally\n \n Even though this package is a backend project, you can still visit the dashboard as it includes ``nc-lib-gui``. \n \n ```\n+\n npm install\n npm run watch:run\n # open localhost:8080/dashboard in browser\n@@ -18,4 +19,4 @@ If you wish to combine the frontend and backend together in your local devlopmen\n \"nc-lib-gui\": \"file:../nc-lib-gui\"\n ```\n \n-In this case, whenever there is any changes made in frontend, you need to run ``npm run build:copy`` under ``packages/nc-gui/``.\n\\ No newline at end of file\n+In this case, whenever there is any changes made in frontend, you need to run ``npm run build:copy`` under ``packages/nc-gui/``."
        },
        {
          "filename": "packages/nocodb/package-lock.json",
          "status": "modified",
          "additions": 35,
          "deletions": 23,
          "patch": "@@ -70,11 +70,11 @@\n         \"mysql2\": \"^2.2.5\",\n         \"nanoid\": \"^3.1.20\",\n         \"nc-common\": \"0.0.6\",\n-        \"nc-help\": \"0.2.61\",\n+        \"nc-help\": \"0.2.67\",\n         \"nc-lib-gui\": \"0.91.10\",\n         \"nc-plugin\": \"0.1.2\",\n         \"ncp\": \"^2.0.0\",\n-        \"nocodb-sdk\": \"0.91.10\",\n+        \"nocodb-sdk\": \"file:../nocodb-sdk\",\n         \"nodemailer\": \"^6.4.10\",\n         \"object-hash\": \"^3.0.0\",\n         \"ora\": \"^4.0.4\",\n@@ -232,7 +232,6 @@\n     },\n     \"../nocodb-sdk\": {\n       \"version\": \"0.91.10\",\n-      \"extraneous\": true,\n       \"license\": \"MIT\",\n       \"dependencies\": {\n         \"axios\": \"^0.21.1\",\n@@ -16353,9 +16352,9 @@\n       }\n     },\n     \"node_modules/nc-help\": {\n-      \"version\": \"0.2.61\",\n-      \"resolved\": \"https://registry.npmjs.org/nc-help/-/nc-help-0.2.61.tgz\",\n-      \"integrity\": \"sha512-YvFD0EjhwLs36U4GqIg0uxYWBurc39Wt7Hi7pd4/Lh1A/hmpWl6eZD4k9gk2FqqtGMlR/7e5UOmFYrRuvtzkTw==\",\n+      \"version\": \"0.2.67\",\n+      \"resolved\": \"https://registry.npmjs.org/nc-help/-/nc-help-0.2.67.tgz\",\n+      \"integrity\": \"sha512-O9eXHrpO0dBdFv6zUZAos+63JZEGhZ2lG+MduGZ+/BL7M5b0qU7d9b95Pmgq6Gd5wO3txT/7x7uPBHZxeSgvHQ==\",\n       \"dependencies\": {\n         \"@rudderstack/rudder-sdk-node\": \"^1.1.3\",\n         \"axios\": \"^0.21.1\",\n@@ -16571,16 +16570,8 @@\n       \"dev\": true\n     },\n     \"node_modules/nocodb-sdk\": {\n-      \"version\": \"0.91.10\",\n-      \"resolved\": \"https://registry.npmjs.org/nocodb-sdk/-/nocodb-sdk-0.91.10.tgz\",\n-      \"integrity\": \"sha512-mdddLp+HgpPJwrKwmZrOPvjHaEbKbjdUP8vkJ9icQPXTJizclPBLugKhvp2hPlNPfJ3BIdfAj38RKBYlFu+now==\",\n-      \"dependencies\": {\n-        \"axios\": \"^0.21.1\",\n-        \"jsep\": \"^1.3.6\"\n-      },\n-      \"engines\": {\n-        \"node\": \">=10\"\n-      }\n+      \"resolved\": \"../nocodb-sdk\",\n+      \"link\": true\n     },\n     \"node_modules/node-addon-api\": {\n       \"version\": \"2.0.0\",\n@@ -38049,9 +38040,9 @@\n       \"integrity\": \"sha512-3AryS9uwa5NfISLxMciUonrH7YfXp+nlahB9T7girXIsLQrmwX4MdnuKs32akduCOGpKmjTJSWmATULbuMkbfw==\"\n     },\n     \"nc-help\": {\n-      \"version\": \"0.2.61\",\n-      \"resolved\": \"https://registry.npmjs.org/nc-help/-/nc-help-0.2.61.tgz\",\n-      \"integrity\": \"sha512-YvFD0EjhwLs36U4GqIg0uxYWBurc39Wt7Hi7pd4/Lh1A/hmpWl6eZD4k9gk2FqqtGMlR/7e5UOmFYrRuvtzkTw==\",\n+      \"version\": \"0.2.67\",\n+      \"resolved\": \"https://registry.npmjs.org/nc-help/-/nc-help-0.2.67.tgz\",\n+      \"integrity\": \"sha512-O9eXHrpO0dBdFv6zUZAos+63JZEGhZ2lG+MduGZ+/BL7M5b0qU7d9b95Pmgq6Gd5wO3txT/7x7uPBHZxeSgvHQ==\",\n       \"requires\": {\n         \"@rudderstack/rudder-sdk-node\": \"^1.1.3\",\n         \"axios\": \"^0.21.1\",\n@@ -38231,12 +38222,33 @@\n       \"dev\": true\n     },\n     \"nocodb-sdk\": {\n-      \"version\": \"0.91.10\",\n-      \"resolved\": \"https://registry.npmjs.org/nocodb-sdk/-/nocodb-sdk-0.91.10.tgz\",\n-      \"integrity\": \"sha512-mdddLp+HgpPJwrKwmZrOPvjHaEbKbjdUP8vkJ9icQPXTJizclPBLugKhvp2hPlNPfJ3BIdfAj38RKBYlFu+now==\",\n+      \"version\": \"file:../nocodb-sdk\",\n       \"requires\": {\n+        \"@ava/typescript\": \"^1.1.1\",\n+        \"@istanbuljs/nyc-config-typescript\": \"^1.0.1\",\n+        \"@typescript-eslint/eslint-plugin\": \"^4.0.1\",\n+        \"@typescript-eslint/parser\": \"^4.0.1\",\n+        \"ava\": \"^3.12.1\",\n         \"axios\": \"^0.21.1\",\n-        \"jsep\": \"^1.3.6\"\n+        \"codecov\": \"^3.5.0\",\n+        \"cspell\": \"^4.1.0\",\n+        \"cz-conventional-changelog\": \"^3.3.0\",\n+        \"eslint\": \"^7.8.0\",\n+        \"eslint-config-prettier\": \"^6.11.0\",\n+        \"eslint-plugin-eslint-comments\": \"^3.2.0\",\n+        \"eslint-plugin-functional\": \"^3.0.2\",\n+        \"eslint-plugin-import\": \"^2.22.0\",\n+        \"eslint-plugin-prettier\": \"^4.0.0\",\n+        \"gh-pages\": \"^3.1.0\",\n+        \"jsep\": \"^1.3.6\",\n+        \"npm-run-all\": \"^4.1.5\",\n+        \"nyc\": \"^15.1.0\",\n+        \"open-cli\": \"^6.0.1\",\n+        \"prettier\": \"^2.1.1\",\n+        \"standard-version\": \"^9.0.0\",\n+        \"ts-node\": \"^9.0.0\",\n+        \"typedoc\": \"^0.19.0\",\n+        \"typescript\": \"^4.0.2\"\n       }\n     },\n     \"node-addon-api\": {"
        },
        {
          "filename": "packages/nocodb/package.json",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -69,6 +69,7 @@\n     \"watch:serve\": \"nodemon -e ts -w ./build -x npm run debug-local \",\n     \"watch:run\": \"cross-env NC_DISABLE_TELE1=true EE=true nodemon -e ts,js -w ./src -x \\\"ts-node src/run/docker --log-error --project tsconfig.json\\\"\",\n     \"watch:run:cypress\": \"cross-env EE=true nodemon -e ts,js -w ./src -x \\\"ts-node src/run/docker --log-error --project tsconfig.json\\\"\",\n+    \"watch:run:cypress:pg\": \"cross-env EE=true nodemon -e ts,js -w ./src -x \\\"ts-node src/run/dockerRunPG --log-error --project tsconfig.json\\\"\",\n     \"watch:run:mysql\": \"cross-env  NC_DISABLE_TELE=true EE=true nodemon -e ts,js -w ./src -x \\\"ts-node src/run/dockerRunMysql --log-error --project tsconfig.json\\\"\",\n     \"watch:run:pg\": \"cross-env  NC_DISABLE_TELE=true EE=true nodemon -e ts,js -w ./src -x \\\"ts-node src/run/dockerRunPG --log-error --project tsconfig.json\\\"\",\n     \"run\": \"ts-node src/run/docker\",\n@@ -153,11 +154,11 @@\n     \"mysql2\": \"^2.2.5\",\n     \"nanoid\": \"^3.1.20\",\n     \"nc-common\": \"0.0.6\",\n-    \"nc-help\": \"0.2.61\",\n+    \"nc-help\": \"0.2.67\",\n     \"nc-lib-gui\": \"0.91.10\",\n     \"nc-plugin\": \"0.1.2\",\n     \"ncp\": \"^2.0.0\",\n-    \"nocodb-sdk\": \"0.91.10\",\n+    \"nocodb-sdk\": \"file:../nocodb-sdk\",\n     \"nodemailer\": \"^6.4.10\",\n     \"object-hash\": \"^3.0.0\",\n     \"ora\": \"^4.0.4\",\n@@ -257,4 +258,4 @@\n       \"**/*.spec.js\"\n     ]\n   }\n-}\n\\ No newline at end of file\n+}"
        },
        {
          "filename": "packages/nocodb/src/__tests__/restv2.test.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -209,7 +209,7 @@ describe('Noco v2 Tests', () => {\n           type: UITypes.Rollup,\n           alias: 'filmCount',\n           rollupColumn: 'FilmId',\n-          relationColumn: 'FilmMMList',\n+          relationColumn: 'Film List',\n           rollupFunction: 'count'\n         }\n       ];\n@@ -413,7 +413,7 @@ describe('Noco v2 Tests', () => {\n         type: UITypes.Lookup,\n         alias: 'filmNames',\n         lookupColumn: 'Title',\n-        relationColumn: 'FilmMMList'\n+        relationColumn: 'Film List'\n       };\n       request(app)\n         .post(`/nc/${projectId}/generate`)\n@@ -1335,7 +1335,7 @@ describe('Noco v2 Tests', () => {\n           type: UITypes.Lookup,\n           alias: 'filmIds',\n           lookupColumn: 'FilmId',\n-          relationColumn: 'FilmMMList'\n+          relationColumn: 'Film List'\n         },\n         {\n           table: 'actor',\n@@ -1398,15 +1398,15 @@ describe('Noco v2 Tests', () => {\n           type: UITypes.Rollup,\n           alias: 'actorsCount',\n           rollupColumn: 'ActorId',\n-          relationColumn: 'ActorMMList',\n+          relationColumn: 'ActorList',\n           rollupFunction: 'count'\n         },\n         {\n           table: 'actor',\n           type: UITypes.Lookup,\n           alias: 'actorsCountList',\n           lookupColumn: 'actorsCount',\n-          relationColumn: 'FilmMMList'\n+          relationColumn: 'Film List'\n         },\n         {\n           table: 'actor',"
        },
        {
          "filename": "packages/nocodb/src/lib/Noco.ts",
          "status": "modified",
          "additions": 24,
          "deletions": 15,
          "patch": "@@ -42,6 +42,7 @@ import { Tele } from 'nc-help';\n import * as http from 'http';\n import weAreHiring from './utils/weAreHiring';\n import getInstance from './utils/getInstance';\n+import initAdminFromEnv from './meta/api/userApi/initAdminFromEnv';\n \n const log = debug('nc:app');\n require('dotenv').config();\n@@ -186,8 +187,8 @@ export default class Noco {\n     }\n \n     await Noco._ncMeta.metaInit();\n-\n-    await this.readOrGenJwtSecret();\n+    await this.initJwt();\n+    await initAdminFromEnv();\n \n     await NcUpgrader.upgrade({ ncMeta: Noco._ncMeta });\n \n@@ -488,20 +489,28 @@ export default class Noco {\n     }\n   }\n \n-  private async readOrGenJwtSecret(): Promise<any> {\n-    if (this.config?.auth?.jwt && !this.config.auth.jwt.secret) {\n-      let secret = (\n-        await Noco._ncMeta.metaGet('', '', 'nc_store', {\n-          key: 'nc_auth_jwt_secret'\n-        })\n-      )?.value;\n-      if (!secret) {\n-        await Noco._ncMeta.metaInsert('', '', 'nc_store', {\n-          key: 'nc_auth_jwt_secret',\n-          value: secret = uuidv4()\n-        });\n+  private async initJwt(): Promise<any> {\n+    if (this.config?.auth?.jwt) {\n+      if (!this.config.auth.jwt.secret) {\n+        let secret = (\n+          await Noco._ncMeta.metaGet('', '', 'nc_store', {\n+            key: 'nc_auth_jwt_secret'\n+          })\n+        )?.value;\n+        if (!secret) {\n+          await Noco._ncMeta.metaInsert('', '', 'nc_store', {\n+            key: 'nc_auth_jwt_secret',\n+            value: secret = uuidv4()\n+          });\n+        }\n+        this.config.auth.jwt.secret = secret;\n+      }\n+\n+      this.config.auth.jwt.options = this.config.auth.jwt.options || {};\n+      if (!this.config.auth.jwt.options?.expiresIn) {\n+        this.config.auth.jwt.options.expiresIn =\n+          process.env.NC_JWT_EXPIRES_IN ?? '10h';\n       }\n-      this.config.auth.jwt.secret = secret;\n     }\n     let serverId = (\n       await Noco._ncMeta.metaGet('', '', 'nc_store', {"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/BaseModelSqlv2.ts",
          "status": "modified",
          "additions": 49,
          "deletions": 37,
          "patch": "@@ -41,6 +41,7 @@ import { customValidators } from './customValidators';\n import { NcError } from '../../../../meta/helpers/catchError';\n import { customAlphabet } from 'nanoid';\n import DOMPurify from 'isomorphic-dompurify';\n+import { sanitize, unsanitize } from './helpers/sanitize';\n \n const GROUP_COL = '__nc_group_id';\n \n@@ -90,7 +91,7 @@ class BaseModelSqlv2 {\n   }\n \n   public async readByPk(id?: any): Promise<any> {\n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n \n     await this.selectObject({ qb });\n \n@@ -106,7 +107,7 @@ class BaseModelSqlv2 {\n   }\n \n   public async exist(id?: any): Promise<any> {\n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n     await this.selectObject({ qb });\n     const pks = this.model.primaryKeys;\n     if ((id + '').split('___').length != pks.length) {\n@@ -119,12 +120,14 @@ class BaseModelSqlv2 {\n     args: {\n       where?: string;\n       filterArr?: Filter[];\n+      sort?: string | string[];\n     } = {}\n   ): Promise<any> {\n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n     await this.selectObject({ qb });\n \n     const aliasColObjMap = await this.model.getAliasColObjMap();\n+    const sorts = extractSortsObject(args?.sort, aliasColObjMap);\n     const filterObj = extractFilterFromXwhere(args?.where, aliasColObjMap);\n \n     await conditionV2(\n@@ -145,6 +148,12 @@ class BaseModelSqlv2 {\n       this.dbDriver\n     );\n \n+    if (Array.isArray(sorts) && sorts?.length) {\n+      await sortV2(sorts, qb, this.dbDriver);\n+    } else if (this.model.primaryKey) {\n+      qb.orderBy(this.model.primaryKey.column_name);\n+    }\n+\n     const data = await qb.first();\n \n     if (data) {\n@@ -167,15 +176,12 @@ class BaseModelSqlv2 {\n   ): Promise<any> {\n     const { where, ...rest } = this._getListArgs(args as any);\n \n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n     await this.selectObject({ qb });\n \n     const aliasColObjMap = await this.model.getAliasColObjMap();\n-\n     let sorts = extractSortsObject(args?.sort, aliasColObjMap);\n-\n     const filterObj = extractFilterFromXwhere(args?.where, aliasColObjMap);\n-\n     // todo: replace with view id\n     if (!ignoreFilterSort && this.viewId) {\n       await conditionV2(\n@@ -241,7 +247,6 @@ class BaseModelSqlv2 {\n \n     if (!ignoreFilterSort) applyPaginate(qb, rest);\n     const proto = await this.getProto();\n-\n     const data = await this.extractRawQueryAndExec(qb);\n \n     return data?.map(d => {\n@@ -257,7 +262,7 @@ class BaseModelSqlv2 {\n     await this.model.getColumns();\n     const { where } = this._getListArgs(args);\n \n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n \n     // qb.xwhere(where, await this.model.getAliasColMapping());\n     const aliasColObjMap = await this.model.getAliasColObjMap();\n@@ -306,11 +311,11 @@ class BaseModelSqlv2 {\n       );\n     }\n \n-    qb.count(this.model.primaryKey?.column_name || '*', {\n+    qb.count(sanitize(this.model.primaryKey?.column_name) || '*', {\n       as: 'count'\n     }).first();\n-\n-    return ((await qb) as any).count;\n+    const res = (await this.dbDriver.raw(unsanitize(qb.toQuery()))) as any;\n+    return (this.isPg ? res.rows[0] : res[0][0] ?? res[0]).count;\n   }\n \n   async groupBy(\n@@ -326,7 +331,7 @@ class BaseModelSqlv2 {\n   ) {\n     const { where, ...rest } = this._getListArgs(args as any);\n \n-    const qb = this.dbDriver(this.model.table_name);\n+    const qb = this.dbDriver(this.tnPath);\n     qb.count(`${this.model.primaryKey?.column_name || '*'} as count`);\n     qb.select(args.column_name);\n \n@@ -907,7 +912,7 @@ class BaseModelSqlv2 {\n \n     const proto = await childModel.getProto();\n \n-    return (await qb).map(c => {\n+    return (await this.extractRawQueryAndExec(qb)).map(c => {\n       c.__proto__ = proto;\n       return c;\n     });\n@@ -993,8 +998,7 @@ class BaseModelSqlv2 {\n     applyPaginate(qb, args);\n \n     const proto = await parentModel.getProto();\n-\n-    return (await qb).map(c => {\n+    return (await this.extractRawQueryAndExec(qb)).map(c => {\n       c.__proto__ = proto;\n       return c;\n     });\n@@ -1242,7 +1246,7 @@ class BaseModelSqlv2 {\n       await populatePk(this.model, data);\n \n       // todo: filter based on view\n-      const insertObj = await this.model.mapAliasToColumn(data, sanitize);\n+      const insertObj = await this.model.mapAliasToColumn(data);\n \n       await this.validate(insertObj);\n \n@@ -1258,12 +1262,11 @@ class BaseModelSqlv2 {\n       // const driver = trx ? trx : this.dbDriver;\n \n       const query = this.dbDriver(this.tnPath).insert(insertObj);\n-\n       if (this.isPg || this.isMssql) {\n         query.returning(\n           `${this.model.primaryKey.column_name} as ${this.model.primaryKey.title}`\n         );\n-        response = await query;\n+        response = await this.extractRawQueryAndExec(query);\n       }\n \n       const ai = this.model.columns.find(c => c.ai);\n@@ -1275,11 +1278,19 @@ class BaseModelSqlv2 {\n         if (response?.length) {\n           id = response[0];\n         } else {\n-          id = (await query)[0];\n+          const res = await this.extractRawQueryAndExec(query);\n+          id = res?.id ?? res[0]?.insertId;\n         }\n \n         if (ai) {\n-          // response = await this.readByPk(id)\n+          if (this.isSqlite) {\n+            // sqlite doesnt return id after insert\n+            id = (\n+              await this.dbDriver(this.tnPath)\n+                .select(ai.column_name)\n+                .max(ai.column_name, { as: 'id' })\n+            )[0].id;\n+          }\n           response = await this.readByPk(id);\n         } else {\n           response = data;\n@@ -1326,14 +1337,11 @@ class BaseModelSqlv2 {\n \n       await this.beforeUpdate(data, trx, cookie);\n \n-      // const driver = trx ? trx : this.dbDriver;\n-      //\n-      // this.validate(data);\n-      // await this._run(\n-      await this.dbDriver(this.tnPath)\n+      const query = this.dbDriver(this.tnPath)\n         .update(updateObj)\n         .where(await this._wherePk(id));\n-      // );\n+\n+      await this.extractRawQueryAndExec(query);\n \n       const response = await this.readByPk(id);\n       await this.afterUpdate(response, trx, cookie);\n@@ -1610,7 +1618,7 @@ class BaseModelSqlv2 {\n       } else {\n         await this.model.getColumns();\n         const { where } = this._getListArgs(args);\n-        const qb = this.dbDriver(this.model.table_name);\n+        const qb = this.dbDriver(this.tnPath);\n         const aliasColObjMap = await this.model.getAliasColObjMap();\n         const filterObj = extractFilterFromXwhere(where, aliasColObjMap);\n \n@@ -1672,7 +1680,7 @@ class BaseModelSqlv2 {\n     try {\n       await this.model.getColumns();\n       const { where } = this._getListArgs(args);\n-      const qb = this.dbDriver(this.model.table_name);\n+      const qb = this.dbDriver(this.tnPath);\n       const aliasColObjMap = await this.model.getAliasColObjMap();\n       const filterObj = extractFilterFromXwhere(where, aliasColObjMap);\n \n@@ -2029,11 +2037,19 @@ class BaseModelSqlv2 {\n   }\n \n   private async extractRawQueryAndExec(qb: QueryBuilder) {\n+    let query = qb.toQuery();\n+    if (!this.isPg && !this.isMssql) {\n+      query = unsanitize(qb.toQuery());\n+    } else {\n+      query = sanitize(query);\n+    }\n     return this.isPg\n-      ? qb\n-      : await this.dbDriver.from(\n-          this.dbDriver.raw(qb.toString()).wrap('(', ') __nc_alias')\n-        );\n+      ? (await this.dbDriver.raw(query))?.rows\n+      : query.slice(0, 6) === 'select'\n+      ? await this.dbDriver.from(\n+          this.dbDriver.raw(query).wrap('(', ') __nc_alias')\n+        )\n+      : await this.dbDriver.raw(query);\n   }\n }\n \n@@ -2168,10 +2184,6 @@ function getCompositePk(primaryKeys: Column[], row) {\n   return primaryKeys.map(c => row[c.title]).join('___');\n }\n \n-export function sanitize(v) {\n-  return v?.replace(/([^\\\\]|^)([?])/g, '$1\\\\$2');\n-}\n-\n export { BaseModelSqlv2 };\n /**\n  * @copyright Copyright (c) 2021, Xgene Cloud Ltd"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/conditionV2.ts",
          "status": "modified",
          "additions": 11,
          "deletions": 7,
          "patch": "@@ -10,6 +10,7 @@ import formulaQueryBuilderv2 from './formulav2/formulaQueryBuilderv2';\n import FormulaColumn from '../../../../models/FormulaColumn';\n import { RelationTypes, UITypes } from 'nocodb-sdk';\n // import LookupColumn from '../../../models/LookupColumn';\n+import { sanitize } from './helpers/sanitize';\n \n export default async function conditionV2(\n   conditionObj: Filter | Filter[],\n@@ -203,11 +204,13 @@ const parseConditionV2 = async (\n         filter.comparison_op === 'notempty'\n       )\n         filter.value = '';\n-      let field = customWhereClause\n-        ? filter.value\n-        : alias\n-        ? `${alias}.${column.column_name}`\n-        : column.column_name;\n+      let field = sanitize(\n+        customWhereClause\n+          ? filter.value\n+          : alias\n+          ? `${alias}.${column.column_name}`\n+          : column.column_name\n+      );\n       let val = customWhereClause ? customWhereClause : filter.value;\n \n       return qb => {\n@@ -216,12 +219,13 @@ const parseConditionV2 = async (\n             qb = qb.where(field, val);\n             break;\n           case 'neq':\n+          case 'not':\n             qb = qb.whereNot(field, val);\n             break;\n           case 'like':\n             if (column.uidt === UITypes.Formula) {\n               [field, val] = [val, field];\n-              val = `%${val}%`.replace(/^%'([\\s\\S]*)'%$/, '%$1%')\n+              val = `%${val}%`.replace(/^%'([\\s\\S]*)'%$/, '%$1%');\n             } else {\n               val = `%${val}%`;\n             }\n@@ -234,7 +238,7 @@ const parseConditionV2 = async (\n           case 'nlike':\n             if (column.uidt === UITypes.Formula) {\n               [field, val] = [val, field];\n-              val = `%${val}%`.replace(/^%'([\\s\\S]*)'%$/, '%$1%')\n+              val = `%${val}%`.replace(/^%'([\\s\\S]*)'%$/, '%$1%');\n             } else {\n               val = `%${val}%`;\n             }"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/helpers/getAst.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -86,7 +86,7 @@ const getAst = async ({\n             (!fields?.length || fields.includes(col.title)) &&\n             value\n           : fields?.length\n-          ? fields.includes(col.title)\n+          ? fields.includes(col.title) && value\n           : value\n     };\n   }, Promise.resolve({}));"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/helpers/sanitize.ts",
          "status": "added",
          "additions": 9,
          "deletions": 0,
          "patch": "@@ -0,0 +1,9 @@\n+export function sanitize(v) {\n+  return v?.replace(/([^\\\\]|^)(\\?+)/g, (_, m1, m2) => {\n+    return `${m1}${m2.split('?').join('\\\\?')}`;\n+  });\n+}\n+\n+export function unsanitize(v) {\n+  return v?.replace(/\\\\[?]/g, '?');\n+}"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/sortV2.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 1,
          "patch": "@@ -8,6 +8,7 @@ import LookupColumn from '../../../../models/LookupColumn';\n import formulaQueryBuilderv2 from './formulav2/formulaQueryBuilderv2';\n import FormulaColumn from '../../../../models/FormulaColumn';\n import { RelationTypes, UITypes } from 'nocodb-sdk';\n+import { sanitize } from './helpers/sanitize';\n \n export default async function sortV2(\n   sortList: Sort[],\n@@ -205,7 +206,7 @@ export default async function sortV2(\n         }\n         break;\n       default:\n-        qb.orderBy(`${column.column_name}`, sort.direction || 'asc');\n+        qb.orderBy(sanitize(column.column_name), sort.direction || 'asc');\n         break;\n     }\n   }"
        },
        {
          "filename": "packages/nocodb/src/lib/db/sql-mgr/code/models/xc/ModelXcMetaPg.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 3,
          "patch": "@@ -439,7 +439,7 @@ class ModelXcMetaPg extends BaseModelXcMeta {\n       case 'set':\n         return 'MultiSelect';\n       case 'json':\n-        return 'LongText';\n+        return 'JSON';\n       case 'blob':\n         return 'LongText';\n       case 'geometry':\n@@ -512,9 +512,8 @@ class ModelXcMetaPg extends BaseModelXcMeta {\n       case 'interval':\n         return 'string';\n       case 'json':\n-        return 'json';\n       case 'jsonb':\n-        return 'string';\n+        return 'json';\n \n       case 'language_handler':\n       case 'lsec':"
        },
        {
          "filename": "packages/nocodb/src/lib/jobs/RedisJobsMgr.ts",
          "status": "modified",
          "additions": 3,
          "deletions": 1,
          "patch": "@@ -11,7 +11,9 @@ export default class RedisJobsMgr extends JobsMgr {\n     super();\n     this.queue = {};\n     this.workers = {};\n-    this.connection = new Redis(config);\n+    this.connection = new Redis(config, {\n+      maxRetriesPerRequest: null\n+    });\n   }\n \n   async add("
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/columnApis.ts",
          "status": "modified",
          "additions": 10,
          "deletions": 4,
          "patch": "@@ -57,7 +57,7 @@ async function createHmAndBtColumn(\n   {\n     const title = getUniqueColumnAliasName(\n       await child.getColumns(),\n-      type === 'bt' ? alias : `${parent.title}Read`\n+      type === 'bt' ? alias : `${parent.title}`\n     );\n     await Column.insert<LinkToAnotherRecordColumn>({\n       title,\n@@ -79,7 +79,7 @@ async function createHmAndBtColumn(\n   {\n     const title = getUniqueColumnAliasName(\n       await parent.getColumns(),\n-      type === 'hm' ? alias : `${child.title}List`\n+      type === 'hm' ? alias : `${child.title} List`\n     );\n     await Column.insert({\n       title,\n@@ -427,7 +427,7 @@ export async function columnAdd(req: Request, res: Response<TableType>) {\n           await Column.insert({\n             title: getUniqueColumnAliasName(\n               await child.getColumns(),\n-              `${child.title}MMList`\n+              `${parent.title} List`\n             ),\n             uidt: UITypes.LinkToAnotherRecord,\n             type: 'mm',\n@@ -447,7 +447,7 @@ export async function columnAdd(req: Request, res: Response<TableType>) {\n           await Column.insert({\n             title: getUniqueColumnAliasName(\n               await parent.getColumns(),\n-              req.body.title ?? `${parent.title}MMList`\n+              req.body.title ?? `${child.title} List`\n             ),\n \n             uidt: UITypes.LinkToAnotherRecord,\n@@ -503,6 +503,12 @@ export async function columnAdd(req: Request, res: Response<TableType>) {\n     default:\n       {\n         colBody = getColumnPropsFromUIDT(colBody, base);\n+        if (colBody.uidt === UITypes.Duration) {\n+          colBody.dtxp = '20';\n+          // by default, colBody.dtxs is 2\n+          // Duration column needs more that that\n+          colBody.dtxs = '4';\n+        }\n         const tableUpdateBody = {\n           ...table,\n           tn: table.table_name,"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/dataApis/dataAliasExportApis.ts",
          "status": "modified",
          "additions": 8,
          "deletions": 4,
          "patch": "@@ -5,18 +5,22 @@ import {\n   getViewAndModelFromRequestByAliasOrId\n } from './helpers';\n import apiMetrics from '../../helpers/apiMetrics';\n+import View from '../../../models/View';\n \n async function csvDataExport(req: Request, res: Response) {\n-  const { view } = await getViewAndModelFromRequestByAliasOrId(req);\n-\n-  const { offset, elapsed, data } = await extractCsvData(view, req);\n+  const { model, view } = await getViewAndModelFromRequestByAliasOrId(req);\n+  let targetView = view;\n+  if (!targetView) {\n+    targetView = await View.getDefaultView(model.id);\n+  }\n+  const { offset, elapsed, data } = await extractCsvData(targetView, req);\n \n   res.set({\n     'Access-Control-Expose-Headers': 'nc-export-offset',\n     'nc-export-offset': offset,\n     'nc-export-elapsed-time': elapsed,\n     'Content-Disposition': `attachment; filename=\"${encodeURI(\n-      view.title\n+      targetView.title\n     )}-export.csv\"`\n   });\n   res.send(data);"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/metaDiffApis.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -671,7 +671,7 @@ export async function metaDiffSync(req, res) {\n               if (change.relationType === RelationTypes.BELONGS_TO) {\n                 const title = getUniqueColumnAliasName(\n                   childModel.columns,\n-                  `${parentModel.title || parentModel.table_name}Read`\n+                  `${parentModel.title || parentModel.table_name}`\n                 );\n                 await Column.insert<LinkToAnotherRecordColumn>({\n                   uidt: UITypes.LinkToAnotherRecord,\n@@ -686,7 +686,7 @@ export async function metaDiffSync(req, res) {\n               } else if (change.relationType === RelationTypes.HAS_MANY) {\n                 const title = getUniqueColumnAliasName(\n                   childModel.columns,\n-                  `${childModel.title || childModel.table_name}List`\n+                  `${childModel.title || childModel.table_name} List`\n                 );\n                 await Column.insert<LinkToAnotherRecordColumn>({\n                   uidt: UITypes.LinkToAnotherRecord,\n@@ -785,7 +785,7 @@ export async function extractAndGenerateManyToManyRelations(\n         await Column.insert<LinkToAnotherRecordColumn>({\n           title: getUniqueColumnAliasName(\n             modelA.columns,\n-            `${modelB.title}MMList`\n+            `${modelB.title} List`\n           ),\n           fk_model_id: modelA.id,\n           fk_related_model_id: modelB.id,\n@@ -803,7 +803,7 @@ export async function extractAndGenerateManyToManyRelations(\n         await Column.insert<LinkToAnotherRecordColumn>({\n           title: getUniqueColumnAliasName(\n             modelB.columns,\n-            `${modelA.title}MMList`\n+            `${modelA.title} List`\n           ),\n           fk_model_id: modelB.id,\n           fk_related_model_id: modelA.id,"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/projectApis.ts",
          "status": "modified",
          "additions": 13,
          "deletions": 2,
          "patch": "@@ -95,6 +95,10 @@ async function projectCreate(req: Request<any, any>, res) {\n     projectBody.is_meta = false;\n   }\n \n+  if (projectBody?.title.length > 50) {\n+    NcError.badRequest('Project title exceeds 50 characters');\n+  }\n+\n   if (await Project.getByTitle(projectBody?.title)) {\n     NcError.badRequest('Project title already in use');\n   }\n@@ -211,7 +215,7 @@ async function populateMeta(base: Base, project: Project): Promise<any> {\n             uidt: UITypes.LinkToAnotherRecord,\n             type: 'hm',\n             hm,\n-            title: `${hm.title}List`\n+            title: `${hm.title} List`\n           };\n         }),\n         ...belongsTo.map(bt => {\n@@ -226,7 +230,7 @@ async function populateMeta(base: Base, project: Project): Promise<any> {\n             uidt: UITypes.LinkToAnotherRecord,\n             type: 'bt',\n             bt,\n-            title: `${bt.rtitle}Read`\n+            title: `${bt.rtitle}`\n           };\n         })\n       ];\n@@ -412,6 +416,13 @@ export async function projectCost(req, res) {\n     cost = Math.min(120 * userCount, 36000);\n   }\n \n+  Tele.event({\n+    event: 'a:project:cost',\n+    data: {\n+      cost\n+    }\n+  });\n+\n   res.json({ cost });\n }\n "
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/projectUserApis.ts",
          "status": "modified",
          "additions": 3,
          "deletions": 1,
          "patch": "@@ -15,6 +15,7 @@ import NcPluginMgrv2 from '../helpers/NcPluginMgrv2';\n import Noco from '../../Noco';\n import { PluginCategory } from 'nocodb-sdk';\n import { metaApiMetrics } from '../helpers/apiMetrics';\n+import { randomTokenString } from '../helpers/stringHelpers';\n \n async function userList(req, res) {\n   res.json({\n@@ -101,7 +102,8 @@ async function userInvite(req, res, next): Promise<any> {\n           invite_token,\n           invite_token_expires: new Date(Date.now() + 24 * 60 * 60 * 1000),\n           email,\n-          roles: 'user'\n+          roles: 'user',\n+          token_version: randomTokenString()\n         });\n \n         // add user to project"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/swagger/helpers/templates/paths.ts",
          "status": "modified",
          "additions": 21,
          "deletions": 0,
          "patch": "@@ -166,6 +166,27 @@ export const getModelPaths = async (ctx: {\n       }\n     }\n   },\n+  [`/api/v1/db/data/${ctx.orgs}/${ctx.projectName}/${ctx.tableName}/find-one`]: {\n+    get: {\n+      summary: `${ctx.tableName} find-one`,\n+      operationId: 'db-table-row-find-one',\n+      description: `Find first record matching the conditions.`,\n+      tags: [ctx.tableName],\n+      parameters: [fieldsParam, whereParam, sortParam],\n+      responses: {\n+        '200': {\n+          description: 'OK',\n+          content: {\n+            'application/json': {\n+              schema: {\n+                $ref: `#/components/schemas/${ctx.tableName}Response`\n+              }\n+            }\n+          }\n+        }\n+      }\n+    }\n+  },\n   [`/api/v1/db/data/${ctx.orgs}/${ctx.projectName}/${ctx.tableName}/groupby`]: {\n     get: {\n       summary: `${ctx.tableName} groupby`,"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/userApi/helpers.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -1,4 +1,5 @@\n import * as jwt from 'jsonwebtoken';\n+import crypto from 'crypto';\n import User from '../../../models/User';\n import { NcConfig } from '../../../../interface/config';\n \n@@ -16,3 +17,7 @@ export function genJwt(user: User, config: NcConfig) {\n     config.auth.jwt.options\n   );\n }\n+\n+export function randomTokenString(): string {\n+  return crypto.randomBytes(40).toString('hex');\n+}\n\\ No newline at end of file"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/userApi/initAdminFromEnv.ts",
          "status": "added",
          "additions": 236,
          "deletions": 0,
          "patch": "@@ -0,0 +1,236 @@\n+import User from '../../../models/User';\n+import { v4 as uuidv4 } from 'uuid';\n+import { promisify } from 'util';\n+import { Tele } from 'nc-help';\n+\n+import bcrypt from 'bcryptjs';\n+import Noco from '../../../Noco';\n+import { CacheScope, MetaTable } from '../../../utils/globals';\n+import ProjectUser from '../../../models/ProjectUser';\n+import { validatePassword } from 'nocodb-sdk';\n+import boxen from 'boxen';\n+import NocoCache from '../../../cache/NocoCache';\n+\n+const { isEmail } = require('validator');\n+const rolesLevel = { owner: 0, creator: 1, editor: 2, commenter: 3, viewer: 4 };\n+\n+export default async function initAdminFromEnv(_ncMeta = Noco.ncMeta) {\n+  if (process.env.NC_ADMIN_EMAIL && process.env.NC_ADMIN_PASSWORD) {\n+    if (!isEmail(process.env.NC_ADMIN_EMAIL?.trim())) {\n+      console.log(\n+        '\\n',\n+        boxen(\n+          `Provided admin email '${process.env.NC_ADMIN_EMAIL}'  is not valid`,\n+          {\n+            title: 'Invalid admin email',\n+            padding: 1,\n+            borderStyle: 'double',\n+            titleAlignment: 'center',\n+            borderColor: 'red'\n+          }\n+        ),\n+        '\\n'\n+      );\n+      process.exit(1);\n+    }\n+\n+    const { valid, error, hint } = validatePassword(\n+      process.env.NC_ADMIN_PASSWORD\n+    );\n+    if (!valid) {\n+      console.log(\n+        '\\n',\n+        boxen(`${error}${hint ? `\\n\\n${hint}` : ''}`, {\n+          title: 'Invalid admin password',\n+          padding: 1,\n+          borderStyle: 'double',\n+          titleAlignment: 'center',\n+          borderColor: 'red'\n+        }),\n+        '\\n'\n+      );\n+      process.exit(1);\n+    }\n+\n+    let ncMeta;\n+    try {\n+      ncMeta = await _ncMeta.startTransaction();\n+      const email = process.env.NC_ADMIN_EMAIL.toLowerCase().trim();\n+\n+      const salt = await promisify(bcrypt.genSalt)(10);\n+      const password = await promisify(bcrypt.hash)(\n+        process.env.NC_ADMIN_PASSWORD,\n+        salt\n+      );\n+      const email_verification_token = uuidv4();\n+\n+      // if super admin not present\n+      if (await User.isFirst(ncMeta)) {\n+        const roles = 'user,super';\n+\n+        // roles = 'owner,creator,editor'\n+        Tele.emit('evt', {\n+          evt_type: 'project:invite',\n+          count: 1\n+        });\n+\n+        await User.insert(\n+          {\n+            firstname: '',\n+            lastname: '',\n+            email,\n+            salt,\n+            password,\n+            email_verification_token,\n+            roles\n+          },\n+          ncMeta\n+        );\n+      } else {\n+        const salt = await promisify(bcrypt.genSalt)(10);\n+        const password = await promisify(bcrypt.hash)(\n+          process.env.NC_ADMIN_PASSWORD,\n+          salt\n+        );\n+        const email_verification_token = uuidv4();\n+        const superUser = await ncMeta.metaGet2(null, null, MetaTable.USERS, {\n+          roles: 'user,super'\n+        });\n+\n+        if (email !== superUser.email) {\n+          // update admin email and password and migrate projects\n+          // if user already present and associated with some project\n+\n+          // check user account already present with the new admin email\n+          const existingUserWithNewEmail = await User.getByEmail(email, ncMeta);\n+\n+          if (existingUserWithNewEmail?.id) {\n+            // get all project access belongs to the existing account\n+            // and migrate to the admin account\n+            const existingUserProjects = await ncMeta.metaList2(\n+              null,\n+              null,\n+              MetaTable.PROJECT_USERS,\n+              {\n+                condition: { fk_user_id: existingUserWithNewEmail.id }\n+              }\n+            );\n+\n+            for (const existingUserProject of existingUserProjects) {\n+              const userProject = await ProjectUser.get(\n+                existingUserProject.project_id,\n+                superUser.id,\n+                ncMeta\n+              );\n+\n+              // if admin user already have access to the project\n+              // then update role based on the highest access level\n+              if (userProject) {\n+                if (\n+                  rolesLevel[userProject.roles] >\n+                  rolesLevel[existingUserProject.roles]\n+                ) {\n+                  await ProjectUser.update(\n+                    userProject.project_id,\n+                    superUser.id,\n+                    existingUserProject.roles,\n+                    ncMeta\n+                  );\n+                }\n+              } else {\n+                // if super doesn't have access then add the access\n+                await ProjectUser.insert(\n+                  {\n+                    ...existingUserProject,\n+                    fk_user_id: superUser.id\n+                  },\n+                  ncMeta\n+                );\n+              }\n+              // delete the old project access entry from DB\n+              await ProjectUser.delete(\n+                existingUserProject.project_id,\n+                existingUserProject.fk_user_id,\n+                ncMeta\n+              );\n+            }\n+\n+            // delete existing user\n+            await ncMeta.metaDelete(\n+              null,\n+              null,\n+              MetaTable.USERS,\n+              existingUserWithNewEmail.id\n+            );\n+\n+            // clear cache\n+            await NocoCache.delAll(\n+              CacheScope.USER,\n+              `${existingUserWithNewEmail.email}___*`\n+            );\n+            await NocoCache.del(\n+              `${CacheScope.USER}:${existingUserWithNewEmail.id}`\n+            );\n+            await NocoCache.del(\n+              `${CacheScope.USER}:${existingUserWithNewEmail.email}`\n+            );\n+            \n+            // Update email and password of super admin account\n+            await User.update(\n+              superUser.id,\n+              {\n+                salt,\n+                email,\n+                password,\n+                email_verification_token,\n+                token_version: null,\n+                refresh_token: null\n+              },\n+              ncMeta\n+            );\n+          } else {\n+            // if email's are not different update the password and hash\n+            await User.update(\n+              superUser.id,\n+              {\n+                salt,\n+                email,\n+                password,\n+                email_verification_token,\n+                token_version: null,\n+                refresh_token: null\n+              },\n+              ncMeta\n+            );\n+          }\n+        } else {\n+          const newPasswordHash = await promisify(bcrypt.hash)(\n+            process.env.NC_ADMIN_PASSWORD,\n+            superUser.salt\n+          );\n+\n+          if (newPasswordHash !== superUser.password) {\n+            // if email's are same and passwords are different\n+            // then update the password and token version\n+            await User.update(\n+              superUser.id,\n+              {\n+                salt,\n+                password,\n+                email_verification_token,\n+                token_version: null,\n+                refresh_token: null\n+              },\n+              ncMeta\n+            );\n+          }\n+        }\n+      }\n+      await ncMeta.commit();\n+    } catch (e) {\n+      console.log('Error occurred while updating/creating admin user');\n+      console.log(e);\n+      await ncMeta.rollback(e);\n+    }\n+  }\n+}"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/userApi/initStrategies.ts",
          "status": "modified",
          "additions": 17,
          "deletions": 8,
          "patch": "@@ -2,17 +2,17 @@ import User from '../../../models/User';\n import ProjectUser from '../../../models/ProjectUser';\n import { promisify } from 'util';\n import { Strategy as CustomStrategy } from 'passport-custom';\n-\n-import { Strategy } from 'passport-jwt';\n import passport from 'passport';\n-import { ExtractJwt } from 'passport-jwt';\n+import passportJWT from 'passport-jwt';\n import { Strategy as AuthTokenStrategy } from 'passport-auth-token';\n import { Strategy as GoogleStrategy } from 'passport-google-oauth20';\n+import { randomTokenString } from '../../helpers/stringHelpers';\n \n const PassportLocalStrategy = require('passport-local').Strategy;\n+const ExtractJwt = passportJWT.ExtractJwt;\n+const JwtStrategy = passportJWT.Strategy;\n \n const jwtOptions = {\n-  expiresIn: process.env.NC_JWT_EXPIRES_IN ?? '10h',\n   jwtFromRequest: ExtractJwt.fromHeader('xc-auth')\n };\n \n@@ -83,7 +83,7 @@ export function initStrategies(router): void {\n   });\n \n   passport.use(\n-    new Strategy(\n+    new JwtStrategy(\n       {\n         secretOrKey: Noco.getConfig().auth.jwt.secret,\n         ...jwtOptions,\n@@ -102,15 +102,23 @@ export function initStrategies(router): void {\n         );\n \n         if (cachedVal) {\n-          if (cachedVal.token_version !== jwtPayload.token_version) {\n+          if (\n+            !cachedVal.token_version ||\n+            !jwtPayload.token_version ||\n+            cachedVal.token_version !== jwtPayload.token_version\n+          ) {\n             return done(new Error('Token Expired. Please login again.'));\n           }\n           return done(null, cachedVal);\n         }\n \n         User.getByEmail(jwtPayload?.email)\n           .then(async user => {\n-            if (user.token_version !== jwtPayload.token_version) {\n+            if (\n+              !user.token_version ||\n+              !jwtPayload.token_version ||\n+              user.token_version !== jwtPayload.token_version\n+            ) {\n               return done(new Error('Token Expired. Please login again.'));\n             }\n             if (req.ncProjectId) {\n@@ -266,7 +274,8 @@ export function initStrategies(router): void {\n                     password: '',\n                     salt,\n                     roles,\n-                    email_verified: true\n+                    email_verified: true,\n+                    token_version: randomTokenString()\n                   });\n                   return done(null, user);\n                 }"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/userApi/ui/auth/emailVerify.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -54,7 +54,7 @@ export default `<!DOCTYPE html>\n     methods: {},\n     async created() {\n       try {\n-        const valid = (await axios.post('<%- baseUrl %>/api/v1/db/auth/email/validate/' + this.token)).data;\n+        const valid = (await axios.post('<%- baseUrl %>/api/v1/auth/email/validate/' + this.token)).data;\n         this.valid = !!valid;\n       } catch (e) {\n         this.valid = false;"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/userApi/userApis.ts",
          "status": "modified",
          "additions": 61,
          "deletions": 13,
          "patch": "@@ -1,5 +1,5 @@\n import { Request, Response } from 'express';\n-import { TableType } from 'nocodb-sdk';\n+import { TableType, validatePassword } from 'nocodb-sdk';\n import catchError, { NcError } from '../../helpers/catchError';\n const { isEmail } = require('validator');\n import * as ejs from 'ejs';\n@@ -11,7 +11,6 @@ import { Tele } from 'nc-help';\n \n const { v4: uuidv4 } = require('uuid');\n import Audit from '../../../models/Audit';\n-import crypto from 'crypto';\n import NcPluginMgrv2 from '../../helpers/NcPluginMgrv2';\n \n import passport from 'passport';\n@@ -20,6 +19,7 @@ import ncMetaAclMw from '../../helpers/ncMetaAclMw';\n import { MetaTable } from '../../../utils/globals';\n import Noco from '../../../Noco';\n import { genJwt } from './helpers';\n+import { randomTokenString } from '../../helpers/stringHelpers';\n \n export async function signup(req: Request, res: Response<TableType>) {\n   const {\n@@ -31,6 +31,12 @@ export async function signup(req: Request, res: Response<TableType>) {\n   } = req.body;\n   let { password } = req.body;\n \n+  // validate password and throw error if password is satisfying the conditions\n+  const { valid, error } = validatePassword(password);\n+  if (!valid) {\n+    NcError.badRequest(`Password : ${error}`);\n+  }\n+\n   if (!isEmail(_email)) {\n     NcError.badRequest(`Invalid email`);\n   }\n@@ -173,15 +179,14 @@ async function successfulSignIn({\n     await promisify((req as any).login.bind(req))(user);\n     const refreshToken = randomTokenString();\n \n-    let token_version = user.token_version;\n-    if (!token_version) {\n-      token_version = randomTokenString();\n+    if (!user.token_version) {\n+      user.token_version = randomTokenString();\n     }\n \n     await User.update(user.id, {\n       refresh_token: refreshToken,\n       email: user.email,\n-      token_version\n+      token_version: user.token_version\n     });\n     setTokenCookie(res, refreshToken);\n \n@@ -237,10 +242,6 @@ async function googleSignin(req, res, next) {\n   )(req, res, next);\n }\n \n-function randomTokenString(): string {\n-  return crypto.randomBytes(40).toString('hex');\n-}\n-\n function setTokenCookie(res, token): void {\n   // create http only cookie with refresh token that expires in 7 days\n   const cookieOptions = {\n@@ -262,6 +263,13 @@ async function passwordChange(req: Request<any, any>, res): Promise<any> {\n   if (!currentPassword || !newPassword) {\n     return NcError.badRequest('Missing new/old password');\n   }\n+\n+  // validate password and throw error if password is satisfying the conditions\n+  const { valid, error } = validatePassword(newPassword);\n+  if (!valid) {\n+    NcError.badRequest(`Password : ${error}`);\n+  }\n+\n   const user = await User.getByEmail((req as any).user.email);\n   const hashedPassword = await promisify(bcrypt.hash)(\n     currentPassword,\n@@ -318,10 +326,10 @@ async function passwordForgot(req: Request<any, any>, res): Promise<any> {\n           subject: 'Password Reset Link',\n           text: `Visit following link to update your password : ${\n             (req as any).ncSiteUrl\n-          }/api/v1/db/auth/password/reset/${token}.`,\n+          }/api/v1/auth/password/reset/${token}.`,\n           html: ejs.render(template, {\n             resetLink:\n-              (req as any).ncSiteUrl + `/api/v1/db/auth/password/reset/${token}`\n+              (req as any).ncSiteUrl + `/api/v1/auth/password/reset/${token}`\n           })\n         })\n       );\n@@ -381,6 +389,12 @@ async function passwordReset(req, res): Promise<any> {\n     NcError.badRequest('Email registered via social account');\n   }\n \n+  // validate password and throw error if password is satisfying the conditions\n+  const { valid, error } = validatePassword(req.body.password);\n+  if (!valid) {\n+    NcError.badRequest(`Password : ${error}`);\n+  }\n+\n   const salt = await promisify(bcrypt.genSalt)(10);\n   const password = await promisify(bcrypt.hash)(req.body.password, salt);\n \n@@ -501,7 +515,7 @@ const mapRoutes = router => {\n     })(req, res, next)\n   );\n \n-  // new API\n+  // deprecated APIs\n   router.post('/api/v1/db/auth/user/signup', catchError(signup));\n   router.post('/api/v1/db/auth/user/signin', catchError(signin));\n   router.get(\n@@ -534,5 +548,39 @@ const mapRoutes = router => {\n     '/api/v1/db/auth/password/reset/:tokenId',\n     catchError(renderPasswordReset)\n   );\n+\n+  // new API\n+  router.post('/api/v1/auth/user/signup', catchError(signup));\n+  router.post('/api/v1/auth/user/signin', catchError(signin));\n+  router.get(\n+    '/api/v1/auth/user/me',\n+    extractProjectIdAndAuthenticate,\n+    catchError(me)\n+  );\n+  router.post('/api/v1/auth/password/forgot', catchError(passwordForgot));\n+  router.post(\n+    '/api/v1/auth/token/validate/:tokenId',\n+    catchError(tokenValidate)\n+  );\n+  router.post(\n+    '/api/v1/auth/password/reset/:tokenId',\n+    catchError(passwordReset)\n+  );\n+  router.post(\n+    '/api/v1/auth/email/validate/:tokenId',\n+    catchError(emailVerification)\n+  );\n+  router.post(\n+    '/api/v1/auth/password/change',\n+    ncMetaAclMw(passwordChange, 'passwordChange')\n+  );\n+  router.post(\n+    '/api/v1/auth/token/refresh',\n+    ncMetaAclMw(refreshToken, 'refreshToken')\n+  );\n+  router.get(\n+    '/api/v1/auth/password/reset/:tokenId',\n+    catchError(renderPasswordReset)\n+  );\n };\n export { mapRoutes as userApis };"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/api/utilApis.ts",
          "status": "modified",
          "additions": 31,
          "deletions": 2,
          "patch": "@@ -60,8 +60,17 @@ export async function releaseVersion(_req: Request, res: Response) {\n   res.json(result);\n }\n \n-export async function axiosRequestMake(req: Request, res: Response) {\n+export async function appHealth(_: Request, res: Response) {\n+  res.json({\n+    message: 'OK',\n+    timestamp: Date.now(),\n+    uptime: process.uptime()\n+  });\n+}\n+\n+async function _axiosRequestMake(req: Request, res: Response) {\n   const { apiMeta } = req.body;\n+\n   if (apiMeta?.body) {\n     try {\n       apiMeta.body = JSON.parse(apiMeta.body);\n@@ -106,12 +115,32 @@ export async function axiosRequestMake(req: Request, res: Response) {\n   return res.json(data?.data);\n }\n \n+export async function axiosRequestMake(req: Request, res: Response) {\n+  const {\n+    apiMeta: { url }\n+  } = req.body;\n+  const isExcelImport = /.*\\.(xls|xlsx|xlsm|ods|ots)/;\n+  const isCSVImport = /.*\\.(csv)/;\n+  const ipBlockList = /(10)(\\.([2]([0-5][0-5]|[01234][6-9])|[1][0-9][0-9]|[1-9][0-9]|[0-9])){3}|(172)\\.(1[6-9]|2[0-9]|3[0-1])(\\.(2[0-4][0-9]|25[0-5]|[1][0-9][0-9]|[1-9][0-9]|[0-9])){2}|(192)\\.(168)(\\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){2}|(0.0.0.0)|localhost?/g;\n+  if (\n+    ipBlockList.test(url) ||\n+    (!isCSVImport.test(url) && !isExcelImport.test(url))\n+  ) {\n+    return res.json({});\n+  }\n+  if (isCSVImport || isExcelImport) {\n+    req.body.apiMeta.responseType = 'arraybuffer';\n+  }\n+  return await _axiosRequestMake(req, res);\n+}\n+\n export default router => {\n   router.post(\n     '/api/v1/db/meta/connection/test',\n     ncMetaAclMw(testConnection, 'testConnection')\n   );\n   router.get('/api/v1/db/meta/nocodb/info', catchError(appInfo));\n-  router.get('/api/v1/db/meta/nocodb/version', catchError(releaseVersion));\n   router.post('/api/v1/db/meta/axiosRequestMake', catchError(axiosRequestMake));\n+  router.get('/api/v1/version', catchError(releaseVersion));\n+  router.get('/api/v1/health', catchError(appHealth));\n };"
        },
        {
          "filename": "packages/nocodb/src/lib/meta/helpers/NcPluginMgrv2.ts",
          "status": "modified",
          "additions": 48,
          "deletions": 18,
          "patch": "@@ -31,6 +31,7 @@ import Noco from '../../Noco';\n import Local from '../../v1-legacy/plugins/adapters/storage/Local';\n import { MetaTable } from '../../utils/globals';\n import { PluginCategory } from 'nocodb-sdk';\n+import Plugin from '../../models/Plugin';\n \n const defaultPlugins = [\n   SlackPluginConfig,\n@@ -97,25 +98,54 @@ class NcPluginMgrv2 {\n           pluginConfig.id\n         );\n       }\n+    }\n+    await this.initPluginsFromEnv();\n+  }\n \n-      /* init only the active plugins */\n-      // if (pluginConfig?.active) {\n-      //   const tempPlugin = new plugin.builder(this.app, plugin);\n-      //\n-      //   this.activePlugins.push(tempPlugin);\n-      //\n-      //   if (pluginConfig?.input) {\n-      //     pluginConfig.input = JSON.parse(pluginConfig.input);\n-      //   }\n-      //\n-      //   try {\n-      //     await tempPlugin.init(pluginConfig?.input);\n-      //   } catch (e) {\n-      //     console.log(\n-      //       `Plugin(${plugin?.title}) initialization failed : ${e.message}`\n-      //     );\n-      //   }\n-      // }\n+  private static async initPluginsFromEnv() {\n+    /*\n+     * NC_S3_BUCKET_NAME\n+     * NC_S3_REGION\n+     * NC_S3_ACCESS_KEY\n+     * NC_S3_ACCESS_SECRET\n+     * */\n+\n+    if (\n+      process.env.NC_S3_BUCKET_NAME &&\n+      process.env.NC_S3_REGION &&\n+      process.env.NC_S3_ACCESS_KEY &&\n+      process.env.NC_S3_ACCESS_SECRET\n+    ) {\n+      const s3Plugin = await Plugin.getPluginByTitle(S3PluginConfig.title);\n+      await Plugin.update(s3Plugin.id, {\n+        active: true,\n+        input: JSON.stringify({\n+          bucket: process.env.NC_S3_BUCKET_NAME,\n+          region: process.env.NC_S3_REGION,\n+          access_key: process.env.NC_S3_ACCESS_KEY,\n+          access_secret: process.env.NC_S3_ACCESS_SECRET\n+        })\n+      });\n+    }\n+\n+    if (\n+      process.env.NC_SMTP_FROM &&\n+      process.env.NC_SMTP_HOST &&\n+      process.env.NC_SMTP_PORT\n+    ) {\n+      const smtpPlugin = await Plugin.getPluginByTitle(SMTPPluginConfig.title);\n+      await Plugin.update(smtpPlugin.id, {\n+        active: true,\n+        input: JSON.stringify({\n+          from: process.env.NC_SMTP_FROM,\n+          host: process.env.NC_SMTP_HOST,\n+          port: process.env.NC_SMTP_PORT,\n+          username: process.env.NC_SMTP_USERNAME,\n+          password: process.env.NC_SMTP_PASSWORD,\n+          secure: process.env.NC_SMTP_SECURE,\n+          ignoreTLS: process.env.NC_SMTP_IGNORE_TLS\n+        })\n+      });\n     }\n   }\n "
        },
        {
          "filename": "packages/nocodb/src/lib/meta/helpers/stringHelpers.ts",
          "status": "added",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -0,0 +1,5 @@\n+import crypto from 'crypto';\n+\n+export function randomTokenString(): string {\n+  return crypto.randomBytes(40).toString('hex');\n+}"
        },
        {
          "filename": "packages/nocodb/src/lib/models/Filter.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -23,6 +23,7 @@ export default class Filter {\n   comparison_op?:\n     | 'eq'\n     | 'neq'\n+    | 'not'\n     | 'like'\n     | 'nlike'\n     | 'empty'"
        },
        {
          "filename": "packages/nocodb/src/lib/models/Model.ts",
          "status": "modified",
          "additions": 6,
          "deletions": 4,
          "patch": "@@ -20,6 +20,7 @@ import {\n import View from './View';\n import { NcError } from '../meta/helpers/catchError';\n import Audit from './Audit';\n+import { sanitize } from '../db/sql-data-mapper/lib/sql/helpers/sanitize';\n \n export default class Model implements TableType {\n   copy_enabled: boolean;\n@@ -399,13 +400,14 @@ export default class Model implements TableType {\n     return true;\n   }\n \n-  async mapAliasToColumn(data, sanitize = v => v) {\n+  async mapAliasToColumn(data) {\n     const insertObj = {};\n     for (const col of await this.getColumns()) {\n       if (isVirtualCol(col)) continue;\n-      const val =\n-        data?.[sanitize(col.column_name)] ?? data?.[sanitize(col.title)];\n-      if (val !== undefined) insertObj[sanitize(col.column_name)] = val;\n+      const val = data?.[col.column_name] ?? data?.[col.title];\n+      if (val !== undefined) {\n+        insertObj[sanitize(col.column_name)] = val;\n+      }\n     }\n     return insertObj;\n   }"
        },
        {
          "filename": "packages/nocodb/src/lib/models/Plugin.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -91,15 +91,15 @@ export default class Plugin implements PluginType {\n   /**\n    * get plugin by title\n    */\n-  public static async getPluginByTitle(title: string) {\n+  public static async getPluginByTitle(title: string, ncMeta = Noco.ncMeta) {\n     let plugin =\n       title &&\n       (await NocoCache.get(\n         `${CacheScope.PLUGIN}:${title}`,\n         CacheGetType.TYPE_OBJECT\n       ));\n     if (!plugin) {\n-      plugin = await Noco.ncMeta.metaGet2(null, null, MetaTable.PLUGIN, {\n+      plugin = await ncMeta.metaGet2(null, null, MetaTable.PLUGIN, {\n         title\n       });\n       await NocoCache.set(`${CacheScope.PLUGIN}:${title}`, plugin);"
        },
        {
          "filename": "packages/nocodb/src/lib/models/User.ts",
          "status": "modified",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -84,6 +84,9 @@ export default class User implements UserType {\n \n     if (updateObj.email) {\n       updateObj.email = updateObj.email.toLowerCase();\n+    } else {\n+      // set email prop to avoid generation of invalid cache key\n+      updateObj.email = (await this.get(id, ncMeta))?.email?.toLowerCase();\n     }\n     // get existing cache\n     const keys = ["
        },
        {
          "filename": "packages/nocodb/src/lib/models/View.ts",
          "status": "modified",
          "additions": 29,
          "deletions": 0,
          "patch": "@@ -157,6 +157,32 @@ export default class View implements ViewType {\n     return viewId && this.get(viewId?.id || viewId);\n   }\n \n+  public static async getDefaultView(\n+    fk_model_id: string,\n+    ncMeta = Noco.ncMeta\n+  ) {\n+    let view =\n+      fk_model_id &&\n+      (await NocoCache.get(\n+        `${CacheScope.VIEW}:${fk_model_id}:default`,\n+        CacheGetType.TYPE_OBJECT\n+      ));\n+    if (!view) {\n+      view = await ncMeta.metaGet2(\n+        null,\n+        null,\n+        MetaTable.VIEWS,\n+        {\n+          fk_model_id,\n+          is_default: 1\n+        },\n+        null\n+      );\n+      await NocoCache.set(`${CacheScope.VIEW}:${fk_model_id}:default`, view);\n+    }\n+    return view && new View(view);\n+  }\n+\n   public static async list(modelId: string, ncMeta = Noco.ncMeta) {\n     let viewsList = await NocoCache.getList(CacheScope.VIEW, [modelId]);\n     if (!viewsList.length) {\n@@ -666,6 +692,9 @@ export default class View implements ViewType {\n     if (o) {\n       // update data\n       o = { ...o, ...updateObj };\n+      if (o.is_default) {\n+        await NocoCache.set(`${CacheScope.VIEW}:${o.fk_model_id}:default`, o);\n+      }\n       // set cache\n       await NocoCache.set(key, o);\n     }"
        },
        {
          "filename": "packages/nocodb/tests/export-import/ReadMe.md",
          "status": "added",
          "additions": 23,
          "deletions": 0,
          "patch": "@@ -0,0 +1,23 @@\n+## config.json\n+{\n+    \"srcProject\": \"sample\",\n+    \"dstProject\": \"sample-copy\",\n+    \"baseURL\": \"http://localhost:8080\",\n+    \"xc-auth\": \"Copy Auth Token\"\n+}\n+- baseURL & xc-auth are common configurations for both import & export\n+\n+## Export\n+- `srcProject`: specify source project name to be exported.\n+- Export JSON file will be created as `srcProject.json`\n+- execute \n+ `cd packages/nocodb/tests/export-import`\n+ `node exportSchema.js`\n+\n+## Import\n+- `srcProject`: specify JSON file name to be imported (sans .JSON suffix)\n+- `dstProject`: new project name to be imported as\n+- Data will also be imported if `srcProject` exists in NocoDB. Note that, data import isn't via exported JSON\n+- execute\n+  `cd packages/nocodb/tests/export-import`\n+  `node importSchema.js`"
        },
        {
          "filename": "packages/nocodb/tests/export-import/config.json",
          "status": "added",
          "additions": 6,
          "deletions": 0,
          "patch": "@@ -0,0 +1,6 @@\n+{\n+  \"srcProject\": \"sample\",\n+  \"dstProject\": \"sample-copy\",\n+  \"baseURL\": \"http://localhost:8080\",\n+  \"xc-auth\": \"Copy Auth Token\"\n+}\n\\ No newline at end of file"
        },
        {
          "filename": "packages/nocodb/tests/export-import/exportSchema.js",
          "status": "added",
          "additions": 297,
          "deletions": 0,
          "patch": "@@ -0,0 +1,297 @@\n+const Api = require('nocodb-sdk').Api;\n+const { UITypes } = require('nocodb-sdk');\n+const jsonfile = require('jsonfile');\n+\n+const GRID = 3, GALLERY = 2, FORM = 1;\n+\n+let ncMap = { /* id: name <string> */ };\n+let tblSchema = [];\n+let api = {};\n+let viewStore = { columns: {}, sort: {}, filter: {} };\n+\n+let inputConfig = jsonfile.readFileSync(`config.json`)\n+let ncConfig = {\n+  projectName: inputConfig.srcProject,\n+  baseURL: inputConfig.baseURL,\n+  headers: {\n+    'xc-auth': `${inputConfig[\"xc-auth\"]}`\n+  }\n+};\n+\n+\n+// helper routines\n+// remove objects containing 0/ false/ null\n+// fixme: how to handle when cdf (default value) is configured as 0/ null/ false\n+function removeEmpty(obj) {\n+  return Object.fromEntries(\n+    Object.entries(obj)\n+      .filter(([_, v]) => v != null && v != 0 && v != false)\n+      .map(([k, v]) => [k, v === Object(v) ? removeEmpty(v) : v])\n+  );\n+}\n+\n+function addColumnSpecificData(c) {\n+  // pick required fields to proceed further\n+  let col = removeEmpty(\n+    (({ id, title, column_name, uidt, dt, pk, pv, rqd, dtxp, system }) => ({\n+      id,\n+      title,\n+      column_name,\n+      uidt,\n+      dt,\n+      pk,\n+      pv,\n+      rqd,\n+      dtxp,\n+      system\n+    }))(c)\n+  );\n+\n+  switch (c.uidt) {\n+    case UITypes.Formula:\n+      col.formula = c.colOptions.formula;\n+      col.formula_raw = c.colOptions.formula_raw;\n+      break;\n+    case UITypes.LinkToAnotherRecord:\n+      col[`colOptions`] = {\n+        fk_model_id: c.fk_model_id,\n+        fk_related_model_id: c.colOptions.fk_related_model_id,\n+        fk_child_column_id: c.colOptions.fk_child_column_id,\n+        fk_parent_column_id: c.colOptions.fk_parent_column_id,\n+        type: c.colOptions.type\n+      };\n+      break;\n+    case UITypes.Lookup:\n+      col[`colOptions`] = {\n+        fk_model_id: c.fk_model_id,\n+        fk_relation_column_id: c.colOptions.fk_relation_column_id,\n+        fk_lookup_column_id: c.colOptions.fk_lookup_column_id\n+      };\n+      break;\n+    case UITypes.Rollup:\n+      col[`colOptions`] = {\n+        fk_model_id: c.fk_model_id,\n+        fk_relation_column_id: c.colOptions.fk_relation_column_id,\n+        fk_rollup_column_id: c.colOptions.fk_rollup_column_id,\n+        rollup_function: c.colOptions.rollup_function\n+      };\n+      break;\n+  }\n+\n+  return col;\n+}\n+\n+function addViewDetails(v) {\n+  // pick required fields to proceed further\n+  let view = (({ id, title, type, show_system_fields, lock_type, order }) => ({\n+    id,\n+    title,\n+    type,\n+    show_system_fields,\n+    lock_type,\n+    order\n+  }))(v);\n+\n+  // form view\n+  if (v.type === FORM) {\n+    view.property = (({\n+      heading,\n+      subheading,\n+      success_msg,\n+      redirect_after_secs,\n+      email,\n+      submit_another_form,\n+      show_blank_form\n+    }) => ({\n+      heading,\n+      subheading,\n+      success_msg,\n+      redirect_after_secs,\n+      email,\n+      submit_another_form,\n+      show_blank_form\n+    }))(v.view);\n+  }\n+\n+  // gallery view\n+  else if (v.type === GALLERY) {\n+    view.property = {\n+      fk_cover_image_col_id: ncMap[v.view.fk_cover_image_col_id]\n+    };\n+  }\n+\n+  // gallery view doesn't share column information in api yet\n+  if (v.type !== GALLERY) {\n+    if (v.type === GRID)\n+      view.columns = viewStore.columns[v.id].map(a =>\n+        (({ id, width, order, show }) => ({ id, width, order, show }))(a)\n+      );\n+    if (v.type === FORM)\n+      view.columns = viewStore.columns[v.id].map(a =>\n+        (({ id, order, show, label, help, description, required }) => ({\n+          id,\n+          order,\n+          show,\n+          label,\n+          help,\n+          description,\n+          required\n+        }))(a)\n+      );\n+\n+    for (let i = 0; i < view.columns?.length; i++)\n+      view.columns[i].title = ncMap[viewStore.columns[v.id][i].id];\n+\n+    // skip hm & mm columns\n+    view.columns = view.columns\n+      ?.filter(a => a.title?.includes('_nc_m2m_') === false)\n+      .filter(a => a.title?.includes('nc_') === false);\n+  }\n+\n+  // filter & sort configurations\n+  if (v.type !== FORM) {\n+    view.sort = viewStore.sort[v.id].map(a =>\n+      (({ fk_column_id, direction, order }) => ({\n+        fk_column_id,\n+        direction,\n+        order\n+      }))(a)\n+    );\n+    view.filter = viewStore.filter[v.id].map(a =>\n+      (({ fk_column_id, logical_op, comparison_op, value, order }) => ({\n+        fk_column_id,\n+        logical_op,\n+        comparison_op,\n+        value,\n+        order\n+      }))(a)\n+    );\n+  }\n+  return view;\n+}\n+\n+// view data stored as is for quick access\n+async function storeViewDetails(tableId) {\n+  // read view data for each table\n+  let viewList = await api.dbView.list(tableId);\n+  for (let j = 0; j < viewList.list.length; j++) {\n+    let v = viewList.list[j];\n+    let viewDetails = [];\n+\n+    // invoke view specific read to populate columns information\n+    if (v.type === FORM) viewDetails = (await api.dbView.formRead(v.id)).columns;\n+    else if (v.type === GALLERY) viewDetails = await api.dbView.galleryRead(v.id);\n+    else if (v.type === GRID) viewDetails = await api.dbView.gridColumnsList(v.id);\n+    viewStore.columns[v.id] = viewDetails;\n+\n+    // populate sort information\n+    let vSort = await api.dbTableSort.list(v.id);\n+    viewStore.sort[v.id] = vSort.sorts.list;\n+\n+    let vFilter = await api.dbTableFilter.read(v.id);\n+    viewStore.filter[v.id] = vFilter;\n+  }\n+}\n+\n+// mapping table for quick information access\n+// store maps for tableId, columnId, viewColumnId & viewId to their names\n+async function generateMapTbl(pId) {\n+  const tblList = await api.dbTable.list(pId);\n+\n+  for (let i = 0; i < tblList.list.length; i++) {\n+    let tblId = tblList.list[i].id;\n+    let tbl = await api.dbTable.read(tblId);\n+\n+    // table ID <> name\n+    ncMap[tblId] = tbl.title;\n+\n+    // column ID <> name\n+    tbl.columns.map(x => (ncMap[x.id] = x.title));\n+\n+    // view ID <> name\n+    tbl.views.map(x => (ncMap[x.id] = x.tn));\n+\n+    for (let i = 0; i < tbl.views.length; i++) {\n+      let x = tbl.views[i];\n+      let viewColumns = [];\n+      if (x.type === FORM) viewColumns = (await api.dbView.formRead(x.id)).columns;\n+      else if (x.type === GALLERY)\n+        viewColumns = (await api.dbView.galleryRead(x.id)).columns;\n+      else if (x.type === GRID) viewColumns = await api.dbView.gridColumnsList(x.id);\n+\n+      // view column ID <> name\n+      viewColumns?.map(a => (ncMap[a.id] = ncMap[a.fk_column_id]));\n+    }\n+  }\n+}\n+\n+// main\n+//\n+async function exportSchema() {\n+  api = new Api(ncConfig);\n+\n+  // fetch project details (id et.al)\n+  const x = await api.project.list();\n+  const p = x.list.find(a => a.title === ncConfig.projectName);\n+\n+  await generateMapTbl(p.id);\n+\n+  // read project\n+  const tblList = await api.dbTable.list(p.id);\n+\n+  // for each table\n+  for (let i = 0; i < tblList.list.length; i++) {\n+    let tblId = tblList.list[i].id;\n+    await storeViewDetails(tblId);\n+\n+    let tbl = await api.dbTable.read(tblId);\n+\n+    // prepare schema\n+    let tSchema = {\n+      id: tbl.id,\n+      title: tbl.title,\n+      table_name: tbl?.table_name,\n+      columns: [...tbl.columns.map(c => addColumnSpecificData(c))]\n+        .filter(a => a.title.includes('_nc_m2m_') === false)        // mm\n+        .filter(a => a.title.includes(p.prefix) === false)          // hm\n+        .filter(\n+          a => !(a?.system === 1 && a.uidt === UITypes.LinkToAnotherRecord)\n+        ),\n+      views: [...tbl.views.map(v => addViewDetails(v))]\n+    };\n+    tblSchema.push(tSchema);\n+  }\n+}\n+\n+(async () => {\n+  await exportSchema();\n+  jsonfile.writeFileSync(\n+    `${ncConfig.projectName.replace(/ /g, '_')}.json`,\n+    tblSchema,\n+    { spaces: 2 }\n+  );\n+})().catch(e => {\n+  console.log(e);\n+});\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Raju Udava <sivadstala@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */\n\\ No newline at end of file"
        },
        {
          "filename": "packages/nocodb/tests/export-import/importSchema.js",
          "status": "added",
          "additions": 537,
          "deletions": 0,
          "patch": "@@ -0,0 +1,537 @@\n+// tbd\n+// - formula dependency list\n+// - nested lookup/ rollup\n+\n+const Api = require('nocodb-sdk').Api;\n+const { UITypes } = require('nocodb-sdk');\n+const jsonfile = require('jsonfile');\n+\n+let inputConfig = jsonfile.readFileSync(`config.json`)\n+let ncConfig = {\n+  srcProject: inputConfig.srcProject,\n+  projectName: inputConfig.dstProject,\n+  baseURL: inputConfig.baseURL,\n+  headers: {\n+    'xc-auth': `${inputConfig[\"xc-auth\"]}`\n+  }\n+};\n+let ncIn = jsonfile.readFileSync(`${ncConfig.srcProject}.json`);\n+\n+let api = {};\n+let ncProject = {};\n+let link = [];\n+let lookup = [];\n+let rollup = [];\n+let formula = [];\n+\n+let rootLinks = [];\n+\n+// maps v1 table ID, v2 table ID & table title to table schema\n+let ncTables = {};\n+\n+\n+async function createBaseTables() {\n+  console.log(`createBaseTables`);\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let reducedColumnSet = tblSchema.columns.filter(\n+      a =>\n+        a.uidt !== UITypes.LinkToAnotherRecord &&\n+        a.uidt !== UITypes.Lookup &&\n+        a.uidt !== UITypes.Rollup &&\n+        a.uidt !== UITypes.Formula\n+    );\n+    link.push(\n+      ...tblSchema.columns.filter(a => a.uidt === UITypes.LinkToAnotherRecord)\n+    );\n+    lookup.push(...tblSchema.columns.filter(a => a.uidt === UITypes.Lookup));\n+    rollup.push(...tblSchema.columns.filter(a => a.uidt === UITypes.Rollup));\n+    formula.push(...tblSchema.columns.filter(a => a.uidt === UITypes.Formula));\n+    formula.map(a => (a['table_id'] = tblSchema.id));\n+\n+    let tbl = await api.dbTable.create(ncProject.id, {\n+      title: tblSchema.title,\n+      table_name: tblSchema.title,\n+      columns: reducedColumnSet.map(({ id, ...rest }) => ({ ...rest }))\n+    });\n+    ncTables[tbl.title] = tbl;\n+    ncTables[tbl.id] = tbl;\n+    ncTables[tblSchema.id] = tbl;\n+  }\n+}\n+\n+let linksCreated = [];\n+function isLinkCreated(pId, cId) {\n+  let idx = linksCreated.findIndex(a => a.cId === pId && a.pId === cId);\n+  if (idx === -1) {\n+    linksCreated.push({ pId: pId, cId: cId });\n+    return false;\n+  }\n+  return true;\n+}\n+\n+// retrieve nc-view column ID from corresponding nc-column ID\n+async function nc_getViewColumnId(viewId, viewType, ncColumnId) {\n+  // retrieve view Info\n+  let viewDetails;\n+\n+  if (viewType === 'form')\n+    viewDetails = (await api.dbView.formRead(viewId)).columns;\n+  else if (viewType === 'gallery')\n+    viewDetails = (await api.dbView.galleryRead(viewId)).columns;\n+  else viewDetails = await api.dbView.gridColumnsList(viewId);\n+\n+  return viewDetails.find(x => x.fk_column_id === ncColumnId)?.id;\n+}\n+\n+async function createFormula() {\n+  for (let i = 0; i < formula.length; i++) {\n+    let tbl = await api.dbTableColumn.create(ncTables[formula[i].table_id].id, {\n+      uidt: UITypes.Formula,\n+      title: formula[i].title,\n+      formula_raw: formula[i].formula_raw\n+    });\n+  }\n+}\n+\n+async function createLinks() {\n+  console.log(`createLinks`);\n+\n+  for (let i = 0; i < link.length; i++) {\n+    if (\n+      (link[i].colOptions.type === 'mm' &&\n+        false ===\n+          isLinkCreated(\n+            link[i].colOptions.fk_parent_column_id,\n+            link[i].colOptions.fk_child_column_id\n+          )) ||\n+      link[i].colOptions.type === 'hm'\n+    ) {\n+      let srcTbl = ncTables[link[i].colOptions.fk_model_id];\n+      let dstTbl = ncTables[link[i].colOptions.fk_related_model_id];\n+\n+      // create link\n+      let tbl = await api.dbTableColumn.create(srcTbl.id, {\n+        uidt: UITypes.LinkToAnotherRecord,\n+        title: link[i].title,\n+        parentId: srcTbl.id,\n+        childId: dstTbl.id,\n+        type: link[i].colOptions.type\n+      });\n+      ncTables[tbl.title] = tbl;\n+      ncTables[tbl.id] = tbl;\n+      ncTables[link[i].colOptions.fk_model_id] = tbl;\n+\n+      // for data-link procedure later\n+      rootLinks.push({ linkColumn: link[i], linkSrcTbl: srcTbl });\n+\n+      // symmetry field update\n+      //\n+      let v2ColSchema = tbl.columns.find(x => x.title === link[i].title);\n+      // read related table again after link is created\n+      dstTbl = await api.dbTable.read(dstTbl.id);\n+      let v2SymmetricColumn =\n+        link[i].colOptions.type === 'mm'\n+          ? dstTbl.columns.find(\n+              x =>\n+                x.uidt === UITypes.LinkToAnotherRecord &&\n+                x?.colOptions.fk_parent_column_id ===\n+                  v2ColSchema.colOptions.fk_child_column_id &&\n+                x?.colOptions.fk_child_column_id ===\n+                  v2ColSchema.colOptions.fk_parent_column_id\n+            )\n+          : dstTbl.columns.find(\n+              x =>\n+                x.uidt === UITypes.LinkToAnotherRecord &&\n+                x?.colOptions.fk_parent_column_id ===\n+                  v2ColSchema.colOptions.fk_parent_column_id &&\n+                x?.colOptions.fk_child_column_id ===\n+                  v2ColSchema.colOptions.fk_child_column_id\n+            );\n+      let v1SymmetricColumn =\n+        link[i].colOptions.type === 'mm'\n+          ? link.find(\n+              x =>\n+                x.colOptions.fk_parent_column_id ===\n+                  link[i].colOptions.fk_child_column_id &&\n+                x.colOptions.fk_child_column_id ===\n+                  link[i].colOptions.fk_parent_column_id &&\n+                x.colOptions.type === 'mm'\n+            )\n+          : link.find(\n+              x =>\n+                x.colOptions.fk_parent_column_id ===\n+                  link[i].colOptions.fk_parent_column_id &&\n+                x.colOptions.fk_child_column_id ===\n+                  link[i].colOptions.fk_child_column_id &&\n+                x.colOptions.type === 'bt'\n+            );\n+\n+      tbl = await api.dbTableColumn.update(v2SymmetricColumn.id, {\n+        ...v2SymmetricColumn,\n+        title: v1SymmetricColumn.title,\n+        column_name: null\n+      });\n+      ncTables[tbl.title] = tbl;\n+      ncTables[tbl.id] = tbl;\n+      ncTables[v1SymmetricColumn.colOptions.fk_model_id] = tbl;\n+    }\n+  }\n+}\n+\n+function get_v2Id(v1ColId) {\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let colSchema = {};\n+    if (\n+      undefined !== (colSchema = tblSchema.columns.find(x => x.id === v1ColId))\n+    ) {\n+      let colName = colSchema.title;\n+      let v2Tbl = ncTables[tblSchema.id];\n+      return v2Tbl.columns.find(y => y.title === colName)?.id;\n+    }\n+  }\n+}\n+\n+async function createLookup() {\n+  console.log(`createLookup`);\n+\n+  for (let i = 0; i < lookup.length; i++) {\n+    let srcTbl = ncTables[lookup[i].colOptions.fk_model_id];\n+    let v2_fk_relation_column_id = get_v2Id(\n+      lookup[i].colOptions.fk_relation_column_id\n+    );\n+    let v2_lookup_column_id = get_v2Id(\n+      lookup[i].colOptions.fk_lookup_column_id\n+    );\n+\n+    if (v2_lookup_column_id) {\n+      let tbl = await api.dbTableColumn.create(srcTbl.id, {\n+        uidt: UITypes.Lookup,\n+        title: lookup[i].title,\n+        fk_relation_column_id: v2_fk_relation_column_id,\n+        fk_lookup_column_id: v2_lookup_column_id\n+      });\n+      ncTables[tbl.title] = tbl;\n+      ncTables[tbl.id] = tbl;\n+      ncTables[lookup[i].colOptions.fk_model_id] = tbl;\n+    }\n+  }\n+}\n+\n+async function createRollup() {\n+  console.log(`createRollup`);\n+\n+  for (let i = 0; i < rollup.length; i++) {\n+    let srcTbl = ncTables[rollup[i].colOptions.fk_model_id];\n+    let v2_fk_relation_column_id = get_v2Id(\n+      rollup[i].colOptions.fk_relation_column_id\n+    );\n+    let v2_rollup_column_id = get_v2Id(\n+      rollup[i].colOptions.fk_rollup_column_id\n+    );\n+\n+    if (v2_rollup_column_id) {\n+      let tbl = await api.dbTableColumn.create(srcTbl.id, {\n+        uidt: UITypes.Rollup,\n+        title: rollup[i].title,\n+        column_name: rollup[i].title,\n+        fk_relation_column_id: v2_fk_relation_column_id,\n+        fk_rollup_column_id: v2_rollup_column_id,\n+        rollup_function: rollup[i].colOptions.rollup_function\n+      });\n+      ncTables[tbl.title] = tbl;\n+      ncTables[tbl.id] = tbl;\n+      ncTables[rollup[i].colOptions.fk_model_id] = tbl;\n+    }\n+  }\n+}\n+\n+async function configureGrid() {\n+  console.log(`configureGrid`);\n+\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let tblId = ncTables[tblSchema.id].id;\n+    let gridList = tblSchema.views.filter(a => a.type === 3);\n+    let srcTbl = await api.dbTable.read(tblId);\n+\n+    const view = await api.dbView.list(tblId);\n+\n+    // create / rename view\n+    for (let gridCnt = 0; gridCnt < gridList.length; gridCnt++) {\n+      let viewCreated = {};\n+      // rename first view; default view already created\n+      if (gridCnt === 0) {\n+        viewCreated = await api.dbView.update(view.list[0].id, {\n+          title: gridList[gridCnt].title\n+        });\n+      }\n+      // create new views\n+      else {\n+        viewCreated = await api.dbView.gridCreate(tblId, {\n+          title: gridList[gridCnt].title\n+        });\n+      }\n+\n+      // retrieve view Info\n+      let viewId = viewCreated.id;\n+      let viewDetails = await api.dbView.gridColumnsList(viewId);\n+\n+      // column visibility\n+      for (\n+        let colCnt = 0;\n+        colCnt < gridList[gridCnt].columns.length;\n+        colCnt++\n+      ) {\n+        let ncColumnId = srcTbl.columns.find(\n+          a => a.title === gridList[gridCnt].columns[colCnt].title\n+        )?.id;\n+        // let ncViewColumnId = await nc_getViewColumnId( viewCreated.id, \"grid\", ncColumnId )\n+        let ncViewColumnId = viewDetails.find(\n+          x => x.fk_column_id === ncColumnId\n+        )?.id;\n+        // column order & visibility\n+        await api.dbViewColumn.update(viewCreated.id, ncViewColumnId, {\n+          show: gridList[gridCnt].columns[colCnt].show,\n+          order: gridList[gridCnt].columns[colCnt].order\n+        });\n+        await api.dbView.gridColumnUpdate(ncViewColumnId, {\n+          width: gridList[gridCnt].columns[colCnt].width\n+        });\n+      }\n+\n+      // sort\n+      for (let sCnt = 0; sCnt < gridList[gridCnt].sort.length; sCnt++) {\n+        let sColName = tblSchema.columns.find(\n+          a => gridList[gridCnt].sort[sCnt].fk_column_id === a.id\n+        ).title;\n+        await api.dbTableSort.create(viewId, {\n+          fk_column_id: srcTbl.columns.find(a => a.title === sColName)?.id,\n+          direction: gridList[gridCnt].sort[sCnt].direction\n+        });\n+      }\n+\n+      // filter\n+      for (let fCnt = 0; fCnt < gridList[gridCnt].filter.length; fCnt++) {\n+        let fColName = tblSchema.columns.find(\n+          a => gridList[gridCnt].sort[fCnt].fk_column_id === a.id\n+        ).title;\n+        await api.dbTableFilter.create(viewId, {\n+          ...gridList[gridCnt].filter[fCnt],\n+          fk_column_id: srcTbl.columns.find(a => a.title === fColName)?.id\n+        });\n+      }\n+    }\n+  }\n+}\n+\n+async function configureGallery() {\n+  console.log(`configureGallery`);\n+\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let tblId = ncTables[tblSchema.id].id;\n+    let galleryList = tblSchema.views.filter(a => a.type === 2);\n+    for (let cnt = 0; cnt < galleryList.length; cnt++) {\n+      const viewCreated = await api.dbView.galleryCreate(tblId, {\n+        title: galleryList[cnt].title\n+      });\n+    }\n+  }\n+}\n+\n+async function configureForm() {\n+  console.log(`configureForm`);\n+\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let tblId = ncTables[tblSchema.id].id;\n+    let formList = tblSchema.views.filter(a => a.type === 1);\n+    let srcTbl = await api.dbTable.read(tblId);\n+\n+    for (let formCnt = 0; formCnt < formList.length; formCnt++) {\n+      const formData = {\n+        title: formList[formCnt].title,\n+        ...formList[formCnt].property\n+      };\n+      const viewCreated = await api.dbView.formCreate(tblId, formData);\n+\n+      // column visibility\n+      for (\n+        let colCnt = 0;\n+        colCnt < formList[formCnt].columns.length;\n+        colCnt++\n+      ) {\n+        let ncColumnId = srcTbl.columns.find(\n+          a => a.title === formList[formCnt].columns[colCnt].title\n+        )?.id;\n+        let ncViewColumnId = await nc_getViewColumnId(\n+          viewCreated.id,\n+          'form',\n+          ncColumnId\n+        );\n+        // column order & visibility\n+        await api.dbView.formColumnUpdate(ncViewColumnId, {\n+          show: formList[formCnt].columns[colCnt].show,\n+          order: formList[formCnt].columns[colCnt].order,\n+          label: formList[formCnt].columns[colCnt].label,\n+          description: formList[formCnt].columns[colCnt].description,\n+          required: formList[formCnt].columns[colCnt].required\n+        });\n+      }\n+    }\n+  }\n+}\n+\n+async function restoreBaseData() {\n+  console.log(`restoreBaseData`);\n+\n+  for (let i = 0; i < ncIn.length; i++) {\n+    let tblSchema = ncIn[i];\n+    let tblId = ncTables[tblSchema.id].id;\n+    let pk = tblSchema.columns.find(a => a.pk).title;\n+\n+    let moreRecords = true;\n+    let offset = 0,\n+      limit = 25;\n+\n+    while (moreRecords) {\n+      let recList = await api.dbTableRow.list(\n+        'nc',\n+        ncConfig.srcProject,\n+        tblSchema.title,\n+        {},\n+        {\n+          query: { limit: limit, offset: offset }\n+        }\n+      );\n+      moreRecords = !recList.pageInfo.isLastPage;\n+      offset += limit;\n+\n+      for (let recCnt = 0; recCnt < recList.list.length; recCnt++) {\n+        let record = await api.dbTableRow.read(\n+          'nc',\n+          ncConfig.srcProject,\n+          tblSchema.title,\n+          recList.list[recCnt][pk]\n+        );\n+\n+        // post-processing on the record\n+        for (const [key, value] of Object.entries(record)) {\n+          let table = ncTables[tblId];\n+          // retrieve datatype\n+          const dt = table.columns.find(x => x.title === key)?.uidt;\n+          if (dt === UITypes.LinkToAnotherRecord) delete record[key];\n+          if (dt === UITypes.Lookup) delete record[key];\n+          if (dt === UITypes.Rollup) delete record[key];\n+        }\n+        await api.dbTableRow.create(\n+          'nc',\n+          ncConfig.projectName,\n+          tblSchema.title,\n+          record\n+        );\n+      }\n+    }\n+  }\n+}\n+\n+async function restoreLinks() {\n+  console.log(`restoreLinks`);\n+\n+  for (let i = 0; i < rootLinks.length; i++) {\n+    let pk = rootLinks[i].linkSrcTbl.columns.find(a => a.pk).title;\n+    let moreRecords = true;\n+    let offset = 0,\n+      limit = 25;\n+\n+    while (moreRecords) {\n+      let recList = await api.dbTableRow.list(\n+        'nc',\n+        ncConfig.srcProject,\n+        rootLinks[i].linkSrcTbl.title,\n+        {},\n+        {\n+          query: { limit: limit, offset: offset }\n+        }\n+      );\n+      moreRecords = !recList.pageInfo.isLastPage;\n+      offset += limit;\n+\n+      for (let recCnt = 0; recCnt < recList.list.length; recCnt++) {\n+        let record = await api.dbTableRow.read(\n+          'nc',\n+          ncConfig.srcProject,\n+          rootLinks[i].linkSrcTbl.title,\n+          recList.list[recCnt][pk]\n+        );\n+        let linkField = record[rootLinks[i].linkColumn.title];\n+        if (linkField.length) {\n+          await api.dbTableRow.nestedAdd(\n+            'nc',\n+            ncConfig.projectName,\n+            rootLinks[i].linkSrcTbl.title,\n+            record[pk],\n+            rootLinks[i].linkColumn.colOptions.type,\n+            encodeURIComponent(rootLinks[i].linkColumn.title),\n+            linkField[0][pk]\n+          );\n+        }\n+      }\n+    }\n+  }\n+}\n+\n+async function importSchema() {\n+  api = new Api(ncConfig);\n+\n+  const x = await api.project.list();\n+  const p = x.list.find(a => a.title === ncConfig.projectName);\n+  if (p) await api.project.delete(p.id);\n+  ncProject = await api.project.create({ title: ncConfig.projectName });\n+\n+  await createBaseTables();\n+  await createLinks();\n+  await createLookup();\n+  await createRollup();\n+  await createFormula();\n+\n+  // configure views\n+  await configureGrid();\n+  await configureGallery();\n+  await configureForm();\n+\n+  // restore data only if source project exists\n+  const p2 = x.list.find(a => a.title === ncConfig.srcProject);\n+  if (p2 !== undefined) {\n+    await restoreBaseData();\n+    await restoreLinks();\n+  }\n+}\n+(async () => {\n+  await importSchema();\n+  console.log('completed');\n+})().catch(e => console.log(e));\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Raju Udava <sivadstala@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */\n\\ No newline at end of file"
        },
        {
          "filename": "packages/nocodb/tests/pg-cy-quick/01-cy-quick.sql",
          "status": "added",
          "additions": 4759,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/cypress/cypress.json",
          "status": "modified",
          "additions": 3,
          "deletions": 2,
          "patch": "@@ -20,7 +20,8 @@\n         \"test/pg-restTableOps.js\",\n         \"test/pg-restViews.js\",\n         \"test/pg-restRoles.js\",\n-        \"test/pg-restMisc.js\"\n+        \"test/pg-restMisc.js\",\n+        \"common/9a_QuickTest.js\"\n     ],\n     \"defaultCommandTimeout\": 13000,\n     \"pageLoadTimeout\": 600000,\n@@ -47,7 +48,7 @@\n         \"screenshot\": false,\n         \"airtable\": {\n             \"apiKey\": \"keyn1MR87qgyUsYg4\",\n-            \"sharedBase\": \"https://airtable.com/shrkSQdtKNzUfAbIY\"\n+            \"sharedBase\": \"https://airtable.com/shr4z0qmh6dg5s3eB\"\n         }\n     },\n     \"fixturesFolder\": \"scripts/cypress/fixtures\","
        },
        {
          "filename": "scripts/cypress/docker-compose-pg-cy-quick.yml",
          "status": "added",
          "additions": 17,
          "deletions": 0,
          "patch": "@@ -0,0 +1,17 @@\n+version: \"2.1\"\n+\n+services:\n+    pg96:\n+        image: postgres:9.6\n+        restart: always\n+        environment:\n+            POSTGRES_PASSWORD: password\n+        ports:\n+            - 5432:5432\n+        volumes:\n+            - ../../packages/nocodb/tests/pg-cy-quick:/docker-entrypoint-initdb.d\n+        healthcheck:\n+            test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n+            interval: 10s\n+            timeout: 5s\n+            retries: 5"
        },
        {
          "filename": "scripts/cypress/fixtures/quickTest/noco_0_91_7.db",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/cypress/integration/common/1a_table_operations.js",
          "status": "modified",
          "additions": 3,
          "deletions": 3,
          "patch": "@@ -80,9 +80,9 @@ export const genTest = (apiType, dbType) => {\n             // 4a. Address table, has many field\n             cy.openTableTab(\"Address\", 25);\n \n-            mainPage.getCell(\"CityRead\", 1).scrollIntoView();\n+            mainPage.getCell(\"City\", 1).scrollIntoView();\n             mainPage\n-                .getCell(\"CityRead\", 1)\n+                .getCell(\"City\", 1)\n                 .find(\".name\")\n                 .contains(\"Lethbridge\")\n                 .should(\"exist\");\n@@ -92,7 +92,7 @@ export const genTest = (apiType, dbType) => {\n             cy.openTableTab(\"Country\", 25);\n \n             mainPage\n-                .getCell(\"CityList\", 1)\n+                .getCell(\"City List\", 1)\n                 .find(\".name\")\n                 .contains(\"Kabul\")\n                 .should(\"exist\");"
        },
        {
          "filename": "scripts/cypress/integration/common/1d_pg_table_view_drag_drop_reorder.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -23,7 +23,7 @@ export const genTest = (apiType, dbType) => {\n         /*\n             Original order of list items\n             Actor, Address, Category, City, Country, Customer, FIlm, FilmText, Language, Payment, Rental Staff\n-            ActorInfo, CustomerList, FilmList, NiceButSlowerFilmList, SalesByFilmCategory, SalesByStore, StaffList\n+            ActorInfo, Customer List, Film List, NiceButSlowerFilm List, SalesByFilmCategory, SalesByStore, Staff List\n         */\n \n         it(`Table & SQL View list, Drag/drop`, () => {"
        },
        {
          "filename": "scripts/cypress/integration/common/1d_table_view_drag_drop_reorder.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -18,7 +18,7 @@ export const genTest = (apiType, dbType) => {\n         /*\n             Original order of list items\n             Actor, Address, Category, City, Country, Customer, FIlm, FilmText, Language, Payment, Rental Staff\n-            ActorInfo, CustomerList, FilmList, NiceButSlowerFilmList, SalesByFilmCategory, SalesByStore, StaffList\n+            ActorInfo, Customer List, Film List, NiceButSlowerFilm List, SalesByFilmCategory, SalesByStore, Staff List\n         */\n \n         before(() => {"
        },
        {
          "filename": "scripts/cypress/integration/common/2a_table_with_belongs_to_colulmn.js",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -23,12 +23,12 @@ export const genTest = (apiType, dbType) => {\n \n         it(\"Expand belongs-to column\", () => {\n             // expand first row\n-            cy.get('td[data-col=\"CityList\"] div:visible', {\n+            cy.get('td[data-col=\"City List\"] div:visible', {\n                 timeout: 12000,\n             })\n                 .first()\n                 .click();\n-            cy.get('td[data-col=\"CityList\"] div .mdi-arrow-expand:visible')\n+            cy.get('td[data-col=\"City List\"] div .mdi-arrow-expand:visible')\n                 .first()\n                 .click();\n "
        },
        {
          "filename": "scripts/cypress/integration/common/2b_table_with_m2m_column.js",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -23,10 +23,10 @@ export const genTest = (apiType, dbType) => {\n \n         it(\"Expand m2m column\", () => {\n             // expand first row\n-            cy.get('td[data-col=\"FilmMMList\"] div', { timeout: 12000 })\n+            cy.get('td[data-col=\"Film List\"] div', { timeout: 12000 })\n                 .first()\n                 .click({ force: true });\n-            cy.get('td[data-col=\"FilmMMList\"] div .mdi-arrow-expand')\n+            cy.get('td[data-col=\"Film List\"] div .mdi-arrow-expand')\n                 .first()\n                 .click({ force: true });\n "
        },
        {
          "filename": "scripts/cypress/integration/common/3e_duration_column.js",
          "status": "added",
          "additions": 275,
          "deletions": 0,
          "patch": "@@ -0,0 +1,275 @@\n+import { mainPage } from \"../../support/page_objects/mainPage\";\n+import {\n+    isTestSuiteActive,\n+} from \"../../support/page_objects/projectConstants\";\n+\n+export const genTest = (apiType, dbType) => {\n+    if (!isTestSuiteActive(apiType, dbType)) return;\n+\n+    describe(`${apiType.toUpperCase()} api - DURATION`, () => {\n+        const tableName = \"DurationTable\";\n+\n+        // to retrieve few v-input nodes from their label\n+        //\n+        const fetchParentFromLabel = (label) => {\n+            cy.get(\"label\").contains(label).parents(\".v-input\").click();\n+        };\n+\n+        // Run once before test- create table\n+        //\n+        before(() => {\n+            mainPage.tabReset();\n+            cy.createTable(tableName);\n+        });\n+\n+        after(() => {\n+            cy.deleteTable(tableName);\n+        });\n+\n+        // Routine to create a new look up column\n+        //\n+        const addDurationColumn = (columnName, durationFormat) => {\n+            // (+) icon at end of column header (to add a new column)\n+            // opens up a pop up window\n+            //\n+            cy.get(\".new-column-header\").click();\n+\n+            // Column name\n+            cy.get(\".nc-column-name-input input\").clear().type(`${columnName}`);\n+\n+            // Column data type\n+            cy.get(\".nc-ui-dt-dropdown\").click();\n+            cy.getActiveMenu().contains(\"Duration\").click();\n+\n+            // Configure Child table & column names\n+            fetchParentFromLabel(\"Duration Format\");\n+            cy.getActiveMenu().contains(durationFormat).click();\n+\n+            // click on Save\n+            cy.get(\".nc-col-create-or-edit-card\").contains(\"Save\").click();\n+\n+            // Verify if column exists.\n+            //\n+            cy.get(`th:contains(${columnName})`).should(\"exist\");\n+        };\n+\n+        // routine to delete column\n+        //\n+        const deleteColumnByName = (columnName) => {\n+            // verify if column exists before delete\n+            cy.get(`th:contains(${columnName})`).should(\"exist\");\n+\n+            // delete opiton visible on mouse-over\n+            cy.get(`th:contains(${columnName}) .mdi-menu-down`)\n+                .trigger(\"mouseover\")\n+                .click();\n+\n+            // delete/ confirm on pop-up\n+            cy.get(\".nc-column-delete\").click();\n+            cy.getActiveModal().find(\"button:contains(Confirm)\").click();\n+\n+            // validate if deleted (column shouldnt exist)\n+            cy.get(`th:contains(${columnName})`).should(\"not.exist\");\n+        };\n+\n+        // routine to edit column\n+        //\n+        const editColumnByName = (oldName, newName, newDurationFormat) => {\n+            // verify if column exists before delete\n+            cy.get(`th:contains(${oldName})`).should(\"exist\");\n+\n+            // delete opiton visible on mouse-over\n+            cy.get(`th:contains(${oldName}) .mdi-menu-down`)\n+                .trigger(\"mouseover\")\n+                .click();\n+\n+            // edit/ save on pop-up\n+            cy.get(\".nc-column-edit\").click();\n+            cy.get(\".nc-column-name-input input\").clear().type(newName);\n+\n+            // Configure Child table & column names\n+            fetchParentFromLabel(\"Duration Format\");\n+            cy.getActiveMenu().contains(newDurationFormat).click();\n+\n+            cy.get(\".nc-col-create-or-edit-card\")\n+                .contains(\"Save\")\n+                .click({ force: true });\n+\n+            cy.toastWait(\"Duration column updated successfully\");\n+\n+            // validate if deleted (column shouldnt exist)\n+            cy.get(`th:contains(${oldName})`).should(\"not.exist\");\n+            cy.get(`th:contains(${newName})`).should(\"exist\");\n+        };\n+\n+        const addDurationData = (colName, index, cellValue, expectedValue, isNewRow = false) => {\n+            if (isNewRow) {\n+                cy.get(\".nc-add-new-row-btn:visible\").should(\"exist\");\n+                cy.wait(500)\n+                cy.get(\".nc-add-new-row-btn\").click({ force: true });\n+            } else {\n+                mainPage.getRow(index).find(\".nc-row-expand-icon\").click({ force: true });\n+            }\n+            cy.get(\".duration-cell-wrapper > input\").first().should('exist').type(cellValue);\n+            cy.getActiveModal().find(\"button\").contains(\"Save row\").click({ force: true });\n+            cy.toastWait(\"Row updated successfully\");\n+            mainPage.getCell(colName, index).find('input').then(($e) => {\n+                expect($e[0].value).to.equal(expectedValue)\n+            })\n+        }\n+\n+        ///////////////////////////////////////////////////\n+        // Test case\n+        {\n+            // Duration: h:mm\n+            it(\"Duration: h:mm\", () => {\n+                addDurationColumn(\"NC_DURATION_0\", \"h:mm (e.g. 1:23)\");\n+                addDurationData(\"NC_DURATION_0\", 1, \"1:30\", \"01:30\", true);\n+                addDurationData(\"NC_DURATION_0\", 2, \"30\", \"00:30\", true);\n+                addDurationData(\"NC_DURATION_0\", 3, \"60\", \"01:00\", true);\n+                addDurationData(\"NC_DURATION_0\", 4, \"80\", \"01:20\", true);\n+                addDurationData(\"NC_DURATION_0\", 5, \"12:34\", \"12:34\", true);\n+                addDurationData(\"NC_DURATION_0\", 6, \"15:130\", \"17:10\", true);\n+                addDurationData(\"NC_DURATION_0\", 7, \"123123\", \"2052:03\", true);\n+            });\n+\n+            it(\"Duration: Edit Column NC_DURATION_0\", () => {\n+                editColumnByName(\n+                    \"NC_DURATION_0\",\n+                    \"NC_DURATION_EDITED_0\",\n+                    \"h:mm:ss (e.g. 3:45, 1:23:40)\"\n+                );\n+            });\n+\n+            it(\"Duration: Delete column\", () => {\n+                deleteColumnByName(\"NC_DURATION_EDITED_0\");\n+            });\n+        }\n+\n+        {\n+            // Duration: h:mm:ss\n+            it(\"Duration: h:mm:ss\", () => {\n+                addDurationColumn(\"NC_DURATION_1\", \"h:mm:ss (e.g. 3:45, 1:23:40)\");\n+                addDurationData(\"NC_DURATION_1\", 1, \"11:22:33\", \"11:22:33\");\n+                addDurationData(\"NC_DURATION_1\", 2, \"1234\", \"00:20:34\");\n+                addDurationData(\"NC_DURATION_1\", 3, \"50\", \"00:00:50\");\n+                addDurationData(\"NC_DURATION_1\", 4, \"1:1111\", \"00:19:31\");\n+                addDurationData(\"NC_DURATION_1\", 5, \"1:11:1111\", \"01:29:31\");\n+                addDurationData(\"NC_DURATION_1\", 6, \"15:130\", \"00:17:10\");\n+                addDurationData(\"NC_DURATION_1\", 7, \"123123\", \"34:12:03\");\n+            });\n+\n+            it(\"Duration: Edit Column NC_DURATION_1\", () => {\n+                editColumnByName(\n+                    \"NC_DURATION_1\",\n+                    \"NC_DURATION_EDITED_1\",\n+                    \"h:mm:ss.s (e.g. 3:34.6, 1:23:40.0)\"\n+                );\n+            });\n+\n+            it(\"Duration: Delete column\", () => {\n+                deleteColumnByName(\"NC_DURATION_EDITED_1\");\n+            });\n+        }\n+\n+        {\n+            // h:mm:ss.s\n+            it(\"Duration: h:mm:ss.s\", () => {\n+                addDurationColumn(\"NC_DURATION_2\", \"h:mm:ss.s (e.g. 3:34.6, 1:23:40.0)\");\n+                addDurationData(\"NC_DURATION_2\", 1, \"1234\", \"00:20:34.0\");\n+                addDurationData(\"NC_DURATION_2\", 2, \"12:34\", \"00:12:34.0\");\n+                addDurationData(\"NC_DURATION_2\", 3, \"12:34:56\", \"12:34:56.0\");\n+                addDurationData(\"NC_DURATION_2\", 4, \"12:34:999\", \"12:50:39.0\");\n+                addDurationData(\"NC_DURATION_2\", 5, \"12:999:56\", \"28:39:56.0\");\n+                addDurationData(\"NC_DURATION_2\", 6, \"12:34:56.12\", \"12:34:56.1\");\n+                addDurationData(\"NC_DURATION_2\", 7, \"12:34:56.199\", \"12:34:56.2\");\n+            });\n+\n+            it(\"Duration: Edit Column NC_DURATION_2\", () => {\n+                editColumnByName(\n+                    \"NC_DURATION_2\",\n+                    \"NC_DURATION_EDITED_2\",\n+                    \"h:mm:ss (e.g. 3:45, 1:23:40)\"\n+                );\n+            });\n+\n+            it(\"Duration: Delete column\", () => {\n+                deleteColumnByName(\"NC_DURATION_EDITED_2\");\n+            });\n+        }\n+\n+        {\n+            // h:mm:ss.ss\n+            it(\"Duration: h:mm:ss.ss\", () => {\n+                addDurationColumn(\"NC_DURATION_3\", \"h:mm:ss.ss (e.g. 3.45.67, 1:23:40.00)\");\n+                addDurationData(\"NC_DURATION_3\", 1, \"1234\", \"00:20:34.00\");\n+                addDurationData(\"NC_DURATION_3\", 2, \"12:34\", \"00:12:34.00\");\n+                addDurationData(\"NC_DURATION_3\", 3, \"12:34:56\", \"12:34:56.00\");\n+                addDurationData(\"NC_DURATION_3\", 4, \"12:34:999\", \"12:50:39.00\");\n+                addDurationData(\"NC_DURATION_3\", 5, \"12:999:56\", \"28:39:56.00\");\n+                addDurationData(\"NC_DURATION_3\", 6, \"12:34:56.12\", \"12:34:56.12\");\n+                addDurationData(\"NC_DURATION_3\", 7, \"12:34:56.199\", \"12:34:56.20\");\n+            });\n+\n+            it(\"Duration: Edit Column NC_DURATION_3\", () => {\n+                editColumnByName(\n+                    \"NC_DURATION_3\",\n+                    \"NC_DURATION_EDITED_3\",\n+                    \"h:mm:ss.ss (e.g. 3.45.67, 1:23:40.00)\"\n+                );\n+            });\n+\n+            it(\"Duration: Delete column\", () => {\n+                deleteColumnByName(\"NC_DURATION_EDITED_3\");\n+            });\n+        }\n+\n+        {\n+            // h:mm:ss.sss\n+            it(\"Duration: h:mm:ss.sss\", () => {\n+                addDurationColumn(\"NC_DURATION_4\", \"h:mm:ss.sss (e.g. 3.45.678, 1:23:40.000)\");\n+                addDurationData(\"NC_DURATION_4\", 1, \"1234\", \"00:20:34.000\");\n+                addDurationData(\"NC_DURATION_4\", 2, \"12:34\", \"00:12:34.000\");\n+                addDurationData(\"NC_DURATION_4\", 3, \"12:34:56\", \"12:34:56.000\");\n+                addDurationData(\"NC_DURATION_4\", 4, \"12:34:999\", \"12:50:39.000\");\n+                addDurationData(\"NC_DURATION_4\", 5, \"12:999:56\", \"28:39:56.000\");\n+                addDurationData(\"NC_DURATION_4\", 6, \"12:34:56.12\", \"12:34:56.012\");\n+                addDurationData(\"NC_DURATION_4\", 7, \"12:34:56.199\", \"12:34:56.199\");\n+            });\n+\n+            it(\"Duration: Edit Column NC_DURATION_4\", () => {\n+                editColumnByName(\n+                    \"NC_DURATION_4\",\n+                    \"NC_DURATION_EDITED_4\",\n+                    \"h:mm (e.g. 1:23)\"\n+                );\n+            });\n+\n+            it(\"Duration: Delete column\", () => {\n+                deleteColumnByName(\"NC_DURATION_EDITED_4\");\n+            });\n+        }\n+    });\n+};\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */\n\\ No newline at end of file"
        },
        {
          "filename": "scripts/cypress/integration/common/4c_form_view_detailed.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -119,7 +119,7 @@ export const genTest = (apiType, dbType) => {\n                     .should(\"exist\");\n                 cy.get(\".nc-field-wrapper\")\n                     .eq(1)\n-                    .contains(\"CityList\")\n+                    .contains(\"City List\")\n                     .should(\"exist\");\n                 cy.get(\".nc-field-wrapper\")\n                     .eq(2)"
        },
        {
          "filename": "scripts/cypress/integration/common/4d_table_view_grid_locked.js",
          "status": "modified",
          "additions": 3,
          "deletions": 3,
          "patch": "@@ -77,18 +77,18 @@ export const genTest = (apiType, dbType) => {\n \n                 // check if add/ expand options available for 'has many' column type\n                 mainPage\n-                    .getCell(\"CityList\", 1)\n+                    .getCell(\"City List\", 1)\n                     .click()\n                     .find(\"button.mdi-plus\")\n                     .should(`${vString}exist`);\n                 mainPage\n-                    .getCell(\"CityList\", 1)\n+                    .getCell(\"City List\", 1)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .should(`${vString}exist`);\n \n                 // update row option (right click) - should not be available for Lock view\n-                mainPage.getCell(\"CityList\", 1).rightclick();\n+                mainPage.getCell(\"City List\", 1).rightclick();\n                 cy.get(\".menuable__content__active\").should(\n                     `${vString}be.visible`\n                 );"
        },
        {
          "filename": "scripts/cypress/integration/common/4e_form_view_share.js",
          "status": "modified",
          "additions": 3,
          "deletions": 3,
          "patch": "@@ -72,7 +72,7 @@ export const genTest = (apiType, dbType) => {\n                 //     \"#data-table-form-City\"\n                 // );\n \n-                cy.get('[title=\"AddressList\"]').drag(\".nc-drag-n-drop-to-hide\");\n+                cy.get('[title=\"Address List\"]').drag(\".nc-drag-n-drop-to-hide\");\n \n                 cy.get(\".nc-form > .mx-auto\")\n                     .find('[type=\"checkbox\"]')\n@@ -131,8 +131,8 @@ export const genTest = (apiType, dbType) => {\n                         // all fields, barring removed field should exist\n                         cy.get('[title=\"City\"]').should(\"exist\");\n                         cy.get('[title=\"LastUpdate\"]').should(\"exist\");\n-                        cy.get('[title=\"CountryRead\"]').should(\"exist\");\n-                        cy.get('[title=\"AddressList\"]').should(\"not.exist\");\n+                        cy.get('[title=\"Country\"]').should(\"exist\");\n+                        cy.get('[title=\"Address List\"]').should(\"not.exist\");\n \n                         // order of LastUpdate & City field is retained\n                         cy.get(\".nc-field-wrapper\")"
        },
        {
          "filename": "scripts/cypress/integration/common/4f_grid_view_share.js",
          "status": "modified",
          "additions": 15,
          "deletions": 15,
          "patch": "@@ -170,7 +170,7 @@ export const genTest = (apiType, dbType) => {\n                 const verifyCsv = (retrievedRecords) => {\n                     // expected output, statically configured\n                     let storedRecords = [\n-                        `Address,District,PostalCode,Phone,Location,CustomerList,StaffList,CityRead,StaffMMList`,\n+                        `Address,District,PostalCode,Phone,Location,Customer List,Staff List,City,Staff List`,\n                         `1013 Tabuk Boulevard,West Bengali,96203,158399646978,[object Object],2,,Kanchrapara,`,\n                         `1892 Nabereznyje Telny Lane,Tutuila,28396,478229987054,[object Object],2,,Tafuna,`,\n                         `1993 Tabuk Lane,Tamil Nadu,64221,648482415405,[object Object],2,,Tambaram,`,\n@@ -231,7 +231,7 @@ export const genTest = (apiType, dbType) => {\n                 const verifyCsv = (retrievedRecords) => {\n                     // expected output, statically configured\n                     let storedRecords = [\n-                        `Address,District,PostalCode,Phone,Location,CustomerList,StaffList,CityRead,StaffMMList`,\n+                        `Address,District,PostalCode,Phone,Location,Customer List,Staff List,City,Staff List`,\n                         `1993 Tabuk Lane,Tamil Nadu,64221,648482415405,[object Object],2,,Tambaram,`,\n                         `1661 Abha Drive,Tamil Nadu,14400,270456873752,[object Object],1,,Pudukkottai,`,\n                     ];\n@@ -267,24 +267,24 @@ export const genTest = (apiType, dbType) => {\n \n             it(`Share GRID view : Virtual column validation > has many`, () => {\n                 // verify column headers\n-                cy.get('[data-col=\"CustomerList\"]').should(\"exist\");\n-                cy.get('[data-col=\"StaffList\"]').should(\"exist\");\n-                cy.get('[data-col=\"CityRead\"]').should(\"exist\");\n-                cy.get('[data-col=\"StaffMMList\"]').should(\"exist\");\n+                cy.get('[data-col=\"Customer List\"]').should(\"exist\");\n+                cy.get('[data-col=\"Staff List\"]').should(\"exist\");\n+                cy.get('[data-col=\"City\"]').should(\"exist\");\n+                cy.get('[data-col=\"Staff List\"]').should(\"exist\");\n \n                 // has many field validation\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-plus\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .click();\n@@ -308,17 +308,17 @@ export const genTest = (apiType, dbType) => {\n             it(`Share GRID view : Virtual column validation > belongs to`, () => {\n                 // belongs to field validation\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .find(\".v-chip\")\n                     .contains(\"Kanchrapara\")\n                     .should(\"exist\");\n@@ -327,17 +327,17 @@ export const genTest = (apiType, dbType) => {\n             it(`Share GRID view : Virtual column validation > many to many`, () => {\n                 // many-to-many field validation\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-plus\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .click();"
        },
        {
          "filename": "scripts/cypress/integration/common/4f_pg_grid_view_share.js",
          "status": "modified",
          "additions": 14,
          "deletions": 14,
          "patch": "@@ -228,7 +228,7 @@ export const genTest = (apiType, dbType) => {\n                 const verifyCsv = (retrievedRecords) => {\n                     // expected output, statically configured\n                     let storedRecords = [\n-                        `Address,District,PostalCode,Phone,Location,CustomerList,StaffList,CityRead,StaffMMList`,\n+                        `Address,District,PostalCode,Phone,Location,Customer List,Staff List,City,Staff List`,\n                         `1888 Kabul Drive,,20936,,1,,Ife,,`,\n                         `1661 Abha Drive,,14400,,1,,Pudukkottai,,`,\n                     ];\n@@ -262,24 +262,24 @@ export const genTest = (apiType, dbType) => {\n \n             it(`Share GRID view : Virtual column validation > has many`, () => {\n                 // verify column headers\n-                cy.get('[data-col=\"CustomerList\"]').should(\"exist\");\n-                cy.get('[data-col=\"StaffList\"]').should(\"exist\");\n-                cy.get('[data-col=\"CityRead\"]').should(\"exist\");\n-                cy.get('[data-col=\"StaffMMList\"]').should(\"exist\");\n+                cy.get('[data-col=\"Customer List\"]').should(\"exist\");\n+                cy.get('[data-col=\"Staff List\"]').should(\"exist\");\n+                cy.get('[data-col=\"City\"]').should(\"exist\");\n+                cy.get('[data-col=\"Staff List\"]').should(\"exist\");\n \n                 // has many field validation\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-plus\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CustomerList\", 3)\n+                    .getCell(\"Customer List\", 3)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .click();\n@@ -303,17 +303,17 @@ export const genTest = (apiType, dbType) => {\n             it(`Share GRID view : Virtual column validation > belongs to`, () => {\n                 // belongs to field validation\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"CityRead\", 1)\n+                    .getCell(\"City\", 1)\n                     .find(\".v-chip\")\n                     .contains(\"al-Ayn\")\n                     .should(\"exist\");\n@@ -322,17 +322,17 @@ export const genTest = (apiType, dbType) => {\n             it(`Share GRID view : Virtual column validation > many to many`, () => {\n                 // many-to-many field validation\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-close-thick\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-plus\")\n                     .should(\"not.exist\");\n                 mainPage\n-                    .getCell(\"StaffMMList\", 1)\n+                    .getCell(\"Staff List\", 1)\n                     .click()\n                     .find(\"button.mdi-arrow-expand\")\n                     .click();"
        },
        {
          "filename": "scripts/cypress/integration/common/5a_user_role.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -209,7 +209,7 @@ export const genTest = (apiType, dbType) => {\n                     const verifyCsv = (retrievedRecords) => {\n                         // expected output, statically configured\n                         let storedRecords = [\n-                            `City,AddressList,CountryRead`,\n+                            `City,Address List,Country`,\n                             `A Corua (La Corua),939 Probolinggo Loop,Spain`,\n                             `Abha,733 Mandaluyong Place,Saudi Arabia`,\n                             `Abu Dhabi,535 Ahmadnagar Manor,United Arab Emirates`,"
        },
        {
          "filename": "scripts/cypress/integration/common/6b_downloadCsv.js",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -31,7 +31,7 @@ export const genTest = (apiType, dbType) => {\n                 //     `Angola,\"Benguela, Namibe\"`,\n                 // ];\n                 let storedRecords = [\n-                    ['Country','CityList'],\n+                    ['Country','City List'],\n                     ['Afghanistan','Kabul'],\n                     ['Algeria','Skikda', 'Bchar', 'Batna'],\n                     ['American Samoa','Tafuna'],\n@@ -41,7 +41,7 @@ export const genTest = (apiType, dbType) => {\n                 // if (isPostgres()) {\n                 //     // order of second entry is different\n                 //     storedRecords = [\n-                //         `Country,CityList`,\n+                //         `Country,City List`,\n                 //         `Afghanistan,Kabul`,\n                 //         `Algeria,\"Skikda, Bchar, Batna\"`,\n                 //         `American Samoa,Tafuna`,"
        },
        {
          "filename": "scripts/cypress/integration/common/6f_attachments.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -113,7 +113,7 @@ export const genTest = (apiType, dbType) => {\n \n             const verifyCsv = (retrievedRecords) => {\n                 let storedRecords = [\n-                    `Country,CityList,testAttach`,\n+                    `Country,City List,testAttach`,\n                     `Afghanistan,Kabul,1.json(http://localhost:8080/download/p_h0wxjx5kgoq3w4/vw_skyvc7hsp9i34a/2HvU8R.json)`,\n                 ];\n "
        },
        {
          "filename": "scripts/cypress/integration/common/9a_QuickTest.js",
          "status": "added",
          "additions": 358,
          "deletions": 0,
          "patch": "@@ -0,0 +1,358 @@\n+import {\n+    isTestSuiteActive,\n+    roles,\n+} from \"../../support/page_objects/projectConstants\";\n+import { loginPage, projectsPage } from \"../../support/page_objects/navigation\";\n+import { mainPage } from \"../../support/page_objects/mainPage\";\n+\n+// normal fields\n+let records = {\n+    Name: \"Movie-1\",\n+    Notes: \"Good\",\n+    Status: \"Todo\",\n+    Tags: \"Jan\",\n+    Phone: \"123123123\",\n+    Email: \"a@b.com\",\n+    URL: \"www.a.com\",\n+    Number: \"1\",\n+    Value: \"$1.00\",\n+    Percent: \"0.01\",\n+    Duration: \"60\",\n+};\n+\n+// links/ computed fields\n+let records2 = {\n+    Done: true,\n+    Date: \"2022-05-31\",\n+    Rating: \"1\",\n+    Actor: [\"Actor1\", \"Actor2\"],\n+    \"Status (from Actor)\": [\"Todo\", \"In progress\"],\n+    RollUp: \"128\",\n+    Computation: \"4.04\",\n+    Producer: [\"P1\", \"P2\"]\n+};\n+\n+function openWebhook(index) {\n+    cy.get(\".nc-btn-webhook\").should(\"exist\").click();\n+    cy.get(\".nc-hook\").eq(index).click({ force: true });\n+}\n+\n+// to be invoked after open\n+function verifyWebhook(config) {\n+    cy.get(\".nc-text-field-hook-title\")\n+      .find('input').then(($element) => {\n+        expect($element[0].value).to.have.string(config.title)\n+    })\n+    cy.get(\".nc-text-field-hook-event\")\n+      .find('.v-select__selection')\n+      .contains(config.event)\n+      .should('exist')\n+    cy.get(\".nc-text-field-hook-notification-type\")\n+      .find('.v-select__selection')\n+      .contains(config.notification)\n+      .should('exist')\n+    cy.get('.nc-select-hook-url-method')\n+      .find('.v-select__selection')\n+      .contains(config.type)\n+      .should('exist')\n+    cy.get(\".nc-text-field-hook-url-path\")\n+      .find('input').then(($element) => {\n+        expect($element[0].value).to.have.string(config.url)\n+    })\n+    cy.get(\".nc-icon-hook-navigate-left\").click({force:true})\n+}\n+\n+export const genTest = (apiType, dbType) => {\n+    if (!isTestSuiteActive(apiType, dbType)) return;\n+    describe(`Webhook`, () => {\n+        before(() => {\n+            cy.task(\"copyFile\")\n+            loginPage.signIn(roles.owner.credentials);\n+            projectsPage.openProject(\"sample\");\n+        });\n+\n+        after(() => {});\n+\n+        it(\"Verify Data types\", () => {\n+            cy.openTableTab(\"Film\", 3);\n+\n+            // normal cells\n+            for (let [key, value] of Object.entries(records)) {\n+                mainPage.getCell(key, 1).contains(value).should(\"exist\");\n+            }\n+\n+            // checkbox\n+            mainPage\n+                .getCell(\"Done\", 1)\n+                .find(\".mdi-check-circle-outline\")\n+                .should(records2.Done ? \"exist\" : \"not.exist\");\n+\n+            // date\n+\n+            // rating\n+            mainPage\n+                .getCell(\"Rating\", 1)\n+                .find(\"button.mdi-star\")\n+                .should(\"have.length\", records2.Rating);\n+\n+            // LinkToAnotherRecord\n+            mainPage.getCell(\"Actor\", 1).scrollIntoView();\n+            cy.get(\n+                ':nth-child(1) > [data-col=\"Actor\"] > .nc-virtual-cell > .v-lazy > .d-100 > .chips > :nth-child(1) > .v-chip__content > .name'\n+            )\n+                .contains(records2.Actor[0])\n+                .should(\"exist\");\n+            cy.get(\n+                ':nth-child(1) > [data-col=\"Actor\"] > .nc-virtual-cell > .v-lazy > .d-100 > .chips > :nth-child(2) > .v-chip__content > .name'\n+            )\n+                .contains(records2.Actor[1])\n+                .should(\"exist\");\n+            // mainPage.getCell(\"Actor\", 1).find(\".nc-virtual-cell > .v-lazy > .d-100 > .chips\").eq(0).contains(\"Actor1\").should('exist')\n+            // mainPage.getCell(\"Actor\", 1).find(\".nc-virtual-cell > .v-lazy > .d-100 > .chips\").eq(1).contains(\"Actor2\").should('exist')\n+\n+            // lookup\n+            mainPage.getCell(\"Status (from Actor)\", 1).scrollIntoView();\n+            cy.get(\n+                ':nth-child(1) > [data-col=\"Status (from Actor)\"] > .nc-virtual-cell > .v-lazy > .d-flex > :nth-child(1) > .v-chip__content > div > .set-item'\n+            )\n+                .contains(records2[\"Status (from Actor)\"][0])\n+                .should(\"exist\");\n+            cy.get(\n+                ':nth-child(1) > [data-col=\"Status (from Actor)\"] > .nc-virtual-cell > .v-lazy > .d-flex > :nth-child(2) > .v-chip__content > div > .set-item'\n+            )\n+                .contains(records2[\"Status (from Actor)\"][1])\n+                .should(\"exist\");\n+\n+            // rollup\n+            mainPage.getCell(\"RollUp\", 1).scrollIntoView();\n+            // cy.get(':nth-child(1) > [data-col=\"RollUp\"] > .nc-virtual-cell > .v-lazy > span').contains(records2.RollUp).should('exist')\n+            cy.get(`:nth-child(1) > [data-col=\"RollUp\"] > .nc-virtual-cell`)\n+                .contains(records2.RollUp)\n+                .should(\"exist\");\n+\n+            // formula\n+            mainPage.getCell(\"Computation\", 1).scrollIntoView();\n+            cy.get(\n+                `:nth-child(1) > [data-col=\"Computation\"] > .nc-virtual-cell`\n+            )\n+                .contains(records2.Computation)\n+                .should(\"exist\");\n+\n+            // ltar hm relation\n+            mainPage.getCell(\"Producer\", 1).scrollIntoView();\n+            cy.get(\n+              ':nth-child(1) > [data-col=\"Producer\"] > .nc-virtual-cell > .v-lazy > .d-100 > .chips > :nth-child(1) > .v-chip__content > .name'\n+            )\n+              .contains(records2.Producer[0])\n+              .should(\"exist\");\n+            cy.get(\n+              ':nth-child(1) > [data-col=\"Producer\"] > .nc-virtual-cell > .v-lazy > .d-100 > .chips > :nth-child(2) > .v-chip__content > .name'\n+            )\n+              .contains(records2.Producer[1])\n+              .should(\"exist\");\n+\n+            cy.closeTableTab(\"Film\");\n+        });\n+\n+        it(\"Verify Views & Shared base\", () => {\n+            cy.openTableTab(\"Film\", 3);\n+            cy.get('.nc-form-view-item').eq(0)\n+              .click({ force: true })\n+\n+            // Header & description should exist\n+            cy.get(\".nc-form\")\n+              .find('[placeholder=\"Form Title\"]')\n+              .contains(\"FormTitle\")\n+              .should(\"exist\");\n+            cy.get(\".nc-form\")\n+              .find('[placeholder=\"Add form description\"]')\n+              .contains(\"FormDescription\")\n+              .should(\"exist\");\n+\n+            // modified column name & help text\n+            cy.get(\".nc-field-wrapper\").eq(0)\n+              .find('.nc-field-labels')\n+              .contains(\"DisplayName\")\n+              .should('exist')\n+            cy.get(\".nc-field-wrapper\").eq(0)\n+              .find('.nc-hint')\n+              .contains('HelpText')\n+              .should('exist')\n+\n+            cy.get(\".nc-field-wrapper\").eq(1)\n+              .find('.nc-field-labels')\n+              .contains(\"Email\")\n+              .should('exist')\n+\n+            // add message\n+            cy.get(\".nc-form > .mx-auto\")\n+              .find(\"textarea\").then(($element) => {\n+                  expect($element[0].value).to.have.string(\"Thank you for submitting the form!\")\n+            })\n+\n+            // submit another form button\n+            cy.get(\".nc-form > .mx-auto\")\n+              .find('[type=\"checkbox\"]')\n+              .eq(0)\n+              .should('be.checked')\n+            // \"New form after 5 seconds\" button\n+            cy.get(\".nc-form > .mx-auto\")\n+              .find('[type=\"checkbox\"]')\n+              .eq(1)\n+              .should('be.checked')\n+            // email me\n+            cy.get(\".nc-form > .mx-auto\")\n+              .find('[type=\"checkbox\"]')\n+              .eq(2)\n+              .should('not.be.checked')\n+\n+            cy.closeTableTab(\"Film\");\n+        });\n+\n+        it(\"Verify Webhooks\", () => {\n+            cy.openTableTab(\"Actor\", 25);\n+            openWebhook(0)\n+            verifyWebhook({\n+                title: \"Webhook-1\",\n+                event: \"After Insert\",\n+                notification: \"URL\",\n+                type: \"POST\",\n+                url: \"http://localhost:9090/hook\",\n+                condition: false\n+            })\n+            cy.get(\"body\").type(\"{esc}\");\n+\n+            openWebhook(1)\n+            verifyWebhook({\n+                title: \"Webhook-2\",\n+                event: \"After Update\",\n+                notification: \"URL\",\n+                type: \"POST\",\n+                url: \"http://localhost:9090/hook\",\n+                condition: false\n+            })\n+            cy.get(\"body\").type(\"{esc}\");\n+\n+            openWebhook(2)\n+            verifyWebhook({\n+                title: \"Webhook-3\",\n+                event: \"After Delete\",\n+                notification: \"URL\",\n+                type: \"POST\",\n+                url: \"http://localhost:9090/hook\",\n+                condition: false\n+            })\n+            cy.get(\"body\").type(\"{esc}\");\n+\n+            cy.closeTableTab(\"Actor\");\n+\n+        });\n+\n+        it(\"Pagination\", () => {\n+            cy.openTableTab(\"Actor\", 25);\n+\n+            cy.get(\".nc-pagination\").should(\"exist\");\n+\n+            // verify > pagination option\n+            mainPage.getPagination(\">\").click();\n+            mainPage\n+              .getPagination(2)\n+              .should(\"have.class\", \"v-pagination__item--active\");\n+\n+            // verify < pagination option\n+            mainPage.getPagination(\"<\").click();\n+            mainPage\n+              .getPagination(1)\n+              .should(\"have.class\", \"v-pagination__item--active\");\n+\n+            cy.closeTableTab(\"Actor\");\n+        });\n+\n+        it(\"Verify Fields, Filter & Sort\", () => {\n+            cy.openTableTab(\"Actor\", 25);\n+            cy.get(\".nc-grid-view-item\").eq(1).click()\n+\n+            cy.get(\".nc-grid-header-cell\").contains('Name').should(\"be.visible\");\n+            cy.get(\".nc-grid-header-cell\").contains('Notes').should(\"be.visible\");\n+            cy.get(\".nc-grid-header-cell\").contains('Attachments').should(\"not.be.visible\");\n+            cy.get(\".nc-grid-header-cell\").contains('Status').should(\"be.visible\");\n+            cy.get(\".nc-grid-header-cell\").contains('Film').should(\"be.visible\");\n+\n+            cy.get(\".nc-fields-menu-btn\").click();\n+            cy.getActiveMenu().find(`[type=\"checkbox\"]`).eq(0).should('be.checked')\n+            cy.getActiveMenu().find(`[type=\"checkbox\"]`).eq(1).should('be.checked')\n+            cy.getActiveMenu().find(`[type=\"checkbox\"]`).eq(2).should('not.be.checked')\n+            cy.getActiveMenu().find(`[type=\"checkbox\"]`).eq(3).should('be.checked')\n+            cy.getActiveMenu().find(`[type=\"checkbox\"]`).eq(4).should('be.checked')\n+            cy.get(\".nc-fields-menu-btn\").click();\n+\n+            cy.get(\".nc-sort-menu-btn\").click();\n+            cy.get(\".nc-sort-field-select\").eq(0)\n+              .contains('Name')\n+              .should(\"exist\");\n+            cy.get(\".nc-sort-dir-select\").eq(0)\n+              .contains('A -> Z')\n+              .should(\"exist\");\n+            cy.get(\".nc-sort-menu-btn\").click();\n+\n+            cy.get(\".nc-filter-menu-btn\").click();\n+            cy.get(\".nc-filter-field-select\").eq(0)\n+              .contains('Name')\n+              .should(\"exist\");\n+            cy.get(\".nc-filter-operation-select\").eq(0)\n+              .contains('is like')\n+              .should(\"exist\");\n+\n+            cy.get(\".nc-filter-field-select\").eq(1)\n+              .contains('Name')\n+              .should(\"exist\");\n+            cy.get(\".nc-filter-operation-select\").eq(1)\n+              .contains('is like')\n+              .should(\"exist\");\n+            cy.get(\".nc-filter-menu-btn\").click();\n+\n+            cy.closeTableTab(\"Actor\");\n+        });\n+\n+        it(\"Views, bt relation\", () => {\n+            cy.openTableTab(\"Producer\", 3)\n+            cy.get('.nc-grid-view-item').should('have.length', 4)\n+            cy.get('.nc-form-view-item').should('have.length', 4)\n+            cy.get('.nc-gallery-view-item').should('have.length', 3)\n+\n+            // LinkToAnotherRecord hm relation\n+            mainPage.getCell(\"FilmRead\", 1).scrollIntoView();\n+            cy.get(\n+              ':nth-child(1) > [data-col=\"FilmRead\"] > .nc-virtual-cell > .v-lazy > .d-100 > .chips > :nth-child(1) > .v-chip__content > .name'\n+            )\n+              .contains('Movie-1')\n+              .should(\"exist\");\n+\n+            cy.closeTableTab(\"Producer\")\n+        })\n+    });\n+};\n+\n+genTest(\"rest\", \"xcdb\");\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Raju Udava <sivadstala@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */"
        },
        {
          "filename": "scripts/cypress/integration/spec/roleValidation.spec.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -236,7 +236,7 @@ export function _viewMenu(roleType, previewMode, navDrawListCnt) {\n         // Download CSV / Upload CSV / Shared View List / Webhook\n         actionsMenuItemsCnt = 4;\n     } else if (roleType == \"editor\") {\n-        // Download CSV / Upload CSV \n+        // Download CSV / Upload CSV\n         actionsMenuItemsCnt = 2;\n     }\n "
        },
        {
          "filename": "scripts/cypress/integration/test/pg-restTableOps.js",
          "status": "modified",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -11,6 +11,7 @@ let t3a = require(\"../common/3a_filter_sort_fields_operations\");\n let t3b = require(\"../common/3b_formula_column\");\n let t3c = require(\"../common/3c_lookup_column\");\n let t3d = require(\"../common/3d_rollup_column\");\n+let t3e = require(\"../common/3e_duration_column\");\n const {\n     setCurrentMode,\n } = require(\"../../support/page_objects/projectConstants\");\n@@ -38,6 +39,7 @@ const nocoTestSuite = (apiType, dbType) => {\n     // t3b.genTest(apiType, dbType);\n     t3c.genTest(apiType, dbType);\n     t3d.genTest(apiType, dbType);\n+    t3e.genTest(apiType, dbType);\n };\n \n nocoTestSuite(\"rest\", \"postgres\");\n@@ -46,6 +48,7 @@ nocoTestSuite(\"rest\", \"postgres\");\n  * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n  *\n  * @author Raju Udava <sivadstala@gmail.com>\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n  *\n  * @license GNU AGPL version 3 or any later version\n  *"
        },
        {
          "filename": "scripts/cypress/integration/test/quickTest.js",
          "status": "added",
          "additions": 36,
          "deletions": 0,
          "patch": "@@ -0,0 +1,36 @@\n+let t9a = require(\"../common/9a_QuickTest\");\n+const {\n+  setCurrentMode,\n+} = require(\"../../support/page_objects/projectConstants\");\n+\n+// use 0 as mode to execute individual files (debug mode, skip pre-configs)\n+// use 1 mode if noco.db doesnt contain user credentials (full run over GIT)\n+\n+const nocoTestSuite = (apiType, dbType) => {\n+  setCurrentMode(apiType, dbType);\n+  t9a.genTest(apiType, dbType);\n+};\n+\n+nocoTestSuite(\"rest\", \"xcdb\");\n+\n+/**\n+ * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n+ *\n+ * @author Raju Udava <sivadstala@gmail.com>\n+ *\n+ * @license GNU AGPL version 3 or any later version\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ */"
        },
        {
          "filename": "scripts/cypress/integration/test/restTableOps.js",
          "status": "modified",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -11,6 +11,7 @@ let t3a = require(\"../common/3a_filter_sort_fields_operations\");\n let t3b = require(\"../common/3b_formula_column\");\n let t3c = require(\"../common/3c_lookup_column\");\n let t3d = require(\"../common/3d_rollup_column\");\n+let t3e = require(\"../common/3e_duration_column\");\n const {\n     setCurrentMode,\n } = require(\"../../support/page_objects/projectConstants\");\n@@ -38,6 +39,7 @@ const nocoTestSuite = (apiType, dbType) => {\n     t3b.genTest(apiType, dbType);\n     t3c.genTest(apiType, dbType);\n     t3d.genTest(apiType, dbType);\n+    t3e.genTest(apiType, dbType);\n };\n \n nocoTestSuite(\"rest\", \"mysql\");\n@@ -46,6 +48,7 @@ nocoTestSuite(\"rest\", \"mysql\");\n  * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n  *\n  * @author Raju Udava <sivadstala@gmail.com>\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n  *\n  * @license GNU AGPL version 3 or any later version\n  *"
        },
        {
          "filename": "scripts/cypress/integration/test/xcdb-restTableOps.js",
          "status": "modified",
          "additions": 3,
          "deletions": 0,
          "patch": "@@ -11,6 +11,7 @@ let t3a = require(\"../common/3a_filter_sort_fields_operations\");\n let t3b = require(\"../common/3b_formula_column\");\n let t3c = require(\"../common/3c_lookup_column\");\n let t3d = require(\"../common/3d_rollup_column\");\n+let t3e = require(\"../common/3e_duration_column\");\n const {\n     setCurrentMode,\n } = require(\"../../support/page_objects/projectConstants\");\n@@ -38,6 +39,7 @@ const nocoTestSuite = (apiType, dbType) => {\n     t3b.genTest(apiType, dbType);\n     t3c.genTest(apiType, dbType);\n     t3d.genTest(apiType, dbType);\n+    t3e.genTest(apiType, dbType);\n };\n \n nocoTestSuite(\"rest\", \"xcdb\");\n@@ -46,6 +48,7 @@ nocoTestSuite(\"rest\", \"xcdb\");\n  * @copyright Copyright (c) 2021, Xgene Cloud Ltd\n  *\n  * @author Raju Udava <sivadstala@gmail.com>\n+ * @author Wing-Kam Wong <wingkwong.code@gmail.com>\n  *\n  * @license GNU AGPL version 3 or any later version\n  *"
        },
        {
          "filename": "scripts/cypress/plugins/index.js",
          "status": "modified",
          "additions": 13,
          "deletions": 1,
          "patch": "@@ -11,7 +11,7 @@\n \n // This function is called when a project is opened or re-opened (e.g. due to\n // the project's config changing)\n-const { rmdir } = require(\"fs\");\n+const { rmdir, copyFile } = require(\"fs\");\n \n // https://stackoverflow.com/questions/61934443/read-excel-files-in-cypress\n const readXlsx = require(\"./read-xlsx\");\n@@ -26,6 +26,18 @@ module.exports = (on, config) => {\n \n     // register utility tasks to read and parse Excel files\n     on(\"task\", {\n+        copyFile() {\n+          console.log(\"copyFile\", __dirname)\n+          return new Promise((resolve, reject) => {\n+              copyFile(\"./scripts/cypress/fixtures/quickTest/noco_0_91_7.db\", \"./packages/nocodb/noco.db\", (err) => {\n+                  if(err) {\n+                      console.log(err)\n+                      return reject(err)\n+                  }\n+                  resolve(null);\n+              })\n+          })\n+        },\n         deleteFolder(folderName) {\n             console.log(\"deleting folder %s\", folderName);\n "
        },
        {
          "filename": "scripts/pkg-executable/binaries/binding/napi-v3-darwin-arm64/node_sqlite3.node",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/pkg-executable/binaries/binding/napi-v3-darwin-x64/node_sqlite3.node",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/pkg-executable/binaries/binding/napi-v3-linux-x64/node_sqlite3.node",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/pkg-executable/binaries/binding/napi-v3-win32-ia32/node_sqlite3.node",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/pkg-executable/binaries/binding/napi-v3-win32-x64/node_sqlite3.node",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "scripts/pkg-executable/index.js",
          "status": "added",
          "additions": 12,
          "deletions": 0,
          "patch": "@@ -0,0 +1,12 @@\n+process.env.NC_BINARY_BUILD = 'true';\n+(async () => {\n+  try {\n+    const app = require('express')();\n+    const {Noco} = require(\"nocodb\");\n+    const httpServer = app.listen(process.env.PORT || 8080);\n+    app.use(await Noco.init({}, httpServer, app));\n+    console.log(`Visit : localhost:${process.env.PORT}/dashboard`)\n+  } catch(e) {\n+    console.log(e)\n+  }\n+})()"
        },
        {
          "filename": "scripts/pkg-executable/package.json",
          "status": "added",
          "additions": 33,
          "deletions": 0,
          "patch": "@@ -0,0 +1,33 @@\n+{\n+  \"name\": \"Noco\",\n+  \"version\": \"1.0.0\",\n+  \"description\": \"\",\n+  \"main\": \"index.js\",\n+  \"bin\": \"index.js\",\n+  \"scripts\": {\n+    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n+    \"start\": \"node index.js\",\n+    \"upgrade\": \"npm uninstall --save nocodb && npm install --save nocodb\",\n+    \"build\": \"npx pkg . --out-path dist --compress GZip\"\n+  },\n+  \"pkg\": {\n+    \"assets\": [\n+      \"node_modules/**/*\"\n+    ],\n+    \"targets\": [\n+      \"node16-linux-arm64\",\n+      \"node16-macos-arm64\",\n+      \"node16-win-arm64\",\n+      \"node16-linux-x64\",\n+      \"node16-macos-x64\",\n+      \"node16-win-x64\"\n+    ]\n+  },\n+  \"keywords\": [],\n+  \"author\": \"\",\n+  \"license\": \"ISC\",\n+  \"dependencies\": {\n+    \"express\": \"^4.17.1\",\n+    \"nocodb\": \"0.91.10\"\n+  }\n+}"
        },
        {
          "filename": "scripts/sdk/swagger.json",
          "status": "modified",
          "additions": 31,
          "deletions": 10,
          "patch": "@@ -10,7 +10,7 @@\n     }\n   ],\n   \"paths\": {\n-    \"/api/v1/db/auth/user/signup\": {\n+    \"/api/v1/auth/user/signup\": {\n       \"post\": {\n         \"summary\": \"Signup\",\n         \"operationId\": \"auth-signup\",\n@@ -95,7 +95,7 @@\n         \"description\": \"Create a new user with provided email and password and first user is marked as super admin. \"\n       }\n     },\n-    \"/api/v1/db/auth/user/signin\": {\n+    \"/api/v1/auth/user/signin\": {\n       \"post\": {\n         \"summary\": \"Signin\",\n         \"operationId\": \"auth-signin\",\n@@ -167,7 +167,7 @@\n       },\n       \"parameters\": []\n     },\n-    \"/api/v1/db/auth/user/me\": {\n+    \"/api/v1/auth/user/me\": {\n       \"parameters\": [],\n       \"get\": {\n         \"summary\": \"User info\",\n@@ -214,7 +214,7 @@\n         ]\n       }\n     },\n-    \"/api/v1/db/auth/password/forgot\": {\n+    \"/api/v1/auth/password/forgot\": {\n       \"post\": {\n         \"summary\": \"Password forgot\",\n         \"operationId\": \"auth-password-forgot\",\n@@ -248,7 +248,7 @@\n       },\n       \"parameters\": []\n     },\n-    \"/api/v1/db/auth/password/change\": {\n+    \"/api/v1/auth/password/change\": {\n       \"post\": {\n         \"summary\": \"Password change\",\n         \"operationId\": \"auth-password-change\",\n@@ -336,7 +336,7 @@\n       },\n       \"parameters\": []\n     },\n-    \"/api/v1/db/auth/token/validate/{token}\": {\n+    \"/api/v1/auth/token/validate/{token}\": {\n       \"post\": {\n         \"summary\": \"Reset token verify\",\n         \"operationId\": \"auth-password-reset-token-validate\",\n@@ -361,7 +361,7 @@\n         }\n       ]\n     },\n-    \"/api/v1/db/auth/email/validate/{token}\": {\n+    \"/api/v1/auth/email/validate/{token}\": {\n       \"post\": {\n         \"summary\": \"Verify email\",\n         \"operationId\": \"auth-email-validate\",\n@@ -386,7 +386,7 @@\n         }\n       ]\n     },\n-    \"/api/v1/db/auth/password/reset/{token}\": {\n+    \"/api/v1/auth/password/reset/{token}\": {\n       \"post\": {\n         \"summary\": \"Password reset\",\n         \"operationId\": \"auth-password-reset\",\n@@ -425,7 +425,7 @@\n         }\n       ]\n     },\n-    \"/api/v1/db/auth/token/refresh\": {\n+    \"/api/v1/auth/token/refresh\": {\n       \"post\": {\n         \"summary\": \"Refresh token\",\n         \"operationId\": \"auth-token-refresh\",\n@@ -5107,7 +5107,7 @@\n         ]\n       }\n     },\n-    \"/api/v1/db/meta/nocodb/version\": {\n+    \"/api/v1/version\": {\n       \"parameters\": [],\n       \"get\": {\n         \"summary\": \"\",\n@@ -5128,6 +5128,27 @@\n         \"description\": \"\"\n       }\n     },\n+    \"/api/v1/health\": {\n+      \"parameters\": [],\n+      \"get\": {\n+        \"summary\": \"\",\n+        \"operationId\": \"utils-app-health\",\n+        \"responses\": {\n+          \"200\": {\n+            \"description\": \"OK\",\n+            \"content\": {\n+              \"application/json\": {\n+                \"schema\": {}\n+              }\n+            }\n+          }\n+        },\n+        \"tags\": [\n+          \"Utils\"\n+        ],\n+        \"description\": \"\"\n+      }\n+    },\n     \"/api/v1/db/meta/cache\": {\n       \"get\": {\n         \"summary\": \"Your GET endpoint\","
        }
      ],
      "file_patterns": {
        "security_files": 5,
        "config_files": 22,
        "dependency_files": 4,
        "test_files": 12,
        "unique_directories": 58,
        "max_directory_depth": 9
      },
      "context": {
        "surrounding_commits": [
          {
            "sha": "c2f50efbb9e57e954a4fde07cf618bbfd0fc8704",
            "date": "2025-01-14T11:59:45Z",
            "author_login": "mertmit"
          },
          {
            "sha": "51edd98b9e26a5625a4d3e0b1d3ff09d8442e819",
            "date": "2025-01-14T10:55:55Z",
            "author_login": "pranavxc"
          },
          {
            "sha": "df0bffd0ccaadb5db69999529ec27fa75c2fa452",
            "date": "2025-01-14T09:53:04Z",
            "author_login": "github-actions[bot]"
          },
          {
            "sha": "adfc02d7d49f88e9b7dac823915fbda400cb8d6c",
            "date": "2025-01-14T09:51:26Z",
            "author_login": "github-actions[bot]"
          },
          {
            "sha": "4ac6769eba67ba3ad52d2c37b68058eb0905fc8e",
            "date": "2025-01-14T09:51:23Z",
            "author_login": "pranavxc"
          }
        ]
      }
    }
  },
  "vulnerability_details": {
    "cvss_score": 7.3,
    "cvss_vector": "CVSS:3.1/AV:L/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:H",
    "cwe_id": "CWE-770",
    "description": "Allocation of Resources Without Limits or Throttling in GitHub repository nocodb/nocodb prior to 0.92.0.\n\n",
    "attack_vector": "LOCAL",
    "attack_complexity": "LOW"
  },
  "temporal_data": {
    "published_date": "2022-10-07T11:15:10.523",
    "last_modified": "2024-11-21T07:19:29.060",
    "fix_date": "2022-06-28T07:29:52Z"
  },
  "references": [
    {
      "url": "https://github.com/nocodb/nocodb/commit/000ecd886738b965b5997cd905825e3244f48b95",
      "source": "security@huntr.dev",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://huntr.dev/bounties/94639d8e-8301-4432-ab80-e76e1346e631",
      "source": "security@huntr.dev",
      "tags": [
        "Exploit",
        "Issue Tracking",
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/nocodb/nocodb/commit/000ecd886738b965b5997cd905825e3244f48b95",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://huntr.dev/bounties/94639d8e-8301-4432-ab80-e76e1346e631",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Exploit",
        "Issue Tracking",
        "Patch",
        "Third Party Advisory"
      ]
    }
  ],
  "collection_metadata": {
    "collected_at": "2025-01-11T23:03:41.315321",
    "processing_status": "raw"
  },
  "repository_context": {
    "name": "nocodb",
    "owner": "nocodb",
    "created_at": "2017-10-29T18:51:48Z",
    "updated_at": "2025-01-14T13:56:54Z",
    "pushed_at": "2025-01-14T12:15:11Z",
    "size": 1247095,
    "stars": 50834,
    "forks": 3497,
    "open_issues": 754,
    "watchers": 50834,
    "has_security_policy": false,
    "default_branch": "develop",
    "protected_branches": [
      "develop"
    ],
    "languages": {
      "TypeScript": 8293660,
      "Vue": 3668346,
      "JavaScript": 756191,
      "PLpgSQL": 101494,
      "Shell": 56477,
      "SCSS": 42238,
      "CSS": 25579,
      "TSQL": 15401,
      "Dockerfile": 5585,
      "Smarty": 2321
    },
    "commit_activity": {
      "total_commits_last_year": 7073,
      "avg_commits_per_week": 136.01923076923077,
      "days_active_last_year": 334
    },
    "security_features": {
      "has_security_policy": false,
      "has_protected_branches": true,
      "has_wiki": true,
      "has_issues": true,
      "allow_forking": true,
      "is_template": false,
      "license": "agpl-3.0"
    },
    "collected_at": "2025-01-14T14:16:35.736766"
  }
}