{
  "cve_id": "CVE-2022-4593",
  "github_data": {
    "repository": "retra/retra-system",
    "fix_commit": "a6d94ab88f4a6f631a14c59b72461140fb57ae1f",
    "related_commits": [
      "a6d94ab88f4a6f631a14c59b72461140fb57ae1f",
      "a6d94ab88f4a6f631a14c59b72461140fb57ae1f"
    ],
    "patch_url": null,
    "fix_commit_details": {
      "sha": "a6d94ab88f4a6f631a14c59b72461140fb57ae1f",
      "commit_date": "2022-01-07T13:46:49Z",
      "author": {
        "login": "siglp",
        "type": "User",
        "stats": null
      },
      "commit_message": {
        "title": "RETRA-41 - Specialni znaky v nazvu projektu",
        "length": 127,
        "has_description": true,
        "references_issue": false
      },
      "stats": {
        "total": 865,
        "additions": 477,
        "deletions": 388
      },
      "files": [
        {
          "filename": "src/main/java/cz/softinel/retra/core/system/web/SystemController.java",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -419,9 +419,11 @@ private void prepareProjects(Model model, boolean showAll) {\n \n \tprivate List<Project> filterActiveProject(Set<Project> projects) {\n \t\tList<Project> filtersList = new ArrayList<Project>();\n-\t\tfor (Project p : projects) {\n-\t\t\tif (p.getState() == Project.STATE_ACTIVE) {\n-\t\t\t\tfiltersList.add(p);\n+\t\tif (projects != null && !projects.isEmpty()) {\n+\t\t\tfor (Project p : projects) {\n+\t\t\t\tif (p.getState() == Project.STATE_ACTIVE) {\n+\t\t\t\t\tfiltersList.add(p);\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\treturn filtersList;"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/core/utils/decorator/DateDecorator.java",
          "status": "modified",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -6,6 +6,7 @@\n \r\n import javax.servlet.jsp.PageContext;\r\n \r\n+import org.apache.commons.lang.StringEscapeUtils;\r\n import org.displaytag.decorator.DisplaytagColumnDecorator;\r\n import org.displaytag.exception.DecoratorException;\r\n import org.displaytag.properties.MediaTypeEnum;\r\n@@ -25,6 +26,10 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \t\t\treturn dateFormat.format(columnValue);\r\n \t\t}\r\n \r\n+\t\tif (columnValue instanceof String) {\r\n+\t\t\treturn StringEscapeUtils.escapeHtml(columnValue.toString());\r\n+\t\t}\r\n+\t\t\r\n \t\t// not date return it as it comes\r\n \t\treturn columnValue;\r\n \t}\r"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/core/utils/decorator/EmailDecorator.java",
          "status": "modified",
          "additions": 3,
          "deletions": 1,
          "patch": "@@ -2,6 +2,7 @@\n \r\n import javax.servlet.jsp.PageContext;\r\n \r\n+import org.apache.commons.lang.StringEscapeUtils;\r\n import org.displaytag.decorator.DisplaytagColumnDecorator;\r\n import org.displaytag.exception.DecoratorException;\r\n import org.displaytag.properties.MediaTypeEnum;\r\n@@ -12,7 +13,8 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \t\tif (columnValue == null) {\r\n \t\t\treturn null;\r\n \t\t}\r\n-\t\treturn \"<a href='mailto:\" + columnValue + \"'>\" + columnValue + \"</a>\";\r\n+\t\tString escaped = StringEscapeUtils.escapeHtml(columnValue.toString());\r\n+\t\treturn \"<a href='mailto:\" + escaped + \"'>\" + escaped + \"</a>\";\r\n \t}\r\n \r\n }\r"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/core/utils/decorator/HourDecorator.java",
          "status": "modified",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -6,6 +6,7 @@\n \r\n import javax.servlet.jsp.PageContext;\r\n \r\n+import org.apache.commons.lang.StringEscapeUtils;\r\n import org.displaytag.decorator.DisplaytagColumnDecorator;\r\n import org.displaytag.exception.DecoratorException;\r\n import org.displaytag.properties.MediaTypeEnum;\r\n@@ -25,6 +26,10 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \t\t\treturn dateFormat.format(columnValue);\r\n \t\t}\r\n \r\n+\t\tif (columnValue instanceof String) {\r\n+\t\t\treturn StringEscapeUtils.escapeHtml(columnValue.toString());\r\n+\t\t}\r\n+\r\n \t\t// not date return it as it comes\r\n \t\treturn columnValue;\r\n \t}\r"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/core/utils/decorator/HoursDecorator.java",
          "status": "modified",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -8,6 +8,7 @@\n import javax.servlet.http.HttpServletRequest;\r\n import javax.servlet.jsp.PageContext;\r\n \r\n+import org.apache.commons.lang.StringEscapeUtils;\r\n import org.displaytag.decorator.DisplaytagColumnDecorator;\r\n import org.displaytag.exception.DecoratorException;\r\n import org.displaytag.properties.MediaTypeEnum;\r\n@@ -37,6 +38,10 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \t\t\treturn formatter.format(columnValue);\r\n \t\t}\r\n \r\n+\t\tif (columnValue instanceof String) {\r\n+\t\t\treturn StringEscapeUtils.escapeHtml(columnValue.toString());\r\n+\t\t}\r\n+\r\n \t\t// not number return it as it comes\r\n \t\treturn columnValue;\r\n \t}\r"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/core/utils/decorator/ScheduleOverviewDecorator.java",
          "status": "modified",
          "additions": 7,
          "deletions": 2,
          "patch": "@@ -6,6 +6,7 @@\n \r\n import javax.servlet.jsp.PageContext;\r\n \r\n+import org.apache.commons.lang.StringEscapeUtils;\r\n import org.displaytag.decorator.DisplaytagColumnDecorator;\r\n import org.displaytag.exception.DecoratorException;\r\n import org.displaytag.properties.MediaTypeEnum;\r\n@@ -43,9 +44,9 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \t\t\tType type = schedule.getType();\r\n \t\t\tString typeName = \"\";\r\n \t\t\tif (type != null) {\r\n-\t\t\t\ttypeName = type.getName();\r\n+\t\t\t\ttypeName = StringEscapeUtils.escapeHtml(type.getName());\r\n \t\t\t}\r\n-\t\t\tString comment = schedule.getComment();\r\n+\t\t\tString comment = StringEscapeUtils.escapeHtml(schedule.getComment());\r\n \t\t\tif (comment == null) {\r\n \t\t\t\tcomment = \"\";\r\n \t\t\t}\r\n@@ -96,6 +97,10 @@ public Object decorate(Object columnValue, PageContext pageContext, MediaTypeEnu\n \r\n \t\t}\r\n \r\n+\t\tif (columnValue instanceof String) {\r\n+\t\t\tresult = StringEscapeUtils.escapeHtml(columnValue.toString());\r\n+\t\t}\r\n+\r\n \t\t// not schedule return it as it comes\r\n \t\treturn result;\r\n \t}\r"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/jiraintegration/JiraHelper.java",
          "status": "modified",
          "additions": 14,
          "deletions": 3,
          "patch": "@@ -5,6 +5,8 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n+import org.apache.commons.lang.StringEscapeUtils;\n+\n import cz.softinel.retra.jiraintegration.logic.JiraLogic;\n \n public abstract class JiraHelper {\n@@ -60,10 +62,11 @@ public static String getLinkableText(final String text, String linkText, final J\n \t\t\t\t\tJiraIssue issue = jiraLogic.getJiraIssue(code);\n \t\t\t\t\tString title = code;\n \t\t\t\t\tif (issue != null) {\n-\t\t\t\t\t\ttitle = code + \" - \" + issue.getSummary();\n+\t\t\t\t\t\tString summary = getSafeJiraText(issue.getSummary());\n+\t\t\t\t\t\ttitle = code + \" - \" + summary;\n+\t\t\t\t\t\tString replacement = String.format(url, code, title, code);\n+\t\t\t\t\t\tresult = result.replaceAll(code, replacement);\n \t\t\t\t\t}\n-\t\t\t\t\tString replacement = String.format(url, code, title, code);\n-\t\t\t\t\tresult = result.replaceAll(code, replacement);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tresult = text;\n@@ -75,4 +78,12 @@ public static String getLinkableText(final String text, String linkText, final J\n \t\treturn result;\n \t}\n \n+\tpublic static String getSafeJiraText(final String text) {\n+\t\tString safeText = \"\";\n+\t\tif (text != null) {\n+\t\t\tsafeText = StringEscapeUtils.escapeHtml(text);\n+\t\t\tsafeText = safeText.replace(\"$\", \"&dollar;\").replace(\"{\", \"&lcub;\").replace(\"}\", \"&rcub;\");\n+\t\t}\n+\t\treturn safeText;\n+\t}\n }"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/jiraintegration/JiraIssue.java",
          "status": "modified",
          "additions": 6,
          "deletions": 0,
          "patch": "@@ -84,6 +84,12 @@ public void setSelf(String self) {\n \t\tthis.self = self;\n \t}\n \n+\tpublic void setSummary(String summary) {\n+\t\tif (fields != null) {\n+\t\t\tthis.fields.setSummary(summary); \n+\t\t}\n+\t}\n+\n \tpublic String getSummary() {\n \t\treturn fields == null ? null : fields.summary;\n \t}"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/worklog/blo/WorklogLogicImpl.java",
          "status": "modified",
          "additions": 2,
          "deletions": 1,
          "patch": "@@ -3,6 +3,7 @@\n import java.util.ArrayList;\n import java.util.List;\n \n+import org.apache.commons.lang.StringEscapeUtils;\n import org.springframework.transaction.annotation.Propagation;\n import org.springframework.transaction.annotation.Transactional;\n import org.springframework.util.Assert;\n@@ -427,7 +428,7 @@ private void updateDescriptionGui(Worklog worklog) {\n \t}\n \n \tprivate void updateDescriptionGuiImpl(Worklog worklog) {\n-\t\tworklog.setDescriptionGui(JiraHelper.getLinkableText(worklog.getDescription(), jiraLogic));\n+\t\tworklog.setDescriptionGui(JiraHelper.getLinkableText(StringEscapeUtils.escapeHtml(worklog.getDescription()), jiraLogic));\n \t}\n \n \tprivate boolean isGivenEmpLoggedEmployee(Long givenPk) {"
        },
        {
          "filename": "src/main/java/cz/softinel/retra/worklog/web/AbstractWorklogFormController.java",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -200,6 +200,7 @@ protected void prepareJiraIssues(Model model) {\n \t\tif (issues != null && !issues.isEmpty()) {\n \t\t\tfor (JiraIssue ji : issues) {\n \t\t\t\tji.setGuiLink(JiraHelper.getLinkableText(ji.getKey(), \"(Show...)\", jiraLogic));\n+\t\t\t\tji.setSummary(JiraHelper.getSafeJiraText(ji.getSummary()));\n \t\t\t}\n \t\t}\n \t\tmodel.put(\"issues\", issues);"
        },
        {
          "filename": "src/main/java/cz/softinel/uaf/lovs/LovsFactory.java",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -83,7 +83,7 @@ public Lov getLov(String code, ApplicationContext applicationContext) {\n \t\t}\n \n \t\tLov lov = lovsInMap.get(code);\n-\t\tif (lov == null || lov.getFields() != null) {\n+\t\tif (lov == null || lov.getFields() == null) {\n \t\t\tthrow new RuntimeException(\"Missing LOV for code: \" + code);\n \t\t}\n \t\t// TODO: Check ... it is good solution?"
        },
        {
          "filename": "src/main/java/cz/softinel/uaf/vc/tag/SelectTag.java",
          "status": "modified",
          "additions": 15,
          "deletions": 2,
          "patch": "@@ -9,6 +9,8 @@\n import java.util.Map;\n \n import org.apache.commons.beanutils.BeanUtils;\n+import org.apache.commons.lang.StringEscapeUtils;\n+import org.apache.poi.util.StringUtil;\n \n import cz.softinel.uaf.util.CommonHelper;\n \n@@ -85,7 +87,15 @@ public int compare(Object o1, Object o2) {\n \t\t\t\t\ttry {\n \t\t\t\t\t\tComparable<String> v1 = BeanUtils.getProperty(o1, orderBy);\n \t\t\t\t\t\tString v2 = BeanUtils.getProperty(o2, orderBy);\n-\t\t\t\t\t\treturn v1.compareTo(v2);\n+\t\t\t\t\t\tif (v1 != null && v2 != null) {\n+\t\t\t\t\t\t\treturn v1.compareTo(v2);\t\t\t\t\t\t\t\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tif (v2 == null) {\n+\t\t\t\t\t\t\t\treturn 0;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\treturn -1;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n \t\t\t\t\t} catch (IllegalAccessException e) {\n \t\t\t\t\t\tthrow new RuntimeException(\"Exception while getting property: \" + e.getMessage(), e);\n \t\t\t\t\t} catch (InvocationTargetException e) {\n@@ -194,8 +204,11 @@ private void generateOption(String value, String label, int level) {\n \t\t\t\tprefix = \"&nbsp;&nbsp;&nbsp;&nbsp;\" + prefix;\n \t\t\t}\n \t\t}\n+\t\tString escapedValue = StringEscapeUtils.escapeHtml(value);\n+\t\tString escapedLabel = StringEscapeUtils.escapeHtml(label);\n+\t\t\n \t\toutput.append(\n-\t\t\t\t\"\\n\t\t<option value='\" + value + \"'\" + selectedAttribute + \">\" + prefix + label + \"</option>\");\n+\t\t\t\t\"\\n\t\t<option value='\" + escapedValue + \"'\" + selectedAttribute + \">\" + prefix + escapedLabel + \"</option>\");\n \t}\n \n \t// Setters ..."
        },
        {
          "filename": "src/main/resources/cz/softinel/uaf/lovs/jaxb.index",
          "status": "renamed",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/Includes.jsp",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -7,6 +7,7 @@\n --%><%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %><%--\r\n --%><%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %><%--\r\n --%><%@ taglib prefix=\"fmt\" uri=\"http://java.sun.com/jsp/jstl/fmt\" %><%--\r\n+--%><%@ taglib prefix=\"fn\" uri=\"http://java.sun.com/jsp/jstl/functions\" %><%--\r\n --%><%@ taglib prefix=\"display\" uri=\"http://displaytag.sf.net\" %><%--\r\n --%><%--\r\n --%><%@ taglib prefix=\"vc\" uri=\"/WEB-INF/tld/visual-component.tld\" %><%--\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ComponentCreate.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -7,19 +7,19 @@\n <form action=\"${requestURI}\" method=\"post\" >\r\n \r\n \t<spring:bind path=\"componentForm.pk\">\r\n-\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t</spring:bind>\r\n \r\n \t<spring:bind path=\"componentForm.projectPk\">\r\n-\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t</spring:bind>\r\n  \r\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<spring:bind path=\"componentForm.code\">\r\n \t\t\t\t<th><fmt:message key=\"entity.component.code\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -30,7 +30,7 @@\n \t\t\t<spring:bind path=\"componentForm.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.component.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ComponentEdit.jsp",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -19,7 +19,7 @@\n \t\t\t<spring:bind path=\"componentForm.code\">\r\n \t\t\t\t<th><fmt:message key=\"entity.component.code\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -30,7 +30,7 @@\n \t\t\t<spring:bind path=\"componentForm.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.component.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeChangeContactInfo.jsp",
          "status": "modified",
          "additions": 7,
          "deletions": 7,
          "patch": "@@ -10,7 +10,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.firstName\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.firstName\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -21,7 +21,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.lastName\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.lastName\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -32,7 +32,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.email\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.email\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -43,7 +43,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.web\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.web\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -54,7 +54,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone1\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone1\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -65,7 +65,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone2\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone2\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -76,7 +76,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.fax\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.fax\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeChangePassword.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -11,7 +11,7 @@\n \t\t\t\t<th><fmt:message key=\"entity.login.name\" /></th>\r\n \t\t\t\t<td>\r\n \t\t\t\t\t${status.value}\r\n-\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t</td>\r\n \t\t\t</spring:bind>\r\n \t\t</tr>\r\n@@ -20,15 +20,15 @@\n \t\t\t\t<th><fmt:message key=\"entity.login.ldapLogin\" /></th>\r\n \t\t\t\t<td>\r\n \t\t\t\t\t${status.value}\r\n-\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t</td>\r\n \t\t\t</spring:bind>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<spring:bind path=\"employeeForm.user.login.passwordOriginal\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.password.original\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -39,7 +39,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.password\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.password.new\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -50,7 +50,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.passwordConfirmation\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.password.confirmation\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeCreate.jsp",
          "status": "modified",
          "additions": 12,
          "deletions": 12,
          "patch": "@@ -10,7 +10,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.firstName\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.firstName\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -21,7 +21,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.lastName\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.lastName\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -32,7 +32,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.email\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.email\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -43,7 +43,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.web\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.web\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -54,7 +54,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone1\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone1\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -65,7 +65,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone2\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone2\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -76,7 +76,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.fax\">\r\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.fax\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -87,7 +87,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -98,7 +98,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.ldapLogin\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.ldapLogin\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -109,7 +109,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.password\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.password\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -120,7 +120,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.passwordConfirmation\">\r\n \t\t\t\t<th><fmt:message key=\"entity.login.password.confirmation\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t<input type=\"password\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -131,7 +131,7 @@\n \t\t\t<spring:bind path=\"employeeForm.icompany\">\r\n \t\t\t\t<th><fmt:message key=\"entity.employee.icompany\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${icompanies}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${icompanies}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"employee.icompany.unassigned\" /></vc:select-option>\r\n \t\t\t\t\t</vc:select>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeEdit.jsp",
          "status": "modified",
          "additions": 15,
          "deletions": 15,
          "patch": "@@ -9,15 +9,15 @@\n <form action=\"${requestURI}\" method=\"post\" >\n \n \t\t\t<spring:bind path=\"employeeForm.pk\">\n-\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t</spring:bind>\n \n \t<table class=\"formTable\">\n \t\t<tr>\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.firstName\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.firstName\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -28,7 +28,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.lastName\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.lastName\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -39,7 +39,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.email\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.email\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -50,7 +50,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.web\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.web\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -61,7 +61,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone1\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone1\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -72,7 +72,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.phone2\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.phone2\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -83,7 +83,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.fax\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.fax\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -94,7 +94,7 @@\n \t\t\t<spring:bind path=\"employeeForm.user.contactInfo.jirauser\">\n \t\t\t\t<th><fmt:message key=\"entity.contactInfo.jirauser\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -105,16 +105,16 @@\n \t\t\t<spring:bind path=\"employeeForm.user.login.name\">\n \t\t\t\t<th><fmt:message key=\"entity.login.name\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\n-\t\t\t\t\t${status.value}\n+\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n+\t\t\t\t\t${fn:escapeXml(fn:escapeXml(status.value))}\n \t\t\t\t</td>\n \t\t\t</spring:bind>\n \t\t</tr>\n \t\t<tr>\n \t\t\t<spring:bind path=\"employeeForm.user.login.ldapLogin\">\n \t\t\t\t<th><fmt:message key=\"entity.login.ldapLogin\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(fn:escapeXml(status.value))}\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -125,7 +125,7 @@\n \t\t\t<spring:bind path=\"employeeForm.icompany\">\n \t\t\t\t<th><fmt:message key=\"entity.employee.icompany\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${icompanies}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${icompanies}\" selected=\"${fn:escapeXml(fn:escapeXml(status.value))}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"employee.icompany.unassigned\" /></vc:select-option>\n \t\t\t\t\t</vc:select>\n@@ -140,7 +140,7 @@\n \t\t\t\t<th><fmt:message key=\"entity.employee.igenerate\" /></th>\n \t\t\t\t<td>\n \t\t\t\t\t<c:choose>\n-\t\t\t\t\t\t<c:when test=\"${status.value != null && status.value == true}\"><input type=\"checkbox\" name=\"${status.expression}\" checked=\"checked\" /></c:when>\n+\t\t\t\t\t\t<c:when test=\"${fn:escapeXml(status.value) != null && fn:escapeXml(status.value) == true}\"><input type=\"checkbox\" name=\"${status.expression}\" checked=\"checked\" /></c:when>\n \t\t\t\t\t\t<c:otherwise><input type=\"checkbox\" name=\"${status.expression}\" /></c:otherwise>\n \t\t\t\t\t</c:choose>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n@@ -159,7 +159,7 @@\n \t<spring:bind path=\"employeeForm.projects\">\n \t<select name=\"${status.expression}\" multiple=\"multiple\">\n            <c:forEach items=\"${projects}\" var=\"project\">\n-               <c:forEach items=\"${status.value}\" var=\"currentProject\">\n+               <c:forEach items=\"${fn:escapeXml(status.value)}\" var=\"currentProject\">\n                \n                     <c:if test=\"${currentProject.pk == project.pk}\">\n                        <c:set var=\"selected\" value=\"true\"/>"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeManagement.jsp",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -9,7 +9,7 @@\n \tsort=\"list\">\r\n \r\n \t<display:column property=\"user.contactInfo.displayName\" titleKey=\"entity.contactInfo.displayName\" sortable=\"true\" \r\n-\t\tcomparator=\"${nameComparator}\"/>\r\n+\t\tcomparator=\"${nameComparator}\" escapeXml=\"true\" />\r\n \t<display:column property=\"user.contactInfo.email\" titleKey=\"entity.contactInfo.email\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.EmailDecorator\"/>\r\n \r\n \t<display:column property=\"user.state\" titleKey=\"entity.user.state\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.StateDecorator\" />\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/EmployeeView.jsp",
          "status": "modified",
          "additions": 12,
          "deletions": 12,
          "patch": "@@ -6,48 +6,48 @@\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.displayName\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.displayName}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.displayName)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.firstName\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.firstName}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.firstName)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.lastName\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.lastName}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.lastName)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.email\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.email}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.email)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.web\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.web}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.web)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.phone1\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.phone1}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.phone1)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.phone2\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.phone2}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.phone2)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.contactInfo.fax\" /></th>\r\n-\t\t\t<td>${employee.user.contactInfo.fax}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.contactInfo.fax)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.login.name\" /></th>\r\n-\t\t\t<td>${employee.user.login.name}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.login.name)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.login.ldapLogin\" /></th>\r\n-\t\t\t<td>${employee.user.login.ldapLogin}</td>\r\n+\t\t\t<td>${fn:escapeXml(employee.user.login.ldapLogin)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.employee.icompany\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<c:if test=\"${employee.icompany != null}\" >${employee.icompany.codeAndName}</c:if>\r\n+\t\t\t\t<c:if test=\"${employee.icompany != null}\" >${fn:escapeXml(employee.icompany.codeAndName)}</c:if>\r\n \t\t\t\t<c:if test=\"${employee.icompany == null}\" >-</c:if>\r\n \t\t\t</td>\r\n \t\t</tr>\r\n@@ -65,7 +65,7 @@\n \t<br><center><b>Projects</b></center>\r\n \t\r\n \t<display:table name=\"employee.projects\" requestURI=\"${requestURI}\" defaultsort=\"1\" pagesize=\"${defaultPageSize}\" id=\"project\" sort=\"list\">\r\n-\t\t<display:column property=\"name\" titleKey=\"entity.project.name\" sortable=\"true\"/>\r\n+\t\t<display:column property=\"name\" titleKey=\"entity.project.name\" sortable=\"true\" escapeXml=\"true\"/>\r\n \t</display:table>\r\n \t\r\n \t<table class=\"formTable\">\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceBatchGenerateConfirm.jsp",
          "status": "modified",
          "additions": 8,
          "deletions": 8,
          "patch": "@@ -7,19 +7,19 @@\n <table class=\"formTable\">\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.sequence\" /></th>\r\n-\t\t<td>${invoiceSeq.codeAndName}</td>\r\n+\t\t<td>${fn:escapeXml(invoiceSeq.codeAndName)}</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.orderDate\" /></th>\r\n-\t\t<td>${form.orderDate}</td>\r\n+\t\t<td>${fn:escapeXml(form.orderDate)}</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.finishDate\" /></th>\r\n-\t\t<td>${form.finishDate}\t</td>\r\n+\t\t<td>${fn:escapeXml(form.finishDate)}\t</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n-\t\t<td>${form.name}</td>\r\n+\t\t<td>${fn:escapeXml(form.name)}</td>\r\n \t</tr>\r\n </table>\r\n \r\n@@ -34,12 +34,12 @@\n \t\t<!-- data columns -->\r\n \t\t<display:column titleKey=\"entity.employee.icompany\" media=\"html\" >\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${employee.icompany.code}</span>\r\n-\t\t\t<span title=\"${employee.icompany.codeAndName}\">${employee.icompany.codeAndName}</span>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(employee.icompany.code)}</span>\r\n+\t\t\t<span title=\"${fn:escapeXml(employee.icompany.codeAndName)}\">${fn:escapeXml(employee.icompany.codeAndName)}</span>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"employee.icompany\" titleKey=\"entity.employee.icompany\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"employee.icompany\" titleKey=\"entity.employee.icompany\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \r\n-\t\t<display:column property=\"user.contactInfo.displayName\" titleKey=\"entity.contactInfo.displayName\" sortable=\"true\" \t/>\r\n+\t\t<display:column property=\"user.contactInfo.displayName\" titleKey=\"entity.contactInfo.displayName\" sortable=\"true\" escapeXml=\"true\"/>\r\n \r\n \t</display:table>\r\n \t\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceBatchGenerateForm.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -22,7 +22,7 @@\n \t\t\t<spring:bind path=\"form.sequence\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.sequence\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${sequences}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${sequences}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"invoice.sequence.please.define\" /> ---</vc:select-option>\r\n \t\t\t\t\t</vc:select> \r\n@@ -45,7 +45,7 @@\n \t\t\t<spring:bind path=\"form.orderDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.orderDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceOrderDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceOrderDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceOrderDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -62,7 +62,7 @@\n \t\t\t<spring:bind path=\"form.finishDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.finishDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceFinishDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceFinishDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFinishDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -79,7 +79,7 @@\n \t\t\t<spring:bind path=\"form.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\" size=\"75\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\" size=\"75\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceBatchResult.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -16,10 +16,10 @@\n \t\t<display:setProperty name=\"export.pdf.filename\" value=\"invoices.pdf\" />\r\n \t\t<display:setProperty name=\"export.rtf.filename\" value=\"invoices.rtf\" />\r\n \r\n-\t\t<display:column property=\"employee.icompany.codeAndName\" titleKey=\"entity.employee.icompany\" sortable=\"true\" />\t\t\r\n-\t\t<display:column property=\"code\" titleKey=\"entity.invoice.code\" sortable=\"true\" maxLength=\"10\"/> \r\n-\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"entity.invoice.employee\"/>\r\n-\t\t<display:column property=\"name\" titleKey=\"entity.invoice.name\" sortable=\"true\" />\r\n+\t\t<display:column property=\"employee.icompany.codeAndName\" titleKey=\"entity.employee.icompany\" sortable=\"true\" escapeXml=\"true\" />\t\t\r\n+\t\t<display:column property=\"code\" titleKey=\"entity.invoice.code\" sortable=\"true\" maxLength=\"10\" escapeXml=\"true\" /> \r\n+\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"entity.invoice.employee\" escapeXml=\"true\" />\r\n+\t\t<display:column property=\"name\" titleKey=\"entity.invoice.name\" sortable=\"true\" escapeXml=\"true\" />\r\n \t\t\r\n \t</display:table>\r\n \r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceCreate.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -11,7 +11,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.sequence\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.sequence\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${sequences}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${sequences}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"invoice.sequence.please.define\" /> ---</vc:select-option>\r\n \t\t\t\t\t</vc:select> \r\n@@ -25,7 +25,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.code\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.code\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -37,7 +37,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.orderDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.orderDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceOrderDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceOrderDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceOrderDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -54,7 +54,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.finishDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.finishDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceFinishDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceFinishDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFinishDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -71,7 +71,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\" size=\"75\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\" size=\"75\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceEdit.jsp",
          "status": "modified",
          "additions": 6,
          "deletions": 6,
          "patch": "@@ -6,7 +6,7 @@\n \r\n <form action=\"${requestURI}\" method=\"post\" >\r\n \t<spring:bind path=\"invoiceForm.pk\">\r\n-\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t</spring:bind>\r\n \t\r\n \t<table class=\"formTable\">\r\n@@ -16,7 +16,7 @@\n \t\t\t\t<td>\r\n \t\t\t\t\t${invoiceForm.code}\r\n \t\t\t\t\t<spring:bind path=\"invoiceForm.code\">\r\n-\t\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\r\n+\t\t\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\r\n \t\t\t\t\t</spring:bind>\r\n \t\t\t\t</td>\r\n \t\t\t</c:if>\r\n@@ -25,7 +25,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.code\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.code\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -37,7 +37,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.orderDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.orderDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceOrderDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceOrderDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceOrderDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -54,7 +54,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.finishDate\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.finishDate\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"invoiceFinishDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"invoiceFinishDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFinishDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -71,7 +71,7 @@\n \t\t\t<spring:bind path=\"invoiceForm.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\" size=\"75\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\" size=\"75\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceList.jsp",
          "status": "modified",
          "additions": 11,
          "deletions": 11,
          "patch": "@@ -14,7 +14,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.orderDateFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"invoiceFilterOrderDateFrom\" value=\"${invoiceFilterOrderDateFrom}\" tabindex=\"1\" id=\"invoiceFilterOrderDateFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"invoiceFilterOrderDateFrom\" value=\"${fn:escapeXml(invoiceFilterOrderDateFrom)}\" tabindex=\"1\" id=\"invoiceFilterOrderDateFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFilterOrderDateFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -24,7 +24,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"invoiceFilterEmployee\" valueObjects=\"${employees}\" selected=\"${invoiceFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"invoiceFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(invoiceFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"2\">\r\n \t\t\t\t\t<vc:select-option value=\"-1\">--- <fmt:message key=\"invoice.allEmployees\" /> ---</vc:select-option>\r\n@@ -37,7 +37,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.orderDateTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"invoiceFilterOrderDateTo\" value=\"${invoiceFilterOrderDateTo}\" tabindex=\"1\" id=\"invoiceFilterOrderDateToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"invoiceFilterOrderDateTo\" value=\"${fn:escapeXml(invoiceFilterOrderDateTo)}\" tabindex=\"1\" id=\"invoiceFilterOrderDateToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFilterOrderDateToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -65,7 +65,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.finishDateFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"invoiceFilterFinishDateFrom\" value=\"${invoiceFilterFinishDateFrom}\" tabindex=\"1\" id=\"invoiceFilterFinishDateFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"invoiceFilterFinishDateFrom\" value=\"${fn:escapeXml(invoiceFilterFinishDateFrom)}\" tabindex=\"1\" id=\"invoiceFilterFinishDateFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFilterFinishDateFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -75,13 +75,13 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.code\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"invoiceFilterCode\" value=\"${invoiceFilterCode}\" maxlength=\"30\"/>\r\n+\t\t\t\t<input type=\"text\" name=\"invoiceFilterCode\" value=\"${fn:escapeXml(invoiceFilterCode)}\" maxlength=\"30\"/>\r\n \t\t\t</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.finishDateTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"invoiceFilterFinishDateTo\" value=\"${invoiceFilterFinishDateTo}\" tabindex=\"1\" id=\"invoiceFilterFinishDateToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"invoiceFilterFinishDateTo\" value=\"${fn:escapeXml(invoiceFilterFinishDateTo)}\" tabindex=\"1\" id=\"invoiceFilterFinishDateToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"invoiceFilterFinishDateToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -107,13 +107,13 @@\n \t<display:setProperty name=\"export.rtf.filename\" value=\"${employee.user.contactInfo.displayName}-invoice.rtf\" />\r\n \t\r\n \t<!-- data columns -->\r\n-\t<display:column property=\"orderDate\" titleKey=\"entity.invoice.orderDate\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r\n+\t<display:column property=\"orderDate\" titleKey=\"entity.invoice.orderDate\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\"/>\r\n \t<display:column property=\"finishDate\" titleKey=\"entity.invoice.finishDate\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r\n \r\n-\t<display:column property=\"code\" titleKey=\"entity.invoice.code\" sortable=\"true\" maxLength=\"10\"/> \r\n-\t<display:column property=\"name\" titleKey=\"entity.invoice.name\" sortable=\"true\" />\r\n-\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"entity.invoice.employee\"/>\r\n-\t<display:column property=\"employee.user.login.ldapLogin\" titleKey=\"entity.invoice.employee.ldaplogin\" media=\"csv excel xml pdf rtf\" />\r\n+\t<display:column property=\"code\" titleKey=\"entity.invoice.code\" sortable=\"true\" maxLength=\"10\" escapeXml=\"true\" /> \r\n+\t<display:column property=\"name\" titleKey=\"entity.invoice.name\" sortable=\"true\" escapeXml=\"true\" />\r\n+\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"entity.invoice.employee\" escapeXml=\"true\" />\r\n+\t<display:column property=\"employee.user.login.ldapLogin\" titleKey=\"entity.invoice.employee.ldaplogin\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \t\r\n \t<display:column property=\"state\" titleKey=\"entity.invoice.state\" media=\"html\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.StateDecorator\" maxLength=\"5\" class=\"center\"/>\r\n \t<display:column titleKey=\"entity.invoice.state\" media=\"csv excel xml pdf rtf\">\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/InvoiceView.jsp",
          "status": "modified",
          "additions": 14,
          "deletions": 14,
          "patch": "@@ -8,7 +8,7 @@\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.code\" /></th>\r\n-\t\t\t<td>${invoice.code}</td>\r\n+\t\t\t<td>${fn:escapeXml(invoice.code)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.orderDate\" /></th>\r\n@@ -20,11 +20,11 @@\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.employee\" /></th>\r\n-\t\t\t<td>${invoice.employee.user.contactInfo.displayName}</td>\r\n+\t\t\t<td>${fn:escapeXml(invoice.employee.user.contactInfo.displayName)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n-\t\t\t<td>${invoice.name}</td>\r\n+\t\t\t<td>${fn:escapeXml(invoice.name)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.invoice.state\" /></th>\r\n@@ -69,29 +69,29 @@\n \t\t<!-- data columns -->\r\n \t\t<display:column property=\"workFrom\" titleKey=\"worklog.date\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r\n \t\r\n-\t\t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n+\t\t<display:column titleKey=\"worklog.project\" media=\"html\">\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t\t<acronym title=\"${worklog.project.name}\">${worklog.project.code}</acronym>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t\t<acronym title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</acronym>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \t\r\n \t\t<display:column titleKey=\"worklog.component\" media=\"html\">\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.component.code}</span>\r\n-\t\t\t<acronym title=\"${worklog.component.name}\">${worklog.component.code}</acronym>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.component.code)}</span>\r\n+\t\t\t<acronym title=\"${fn:escapeXml(worklog.component.name)}\">${fn:escapeXml(worklog.component.code)}</acronym>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \t\t\r\n \t\t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t\t<acronym title=\"${worklog.activity.name}\">${worklog.activity.code}</acronym>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t\t<acronym title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</acronym>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \r\n \t\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \r\n \t\t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ProjectCreate.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -10,7 +10,7 @@\n \t\t\t<spring:bind path=\"projectForm.parentPk\">\r\n \t\t\t\t<th><fmt:message key=\"entity.project.parent\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n@@ -22,7 +22,7 @@\n \t\t\t<spring:bind path=\"projectForm.code\">\r\n \t\t\t\t<th><fmt:message key=\"entity.project.code\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -33,7 +33,7 @@\n \t\t\t<spring:bind path=\"projectForm.name\">\r\n \t\t\t\t<th><fmt:message key=\"entity.project.name\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\" size=\"75\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\" size=\"75\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r\n@@ -44,7 +44,7 @@\n \t\t\t<spring:bind path=\"projectForm.category\">\r\n \t\t\t\t<th><fmt:message key=\"entity.project.category\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${categories}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${categories}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"project.category.unassigned\" /></vc:select-option>\r\n \t\t\t\t\t</vc:select>\r\n@@ -58,7 +58,7 @@\n \t\t\t<spring:bind path=\"projectForm.estimation\">\r\n \t\t\t\t<th><fmt:message key=\"entity.project.estimation\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"15\" size=\"10\" />\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"15\" size=\"10\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ProjectEdit.jsp",
          "status": "modified",
          "additions": 7,
          "deletions": 7,
          "patch": "@@ -8,15 +8,15 @@\n \n <form action=\"${requestURI}\" method=\"post\" >\n \t\t<spring:bind path=\"projectForm.pk\">\n-\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\n \t\t</spring:bind>\n \t\n \t<table class=\"formTable\">\n \t\t<tr>\n \t\t\t<spring:bind path=\"projectForm.parentPk\">\n \t\t\t\t<th><fmt:message key=\"entity.project.parent\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"/>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n@@ -28,7 +28,7 @@\n \t\t\t<spring:bind path=\"projectForm.code\">\n \t\t\t\t<th><fmt:message key=\"entity.project.code\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"30\"/>\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"30\"/>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -39,7 +39,7 @@\n \t\t\t<spring:bind path=\"projectForm.name\">\n \t\t\t\t<th><fmt:message key=\"entity.project.name\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"250\"  size=\"75\"/>\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"250\"  size=\"75\"/>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -50,7 +50,7 @@\n \t\t\t<spring:bind path=\"projectForm.category\">\n \t\t\t\t<th><fmt:message key=\"entity.project.category\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${categories}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${categories}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"project.category.unassigned\" /></vc:select-option>\n \t\t\t\t\t</vc:select>\n@@ -64,7 +64,7 @@\n \t\t\t<spring:bind path=\"projectForm.estimation\">\n \t\t\t\t<th><fmt:message key=\"entity.project.estimation\" /></th>\n \t\t\t\t<td>\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" maxlength=\"15\" size=\"10\" />\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" maxlength=\"15\" size=\"10\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>\n@@ -103,7 +103,7 @@\n                </c:forEach>\n            <option value=\"${employee.pk}\"\n              <c:if test=\"${selected}\">selected=\"selected\"</c:if>>\n-               ${employee.user.contactInfo.displayName}\n+               ${fn:escapeXml(employee.user.contactInfo.displayName)}\n            </option>\n            <c:remove var=\"selected\"/>\n          </c:forEach>"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ProjectManageComponents.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -6,25 +6,25 @@\n \n <form action=\"${requestURI}\" method=\"post\" >\n \t\t<spring:bind path=\"projectForm.pk\">\n-\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" />\n+\t\t\t\t<input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" />\n \t\t</spring:bind>\n \t\t\n \t\t<table class=\"formTable\">\n \t\t<tr>\n \t\t\t<th><fmt:message key=\"entity.project.code\" /></th>\n-\t\t\t<td>${projectForm.code}</td>\n+\t\t\t<td>${fn:escapeXml(projectForm.code)}</td>\n \t\t</tr>\n \t\t<tr>\n \t\t\t<th><fmt:message key=\"entity.project.name\" /></th>\n-\t\t\t<td>${projectForm.name}</td>\n+\t\t\t<td>${fn:escapeXml(projectForm.name)}</td>\n \t\t</tr>\n \t\t\n \t</table>\n \t\n \t<display:table name=\"${projectForm.components}\" requestURI=\"${requestURI}\" defaultsort=\"1\" pagesize=\"${defaultPageSize}\" id=\"component\"\n \t\tsort=\"list\">\n-\t\t<display:column property=\"code\" titleKey=\"entity.component.code\" sortable=\"true\" />\n-\t\t<display:column property=\"name\" titleKey=\"entity.component.name\" sortable=\"true\" />\n+\t\t<display:column property=\"code\" titleKey=\"entity.component.code\" sortable=\"true\" escapeXml=\"true\" />\n+\t\t<display:column property=\"name\" titleKey=\"entity.component.name\" sortable=\"true\" escapeXml=\"true\" />\n \t\t\n \t\t<display:column url=\"/ComponentEdit.do?fkprm=true\" paramId=\"pk\" paramProperty=\"pk\" media=\"html\" class=\"action\"  headerClass=\"action\" \n \t\t\ttitleKey=\"action.edit\">"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ProjectManagement.jsp",
          "status": "modified",
          "additions": 8,
          "deletions": 8,
          "patch": "@@ -13,11 +13,11 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.code\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"projectFilterCode\" value=\"${projectFilterCode}\" maxlength=\"30\"/>\r\n+\t\t\t\t<input type=\"text\" name=\"projectFilterCode\" value=\"${fn:escapeXml(projectFilterCode)}\" maxlength=\"30\"/>\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"entity.project.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"projectFilterEmployee\" valueObjects=\"${employees}\" selected=\"${projectFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"projectFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(projectFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"2\">\r\n \t\t\t\t\t<vc:select-option value=\"-1\">--- <fmt:message key=\"project.allEmployees\" /> ---</vc:select-option>\r\n@@ -27,7 +27,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.name\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"projectFilterName\" value=\"${projectFilterName}\" maxlength=\"255\"/>\r\n+\t\t\t\t<input type=\"text\" name=\"projectFilterName\" value=\"${fn:escapeXml(projectFilterName)}\" maxlength=\"255\"/>\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"entity.project.state\" /></th>\r\n \t\t\t<td>\r\n@@ -55,11 +55,11 @@\n \r\n <display:table name=\"projects\" requestURI=\"${requestURI}\" defaultsort=\"1\" pagesize=\"${defaultPageSize}\" id=\"project\" sort=\"list\">\r\n \r\n-\t<display:column property=\"parent.code\" titleKey=\"entity.project.parent.code\" sortable=\"true\" maxLength=\"10\"/>\r\n-\t<display:column property=\"code\" titleKey=\"entity.project.code\" sortable=\"true\" maxLength=\"10\"/> \r\n-\t<display:column property=\"name\" titleKey=\"entity.project.name\" sortable=\"true\" />\r\n-\t<display:column property=\"estimation\" titleKey=\"entity.project.estimation\" sortable=\"true\" />\r\n-\t<display:column property=\"category.code\" titleKey=\"entity.project.category\" sortable=\"true\" />\r\n+\t<display:column property=\"parent.code\" titleKey=\"entity.project.parent.code\" sortable=\"true\" maxLength=\"10\" escapeXml=\"true\" />\r\n+\t<display:column property=\"code\" titleKey=\"entity.project.code\" sortable=\"true\" maxLength=\"10\" escapeXml=\"true\" /> \r\n+\t<display:column property=\"name\" titleKey=\"entity.project.name\" sortable=\"true\"  escapeXml=\"true\"/>\r\n+\t<display:column property=\"estimation\" titleKey=\"entity.project.estimation\" sortable=\"true\" escapeXml=\"true\" />\r\n+\t<display:column property=\"category.code\" titleKey=\"entity.project.category\" sortable=\"true\" escapeXml=\"true\" />\r\n \t\r\n \t<display:column property=\"state\" titleKey=\"entity.project.state\" media=\"html\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.StateDecorator\" maxLength=\"5\" class=\"center\"/>\r\n \t<display:column titleKey=\"entity.project.state\" media=\"csv excel xml pdf rtf\">\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ProjectView.jsp",
          "status": "modified",
          "additions": 6,
          "deletions": 6,
          "patch": "@@ -9,26 +9,26 @@\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.parent.code\" /></th>\r\n-\t\t\t<td>${project.parent.code}</td>\r\n+\t\t\t<td>${fn:escapeXml(project.parent.code)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.code\" /></th>\r\n-\t\t\t<td>${project.code}</td>\r\n+\t\t\t<td>${fn:escapeXml(project.code)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.name\" /></th>\r\n-\t\t\t<td>${project.name}</td>\r\n+\t\t\t<td>${fn:escapeXml(project.name)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.category\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<c:if test=\"${project.category != null}\" >${project.category.code} - ${project.category.name}</c:if>\r\n+\t\t\t\t<c:if test=\"${project.category != null}\" >${fn:escapeXml(project.category.code)} - ${fn:escapeXml(project.category.name)}</c:if>\r\n \t\t\t\t<c:if test=\"${project.category == null}\" >-</c:if>\r\n \t\t\t</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.estimation\" /></th>\r\n-\t\t\t<td>${project.estimation}</td>\r\n+\t\t\t<td>${fn:escapeXml(project.estimation)}</td>\r\n \t\t</tr>\t\t\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"entity.project.workEnabled\" /></th>\r\n@@ -52,7 +52,7 @@\n \t\r\n \t<display:table name=\"project.employees\" requestURI=\"${requestURI}\" defaultsort=\"1\" pagesize=\"${defaultPageSize}\" id=\"employee\"\r\n \t\tsort=\"list\">\r\n-\t\t<display:column property=\"user.contactInfo.displayName\" titleKey=\"entity.contactInfo.displayName\" sortable=\"true\"/>\r\n+\t\t<display:column property=\"user.contactInfo.displayName\" titleKey=\"entity.contactInfo.displayName\" sortable=\"true\" escapeXml=\"true\" />\r\n \t</display:table>\t\r\n \t\r\n \t<table class=\"formTable\">\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleCopy.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -6,15 +6,15 @@\n \r\n <form action=\"${requestURI}\" method=\"post\" >\r\n \t<spring:bind path=\"scheduleForm.pk\">\r\n-\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" /></td>\r\n+\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" /></td>\r\n \t</spring:bind>\r\n \t\r\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<spring:bind path=\"scheduleForm.date\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.copyFrom\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleCopyFromId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleCopyFromId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleCopyFromImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -31,7 +31,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.copyDestinationFrom\">\r\n \t\t\t\t<th><fmt:message key=\"scheduleForm.copyDestinationFrom\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleCopyDestinationFromId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleCopyDestinationFromId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleCopyDestinationFromImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -48,7 +48,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.copyDestinationTo\">\r\n \t\t\t\t<th><fmt:message key=\"scheduleForm.copyDestinationTo\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleCopyDestinationToId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleCopyDestinationToId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleCopyDestinationToImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleCreate.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -10,7 +10,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.date\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.date\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -27,7 +27,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.type\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.type\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${types}\" selected=\"${status.value}\"\r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${types}\" selected=\"${fn:escapeXml(status.value)}\"\r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n@@ -39,7 +39,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.workFrom\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.workFrom\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleWorkFromId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleWorkFromId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"scheduleWorkFromImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -56,7 +56,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.workTo\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.workTo\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleWorkToId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleWorkToId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"scheduleWorkToImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -73,7 +73,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.comment\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.comment\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<textarea name=\"${status.expression}\" cols=\"40\" rows=\"5\" >${status.value}</textarea>\r\n+\t\t\t\t\t<textarea name=\"${status.expression}\" cols=\"40\" rows=\"5\" >${fn:escapeXml(status.value)}</textarea>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleEdit.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -6,15 +6,15 @@\n \r\n <form action=\"${requestURI}\" method=\"post\" >\r\n \t<spring:bind path=\"scheduleForm.pk\">\r\n-\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" /></td>\r\n+\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" /></td>\r\n \t</spring:bind>\r\n \t\r\n \t<table class=\"formTable\">\r\n \t\t<tr>\r\n \t\t\t<spring:bind path=\"scheduleForm.date\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.date\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleDateId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleDateId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleDateImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -31,7 +31,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.type\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.type\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${types}\" selected=\"${status.value}\"\r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${types}\" selected=\"${fn:escapeXml(status.value)}\"\r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" />\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n@@ -60,7 +60,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.workTo\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.workTo\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"scheduleWorkToId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"scheduleWorkToId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"scheduleWorkToImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -77,7 +77,7 @@\n \t\t\t<spring:bind path=\"scheduleForm.comment\">\r\n \t\t\t\t<th><fmt:message key=\"schedule.comment\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<textarea name=\"${status.expression}\" cols=\"40\" rows=\"5\" >${status.value}</textarea>\r\n+\t\t\t\t\t<textarea name=\"${status.expression}\" cols=\"40\" rows=\"5\" >${fn:escapeXml(status.value)}</textarea>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\r\n \t\t\t\t\t</c:forEach>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleList.jsp",
          "status": "modified",
          "additions": 9,
          "deletions": 9,
          "patch": "@@ -11,7 +11,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.workFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"scheduleFilterFrom\" value=\"${scheduleFilterFrom}\" tabindex=\"1\" id=\"scheduleFilterWorkFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"scheduleFilterFrom\" value=\"${fn:escapeXml(scheduleFilterFrom)}\" tabindex=\"1\" id=\"scheduleFilterWorkFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleFilterWorkFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -21,7 +21,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"schedule.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterEmployee\" valueObjects=\"${employees}\" selected=\"${scheduleFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"scheduleFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(scheduleFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -30,7 +30,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.workTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"scheduleFilterTo\" value=\"${scheduleFilterTo}\" tabindex=\"2\" id=\"scheduleFilterWorkToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"scheduleFilterTo\" value=\"${fn:escapeXml(scheduleFilterTo)}\" tabindex=\"2\" id=\"scheduleFilterWorkToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"scheduleFilterWorkToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -40,7 +40,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"schedule.type\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterType\" valueObjects=\"${types}\" selected=\"${scheduleFilterType}\"\r\n+\t\t\t\t<vc:select name=\"scheduleFilterType\" valueObjects=\"${types}\" selected=\"${fn:escapeXml(scheduleFilterType)}\"\r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"schedule.allTypes\" /> ---</vc:select-option>\r\n@@ -51,7 +51,7 @@\n \t\t\t<td colspan=\"2\"></td>\r\n \t\t\t<th><fmt:message key=\"schedule.state\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterState\" valueObjects=\"${scheduleStates}\" selected=\"${scheduleFilterState}\"\r\n+\t\t\t\t<vc:select name=\"scheduleFilterState\" valueObjects=\"${scheduleStates}\" selected=\"${fn:escapeXml(scheduleFilterState)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\"\r\n \t\t\t\ttabindex=\"5\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"schedule.allStates\" /> ---</vc:select-option>\r\n@@ -81,13 +81,13 @@\n \r\n \t<display:column titleKey=\"schedule.type\" sortable=\"true\" media=\"html\">\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${schedule.type.code}</span>\r\n-\t\t<span title=\"${schedule.type.name}\">${schedule.type.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(schedule.type.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(schedule.type.name)}\">${fn:escapeXml(schedule.type.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"type.code\" titleKey=\"schedule.type\" sortable=\"true\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"type.code\" titleKey=\"schedule.type\" sortable=\"true\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column titleKey=\"schedule.state\" sortable=\"true\">\r\n-\t\t<fmt:message key=\"schedule.state.${schedule.state}\"/>\r\n+\t\t<fmt:message key=\"schedule.state.${fn:escapeXml(schedule.state)}\"/>\r\n \t</display:column>\r\n \r\n \t<display:column property=\"createdOn\" titleKey=\"schedule.createdOn\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleOverviewList.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -11,12 +11,12 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.month\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterMonth\" valueObjects=\"${months}\" selected=\"${scheduleFilterMonth}\"\r\n+\t\t\t\t<vc:select name=\"scheduleFilterMonth\" valueObjects=\"${months}\" selected=\"${fn:escapeXml(scheduleFilterMonth)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"1\" />\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"schedule.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterEmployee\" valueObjects=\"${employees}\" selected=\"${scheduleFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"scheduleFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(scheduleFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"2\" /> \r\n \t\t\t</td>\r\n@@ -25,7 +25,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.year\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"scheduleFilterYear\" valueObjects=\"${years}\" selected=\"${scheduleFilterYear}\"\r\n+\t\t\t\t<vc:select name=\"scheduleFilterYear\" valueObjects=\"${years}\" selected=\"${fn:escapeXml(scheduleFilterYear)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"3\" />\r\n \t\t\t</td>\r\n \t\t\t<td colspan=\"2\"></td>\r\n@@ -44,7 +44,7 @@\n \t<display:setProperty name=\"export.rtf.filename\" value=\"${employee.user.contactInfo.displayName}-schedule.rtf\" />\r\n \r\n \t<!-- header -->\r\n-\t<display:caption>${employee.user.contactInfo.displayName} - <fmt:message key=\"month.${scheduleFilterMonth}\"/> ${scheduleFilterYear}</display:caption>\r\n+\t<display:caption>${fn:escapeXml(employee.user.contactInfo.displayName)} - <fmt:message key=\"month.${fn:escapeXml(scheduleFilterMonth)}\"/> ${fn:escapeXml(scheduleFilterYear)}</display:caption>\r\n \t\r\n \t<!-- data columns -->\r\n \t<display:column property=\"monday\" titleKey=\"day.2\" decorator=\"cz.softinel.retra.core.utils.decorator.ScheduleOverviewDecorator\" class=\"day ${scheduleOverview.monday.cssClass}\" headerClass=\"day\" media=\"html\" />\r\n@@ -69,7 +69,7 @@\n \t<table class=\"invisibleInPrint\" width=\"100%\">\r\n \t\t<tr>\r\n \t\t\t<td class=\"center scheduleDefault\"><fmt:message key=\"schedule.default\" /></td>\r\n-\t\t\t<c:forEach items=\"${types}\" var=\"type\"><td class=\"center ${type.cssClass}\">${type.name}</td></c:forEach>\r\n+\t\t\t<c:forEach items=\"${types}\" var=\"type\"><td class=\"center ${type.cssClass}\">${fn:escapeXml(type.name)}</td></c:forEach>\r\n \t\t\t<td class=\"center scheduleWeekend\"><fmt:message key=\"schedule.weekend.holidays\" /></td>\r\n \t\t</tr>\r\n \t</table>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/ScheduleView.jsp",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -2,7 +2,7 @@\n \r\n <%@ include file=\"../Includes.jsp\"%>\r\n \r\n-<c:set var=\"requestURI\" value=\"ScheduleList.do?fkprm=true&scheduleFilterEmployee=${schedule.employee.pk}\" />\r\n+<c:set var=\"requestURI\" value=\"ScheduleList.do?fkprm=true&scheduleFilterEmployee=${fn:escapeXml(schedule.employee.pk)}\" />\r\n \r\n <form action=\"${requestURI}\" method=\"post\" >\r\n \t<table class=\"formTable\">\r\n@@ -28,7 +28,7 @@\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.comment\" /></th>\r\n-\t\t\t<td>${schedule.comment}</td>\r\n+\t\t\t<td>${fn:escapeXml(schedule.comment)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"schedule.createdOn\" /></th>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogCreate.jsp",
          "status": "modified",
          "additions": 9,
          "deletions": 9,
          "patch": "@@ -15,7 +15,7 @@\n \t\t\t<spring:bind path=\"worklogForm.date\">\n \t\t\t\t<th><fmt:message key=\"worklog.date\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogDateId\"/><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogDateId\"/><%--\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogDateImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -33,7 +33,7 @@\n \t\t\t\t<th><fmt:message key=\"worklog.project\" /></th>\n \t\t\t\t<td colspan=\"2\">\n \t\t\t\t\t<!-- valueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\" />  -->\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\" onchange=\"worklogProjectChange()\" id=\"worklogProjectId\" /> \n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n@@ -45,7 +45,7 @@\n \t\t\t<spring:bind path=\"worklogForm.component\">\n \t\t\t\t<th><fmt:message key=\"worklog.component\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${components}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${components}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\n \t\t\t\t\t>\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"worklog.component.unassigned\" /></vc:select-option>\n@@ -60,7 +60,7 @@\n \t\t\t<spring:bind path=\"worklogForm.activity\">\n \t\t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\" id=\"worklogActivityId\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n@@ -72,7 +72,7 @@\n \t\t\t<spring:bind path=\"worklogForm.invoice\">\n \t\t\t\t<th><fmt:message key=\"worklog.invoice\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\n \t\t\t\t\t>\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"worklog.invoice.unassigned\" /></vc:select-option>\n@@ -87,7 +87,7 @@\n \t\t\t<spring:bind path=\"worklogForm.workFrom\">\n \t\t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogWorkFromId\"/><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogWorkFromId\"/><%--\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"worklogWorkFromImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -104,7 +104,7 @@\n \t\t\t<spring:bind path=\"worklogForm.workTo\">\n \t\t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogWorkToId\"/><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogWorkToId\"/><%--\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"worklogWorkToImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -121,7 +121,7 @@\n \t\t\t<spring:bind path=\"worklogForm.description\">\n \t\t\t\t<th><fmt:message key=\"worklog.description\" /></th>\n \t\t\t\t<td width=\"300\">\n-\t\t\t\t\t<textarea id=\"descriptionId\" name=\"${status.expression}\" cols=\"40\" rows=\"7\" onkeypress=\"return imposeMaxLength(event, this, 249);\">${status.value}</textarea>\n+\t\t\t\t\t<textarea id=\"descriptionId\" name=\"${status.expression}\" cols=\"40\" rows=\"7\" onkeypress=\"return imposeMaxLength(event, this, 249);\">${fn:escapeXml(status.value)}</textarea>\n \t\t\t\t\t<script language=\"javascript\" type=\"text/javascript\">\n \t\t\t\t\t<!--\n \t\t\t\t\tfunction imposeMaxLength(Event, Object, MaxLen)\n@@ -151,7 +151,7 @@\n \t\t\t<spring:bind path=\"worklogForm.issueTrackingReference\">\n \t\t\t\t<td><fmt:message key=\"worklog.jiraIssue\" /></td>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"jiraissue\" maxlength=\"50\"/>\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"jiraissue\" maxlength=\"50\"/>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogDaily.jsp",
          "status": "modified",
          "additions": 9,
          "deletions": 9,
          "patch": "@@ -14,7 +14,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.date\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterDate\" value=\"${worklogFilterDate}\" tabindex=\"1\" id=\"worklogFilterDateId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterDate\" value=\"${fn:escapeXml(worklogFilterDate)}\" tabindex=\"1\" id=\"worklogFilterDateId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterDateImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -24,7 +24,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -49,7 +49,7 @@\n </div>\r\n \r\n <table id=\"worklog\" class=\"listTable\">\r\n-\t<caption>Daily worklog for ${employee.user.contactInfo.displayName}, ${worklogFilterDate} (<fmt:message key=\"day.${dayOfWeek}\"/>&nbsp;-&nbsp;<span class=\"${dayOfWeekCss}\" title=\"<fmt:message key=\"${dayOfWeekTitle}\"/>\">&nbsp;&nbsp;&nbsp;</span>)</caption>\r\n+\t<caption>Daily worklog for ${fn:escapeXml(employee.user.contactInfo.displayName)}, ${fn:escapeXml(worklogFilterDate)} (<fmt:message key=\"day.${dayOfWeek}\"/>&nbsp;-&nbsp;<span class=\"${dayOfWeekCss}\" title=\"<fmt:message key=\"${dayOfWeekTitle}\"/>\">&nbsp;&nbsp;&nbsp;</span>)</caption>\r\n \t<thead>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.date\"/></th>\r\n@@ -100,10 +100,10 @@\n \t\t\t\t<td><fmt:formatDate value=\"${worklog.workFrom}\" pattern=\"${TypeFormats.HOUR_FORMAT}\"/></td>\r\n \t\t\t\t<td><fmt:formatDate value=\"${worklog.workTo}\" pattern=\"${TypeFormats.HOUR_FORMAT}\"/></td>\r\n \t\t\t\t<td>${worklog.descriptionGui}</td>\r\n-\t\t\t\t<td><acronym title=\"${worklog.project.name}\">${worklog.project.code}</acronym></td>\r\n-\t\t\t\t<td><acronym title=\"${worklog.component.name}\">${worklog.component.code}</acronym></td>\r\n-\t\t\t\t<td><acronym title=\"${worklog.activity.name}\">${worklog.activity.code}</acronym></td>\r\n-\t\t\t\t<td class=\"nowrap\"><acronym title=\"${worklog.invoice.name}\">${worklog.invoice.code}</acronym><c:if test=\"${worklog.invoice != null}\">&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\"/></c:if></td>\r\n+\t\t\t\t<td><acronym title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</acronym></td>\r\n+\t\t\t\t<td><acronym title=\"${fn:escapeXml(worklog.component.name)}\">${fn:escapeXml(worklog.component.code)}</acronym></td>\r\n+\t\t\t\t<td><acronym title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</acronym></td>\r\n+\t\t\t\t<td class=\"nowrap\"><acronym title=\"${fn:escapeXml(worklog.invoice.name)}\">${fn:escapeXml(worklog.invoice.code)}</acronym><c:if test=\"${worklog.invoice != null}\">&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\"/></c:if></td>\r\n \t\t\t\t<td><fmt:formatNumber value=\"${worklog.hours}\" maxFractionDigits=\"2\" minFractionDigits=\"2\"/></td>\r\n \t\t\t\t<td class=\"actions\">\r\n \t\t\t\t\t[ \r\n@@ -124,7 +124,7 @@\n \t\t\t\t<tr class=\"even\"><td colspan=\"10\">\r\n \t\t\t\t\t<c:choose>\r\n \t\t\t\t\t\t<c:when test=\"${securityContext.loggedEmployee.pk == employee.pk}\">\r\n-\t\t\t\t\t\t\t<a href=\"WorklogDailyCreate.do?fkprm=true&setDate=${worklogFilterDate}\">Insert new worklog item</a>\r\n+\t\t\t\t\t\t\t<a href=\"WorklogDailyCreate.do?fkprm=true&setDate=${fn:escapeXml(worklogFilterDate)}\">Insert new worklog item</a>\r\n \t\t\t\t\t\t</c:when>\r\n \t\t\t\t\t\t<c:otherwise>\r\n \t\t\t\t\t\t\tNothing found to display.\r\n@@ -176,7 +176,7 @@\n \t</tr>\r\n \t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n \t\t<tr class=\"odd\">\r\n-\t\t\t<th>${project.key.code}</th>\r\n+\t\t\t<th>${fn:escapeXml(project.key.code)}</th>\r\n \t\t\t<c:forEach items=\"${activityProjectionList}\" var=\"activity\">\r\n \t\t\t\t<td style='text-align:right;'>\r\n \t\t\t\t\t<fmt:formatNumber value=\"${grouppedWorklog.map[project.key][activity.key].sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" />\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogDailyOverview.jsp",
          "status": "modified",
          "additions": 12,
          "deletions": 12,
          "patch": "@@ -13,7 +13,7 @@\n \t\t\t<td></td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -22,7 +22,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.date\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterDate\" value=\"${worklogFilterDate}\" tabindex=\"1\" id=\"worklogFilterDateId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterDate\" value=\"${fn:escapeXml(worklogFilterDate)}\" tabindex=\"1\" id=\"worklogFilterDateId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterDateImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -32,7 +32,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -43,7 +43,7 @@\n \t\t\t<td colspan=\"2\"></td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -73,20 +73,20 @@\n \r\n \t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t<span title=\"${worklog.project.name}\">${worklog.project.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t<span title=\"${worklog.activity.name}\">${worklog.activity.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n-\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\" escapeXml=\"true\" />\t\r\n+\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true \"/>\r\n \r\n \t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogEdit.jsp",
          "status": "modified",
          "additions": 10,
          "deletions": 10,
          "patch": "@@ -11,15 +11,15 @@\n \n <form action=\"${requestURI}\" method=\"post\" >\n \t<spring:bind path=\"worklogForm.pk\">\n-\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${status.value}\" /></td>\n+\t\t<td><input type=\"hidden\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" /></td>\n \t</spring:bind>\n \t\n \t<table class=\"formTable\">\n \t\t<tr>\n \t\t\t<spring:bind path=\"worklogForm.date\">\n \t\t\t\t<th><fmt:message key=\"worklog.date\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\"  id=\"worklogDateId\"/><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\"  id=\"worklogDateId\"/><%--\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogDateImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -36,7 +36,7 @@\n \t\t\t<spring:bind path=\"worklogForm.project\">\n \t\t\t\t<th><fmt:message key=\"worklog.project\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\" onchange=\"worklogProjectChange()\" id=\"worklogProjectId\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n@@ -48,7 +48,7 @@\n \t\t\t<spring:bind path=\"worklogForm.component\">\n \t\t\t\t<th><fmt:message key=\"worklog.component\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${components}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${components}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\n \t\t\t\t\t>\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"worklog.component.unassigned\" /></vc:select-option>\n@@ -63,7 +63,7 @@\n \t\t\t<spring:bind path=\"worklogForm.activity\">\n \t\t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\" id=\"worklogActivityId\" />\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n@@ -75,7 +75,7 @@\n \t\t\t<spring:bind path=\"worklogForm.invoice\">\n \t\t\t\t<th><fmt:message key=\"worklog.invoice\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\n \t\t\t\t\t>\n \t\t\t\t\t\t<vc:select-option value=\"\"><fmt:message key=\"worklog.invoice.unassigned\" /></vc:select-option>\n@@ -90,7 +90,7 @@\n \t\t\t<spring:bind path=\"worklogForm.workFrom\">\n \t\t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogWorkFromId\"/><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogWorkFromId\"/><%--\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"worklogWorkFromImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -107,7 +107,7 @@\n \t\t\t<spring:bind path=\"worklogForm.workTo\">\n \t\t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogWorkToId\" /><%--\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogWorkToId\" /><%--\n \t\t\t\t--%><img src=\"${imgRoot}/hoursIco.gif\" alt=\"<fmt:message key='hours.label' />\" title=\"<fmt:message key='hours.label' />\" align=\"top\" id=\"worklogWorkToImgId\"/>\n \t\t\t\t\t<script type=\"text/javascript\">\n \t\t\t\t\t<!--\n@@ -124,7 +124,7 @@\n \t\t\t<spring:bind path=\"worklogForm.description\">\n \t\t\t\t<th><fmt:message key=\"worklog.description\" /></th>\n \t\t\t\t<td width=\"300\">\n-\t\t\t\t\t<textarea id=\"descriptionId\" name=\"${status.expression}\" cols=\"40\" rows=\"7\" onkeypress=\"return imposeMaxLength(event, this, 249);\">${status.value}</textarea>\n+\t\t\t\t\t<textarea id=\"descriptionId\" name=\"${status.expression}\" cols=\"40\" rows=\"7\" onkeypress=\"return imposeMaxLength(event, this, 249);\">${fn:escapeXml(status.value)}</textarea>\n \t\t\t\t\t<script language=\"javascript\" type=\"text/javascript\">\n \t\t\t\t\t<!--\n \t\t\t\t\tfunction imposeMaxLength(Event, Object, MaxLen)\n@@ -154,7 +154,7 @@\n \t\t\t<spring:bind path=\"worklogForm.issueTrackingReference\">\n \t\t\t\t<td><fmt:message key=\"worklog.jiraIssue\" /></td>\n \t\t\t\t<td colspan=\"2\">\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"jiraissue\" maxlength=\"50\"/>\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"jiraissue\" maxlength=\"50\"/>\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\n \t\t\t\t\t\t<span class=\"error\"><fmt:message key=\"error.sign\" /></span>\n \t\t\t\t\t</c:forEach>"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogImportConfirm.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -13,10 +13,10 @@\n \t\t\r\n \t\t<!-- data columns -->\r\n \t\t<display:column property=\"workFrom\" titleKey=\"worklog.date\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r\n-\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" />\r\n-\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" />\r\n-\t\t<display:column property=\"invoice.name\" titleKey=\"workLog.invoice\"/>\r\n-\t\t<display:column property=\"description\" titleKey=\"worklog.description\"/>\r\n+\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" escapeXml=\"true\" />\r\n+\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" escapeXml=\"true\" />\r\n+\t\t<display:column property=\"invoice.name\" titleKey=\"workLog.invoice\" escapeXml=\"true\" />\r\n+\t\t<display:column property=\"description\" titleKey=\"worklog.description\" escapeXml=\"true\" />\r\n \t\t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t<display:column property=\"hours\" titleKey=\"worklog.hours\" format=\"{0,number,#,##0.00}\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogImportMapping.jsp",
          "status": "modified",
          "additions": 5,
          "deletions": 5,
          "patch": "@@ -18,14 +18,14 @@\n \t<c:when test=\"${ not empty form.externalProjects}\">\r\n \t\t<c:forEach var=\"externalProject\" items=\"${form.externalProjects}\" varStatus=\"status\">\r\n \t\t\t<tr>\r\n-\t\t\t\t<th>${externalProject.name}</th>\r\n+\t\t\t\t<th>${fn:escapeXml(externalProject.name)}</th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"externalProjects[${status.index}].projectId\" valueObjects=\"${projects}\" selected=\"${externalProject.projectId}\" \r\n+\t\t\t\t\t<vc:select name=\"externalProjects[${status.index}].projectId\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(externalProject.projectId)}\" \r\n \t\t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t\t<vc:select-option value=\"-1\"><fmt:message key=\"worklog.pleaseSpecify\" /></vc:select-option>\r\n \t\t\t\t\t</vc:select>\r\n \t\t\t\t<c:if test=\"${showInvoices}\">\r\n-\t\t\t\t\t<vc:select name=\"externalProjects[${status.index}].invoiceId\" valueObjects=\"${invoices}\" selected=\"${externalProject.invoiceId}\" \r\n+\t\t\t\t\t<vc:select name=\"externalProjects[${status.index}].invoiceId\" valueObjects=\"${invoices}\" selected=\"${fn:escapeXml(externalProject.invoiceId)}\" \r\n \t\t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t\t<vc:select-option value=\"-1\">&nbsp;</vc:select-option>\r\n \t\t\t\t\t</vc:select>\r\n@@ -55,9 +55,9 @@\n \t<c:when test=\"${ not empty form.externalActivities}\">\r\n \t\t<c:forEach var=\"externalActivity\" items=\"${form.externalActivities}\" varStatus=\"status\">\r\n \t\t\t<tr>\r\n-\t\t\t\t<th>${externalActivity.name}</th>\r\n+\t\t\t\t<th>${fn:escapeXml(externalActivity.name)}</th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"externalActivities[${status.index}].activityId\" valueObjects=\"${activities}\" selected=\"${externalActivity.activityId}\" \r\n+\t\t\t\t\t<vc:select name=\"externalActivities[${status.index}].activityId\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(externalActivity.activityId)}\"\r\n \t\t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t\t<vc:select-option value=\"-1\"><fmt:message key=\"worklog.pleaseSpecify\" /></vc:select-option>\r\n \t\t\t\t\t</vc:select>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogInvoicePairConfirm.jsp",
          "status": "modified",
          "additions": 13,
          "deletions": 13,
          "patch": "@@ -7,15 +7,15 @@\n <table class=\"formTable\">\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.code\" /></th>\r\n-\t\t<td>${invoice.code}</td>\r\n+\t\t<td>${fn:escapeXml(invoice.code)}</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.employee\" /></th>\r\n-\t\t<td>${invoice.employee.user.contactInfo.displayName}</td>\r\n+\t\t<td>${fn:escapeXml(invoice.employee.user.contactInfo.displayName)}</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.name\" /></th>\r\n-\t\t<td>${invoice.name}</td>\r\n+\t\t<td>${fn:escapeXml(invoice.name)}</td>\r\n \t</tr>\r\n \t<tr>\r\n \t\t<th><fmt:message key=\"entity.invoice.state\" /></th>\r\n@@ -36,27 +36,27 @@\n \r\n \t\t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t\t<span title=\"${worklog.project.name}\">${worklog.project.code}</span>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t\t<span title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</span>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t<display:column titleKey=\"worklog.component\" media=\"html\">\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.component.code}</span>\r\n-\t\t\t<acronym title=\"${worklog.component.name}\">${worklog.component.code}</acronym>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.component.code)}</span>\r\n+\t\t\t<acronym title=\"${fn:escapeXml(worklog.component.name)}\">${fn:escapeXml(worklog.component.code)}</acronym>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \t\t\t\r\n \t\t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t\t<span title=\"${worklog.activity.name}\">${worklog.activity.code}</span>\r\n+\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t\t<span title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</span>\r\n \t\t</display:column>\r\n-\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogInvoicePairFilter.jsp",
          "status": "modified",
          "additions": 6,
          "deletions": 6,
          "patch": "@@ -24,14 +24,14 @@\n \t\t\t\t<th><fmt:message key=\"worklog.invoice\" /></th>\r\n \t\t\t\t<td>\r\n \t\t\t\t\t<c:if test=\"${empty invoices}\">\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"invoice.please.define\" /> ---</vc:select-option>\r\n \t\t\t\t\t</vc:select>\r\n \t\t\t\t\t</c:if>\r\n \r\n \t\t\t\t\t<c:if test=\"${!empty invoices}\">\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${invoices}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" />\r\n \t\t\t\t\t</c:if>\r\n \t\t\t\t\t<c:forEach items=\"${status.errorMessages}\">\r\n@@ -49,7 +49,7 @@\n \t\t\t<spring:bind path=\"form.dateFrom\">\r\n \t\t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogDateFromId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogDateFromId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogDateFromImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -66,7 +66,7 @@\n \t\t\t<spring:bind path=\"form.dateTo\">\r\n \t\t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${status.value}\" id=\"worklogDateToId\"/><%--\r\n+\t\t\t\t\t<input type=\"text\" name=\"${status.expression}\" value=\"${fn:escapeXml(status.value)}\" id=\"worklogDateToId\"/><%--\r\n \t\t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogDateToImgId\"/>\r\n \t\t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t\t<!--\r\n@@ -83,7 +83,7 @@\n \t\t\t<spring:bind path=\"form.project\">\r\n \t\t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n \t\t\t\t\t</vc:select> \r\n@@ -97,7 +97,7 @@\n \t\t\t<spring:bind path=\"form.activity\">\r\n \t\t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t\t<td>\r\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \r\n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t\t</vc:select>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogList.jsp",
          "status": "modified",
          "additions": 13,
          "deletions": 13,
          "patch": "@@ -14,7 +14,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${worklogFilterFrom}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${fn:escapeXml(worklogFilterFrom)}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -24,15 +24,15 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${worklogFilterTo}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${fn:escapeXml(worklogFilterTo)}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -42,7 +42,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -54,7 +54,7 @@\n \t\t\t<td colspan=\"2\"></td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -79,27 +79,27 @@\n \t<display:setProperty name=\"export.pdf.filename\" value=\"${employee.user.contactInfo.displayName}-worklog.pdf\" />\r\n \t<display:setProperty name=\"export.rtf.filename\" value=\"${employee.user.contactInfo.displayName}-worklog.rtf\" />\r\n \t\r\n-\t<display:caption>${employee.user.contactInfo.displayName}</display:caption>\r\n+\t<display:caption>${fn:escapeXml(employee.user.contactInfo.displayName)}</display:caption>\r\n \t\r\n \t<!-- data columns -->\r\n \t<display:column property=\"workFrom\" titleKey=\"worklog.date\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" />\r\n \r\n \t<display:column titleKey=\"worklog.project\" sortable=\"true\" media=\"html\" >\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t<span title=\"${worklog.project.name}\">${worklog.project.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"project.code\" titleKey=\"worklog.project\" sortable=\"true\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"project.code\" titleKey=\"worklog.project\" sortable=\"true\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \r\n \t<display:column titleKey=\"worklog.activity\" sortable=\"true\" media=\"html\">\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t<span title=\"${worklog.activity.name}\">${worklog.activity.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" sortable=\"true\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" sortable=\"true\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\" sortable=\"true\"/>\t\r\n-\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\"/>\r\n \t\r\n \t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" sortable=\"true\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogMonthlyOverview.jsp",
          "status": "modified",
          "additions": 12,
          "deletions": 12,
          "patch": "@@ -11,12 +11,12 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.month\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterMonth\" valueObjects=\"${months}\" selected=\"${worklogFilterMonth}\"\r\n+\t\t\t\t<vc:select name=\"worklogFilterMonth\" valueObjects=\"${months}\" selected=\"${fn:escapeXml(worklogFilterMonth)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"1\" />\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -25,12 +25,12 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.year\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterYear\" valueObjects=\"${years}\" selected=\"${worklogFilterYear}\"\r\n+\t\t\t\t<vc:select name=\"worklogFilterYear\" valueObjects=\"${years}\" selected=\"${fn:escapeXml(worklogFilterYear)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"3\" />\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -42,7 +42,7 @@\n \t\t\t<td>&nbsp;</td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -72,20 +72,20 @@\n \r\n \t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t<span title=\"${worklog.project.name}\">${worklog.project.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t<span title=\"${worklog.activity.name}\">${worklog.activity.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogOverview.jsp",
          "status": "modified",
          "additions": 28,
          "deletions": 28,
          "patch": "@@ -14,7 +14,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${worklogFilterFrom}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${fn:escapeXml(worklogFilterFrom)}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -24,7 +24,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -35,7 +35,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${worklogFilterTo}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${fn:escapeXml(worklogFilterTo)}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -45,7 +45,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" \r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -55,11 +55,11 @@\n \t\t<tr>\t\t\t\r\n \t\t\t<th><fmt:message key=\"worklog.invoice.code\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterInvoiceCode\" value=\"${worklogFilterInvoiceCode}\" maxlength=\"30\"/>\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterInvoiceCode\" value=\"${fn:escapeXml(worklogFilterInvoiceCode)}\" maxlength=\"30\"/>\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -72,10 +72,10 @@\n \t\t\t\t\t<c:forEach items=\"${invoiceRelations}\" var=\"relation\">\r\n \t\t\t\t\t\t<c:choose>\r\n \t\t\t\t\t\t\t<c:when test=\"${relation.code == worklogFilterInvoiceRelation}\">\r\n-\t\t\t\t\t\t\t\t<option value=\"${relation.code}\" selected=\"selected\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n+\t\t\t\t\t\t\t\t<option value=\"${fn:escapeXml(relation.code)}\" selected=\"selected\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n \t\t\t\t\t\t\t</c:when>\r\n \t\t\t\t\t\t\t<c:otherwise>\r\n-\t\t\t\t\t\t\t\t<option value=\"${relation.code}\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n+\t\t\t\t\t\t\t\t<option value=\"${fn:escapeXml(relation.code)}\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n \t\t\t\t\t\t\t</c:otherwise>\r\n \t\t\t\t\t\t</c:choose>\r\n \t\t\t\t\t</c:forEach>\t\t\t\t\r\n@@ -108,7 +108,7 @@\n \r\n \t<div class=\"tabber\">\r\n \t\r\n-\t\t<h2 class=\"visibleOnlyInPrint\">${employee.user.contactInfo.displayName}: ${worklogFilterFrom} - ${worklogFilterTo}</h2>\r\n+\t\t<h2 class=\"visibleOnlyInPrint\">${fn:escapeXml(employee.user.contactInfo.displayName)}: ${fn:escapeXml(worklogFilterFrom)} - ${fn:escapeXml(worklogFilterTo)}</h2>\r\n \t\r\n \t\t<div class=\"tabbertab\">\r\n \t\t\t<h2>Worklog Items</h2>\r\n@@ -128,37 +128,37 @@\n \t\t\t\r\n \t\t\t\t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t\t\t\t<acronym title=\"${worklog.project.name}\">${worklog.project.code}</acronym>\r\n+\t\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</acronym>\r\n \t\t\t\t</display:column>\r\n-\t\t\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t\t\t<display:column titleKey=\"worklog.component\" media=\"html\">\r\n \t\t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t\t<span class=\"invisible\">${worklog.component.code}</span>\r\n-\t\t\t\t\t<acronym title=\"${worklog.component.name}\">${worklog.component.code}</acronym>\r\n+\t\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.component.code)}</span>\r\n+\t\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.component.name)}\">${fn:escapeXml(worklog.component.code)}</acronym>\r\n \t\t\t\t</display:column>\r\n-\t\t\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml rtf\"/>\t\t\t\r\n+\t\t\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml rtf\" escapeXml=\"true\" />\t\t\t\r\n \r\n \t\t\t\t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t\t\t\t<acronym title=\"${worklog.activity.name}\">${worklog.activity.code}</acronym>\r\n+\t\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</acronym>\r\n \t\t\t\t</display:column>\r\n \t\t\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n \r\n \t\t\t\t<display:column titleKey=\"worklog.invoice\" media=\"html\" class=\"nowrap\">\r\n \t\t\t\t\t<c:if test=\"${worklog.invoice != null}\">\r\n-\t\t\t\t\t\t<span class=\"invisible\">${worklog.invoice.code}</span>\r\n-\t\t\t\t\t\t<acronym title=\"${worklog.invoice.name}\">${worklog.invoice.code}</acronym>&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\"/>\r\n+\t\t\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.invoice.code)}</span>\r\n+\t\t\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.invoice.name)}\">${fn:escapeXml(worklog.invoice.code)}</acronym>&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\"/>\r\n \t\t\t\t\t</c:if>\r\n \t\t\t\t</display:column>\r\n-\t\t\t\t<display:column property=\"invoice.code\" titleKey=\"worklog.invoice\" media=\"csv excel xml rtf\"/>\r\n+\t\t\t\t<display:column property=\"invoice.code\" titleKey=\"worklog.invoice\" media=\"csv excel xml rtf\" escapeXml=\"true\" />\r\n \t\t\t\r\n-\t\t\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"worklog.employee\"/>\r\n+\t\t\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"worklog.employee\" escapeXml=\"true\" />\r\n \t\t\t\r\n \t\t\t\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t\t\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t\t\t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t\t\t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n@@ -216,7 +216,7 @@\n \t\t\t<tr>\r\n \t\t\t\t<th>Day \\ Project</th>\r\n \t\t\t\t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n-\t\t\t\t\t<th>${project.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(project.key)}</th>\r\n \t\t\t\t</c:forEach>\r\n \t\t\t\t<th>Hours / day</th>\r\n \t\t\t</tr>\r\n@@ -270,8 +270,8 @@\n \t\t\t<c:forEach items=\"${project.projectionFor[3].list}\" var=\"activity\">\r\n \t\t\t\t<tr class=\"even\">\r\n \t\t\t\t\t<th><fmt:formatDate value=\"${day.key}\" pattern=\"${TypeFormats.DATE_FORMAT_DOW}\"/></th>\r\n-\t\t\t\t\t<td>${project.key}</td>\r\n-\t\t\t\t\t<td>${activity.key}</td>\r\n+\t\t\t\t\t<td>${fn:escapeXml(project.key)}</td>\r\n+\t\t\t\t\t<td>${fn:escapeXml(activity.key)}</td>\r\n \t\t\t\t\t<th style='text-align:right;'><fmt:formatNumber value=\"${activity.value.sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" /></th>\r\n \t\t\t\t</tr>\r\n \t\t\t</c:forEach>\r\n@@ -284,7 +284,7 @@\n \t\t\t\t</tr>\r\n \t\t\t</c:forEach>\r\n \t\t\t\t<tr class=\"odd totalRow\">\r\n-\t\t\t\t\t<th>Week ${week.key}</th>\r\n+\t\t\t\t\t<th>Week ${fn:escapeXml(week.key)}</th>\r\n \t\t\t\t\t<td>&nbsp;</td>\r\n \t\t\t\t\t<td>&nbsp;</td>\r\n \t\t\t\t\t<th style='text-align:right;'><fmt:formatNumber value=\"${week.value.sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" /></th>\r\n@@ -306,14 +306,14 @@\n \t\t\t<tr>\r\n \t\t\t\t<th>&nbsp;</th>\r\n \t\t\t\t<c:forEach items=\"${activityProjectionList}\" var=\"activity\">\r\n-\t\t\t\t\t<th>${activity.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(activity.key)}</th>\r\n \t\t\t\t</c:forEach>\r\n \t\t\t\t<th><fmt:message key=\"worklog.total\"/></th>\r\n \t\t\t</tr>\r\n \t\t  </thead>\r\n \t\t\t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n \t\t\t\t<tr class=\"odd\">\r\n-\t\t\t\t\t<th>${project.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(project.key)}</th>\r\n \t\t\t\t\t<c:forEach items=\"${activityProjectionList}\" var=\"activity\">\r\n \t\t\t\t\t\t<td style='text-align:right;'>\r\n \t\t\t\t\t\t\t<fmt:formatNumber value=\"${worklogGroupped.map[false][false][project.key][activity.key].sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" />\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogOverviewList.jsp",
          "status": "modified",
          "additions": 6,
          "deletions": 6,
          "patch": "@@ -11,12 +11,12 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.month\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterMonth\" valueObjects=\"${months}\" selected=\"${worklogFilterMonth}\"\r\n+\t\t\t\t<vc:select name=\"worklogFilterMonth\" valueObjects=\"${months}\" selected=\"${fn:escapeXml(worklogFilterMonth)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"1\" />\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"2\" /> \r\n \t\t\t</td>\r\n@@ -25,7 +25,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.year\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterYear\" valueObjects=\"${years}\" selected=\"${worklogFilterYear}\"\r\n+\t\t\t\t<vc:select name=\"worklogFilterYear\" valueObjects=\"${years}\" selected=\"${fn:escapeXml(worklogFilterYear)}\"\r\n \t\t\t\tvalueProperty=\"value\" labelProperty=\"label\" orderBy=\"label\" tabindex=\"3\" />\r\n \t\t\t</td>\r\n \t\t\t<td colspan=\"2\"></td>\r\n@@ -44,17 +44,17 @@\n \t<display:setProperty name=\"export.rtf.filename\" value=\"${employee.user.contactInfo.displayName}-worklog.rtf\" />\r\n \r\n \t<!-- header -->\r\n-\t<display:caption>${employee.user.contactInfo.displayName} - <fmt:message key=\"month.${worklogFilterMonth}\"/> ${worklogFilterYear}</display:caption>\r\n+\t<display:caption>${fn:escapeXml(employee.user.contactInfo.displayName)} - <fmt:message key=\"month.${worklogFilterMonth}\"/> ${fn:escapeXml(worklogFilterYear)}</display:caption>\r\n \t\r\n \t<!-- data columns -->\r\n \t<display:column property=\"date\" titleKey=\"worklog.date\" decorator=\"cz.softinel.retra.core.utils.decorator.DateDecorator\" group=\"1\" class=\"printBold\" />\r\n \r\n \t<display:column titleKey=\"worklog.project\">\r\n-\t\t${worklog.project.code} - ${worklog.project.name}\r\n+\t\t${fn:escapeXml(worklog.project.codefn:escapeXml)} - ${fn:escapeXml(worklog.project.name)}\r\n \t</display:column>\r\n \r\n \t<display:column titleKey=\"worklog.activity\">\r\n-\t\t${worklog.activity.code} - ${worklog.activity.name}\r\n+\t\t${fn:escapeXml(worklog.activity.code)} - ${fn:escapeXml(worklog.activity.name)}\r\n \t</display:column>\r\n \r\n \t<display:column property=\"hours\" titleKey=\"worklog.hours\" total=\"true\" format=\"{0,number,0.00}\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogProjectOverview.jsp",
          "status": "modified",
          "additions": 31,
          "deletions": 31,
          "patch": "@@ -14,7 +14,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workFrom\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${worklogFilterFrom}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterFrom\" value=\"${fn:escapeXml(worklogFilterFrom)}\" tabindex=\"1\" id=\"worklogFilterWorkFromId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkFromImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -24,7 +24,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -35,7 +35,7 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.workTo\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${worklogFilterTo}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterTo\" value=\"${fn:escapeXml(worklogFilterTo)}\" tabindex=\"2\" id=\"worklogFilterWorkToId\"/><%--\r\n \t\t\t--%><img src=\"${imgRoot}/calendarIco.gif\" alt=\"<fmt:message key='calendar.label' />\" title=\"<fmt:message key='calendar.label' />\" align=\"top\" id=\"worklogFilterWorkToImgId\"/>\r\n \t\t\t\t<script type=\"text/javascript\">\r\n \t\t\t\t<!--\r\n@@ -45,7 +45,7 @@\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -54,7 +54,7 @@\n \t\t<tr>\t\t\t\r\n \t\t\t<th><fmt:message key=\"worklog.invoice.code\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<input type=\"text\" name=\"worklogFilterInvoiceCode\" value=\"${worklogFilterInvoiceCode}\" maxlength=\"30\"/>\r\n+\t\t\t\t<input type=\"text\" name=\"worklogFilterInvoiceCode\" value=\"${fn:escapeXml(worklogFilterInvoiceCode)}\" maxlength=\"30\"/>\r\n \t\t\t</td>\r\n \t\t\t<th></th>\r\n \t\t\t<td></td>\r\n@@ -66,10 +66,10 @@\n \t\t\t\t\t<c:forEach items=\"${invoiceRelations}\" var=\"relation\">\r\n \t\t\t\t\t\t<c:choose>\r\n \t\t\t\t\t\t\t<c:when test=\"${relation.code == worklogFilterInvoiceRelation}\">\r\n-\t\t\t\t\t\t\t\t<option value=\"${relation.code}\" selected=\"selected\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n+\t\t\t\t\t\t\t\t<option value=\"${fn:escapeXml(relation.code)}\" selected=\"selected\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n \t\t\t\t\t\t\t</c:when>\r\n \t\t\t\t\t\t\t<c:otherwise>\r\n-\t\t\t\t\t\t\t\t<option value=\"${relation.code}\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n+\t\t\t\t\t\t\t\t<option value=\"${fn:escapeXml(relation.code)}\"><fmt:message key=\"invoice.relation.${relation.code}\" /></option>\r\n \t\t\t\t\t\t\t</c:otherwise>\r\n \t\t\t\t\t\t</c:choose>\r\n \t\t\t\t\t</c:forEach>\t\t\t\t\r\n@@ -89,8 +89,8 @@\n \t<div class=\"tabbertab\">\r\n \t\t<h2>Employee</h2>\r\n \t\t<display:table id=\"worklogByEmployeeId\" name=\"worklogByEmployee.list\" requestURI=\"${requestURI}\" export=\"true\">\r\n-\t\t\t<display:column property=\"key\" titleKey=\"worklog.employee\" />\r\n-\t\t\t<display:column property=\"keyInfo\" titleKey=\"worklog.employee.ldaplogin\" media=\"csv excel xml pdf rtf\"/>\t\t\t\r\n+\t\t\t<display:column property=\"key\" titleKey=\"worklog.employee\" escapeXml=\"true\"/>\r\n+\t\t\t<display:column property=\"keyInfo\" titleKey=\"worklog.employee.ldaplogin\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\t\t\t\r\n \t\t\t<display:column property=\"value.sum\" titleKey=\"worklog.hours\" format=\"{0,number,#,##0.00}\"/>\r\n \t\t\t<display:footer media=\"html\">\r\n \t\t\t\t<tr>\r\n@@ -104,7 +104,7 @@\n \t<div class=\"tabbertab\">\r\n \t\t<h2>Activity</h2>\r\n \t\t<display:table id=\"worklogByAcrivityId\" name=\"worklogByAcrivity.list\" requestURI=\"${requestURI}\" export=\"true\">\r\n-\t\t\t<display:column property=\"key\" titleKey=\"worklog.activity\" />\r\n+\t\t\t<display:column property=\"key\" titleKey=\"worklog.activity\" escapeXml=\"true\" />\r\n \t\t\t<display:column property=\"value.sum\" titleKey=\"worklog.hours\" format=\"{0,number,#,##0.00}\" />\r\n \t\t\t<display:footer media=\"html\">\r\n \t\t\t\t<tr>\r\n@@ -118,7 +118,7 @@\n \t<div class=\"tabbertab\">\r\n \t\t<h2>Project</h2>\r\n \t\t<display:table id=\"worklogByProjectId\" name=\"worklogByProject.list\" requestURI=\"${requestURI}\" export=\"true\">\r\n-\t\t\t<display:column property=\"key\" titleKey=\"worklog.project\" />\r\n+\t\t\t<display:column property=\"key\" titleKey=\"worklog.project\" escapeXml=\"true\" />\r\n \t\t\t<display:column property=\"value.sum\" titleKey=\"worklog.hours\" format=\"{0,number,#,##0.00}\" />\r\n \t\t\t<display:footer media=\"html\">\r\n \t\t\t\t<tr>\r\n@@ -136,14 +136,14 @@\n \t\t\t<tr>\r\n \t\t\t\t<th>&nbsp;</th>\r\n \t\t\t\t<c:forEach items=\"${worklogGrouppedAcrivity.list}\" var=\"activity\">\r\n-\t\t\t\t\t<th>${activity.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(activity.key)}</th>\r\n \t\t\t\t</c:forEach>\r\n \t\t\t\t<th>Total</th>\r\n \t\t\t</tr>\r\n \t\t</thead>\r\n \t\t\t<c:forEach items=\"${worklogByEmployee.list}\" var=\"employee\">\r\n \t\t\t\t<tr class=\"odd\">\r\n-\t\t\t\t\t<th>${employee.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(employee.key)}</th>\r\n \t\t\t\t\t<c:forEach items=\"${worklogGrouppedAcrivity.list}\" var=\"activity\">\r\n \t\t\t\t\t\t<td style='text-align:right;'>\r\n \t\t\t\t\t\t\t<fmt:formatNumber value=\"${worklogGroupped.map[employee.key][activity.key][false].sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" />\r\n@@ -185,14 +185,14 @@\n \t\t\t<tr>\r\n \t\t\t\t<th>&nbsp;</th>\r\n \t\t\t\t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n-\t\t\t\t\t<th>${project.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(project.key)}</th>\r\n \t\t\t\t</c:forEach>\r\n \t\t\t\t<th><fmt:message key=\"worklog.total\"/></th>\r\n \t\t\t</tr>\r\n \t\t</thead>\r\n \t\t\t<c:forEach items=\"${employeeProjectionList}\" var=\"employee\">\r\n \t\t\t\t<tr class=\"odd\">\r\n-\t\t\t\t\t<th>${employee.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(employee.key)}</th>\r\n \t\t\t\t\t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n \t\t\t\t\t\t<td style='text-align:right;'>\r\n \t\t\t\t\t\t\t<fmt:formatNumber value=\"${worklogGroupped.map[employee.key][false][project.key].sum}\" pattern=\"#,##0.0#\" />\r\n@@ -218,14 +218,14 @@\n \t\t\t<tr>\r\n \t\t\t\t<th>&nbsp;</th>\r\n \t\t\t\t<c:forEach items=\"${activityProjectionList}\" var=\"activity\">\r\n-\t\t\t\t\t<th>${activity.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(activity.key)}</th>\r\n \t\t\t\t</c:forEach>\r\n \t\t\t\t<th><fmt:message key=\"worklog.total\"/></th>\r\n \t\t\t</tr>\r\n \t\t</thead>\r\n \t\t\t<c:forEach items=\"${projectProjectionList}\" var=\"project\">\r\n \t\t\t\t<tr class=\"odd\">\r\n-\t\t\t\t\t<th>${project.key}</th>\r\n+\t\t\t\t\t<th>${fn:escapeXml(project.key)}</th>\r\n \t\t\t\t\t<c:forEach items=\"${activityProjectionList}\" var=\"activity\">\r\n \t\t\t\t\t\t<td style='text-align:right;'>\r\n \t\t\t\t\t\t\t<fmt:formatNumber value=\"${worklogGroupped.map[false][activity.key][project.key].sum}\" maxFractionDigits=\"2\" minFractionDigits=\"2\" />\r\n@@ -262,37 +262,37 @@\n \t\t\r\n \t\t\t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t\t\t<acronym title=\"${worklog.project.name}\">${worklog.project.code}</acronym>\r\n+\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</acronym>\r\n \t\t\t</display:column>\r\n-\t\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t\t<display:column titleKey=\"worklog.component\" media=\"html\">\r\n \t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t<span class=\"invisible\">${worklog.component.code}</span>\r\n-\t\t\t\t<acronym title=\"${worklog.component.name}\">${worklog.component.code}</acronym>\r\n+\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.component.code)}</span>\r\n+\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.component.name)}\">${fn:escapeXml(worklog.component.code)}</acronym>\r\n \t\t\t</display:column>\r\n-\t\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml rtf\"/>\r\n+\t\t\t<display:column property=\"component.code\" titleKey=\"worklog.component\" media=\"csv excel xml rtf\" escapeXml=\"true\" />\r\n \t\t\r\n \t\t\t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t\t\t<!-- this is hack for sorting -->\r\n-\t\t\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t\t\t<acronym title=\"${worklog.activity.name}\">${worklog.activity.code}</acronym>\r\n+\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</acronym>\r\n \t\t\t</display:column>\r\n-\t\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \t\t\r\n \t\t\t<display:column titleKey=\"worklog.invoice\" media=\"html\" class=\"nowrap\">\r\n \t\t\t\t<c:if test=\"${worklog.invoice != null}\">\r\n-\t\t\t\t\t<span class=\"invisible\">${worklog.invoice.code}</span>\r\n-\t\t\t\t\t<acronym title=\"${worklog.invoice.name}\">${worklog.invoice.code}</acronym>&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"middle\"/>\r\n+\t\t\t\t\t<span class=\"invisible\">${fn:escapeXml(worklog.invoice.code)}</span>\r\n+\t\t\t\t\t<acronym title=\"${fn:escapeXml(worklog.invoice.name)}\">${fn:escapeXml(worklog.invoice.code)}</acronym>&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"middle\"/>\r\n \t\t\t\t</c:if>\r\n \t\t\t</display:column>\r\n-\t\t\t<display:column property=\"invoice.code\" titleKey=\"worklog.invoice\" media=\"csv excel xml rtf\"/>\r\n+\t\t\t<display:column property=\"invoice.code\" titleKey=\"worklog.invoice\" media=\"csv excel xml rtf\" escapeXml=\"true\" />\r\n \t\t\r\n-\t\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"worklog.employee\"/>\r\n+\t\t\t<display:column property=\"employee.user.contactInfo.displayName\" titleKey=\"worklog.employee\" escapeXml=\"true\" />\r\n \t\t\r\n \t\t\t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t\t\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t\t\t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t\t\t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogView.jsp",
          "status": "modified",
          "additions": 4,
          "deletions": 4,
          "patch": "@@ -12,23 +12,23 @@\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n-\t\t\t<td>${worklog.project.code} - ${worklog.project.name}</td>\r\n+\t\t\t<td>${fn:escapeXml(worklog.project.code)} - ${fn:escapeXml(worklog.project.name)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.component\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<c:if test=\"${worklog.component != null}\" >${worklog.component.code} - ${worklog.component.name}</c:if>\r\n+\t\t\t\t<c:if test=\"${worklog.component != null}\" >${fn:escapeXml(worklog.component.code)} - ${fn:escapeXml(worklog.component.name)}</c:if>\r\n \t\t\t\t<c:if test=\"${worklog.component == null}\" >-</c:if>\r\n \t\t\t</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n-\t\t\t<td>${worklog.activity.code} - ${worklog.activity.name}</td>\r\n+\t\t\t<td>${fn:escapeXml(worklog.activity.code)} - ${fn:escapeXml(worklog.activity.name)}</td>\r\n \t\t</tr>\r\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.invoice\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<c:if test=\"${worklog.onInvoice}\" >${worklog.invoice.code} (${worklog.invoice.name})&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\" /></c:if>\r\n+\t\t\t\t<c:if test=\"${worklog.onInvoice}\" >${fn:escapeXml(worklog.invoice.code)} (${fn:escapeXml(worklog.invoice.name)})&nbsp;-&nbsp;<img src=\"${imgRoot}/<fmt:message key='invoice.state.img.${worklog.invoice.state}' />\" alt=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" title=\"<fmt:message key='invoice.state.${worklog.invoice.state}' />\" align=\"absmiddle\" /></c:if>\r\n \t\t\t\t<c:if test=\"${!worklog.onInvoice}\" >-</c:if>\r\n \t\t\t</td>\r\n \t\t</tr>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/retra/WorklogWeeklyOverview.jsp",
          "status": "modified",
          "additions": 11,
          "deletions": 11,
          "patch": "@@ -13,7 +13,7 @@\n \t\t\t<td>&nbsp;</td>\r\n \t\t\t<th><fmt:message key=\"worklog.employee\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${worklogFilterEmployee}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterEmployee\" valueObjects=\"${employees}\" selected=\"${fn:escapeXml(worklogFilterEmployee)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"user.contactInfo.displayName\" orderBy=\"user.contactInfo.displayName\"\r\n \t\t\t\ttabindex=\"3\" /> \r\n \t\t\t</td>\r\n@@ -22,12 +22,12 @@\n \t\t<tr>\r\n \t\t\t<th><fmt:message key=\"worklog.week\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterWeek\" valueObjects=\"${weeks}\" selected=\"${worklogFilterWeek}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterWeek\" valueObjects=\"${weeks}\" selected=\"${fn:escapeXml(worklogFilterWeek)}\" \r\n \t\t\t\tvalueProperty=\"code\" labelProperty=\"label\" orderBy=\"code\" tabindex=\"1\" />\r\n \t\t\t</td>\r\n \t\t\t<th><fmt:message key=\"worklog.project\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${worklogFilterProject}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterProject\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(worklogFilterProject)}\" \r\n \t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"\r\n \t\t\t\ttabindex=\"4\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allProjects\" /> ---</vc:select-option>\r\n@@ -39,7 +39,7 @@\n \t\t\t<td>&nbsp;</td>\r\n \t\t\t<th><fmt:message key=\"worklog.activity\" /></th>\r\n \t\t\t<td>\r\n-\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${worklogFilterActivity}\" \r\n+\t\t\t\t<vc:select name=\"worklogFilterActivity\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(worklogFilterActivity)}\" \r\n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\r\n \t\t\t\t\t<vc:select-option value=\"\">--- <fmt:message key=\"worklog.allActivities\" /> ---</vc:select-option>\r\n \t\t\t\t</vc:select> <!-- tabindex=\"5\" -->\r\n@@ -69,20 +69,20 @@\n \r\n \t<display:column titleKey=\"worklog.project\" media=\"html\" >\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.project.code}</span>\r\n-\t\t<span title=\"${worklog.project.name}\">${worklog.project.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.project.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.project.name)}\">${fn:escapeXml(worklog.project.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"project.code\" titleKey=\"worklog.project\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column titleKey=\"worklog.activity\" media=\"html\">\r\n \t\t<!-- this is hack for sorting -->\r\n-\t\t<span class=\"invisible\">${worklog.activity.code}</span>\r\n-\t\t<span title=\"${worklog.activity.name}\">${worklog.activity.code}</span>\r\n+\t\t<span class=\"invisible\">${fn:escapeXml(worklog.activity.code)}</span>\r\n+\t\t<span title=\"${fn:escapeXml(worklog.activity.name)}\">${fn:escapeXml(worklog.activity.code)}</span>\r\n \t</display:column>\r\n-\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"activity.code\" titleKey=\"worklog.activity\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column property=\"descriptionGui\" titleKey=\"worklog.description\" media=\"html\"/>\t\r\n-\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\"/>\r\n+\t<display:column property=\"description\" titleKey=\"worklog.description\" media=\"csv excel xml pdf rtf\" escapeXml=\"true\" />\r\n \r\n \t<display:column property=\"workFrom\" titleKey=\"worklog.workFrom\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r\n \t<display:column property=\"workTo\" titleKey=\"worklog.workTo\" decorator=\"cz.softinel.retra.core.utils.decorator.HourDecorator\"/>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/system/ChangeVisualConfiguration.jsp",
          "status": "modified",
          "additions": 23,
          "deletions": 23,
          "patch": "@@ -11,7 +11,7 @@\n \t\t\t<spring:bind path=\"visualConfigurationForm.skinName\">\n \t\t\t\t<th>Skin</th>\n \t\t\t\t<td>\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${skins}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${skins}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"name\" labelProperty=\"title\" >\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -25,7 +25,7 @@\n \t\t\t<spring:bind path=\"visualConfigurationForm.timeSelectorImplementation\">\n \t\t\t\t<th>Time Selector</th>\n \t\t\t\t<td>\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${timeSelectors}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${timeSelectors}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"name\" labelProperty=\"title\" >\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -39,7 +39,7 @@\n \t\t\t\t<th>Default activity for projects</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.da\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -53,7 +53,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p0\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -62,7 +62,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a0\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -76,7 +76,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p1\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -85,7 +85,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a1\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -99,7 +99,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -108,7 +108,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a2\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -122,7 +122,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p3\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -131,7 +131,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a3\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -145,7 +145,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p4\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -154,7 +154,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a4\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -168,7 +168,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p5\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -177,7 +177,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a5\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -191,7 +191,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p6\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -200,7 +200,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a6\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -214,7 +214,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p7\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -223,7 +223,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a7\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -237,7 +237,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p8\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -246,7 +246,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a8\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -260,7 +260,7 @@\n \t\t\t\t<th>Project / Default activity</th>\n \t\t\t\t<td>\n \t\t\t<spring:bind path=\"visualConfigurationForm.p9\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${projects}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\"> \n \t\t\t\t\t\t<vc:select-option value=\"\">--- project ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t\n@@ -269,7 +269,7 @@\n \t\t\t\t\t</c:forEach>\n \t\t\t</spring:bind>\n \t\t\t<spring:bind path=\"visualConfigurationForm.a9\">\n-\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${status.value}\" \n+\t\t\t\t\t<vc:select name=\"${status.expression}\" valueObjects=\"${activities}\" selected=\"${fn:escapeXml(status.value)}\" \n \t\t\t\t\tvalueProperty=\"pk\" labelProperty=\"codeAndName\" orderBy=\"codeAndName\" parentProperty=\"parent.pk\">\n \t\t\t\t\t\t<vc:select-option value=\"\">--- default activity ---</vc:select-option>\n \t\t\t\t\t</vc:select>\t\t\t\t\t"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/system/Login.jsp",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -7,7 +7,7 @@\n \t<form action=\"LoginAction.do?fkprm=true&originalUrl=${originalUrl}\" method=\"post\">\r\n \t\t<p>Username</p>\r\n \t\t<p>\r\n-\t\t\t<input type=\"text\" name=\"loginName\" value=\"${loginName}\" />\r\n+\t\t\t<input type=\"text\" name=\"loginName\" value=\"${fn:escapeXml(loginName)}\" />\r\n \t\t</p>\r\n \t\t<p>Password</p>\r\n \t\t<p>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/jsp/system/RetraError.jsp",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -5,7 +5,7 @@\n <div class=\"component dashboardComponentHalf\">\r\n \t<h2><fmt:message key=\"retra.error\"/></h2>\r\n \t<form action=\"Newsboard.do?fkprm=true\" method=\"post\">\r\n-\t\t<p><fmt:message key=\"retra.error.id\"/>: ${errId}</p>\r\n+\t\t<p><fmt:message key=\"retra.error.id\"/>: ${fn:escapeXml(errId)}</p>\r\n \t\t<p>\r\n \t\t\t<input type=\"submit\" name=\"submit\" class=\"button\" value=\"<fmt:message key=\"newsboard.label\"/>\" />\r\n \t\t</p>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/lovs/years.xml",
          "status": "modified",
          "additions": 21,
          "deletions": 0,
          "patch": "@@ -24,5 +24,26 @@\n \t\t<field value=\"2018\" key=\"year.2018\" />\r\n \t\t<field value=\"2019\" key=\"year.2019\" />\r\n \t\t<field value=\"2020\" key=\"year.2020\" />\r\n+\t\t<field value=\"2021\" key=\"year.2021\" />\r\n+\t\t<field value=\"2022\" key=\"year.2022\" />\r\n+\t\t<field value=\"2023\" key=\"year.2023\" />\r\n+\t\t<field value=\"2024\" key=\"year.2024\" />\r\n+\t\t<field value=\"2025\" key=\"year.2025\" />\r\n+\t\t<field value=\"2026\" key=\"year.2026\" />\r\n+\t\t<field value=\"2027\" key=\"year.2027\" />\r\n+\t\t<field value=\"2028\" key=\"year.2028\" />\r\n+\t\t<field value=\"2029\" key=\"year.2029\" />\r\n+\t\t<field value=\"2030\" key=\"year.2030\" />\r\n+\t\t<field value=\"2030\" key=\"year.2030\" />\r\n+\t\t<field value=\"2031\" key=\"year.2031\" />\r\n+\t\t<field value=\"2032\" key=\"year.2032\" />\r\n+\t\t<field value=\"2033\" key=\"year.2033\" />\r\n+\t\t<field value=\"2034\" key=\"year.2034\" />\r\n+\t\t<field value=\"2035\" key=\"year.2035\" />\r\n+\t\t<field value=\"2036\" key=\"year.2036\" />\r\n+\t\t<field value=\"2037\" key=\"year.2037\" />\r\n+\t\t<field value=\"2038\" key=\"year.2038\" />\r\n+\t\t<field value=\"2039\" key=\"year.2039\" />\r\n+\t\t<field value=\"2040\" key=\"year.2040\" />\r\n \t</lov>\r\n </lovs>\r"
        },
        {
          "filename": "src/main/webapp/WEB-INF/news/system-news.xml",
          "status": "modified",
          "additions": 13,
          "deletions": 2,
          "patch": "@@ -1,6 +1,17 @@\n <!-- TODO: must be done better structure, keys to message properties etc.  -->\n \n <news>\n+\t<item date=\"xx.yy.2022\"\n+\t\t  title=\"Build 2.11.0\"\n+\t\t  body=\"Fix of these issues:&lt;br />\n+\t\t  &lt;a href='https://jira/browse/RETRA-55' target='_blank'>RETRA-55&lt;/a> - Retra logovani - zlepsit, prechod na log4j2.&lt;br />\n+\t\t  &lt;a href='https://jira/browse/RETRA-56' target='_blank'>RETRA-56&lt;/a> - Retra je nachylna na XSS.&lt;br />\n+\t\t  &lt;a href='https://jira/browse/RETRA-41' target='_blank'>RETRA-41&lt;/a> - Specialni znaky v nazvu projektu.&lt;br />\n+\t\t  &lt;a href='https://jira/browse/RETRA-48' target='_blank'>RETRA-48&lt;/a> - Chyba p\u0159i renderov\u00e1n\u00ed textu worklogu.&lt;br />\n+\t\t  \"\n+\t\t  author=\"Retra Team\"\n+\t/>\n+\n \t<item date=\"27.6.2019\"\n \t\t  title=\"Build 2.10.0\"\n \t\t  body=\"Fix &lt;a href='https://jira/browse/RETRA-44' target='_blank'>RETRA-44&lt;/a> - Rozsireni exportu Timesheetu a Invoice o sloupec username.\"\n@@ -26,7 +37,7 @@\n \t\t  body=\"Bugfixing of jokes generator.\"\n \t\t  author=\"Retra Team\"\n \t/>\n-\n+<!--\n \t<item date=\"22.5.2018\"\n \t\t  title=\"Build 2.6.0\"\n \t\t  body=\"Small refactoring of permissions and bugfix.\"\n@@ -80,7 +91,7 @@\n \t\t  body=\"New integration with JIRA implemented (worklogs) and some bugfix.\"\n \t\t  author=\"Retra Team\"\n \t/>\n-\t<!-- item date=\"2.2.2015\"\n+\t<item date=\"2.2.2015\"\n \t\t  title=\"Build 2.0.0\"\n \t\t  body=\"Invoice batch generating, filtering projects and employees for assign and some bugfix.\"\n \t\t  author=\"Retra Team\""
        },
        {
          "filename": "src/main/webapp/WEB-INF/resources/about.properties",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -6,12 +6,12 @@ about.authors.label=Authors\n about.contributors.label=Contributors\n \n about.version.major=2\n-about.version.minor=10\n+about.version.minor=11\n about.version.build=0\n \n about.text=Retra is application for managing internal resources and simple internal information system\n \n-about.releasedOn=27.6.2019\n+about.releasedOn=xx.yy.2022\n \n about.authors=Radek Pinc, Petr S\\u00edgl\n about.contributors=Bori\\u0161a \\u017divkovi\\u0107, Pavel M\\u00fcller, Jaroslava Faustov\\u00e1, Jan N\\u011bmec, Karel Mr\\u00e1zek, David Smekal, Erik Szalai, Pavel Vlasat\\u00fd, Martin Javorek, Milan \\u010ce\\u010drdle\n\\ No newline at end of file"
        },
        {
          "filename": "src/main/webapp/WEB-INF/resources/messages.properties",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -3,8 +3,8 @@ header.title=Retra\n header.author=Radek Pinc, Petr S\\u00edgl\r\n header.description=Retra - Resource and Activity Tracker\r\n header.keywords=Retra, Resource, Activity, Project, Managing, Tracker\r\n-footer.copyright=Copyright &copy; 2007-2019, <a href='About.do?fkprm=true'>Retra Team</a>\r\n-footer.copyright.noLink=Copyright &copy; 2007-2019, Retra Team\r\n+footer.copyright=Copyright &copy; 2007-2022, <a href='About.do?fkprm=true'>Retra Team</a>\r\n+footer.copyright.noLink=Copyright &copy; 2007-2022, Retra Team\r\n newsboard.label=Newsboard\r\n dashboard.label=Dashboard\r\n login.label=Login\r"
        }
      ],
      "file_patterns": {
        "security_files": 1,
        "config_files": 1,
        "dependency_files": 0,
        "test_files": 0,
        "unique_directories": 14,
        "max_directory_depth": 9
      },
      "context": {
        "surrounding_commits": [
          {
            "sha": "5d987e0dff772311dee1e9e748c52486b1a23735",
            "date": "2023-05-03T10:01:07Z",
            "author_login": "pincr"
          },
          {
            "sha": "54eed41bbd9990bcb71414f0939195cc32903267",
            "date": "2023-04-24T13:21:20Z",
            "author_login": "pincr"
          },
          {
            "sha": "919fd98d3c3e9d5612309704d21e2c3a728267d8",
            "date": "2023-04-24T10:02:56Z",
            "author_login": "pincr"
          },
          {
            "sha": "e01ca6e4f9eb4acf5739b6cb4afd0499198a92fc",
            "date": "2022-01-18T11:44:56Z",
            "author_login": "siglp"
          },
          {
            "sha": "12b046be0ee943731938960055bb739be64310e2",
            "date": "2022-01-18T11:39:31Z",
            "author_login": "siglp"
          }
        ]
      }
    }
  },
  "vulnerability_details": {
    "cvss_score": 3.5,
    "cvss_vector": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:U/C:N/I:L/A:N",
    "cwe_id": "CWE-707",
    "description": "A vulnerability was found in retra-system. It has been classified as problematic. Affected is an unknown function. The manipulation leads to cross site scripting. It is possible to launch the attack remotely. The name of the patch is a6d94ab88f4a6f631a14c59b72461140fb57ae1f. It is recommended to apply a patch to fix this issue. VDB-216186 is the identifier assigned to this vulnerability.",
    "attack_vector": "NETWORK",
    "attack_complexity": "LOW"
  },
  "temporal_data": {
    "published_date": "2022-12-18T08:15:09.677",
    "last_modified": "2024-11-21T07:35:33.560",
    "fix_date": "2022-01-07T13:46:49Z"
  },
  "references": [
    {
      "url": "https://github.com/retra/retra-system/commit/a6d94ab88f4a6f631a14c59b72461140fb57ae1f",
      "source": "cna@vuldb.com",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://vuldb.com/?id.216186",
      "source": "cna@vuldb.com",
      "tags": [
        "Permissions Required",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/retra/retra-system/commit/a6d94ab88f4a6f631a14c59b72461140fb57ae1f",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://vuldb.com/?id.216186",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Permissions Required",
        "Third Party Advisory"
      ]
    }
  ],
  "collection_metadata": {
    "collected_at": "2025-01-11T23:04:23.179016",
    "processing_status": "enhanced"
  }
}