{
  "cve_id": "CVE-2023-2832",
  "github_data": {
    "repository": "unilogies/bumsys",
    "fix_commit": "1b426f58a513194206d0ea8ab58baf1461e54978",
    "related_commits": [
      "1b426f58a513194206d0ea8ab58baf1461e54978",
      "1b426f58a513194206d0ea8ab58baf1461e54978"
    ],
    "patch_url": "https://github.com/unilogies/bumsys/commit/1b426f58a513194206d0ea8ab58baf1461e54978.patch",
    "fix_commit_details": {
      "sha": "1b426f58a513194206d0ea8ab58baf1461e54978",
      "commit_date": "2023-04-28T09:00:55Z",
      "author": {
        "login": "kmkalam24",
        "type": "User",
        "stats": null
      },
      "commit_message": {
        "title": "Fix security issue",
        "length": 18,
        "has_description": false,
        "references_issue": true
      },
      "stats": {
        "total": 8636,
        "additions": 8604,
        "deletions": 32
      },
      "files": [
        {
          "filename": "assets/js/bms.js",
          "status": "modified",
          "additions": 14,
          "deletions": 3,
          "patch": "@@ -863,7 +863,7 @@ BMS.FUNCTIONS = {\n         var noResults = \"\";\n         if ( $(selector).attr(\"select2-create-new-url\") === undefined  ) {\n \n-            noResults = \"<?php echo __('Nothing found')?>\";\n+            noResults = \"<?php echo __('Nothing found'); ?>\";\n \n         } else {\n \n@@ -907,12 +907,22 @@ BMS.FUNCTIONS = {\n                 },\n                 cache: true\n             },\n+            templateSelection: function(state) {\n+\n+                if(!state.id) {\n+                    return state.text;\n+                } else {\n+                    return $(\"<div>\").text(state.text).html();\n+                }\n+\n+                // console.log(state.text);\n+            },\n             templateResult: function(state) {\n                 \n                 if(!state.id) {\n                     return state.text;\n                 }\n-            \n+        \n                 \n                 if (typeof state.text === \"object\" ) {\n \n@@ -940,7 +950,8 @@ BMS.FUNCTIONS = {\n \n                 } else {\n \n-                    return state.text;\n+                    // return state.text;\n+                    return $(\"<div>\").text(state.text).html();\n \n                 }\n "
        },
        {
          "filename": "assets/js/bms.min.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": null
        },
        {
          "filename": "assets/js/events.js",
          "status": "modified",
          "additions": 4,
          "deletions": 2,
          "patch": "@@ -1844,7 +1844,7 @@ $(document).on('dblclick', 'iledit', function (event) {\n                         // Display changed items\n                         if (type === 'select2' || type === 'select') {\n \n-                            $thistd.html(`<iledit data-val='` + $(that).val() + `'>` + $(\"option:selected\", that).text() + `</iledit>`);\n+                            $thistd.html(`<iledit data-val='` + $(that).val() + `'>` + $(\"option:selected\", that).html() + `</iledit>`);\n \n                         } else {\n \n@@ -1863,7 +1863,9 @@ $(document).on('dblclick', 'iledit', function (event) {\n             // Display data items if not changed\n             if (type === 'select2' || type === 'select') {\n \n-                $thistd.html(`<iledit data-val='` + $(that).val() + `'>` + $(\"option:selected\", that).text() + `</iledit>`);\n+                console.log( $(\"option:selected\", that).html() );\n+\n+                $thistd.html(`<iledit data-val='` + $(that).val() + `'>` + $(\"option:selected\", that).html() + `</iledit>`);\n \n             } else {\n "
        },
        {
          "filename": "assets/js/events.min.js",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1 +1 @@\n-$(document).on(\"change\",\"#productCategoryFilter, #productBrandFilter, #productEditionFilter, #productGenericFilter, #productAuthorFilter\",(function(){BMS.PRODUCT.showProduct({category:$(\"#productCategoryFilter\").val(),brand:$(\"#productBrandFilter\").val(),edition:$(\"#productEditionFilter\").val(),generic:$(\"#productGenericFilter\").val(),author:$(\"#productAuthorFilter\").val()})})),$(document).on(\"change\",\"#customers\",(function(){var e=$(\"#customers\").val();$(\"#customersId\").val(e),BMS.fn.get(`getCustomerData&cid=${e}`,(function(e){$(\"#orderDiscountValue\").val(e.discount),$(\"#packetShippingRate\").val(e.shipping_rate)}))})),$(document).on(\"change\",\"#warehouse\",(function(){var e=$(\"#warehouse\").val();$(\"#warehouseId\").val(e),$(\"#selectPosProduct\").attr(\"select2-ajax-url\",`${full_website_address}/info/?module=select2&page=productListForPos&wid=${e}`),BMS.fn.select2(\"#selectPosProduct\")})),$(document).on(\"change\",\"#stockTransferFromWarehouse, #stockTransferToWarehouse\",(function(){var e=$(\"#stockTransferFromWarehouse\").val(),t=$(\"#stockTransferToWarehouse\").val();$(\"#stockTransferFromWarehouseId\").val(e),$(\"#stockTransferToWarehouseId\").val(t)})),$(document).on(\"change\",\"#scTransferWarehouse\",(function(){var e=$(\"#scTransferWarehouse\").val();$(\"#scTransferWarehouseId\").val(e)})),$(document).on(\"click\",\"#addTariffChargesRow\",(function(){BMS.MAIN.addTariffChargesRow(\"#tariffCharges\")})),$(document).on(\"click\",\".productButton\",(function(){isPosPage?BMS.POS.addProduct(this.value):isPurchasePage?BMS.PURCHASE.addProduct(this.value):isTransferStockPage?BMS.STOCK_TRANSFER.addProduct(this.value):isProductReturnPage?BMS.RETURN.addProduct(this.value):isSpecimenCopyPage?BMS.SPECIMEN_COPY.addProduct(this.value):isScDistributionPage?BMS.SC_DISTRIBUTION.addProduct(this.value):isAddProductPage?BMS.PRODUCT.addProduct(this.value):isStockEntryPage?BMS.STOCK_ENTRY.addProduct(this.value):isSaleOrderPage&&BMS.ORDER.addProduct(this.value)})),$(document).on(\"change\",\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\",(function(){isPosPage?BMS.POS.addProduct(this.value):isPurchasePage?BMS.PURCHASE.addProduct(this.value):isTransferStockPage?BMS.STOCK_TRANSFER.addProduct(this.value):isProductReturnPage?BMS.RETURN.addProduct(this.value):isSpecimenCopyPage?BMS.SPECIMEN_COPY.addProduct(this.value):isScDistributionPage?BMS.SC_DISTRIBUTION.addProduct(this.value):isAddProductPage?BMS.PRODUCT.addProduct(this.value):isStockEntryPage?BMS.STOCK_ENTRY.addProduct(this.value):isSaleOrderPage&&BMS.ORDER.addProduct(this.value),$(this).html(\"<option value=''>Search Product....</option>\")})),$(document).on(\"click\",\"#addWastageSaleRow\",(function(){BMS.WASTAGE_SALE.addWastageSaleItem()})),$(document).on(\"click\",\".removeThisProduct, .removeThisItem\",(function(){$(this).closest(\"tr\").css(\"background-color\",\"red\").hide(\"fast\",(function(){$(this).closest(\"tr\").remove(),isPosPage?(BMS.POS.grandTotal(),BMS.POS.disableEnableWCSelect()):isPurchasePage?BMS.PURCHASE.grandTotal():isTransferStockPage?(BMS.STOCK_TRANSFER.grandTotal(),BMS.STOCK_TRANSFER.disableEnableWarehouseSelect()):isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSpecimenCopyPage?BMS.SPECIMEN_COPY.disableEnableWarehouseSelect():isStockEntryPage?BMS.STOCK_ENTRY.grandTotal():isSaleOrderPage&&(BMS.ORDER.grandTotal(),BMS.POS.disableEnableWCSelect())}))})),$(document).on(\"click\",\".removeThisTariffCharges\",(function(){$(this).closest(\".row\").css(\"background-color\",\"whitesmoke\").hide(\"fast\",(function(){$(this).closest(\".row\").remove(),isPosPage?BMS.POS.grandTotal():isPurchasePage?BMS.PURCHASE.grandTotal():isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSaleOrderPage&&BMS.ORDER.grandTotal()}))})),$(document).on(\"change\",\".tariffChargesName\",(function(){isPosPage?BMS.POS.grandTotal():isPurchasePage?BMS.PURCHASE.grandTotal():isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSaleOrderPage&&BMS.ORDER.grandTotal()})),$(document).on(\"keyup blur\",\".productQnt\",(function(){isPosPage?BMS.POS.productQntCheck(this):isPurchasePage?(BMS.PURCHASE.calculateEachProduct(this),BMS.PURCHASE.grandTotal()):isTransferStockPage?BMS.STOCK_TRANSFER.productQntCheck(this):isProductReturnPage?(BMS.RETURN.grandTotal(),BMS.RETURN.calculateEachProduct(this)):isSpecimenCopyPage?BMS.SPECIMEN_COPY.productQntCheck(this):isStockEntryPage?(BMS.STOCK_ENTRY.calculateEachProduct(this),BMS.STOCK_ENTRY.grandTotal()):isSaleOrderPage&&BMS.ORDER.productQntCheck(this)})),$(document).on(\"keydown\",\".productQnt\",(function(e){\"Enter\"===e.key&&($(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").hasClass(\"select2-hidden-accessible\")||BMS.fn.select2(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\"),$(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").select2(\"open\"))})),$(document).on(\"keydown\",\"#purchaseDiscountValue\",(function(e){\"Enter\"===e.key&&(e.preventDefault(),$(\"#purchaseDiscount\").modal(\"hide\"),$(\"#finalizePurchase\").modal(\"show\"))})),$(document).on(\"keydown\",\"#shippingCharge\",(function(e){\"Enter\"===e.key&&(e.preventDefault(),$(\"#adjustAmount\").select())})),$(document).on(\"keydown\",\"#adjustAmount\",(function(e){$(this).addClass(\"disableAdjustAmountAutoChange\"),\"Enter\"===e.key&&(e.preventDefault(),$(\".posSalePaymentAmount\").first().select(),$(\".posSalePaymentAmount\").first().addClass(\"disablePaymentAmountAutoChange\"))})),$(document).on(\"keydown focus\",\".posSalePaymentAmount\",(function(e){var t=$(this).closest(\".row\").next(\".row\").find(\"input.posSalePaymentAmount\");$(this).addClass(\"disablePaymentAmountAutoChange\"),1===t.length&&\"Enter\"===e.key&&(e.preventDefault(),t.addClass(\"disablePaymentAmountAutoChange\"),t.select())})),$(document).on(\"keydown\",\".select2-search__field\",(function(e){isPosPage&&\"select2-selectPosProduct-results\"===$(this).attr(\"aria-controls\")&&\"\"===this.value&&$(\".productQnt\").length>0&&\"Enter\"===e.key&&($(\"#selectPosProduct\").select2(\"close\"),$(\"#orderDiscount\").modal(\"show\")),isPurchasePage&&\"select2-selectProduct-results\"===$(this).attr(\"aria-controls\")&&\"\"===this.value&&$(\".productQnt\").length>0&&\"Enter\"===e.key&&($(\"#selectProduct\").select2(\"close\"),$(\"#purchaseDiscount\").modal(\"show\"))})),$(document).on(\"hide.bs.modal\",\"#orderDiscount\",(function(e){var t=$(\"#orderDiscountValue\"),a=$(t).val();BMS.POS.isGivenDiscountPermitted(t)?($(\"#payment\").modal(\"show\"),BMS.POS.grandTotal()):(Swal.fire({title:\"Error!\",text:`You do not have permission to give ${a} discount.`,icon:\"error\"}),$(t).val(0),e.preventDefault())})),$(document).on(\"blur keyup\",\".wastageSaleItemQnt, .wastageSaleItemPrice\",(function(){var e=$(this).closest(\"tr\").find(\".wastageSaleItemQnt\").val(),t=$(this).closest(\"tr\").find(\".wastageSaleItemPrice\").val();$(this).closest(\"tr\").find(\".wastageSaleItemSubtotal\").html(parseFloat(e*t).toFixed(2)),BMS.WASTAGE_SALE.grandTotal()})),$(document).on(\"blur keyup\",\"#wastageSaleDiscount, #wastageSalePaidAmount\",(function(){BMS.WASTAGE_SALE.grandTotal()})),$(document).on(\"blur keyup\",\".productPurchaseDiscount, .productPurchasePrice\",(function(){isPurchasePage?(BMS.PURCHASE.calculateEachProduct(this),BMS.PURCHASE.grandTotal()):isTransferStockPage&&(BMS.STOCK_TRANSFER.calculateEachProduct($(this)),BMS.STOCK_TRANSFER.grandTotal())})),$(document).on(\"blur keyup\",\".productReturnDiscount, .productReturnPrice\",(function(){BMS.RETURN.calculateEachProduct(this),BMS.RETURN.grandTotal()})),$(document).on(\"keyup blur\",\"#purchaseDiscount, #purchasePaidAmount, #purchaseShipping\",(function(){BMS.PURCHASE.grandTotal()})),$(document).on(\"keyup blur\",\"#returnDiscount, #returnShipping, #returnSurcharge, #returnPaidAmount\",(function(){BMS.RETURN.grandTotal()})),$(document).on(\"keyup blur\",\"#productSaleItemPacket\",(function(){})),$(document).on(\"blur keydown\",\"#productSaleItemDiscount\",(function(e){BMS.POS.productDiscountCheck(e)})),$(document).on(\"keydown\",\"#orderDiscountValue\",(function(e){13===(e.keyCode||e.which)&&BMS.POS.orderDiscountCheck(this,e)})),$(document).on(\"keyup\",\".posSalePaymentAmount, #shippingCharge, #totalPackets, #packetShippingRate, #adjustAmount\",(function(e){BMS.POS.grandTotal(e)})),$(document).on(\"submit\",\"#posSale\",(function(e){e.preventDefault();var t=0===$(\".productQnt\").length,a=$(\".productSO\").filter((function(){return 1==this.value})).length>0;if(\"\"===$(\"#customersId\").val())return BMS.fn.alertError(\"Please select the customer\");var o=e.originalEvent.submitter;if(\"sale_is_hold\"!==o.value||confirm(\"Are you sure to Hold this?\"))if(t||a)Swal.fire({title:\"Error!\",html:t?\"Please add a least one product\":\"Sorry! there have at least one out of stock product in selected warehouse, which are marked with <span style='Background-color:pink;'>Pink background</span>. Please remove them first.\",icon:\"error\",onClose:$(\"body\").css(\"padding\",\"0px\")});else{$(o).html(\"Submit &nbsp;&nbsp; <i class='fa fa-spin fa-refresh'></i>\");var n=new FormData(this);n.append(o.name,o.value),$(\"#payment\").find(\"button\").prop(\"disabled\",!0),$.ajax({url:full_website_address+\"/info/?module=pos\",type:\"post\",data:n,cache:!1,contentType:!1,processData:!1,success:function(t,a){if(\"success\"==a){$(o).html(\"Printing...\");var n=JSON.parse(t);\"success\"===n.saleStatus?BMS.MAIN.printPage(full_website_address+\"/invoice-print/?invoiceType=posSale&id=\"+n.salesId,e,(function(){$(\"#payment\").modal(\"hide\"),BMS.POS.clearScreen(),$(\"#payment\").find(\"button\").prop(\"disabled\",!1)})):($(\"#posErrorMsg\").html('<div class=\"alert alert-danger\">'+n.msg+\"</div>\"),$(\"#payment\").find(\"button\").prop(\"disabled\",!1))}}})}})),$(document).on(\"submit\",\"#productPurchase, #productStockTransfer, #productReturn, #specimenCopyForm, #scDistributionForm\",(function(e){if($(\".productQnt\").length<1)return alert(\"Please add at least one product.\"),void e.preventDefault()})),$(document).on(\"submit\",\"#wastageSaleForm\",(function(e){return $(\".wastageSaleItemQnt\").length<1?(alert(\"Please add at least one item.\"),void e.preventDefault()):Number($(\"#wastageSalePaidAmount\").val())>0&&\"\"===$(\"#wastageSaleAccounts\").val()?(alert(\"Please select the accounts.\"),void e.preventDefault()):void 0})),$(document).on(\"keypress\",\"#posSale, #productPurchase, #productReturn, #productStockTransfer, #wastageSaleForm\",(function(e){13===(e.keyCode||e.which)&&(!1===$(\"#payment, #finalizePurchase, #finalizeReturn, #finalizeWastageSale\").hasClass(\"in\")&&e.preventDefault(),isPosPage?(BMS.POS.grandTotal(),$(\"#orderDiscount\").hasClass(\"in\")?$(\"#orderDiscount\").modal(\"hide\"):$(\"#salesTariffCharges\").hasClass(\"in\")?$(\"#salesTariffCharges\").modal(\"hide\"):$(\"#productSaleDetails\").hasClass(\"in\")&&$(\"#productSaleDetails\").modal(\"hide\")):isPurchasePage?(BMS.PURCHASE.grandTotal(),$(\"#purchaseTariffCharges\").hasClass(\"in\")?$(\"#purchaseTariffCharges\").modal(\"hide\"):$(\"#purchaseDiscount\").hasClass(\"in\")&&$(\"#purchaseDiscount\").modal(\"hide\")):isProductReturnPage?(BMS.RETURN.grandTotal(),$(\"#returnTariffCharges\").hasClass(\"in\")?$(\"#returnTariffCharges\").modal(\"hide\"):$(\"#returnDiscount\").hasClass(\"in\")&&$(\"#returnDiscount\").modal(\"hide\")):isWastageSalePage&&(BMS.WASTAGE_SALE.grandTotal(),$(\"#wastageSaleTariffCharges\").hasClass(\"in\")?$(\"#wastageSaleTariffCharges\").modal(\"hide\"):$(\"#wastageSaleDiscount\").hasClass(\"in\")&&$(\"#wastageSaleDiscount\").modal(\"hide\")))})),$(document).on(\"shown.bs.modal\",\"#orderDiscount, #purchaseDiscount, #returnDiscount, #wastageSaleDiscount, #payment\",(function(){$(\"#purchaseDiscountValue, #purchasePaidAmount, #orderDiscountValue, #shippingCharge, #returnDiscountValue, #returnPaidAmount, #wastageSaleDiscountValue, #shippingCharge\").select()})),$(document).on(\"show.bs.modal\",\"#customerPurchaseList\",(function(){BMS.fn.get(`customerPurchaseList&cid=${$(\"#customersId\").val()}`,(e=>{if(\"\"!=e){var t=\"\";e.forEach((e=>{\"Hold\"===e.sales_status?t+=`<li class=\"item\">\\n <a href=\"${full_website_address}/sales/pos/?edit=${e.id}\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n <span style=\"font-size: 12px;\" class=\"label label-warning\">Hold</span>\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`:t+=`<li onClick=\"getPurchaseProductList(${e.id}, '${e.ref}');\" class=\"item\">\\n <a href=\"javascript:void(0)\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`})),$(\"#showPurchaseList ul\").html(t)}else $(\"#showPurchaseList ul\").html('<li class=\"alert alert-danger\">Sorry! No data found.</li>')}))})),$(document).on(\"keydown\",\".searchInvoiceInPos\",(function(e){if(\"Enter\"===e.key){$(\"body\").toggleClass(\"wait\");var t=encodeURIComponent($(this).val());BMS.fn.get(`customerPurchaseList&cid=${$(\"#customersId\").val()}&s=${t}`,(e=>{if(\"\"==e)return $(\"body\").toggleClass(\"wait\"),void $(\"#showPurchaseList ul\").html('<li class=\"alert alert-danger\">Sorry! No data found.</li>');var t=\"\";e.forEach((e=>{\"Hold\"===e.sales_status?t+=`<li class=\"item\">\\n <a href=\"${full_website_address}/sales/pos/?edit=${e.id}\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n <span style=\"font-size: 12px;\" class=\"label label-warning\">Hold</span>\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`:t+=`<li onClick=\"getPurchaseProductList(${e.id}, '${e.ref}');\" class=\"item\">\\n <a href=\"javascript:void(0)\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`})),$(\"#showPurchaseList ul\").html(t),$(\"body\").toggleClass(\"wait\")}))}})),$(document).on(\"click\",\".quick-cash\",(function(){var e=Number($(this).html());$(\".posSalePaymentAmount\").val(parseFloat(e).toFixed(2)),BMS.POS.grandTotal()})),$(document).on(\"hide.bs.modal\",\"#productSaleDetails\",(function(){var e=$(\"#productSaleDetails .rowId\").val(),t=$(\"#productSaleDetails #productSaleItemPrice\").val(),a=$(\"#productSaleDetails #productSaleItemDiscount\").val(),o=$(\"#productSaleDetails #productSaleItemPacket\").val(),n=$(\"#productSaleDetails #productSaleItemDetails\").val(),s=$(\"tr#\"+e);s.find(\".netSalesPrice\").val(t);var r=BMS.FUNCTIONS.calculateDiscount(t,a),l=\"\";if(Number(r)===Number(t))l=parseFloat(t).toFixed(2);else l=\"<span>\"+r+\"</span><span><del><small>\"+parseFloat(t).toFixed(2)+\"</small></del></span>\";s.find(\".displayProductPrice\").html(l),s.find(\".productDiscount\").val(a),s.find(\".productItemDetails\").val(n),s.find(\".productPacket\").val(o),s.find(\".subtotalCol\").html(r*s.find(\".productQnt\").val()),BMS.POS.grandTotal()})),$(document).on(\"focus\",\".productQnt\",(function(){$(this)[0].scrollIntoView({behavior:\"smooth\",block:\"nearest\",inline:\"start\"})})),$(document).on(\"change\",\"#ReturnMoney\",(function(){$(\"#ReturnMoney\").is(\":checked\")?$(\".returnAmountAccountsDiv\").show():$(\".returnAmountAccountsDiv\").hide()})),$(document).on(\"submit\",\"#accountsLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=accountsLedger&account_id=\"+$(\"#accountSelection\").val()+\"&dateRange=\"+$(\"#accountsLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getAccountsInfo\",{accountsId:$(\"#accountSelection\").val()},(function(e,t){var a=JSON.parse(e);$(\"#accountsName\").html(a.name),$(\"#accountsBalance\").html(tsd(a.balance)),$(\"#accountsLedgerDates\").html($(\"#accountsLedgerDateRange\").val())}))})),$(document).on(\"submit\",\"#employeeLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=employeeLedger&emp_id=\"+$(\"#employeeSelection\").val()+\"&dateRange=\"+$(\"#employeeLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getEmpSalaryData\",{empId:$(\"#employeeSelection\").val()},(function(e,t){var a=JSON.parse(e),o=Number(a.emp_payable_salary)+Number(a.emp_payable_overtime)+Number(a.emp_payable_bonus);$(\"#salaryInfo > tbody > tr > td:nth-child(1)\").html(tsd(a.emp_payable_salary)),$(\"#salaryInfo > tbody > tr > td:nth-child(2)\").html(tsd(a.emp_payable_overtime)),$(\"#salaryInfo > tbody > tr > td:nth-child(3)\").html(tsd(a.emp_payable_bonus)),$(\"#salaryInfo > tbody > tr > td:nth-child(4)\").html(tsd(o)),$(\"#employeeName\").html(a.emp_firstname+\" \"+a.emp_lastname),$(\"#accountsLedgerDates\").html($(\"#employeeLedgerDateRange\").val())}))})),$(document).on(\"submit\",\"#journalLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=journalLedger&journal_id=\"+$(\"#journalSelection\").val()+\"&dateRange=\"+$(\"#journalLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#customerLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=customerLedger&customer_id=\"+$(\"#customerSelection\").val()+\"&dateRange=\"+$(\"#customerLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#companyLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=companyLedger&company_id=\"+$(\"#companySelection\").val()+\"&dateRange=\"+$(\"#companyLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#advancePaymentLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=advancePaymentLedger&emp_id=\"+$(\"#employeeSelection\").val()+\"&dateRange=\"+$(\"#advancePaymentLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#productLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=productLedger&pid=\"+$(\"#productSelection\").val()+\"&wid=\"+$(\"#warehouseSelection\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#customerStatementReport\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=customerStatement&cid=\"+$(\"#customerSelection\").val()+\"&dateRange=\"+$(\"#customerStatementDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getCustomerStatementInfo\",{customerId:$(\"#customerSelection\").val(),dateRange:$(\"#customerStatementDateRange\").val()},(function(e,t){var a=JSON.parse(e),o=Number(a.net_purchased)-(Number(a.total_product_returns)+Number(a.total_purchased_discount)),n=Number(a.advance_payments_amount)+Number(a.received_payments_amount)+Number(a.sales_payments_amount),s=n+Number(a.previous_balance)+Number(a.total_given_bonus)+Number(a.special_discounts_amount)-(o+Number(a.total_shipping)+Number(a.payments_return_amount));$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(2)\").html(tsd(a.net_purchased)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(2)\").html(tsd(a.total_purchased_discount)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(2)\").html(tsd(a.total_shipping)),$(\"#paymentInfo > tbody > tr:nth-child(4) > td:nth-child(2)\").html(tsd(a.total_product_returns)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(2)\").html(tsd(o)),$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(4)\").html(tsd(a.sales_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(4)\").html(tsd(a.received_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(4)\").html(tsd(a.advance_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(4)\").html(tsd(n)),$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(6)\").html(tsd(a.previous_balance)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(6)\").html(tsd(a.total_given_bonus)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(6)\").html(tsd(a.special_discounts_amount)),$(\"#paymentInfo > tbody > tr:nth-child(4) > td:nth-child(6)\").html(tsd(a.payments_return_amount)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(6)\").html(tsd(s)),$(\"#customerName\").html(a.customer_name),$(\"#customerAddress\").html(a.customer_address+\", \"+a.district_name),$(\"#customerStatementDates\").html($(\"#customerStatementDateRange\").val())}))})),$(document).on(\"submit\",\"#locationWiseSaleReort\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=locationWiseSalesReport&pid=\"+$(\"#selectProductForLocationReport\").val()+\"&location=\"+$(\"#selectLocation\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"change\",\"#paymentEmployee, #dontAdujctAdvance, .paymentsType\",(function(){var e=$(this);$.post(\"<?php echo full_website_address(); ?>/info/?module=data&page=getEmpSalaryData\",{empId:$(\"#paymentEmployee\").val()},(function(t,a){$(\"#dontAdjustAdvance\").is(\":checked\");var o=JSON.parse(t),n=Number(o.emp_payable_salary)+Number(o.emp_payable_overtime)+Number(o.emp_payable_bonus),s=\"Last taken loan: \"+tsd(o.loan_amount)+\"; Paid: \"+tsd(o.loan_installment_paid_amount)+\"; Monthly:\"+tsd(o.loan_installment_amount);$(\"#salaryInfo > tbody > tr > td:nth-child(1)\").html(tsd(o.emp_payable_salary)),$(\"#salaryInfo > tbody > tr > td:nth-child(2)\").html(tsd(o.emp_payable_overtime)),$(\"#salaryInfo > tbody > tr > td:nth-child(3)\").html(tsd(o.emp_payable_bonus)),$(\"#salaryInfo > tbody > tr > td:nth-child(4)\").html(tsd(n)),$(\"#salaryInfo > tfoot > tr:nth-child(1) > th\").html(s);var r=$(e).val();\"Salary\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_salary).toFixed(0)):\"Overtime\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_overtime).toFixed(0)):\"Bonus\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_bonus).toFixed(0)):\"Advance Salary\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(0):$(\".paymentAmount\").val(Number(o.emp_payable_salary).toFixed(0))}))})),$(document).on(\"change\",\"#paymentMethods\",(function(){\"Cheque\"==$(\"#paymentMethods\").val()?$(\"#hiddenItem\").css(\"display\",\"block\"):$(\"#hiddenItem\").css(\"display\",\"none\")})),$(document).off(\"click\",\"#addSalaryPaymentRow\"),$(document).on(\"click\",\"#addSalaryPaymentRow\",(function(){$(\"#salaryPaymentRow\").append('<div class=\"row\"> <div class=\"col-md-4\"> <div class=\"form-group required\"> <select name=\"paymentsType[]\" class=\"paymentsType form-control\" style=\"width: 100%;\" required> <option value=\"Salary\">Salary</option> <option value=\"Overtime\">Overtime</option> <option value=\"Bonus\">Bonus</option> </select> </div> </div> <div class=\"col-md-3\"> <div class=\"form-group required\"> <input type=\"number\" name=\"paymentAmount[]\" class=\"paymentAmount form-control\" required> </div> </div> <div class=\"col-md-4\"> <div class=\"form-group\"> <input type=\"text\" name=\"salaryPaymentNote[]\" class=\"salaryPaymentNote form-control\"> </div> </div> <div class=\"col-xs-1\"> <i style=\"cursor: pointer; padding: 10px 5px 0 0;\" class=\"fa fa-trash-o removeSalaryPaymentRow\"></i> </div> </div>')})),$(document).on(\"click\",\".removeSalaryPaymentRow\",(function(){$(this).closest(\".row\").css(\"background-color\",\"whitesmoke\").hide(\"slow\",(function(){$(this).closest(\".row\").remove()}))})),$(document).on(\"focusin\",\".datePicker\",(function(){BMS.FUNCTIONS.datePicker()})),$(document).on(\"focusin\",\".dateTimePicker\",(function(){BMS.FUNCTIONS.datePicker({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".dateRangePicker\",(function(){BMS.FUNCTIONS.dateRangePicker()})),$(document).on(\"focusin\",\".dateTimeRangePicker\",(function(){BMS.FUNCTIONS.dateRangePicker({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".dateRangePickerPreDefined\",(function(){BMS.FUNCTIONS.dateRangePickerPreDefined()})),$(document).on(\"focusin\",\".dateTimeRangePickerPreDefined\",(function(){BMS.FUNCTIONS.dateRangePickerPreDefined({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".multiDatePicker\",(function(){BMS.FUNCTIONS.multiDatePicker()})),$(document).on(\"change\",\".imageToUpload\",(function(){var e=$(this).closest(\".imageContainer\").find(\".photoErrorMessage\");$(e).empty();var t=this.files[0],a=t.type,o=t.size;if(!1===[\"image/jpeg\",\"image/png\",\"image/jpg\"].includes(a))return $(e).length<1?(BMS.fn.alertError(\"<?php echo __('Please select a valid image file'); ?>\"),this.value=this.defaultValue):$(e).html(\"<div style='margin-bottom: 0;' class='alert alert-danger'><?php echo __('Please select a valid image file'); ?></div>\"),!1;if(\"<?php echo $_SETTINGS['MAX_UPLOAD_SIZE'] * 1024 * 1024; ?>\"<o)return $(e).length<1?(BMS.fn.alertError(\"<?php echo __('Max file size %d MB', $_SETTINGS['MAX_UPLOAD_SIZE']); ?>\"),this.value=this.defaultValue):$(e).html(\"<div class='alert alert-danger'><?php echo __('Max file size %d MB', $_SETTINGS['MAX_UPLOAD_SIZE']); ?></div>\"),!1;var n=$(this).val().replace(/\\\\/g,\"/\").replace(/.*\\//,\"\");$(this).closest(\".imageContainer\").find(\".imageNameShow\").val(n);var s=$(this),r=new FileReader;r.onload=function(e){$(s).css(\"color\",\"green\"),$(s).closest(\".imageContainer\").find(\".image_preview\").css(\"display\",\"block\"),$(s).closest(\".imageContainer\").find(\".previewing\").attr(\"src\",e.target.result)},r.readAsDataURL(this.files[0])})),$(document).on(\"click\",\"#addPosSalePaymentRow\",(function(){$(\".paymentMethodBox\").append('<div style=\"margin: 0;\" class=\"row\">\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Amount</label>\\n <span style=\"cursor:pointer; padding: 0 4px;\" class=\"pull-right removePosPaymentItem\" ><i class=\"fa fa-times\"></i></span>\\n <input type=\"number\" onclick=\"this.select();\" name=\"posSalePaymentAmount[]\" class=\"form-control posSalePaymentAmount\" step=\"any\">\\n </div>\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Reference/Info</label>\\n <input type=\"text\" name=\"posSalePaymentReference[]\" class=\"form-control\">\\n </div>\\n <div style=\"display: none;\" class=\"posSalePaymentBankAccount form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Bank Account</label>\\n <select name=\"posSalePaymentBankAccount[]\" class=\"form-control pull-left select2Ajax\" \\n select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=accountList\" style=\"width: 100%;\">\\n <option value=\"\"><?php echo __(\"Select Account\"); ?>....</option>\\n </select>\\n </div>\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Payment Method</label>\\n <select name=\"posSalePaymentMethod[]\" class=\"posSalePaymentMethod form-control\">\\n <option value=\"Cash\"><?php echo __(\"Cash\"); ?></option>\\n <option value=\"Bank Transfer\"><?php echo __(\"Bank Transfer\"); ?></option>\\n <option value=\"Cheque\"><?php echo __(\"Cheque\"); ?></option>\\n <option value=\"Card\"><?php echo __(\"Card\"); ?></option>\\n <option value=\"Others\"><?php echo __(\"Others\"); ?></option>\\n </select>\\n </div>\\n </div>')})),$(document).on(\"click\",\".removePosPaymentItem\",(function(){$(this).closest(\".row\").remove(),BMS.POS.grandTotal()})),$(document).on(\"change\",\".posSalePaymentMethod\",(function(){\"Cash\"===$(this).val()?$(this).closest(\".row\").find(\".posSalePaymentBankAccount\").hide():$(this).closest(\".row\").find(\".posSalePaymentBankAccount\").show()})),$(document).on(\"submit\",\"#modalForm, #popUpForm, #jqFormAdd, #jqFormUpdate\",(function(e){e.preventDefault(),ajaxFormSubmit(this)})),$(document).on(\"submit\",\"#inlineForm\",(function(e){e.preventDefault(),ajaxFormSubmit(this,!0)})),$(document).on(\"click\",\".deleteEntry\",(function(e){e.preventDefault();var t=$(this).attr(\"href\"),a=$(this).attr(\"data-to-be-deleted\"),o=$(this).attr(\"removeParent\"),n=this;Swal.fire({title:\"Are you sure to delete this entry?\",icon:\"warning\",didOpen:function(){BMS.fn.play(\"warning\")},showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete it!\"}).then((e=>{e.value&&$.post(t,{datatoDelete:a},(function(e,t){if(isJson(e)){var a=JSON.parse(e);for(var s in a)sweetAlert[s]=a[s]}Swal.fire({toast:sweetAlert.toast,position:sweetAlert.position,timer:sweetAlert.timer,showConfirmButton:sweetAlert.showConfirmButton,showCloseButton:sweetAlert.showCloseButton,icon:sweetAlert.icon,title:sweetAlert.title,text:sweetAlert.text,onClose:$(\"body\").css(\"padding\",\"0px\")}),void 0!==o&&$(n).closest(o).hide(\"fast\"),$(\"#dataTableWithAjax\").DataTable().ajax.reload(null,!1),$(\"#dataTableWithAjaxExtend\").DataTable().ajax.reload(null,!1)}))}))})),$(document).on(\"click\",\".updateEntry\",(function(e){e.preventDefault();var t=$(this).attr(\"href\"),a=$(this).attr(\"data-to-be-updated\");$(this).css(\"color\",\"black\"),$(this).find(\"i.fa\").addClass(\"fa-spin\"),$.post(t,{datatoUpdate:a},(function(e,t){if(isJson(e)){var a=JSON.parse(e);for(var o in a)sweetAlert[o]=a[o]}Swal.fire({toast:sweetAlert.toast,position:sweetAlert.position,timer:sweetAlert.timer,showConfirmButton:sweetAlert.showConfirmButton,showCloseButton:sweetAlert.showCloseButton,icon:sweetAlert.icon,title:sweetAlert.title,text:sweetAlert.text,onClose:$(\"body\").css(\"padding\",\"0px\")}),$(\"#dataTableWithAjax\").DataTable().ajax.reload(null,!1),$(\"#dataTableWithAjaxExtend\").DataTable().ajax.reload(null,!1)}))})),$(document).on(\"dblclick\",\"iledit\",(function(e){e.preventDefault();var t=$(this),a=t.closest(\"td\"),o=t.closest(\"table\").find(\"th\").eq(a.index()),n=t.closest(\"tr\").find(\"pkey\").text(),s=o.attr(\"type\"),r=o.attr(\"data-source\"),l=o.attr(\"data-options\"),i=o.attr(\"where-to-update\"),c=t.attr(\"data-val\"),d=t.text(),u=a.width();if(\"select2\"===s){a.html(`\\n <select class=\"form-control select2InlineEdit\" select2-ajax-url=\"${r}\" style=\"width: ${u}px;\" required>\\n <option value=\"\"><?php echo __(\"Select Entry\"); ?>....</option>\\n </select>\\n `);var m=a.find(\".select2InlineEdit\");BMS.fn.select2(m,c,d),m.select2(\"open\")}else if(\"select\"===s){(l=l.split(\",\")).forEach((function(e){l+=`<option ${d==e?\"selected\":\"\"} value='${e}'>${e}</option>`})),a.html(`\\n <select class=\"form-control\" style=\"width: ${u}px; padding: 6px 6px;\" required>\\n ${l}\\n </select>\\n `),(m=a.find(\"select\")).select2(),m.select2(\"open\")}else a.html(`\\n <input type=\"text\" value=\"${d}\" style=\"width: ${u}px;\" class=\"form-control\">\\n `),\"datePicker\"===s&&(a.find(\"input\").addClass(\"datePicker\"),a.find(\".datePicker\").focus());a.find(\"input, select, textarea\").on(\"enter blur clear apply.daterangepicker, select2:close\",(function(){var e=[\"select2\",\"select\"].includes(s)?c:d,t=$(this).val(),o=$(this);t!==e?$.post(i,{pkey:n,newData:t},(function(e,t){void 0!==(e=JSON.parse(e)).error&&\"true\"===e.error?BMS.fn.alertError(e.msg):(BMS.fn.alertSuccess(\"The data has been successfully updated.\"),\"select2\"===s||\"select\"===s?a.html(\"<iledit data-val='\"+$(o).val()+\"'>\"+$(\"option:selected\",o).text()+\"</iledit>\"):a.html(\"<iledit>\"+$(o).val()+\"</iledit>\"))})):\"select2\"===s||\"select\"===s?a.html(\"<iledit data-val='\"+$(o).val()+\"'>\"+$(\"option:selected\",o).text()+\"</iledit>\"):a.html(\"<iledit>\"+$(o).val()+\"</iledit>\")}))})),$(document).on(\"hidden.bs.modal\",(function(e){$(e.target).removeData(\"bs.modal\").find(\".modal-ajax\").html(\"\")})),$(document).ready((function(){$(document).on(\"mouseenter focus\",\".select2Ajax\",(function(){BMS.fn.select2(this)}))})),$(document).ready((function(){$(\"body\").tooltip({selector:'[data-toggle=\"tooltip\"]'})})),$(document).click((function(e){$(\".dropdown-menu[data-parent]\").hide()})),$(document).on(\"click\",'.col-sm-12 [data-toggle=\"dropdown\"]',(function(){if($(\"body\").hasClass(\"modal-open\"))throw new Error(\"This solution is not working inside a responsive table inside a modal, you need to find out a way to calculate the modal Z-index and add it to the element\");if($buttonGroup=$(this).parent(),$buttonGroup.attr(\"data-attachedUl\"))$ul=$(\"[data-parent=\"+$buttonGroup.attr(\"data-attachedUl\")+\"]\");else{var e=+new Date;$ul=$(this).siblings(\"ul\"),$ul.attr(\"data-parent\",e),$buttonGroup.attr(\"data-attachedUl\",e),$(window).resize((function(){$ul.css(\"display\",\"none\").data(\"top\")}))}var t,a,o;$buttonGroup.hasClass(\"open\")?(t=$(this).parent(),a=$ul,o=t.offset().top+t.outerHeight(),a.css(\"top\",o+\"px\"),a.css(\"left\",t.offset().left-100+\"px\"),a.css(\"position\",\"absolute\"),a.css(\"width\",a.width()),a.css(\"heigt\",a.height()),a.css(\"display\",\"block\"),a.appendTo(\".dynamic-container\")):$ul.css(\"display\",\"none\")})),$(document).on(\"click\",\".restricted\",(function(){Swal.fire({title:\"Sorry!\",text:\"You have no permission to perform this action\",icon:\"error\"})})),$(\".modal\").on(\"show.bs.modal\",(function(e){if(-1!==$.inArray(\"restricted\",e.target.classList))return e.preventDefault()})),$(\".modal\").on(\"shown.bs.modal\",(function(){$(this).find(\"[autofocus]\").focus()})),$(\"form\").on(\"focus\",\"input[type=number]\",(function(e){$(this).on(\"wheel.disableScroll\",(function(e){e.preventDefault()}))})),$(\"form\").on(\"blur\",\"input[type=number]\",(function(e){$(this).off(\"wheel.disableScroll\")}));var sweetAlert=[];sweetAlert.title=\"The command has been executed successfully.\",sweetAlert.text=\"\",sweetAlert.icon=\"success\",sweetAlert.toast=!0,sweetAlert.position=\"top\",sweetAlert.timer=5e3,sweetAlert.showConfirmButton=!1,sweetAlert.showCloseButton=!1,$('input[type=\"checkbox\"].square, input[type=\"radio\"].square').iCheck({checkboxClass:\"icheckbox_square-blue\",radioClass:\"iradio_square-blue\"}),$.ajaxSetup({beforeSend:function(e){e.setRequestHeader(\"X-CSRF-TOKEN\",xCsrfToken)}});var getPageTitle=JSON.parse('<?php echo json_encode($_SETTINGS[\"PAGE_TITLE\"]); ?>');$(window).bind(\"popstate\",(function(e){\"undefined\"!=typeof session&&(session.terminate(),phone.stop()),e.preventDefault(),$.get(location.href+\"?contentOnly=true\",(function(e,t){defaultiDisplayLength=\"\",$(\"li\").removeClass(\"active\");var a=location.href,o=\"Not Found!\";void 0!==getPageTitle[a]&&(o=getPageTitle[a]),window.document.title=o,$(\".dynamic-container\").html(e),jQuery.get(full_website_address+\"/assets/js/initiator.min.js\")}))})),$(document).on(\"keydown\",(function(e){\"F2\"===e.key&&($(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").hasClass(\"select2-hidden-accessible\")||BMS.fn.select2(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\"),$(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").select2(\"open\")),\"F3\"===e.key&&(e.preventDefault(),$(\"#orderDiscount\").modal(\"show\"))})),$(document).on(\"click\",\".toggleNotButton\",(function(){var e=$(this).closest(\"span\").find(\".notThisValueFilter\");\"=\"===$(e).val()?($(e).val(\"!=\"),$(this).text(\"|\")):($(this).text(\"\"),$(e).val(\"=\"))})),$(document).on(\"click\",\".stopPropagation\",(function(e){e.stopPropagation()})),$(document).on(\"change\",\"#productType\",(function(){$(\"#productVariationSection\").hide(),$(\"#bundleProductsContainer\").hide(),$(\".bundleProduct\").hide(),$(\".groupedProduct\").hide();\"Variable\"===this.value?$(\"#productVariationSection\").show():\"Bundle\"===this.value?($(\".bundleProduct\").show(),$(\"#bundleProductsContainer\").show()):\"Grouped\"===this.value&&($(\".groupedProduct\").show(),$(\"#bundleProductsContainer\").show())})),$(document).on(\"click\",\".removeThisVariation\",(function(e){if(e.stopPropagation(),confirm(\"Are sure to remove this variation?\")){var t=$(this).closest(\"li\").find(\".variation_product_id\").val();$(this).closest(\"li\").hide(\"fast\",(function(){$(this).remove()})),void 0!==t&&$.ajax({url:full_website_address+\"/xhr/?module=products&page=deleteVariationProduct\",type:\"post\",data:{product_id:t},success:function(e,t){}})}})),$(document).on(\"click\",\"#setVariationPrice\",(function(){setVariationPrice()})),$(window).keydown((function(e){if(13==e.keyCode&&$(\"#productVariationPrice\").hasClass(\"in\"))return e.preventDefault(),setVariationPrice(),$(\"#productVariationPrice\").modal(\"hide\"),!1})),$(\"#browseProduct\").on(\"show.bs.modal\",(function(e){BMS.PRODUCT.showProduct()})),$(document).on(\"change\",\"#productHasExpiryDate\",(function(){\"1\"===this.value?$(\".productIntitalStock\").prop(\"disabled\",!0):$(\".productIntitalStock\").prop(\"disabled\",!1)}));let barCcode=\"\";$(document).on(\"keypress\",(e=>{if(\"Enter\"===e.key){var t=\"input\"!==e.target.tagName.toLowerCase();\"\"!==barCcode&&(isPosPage&&t?BMS.POS.addProduct(barCcode,!0):isPurchasePage&&t?BMS.PURCHASE.addProduct(barCcode,!0):isTransferStockPage&&t?BMS.STOCK_TRANSFER.addProduct(barCcode,!0):isProductReturnPage&&t?BMS.RETURN.addProduct(barCcode,!0):isStockEntryPage&&t?BMS.STOCK_ENTRY.addProduct(barCcode,!0):isAddProductPage&&$(\"#productCode\").val(barCcode)),barCcode=\"\"}else barCcode+=e.key})),$(document).on(\"click\",\".copyThis\",(function(e){navigator.clipboard.writeText($(this).text())}));\n\\ No newline at end of file\n+$(document).on(\"change\",\"#productCategoryFilter, #productBrandFilter, #productEditionFilter, #productGenericFilter, #productAuthorFilter\",(function(){BMS.PRODUCT.showProduct({category:$(\"#productCategoryFilter\").val(),brand:$(\"#productBrandFilter\").val(),edition:$(\"#productEditionFilter\").val(),generic:$(\"#productGenericFilter\").val(),author:$(\"#productAuthorFilter\").val()})})),$(document).on(\"change\",\"#customers\",(function(){var e=$(\"#customers\").val();$(\"#customersId\").val(e),BMS.fn.get(`getCustomerData&cid=${e}`,(function(e){$(\"#orderDiscountValue\").val(e.discount),$(\"#packetShippingRate\").val(e.shipping_rate)}))})),$(document).on(\"change\",\"#warehouse\",(function(){var e=$(\"#warehouse\").val();$(\"#warehouseId\").val(e),$(\"#selectPosProduct\").attr(\"select2-ajax-url\",`${full_website_address}/info/?module=select2&page=productListForPos&wid=${e}`),BMS.fn.select2(\"#selectPosProduct\")})),$(document).on(\"change\",\"#stockTransferFromWarehouse, #stockTransferToWarehouse\",(function(){var e=$(\"#stockTransferFromWarehouse\").val(),t=$(\"#stockTransferToWarehouse\").val();$(\"#stockTransferFromWarehouseId\").val(e),$(\"#stockTransferToWarehouseId\").val(t)})),$(document).on(\"change\",\"#scTransferWarehouse\",(function(){var e=$(\"#scTransferWarehouse\").val();$(\"#scTransferWarehouseId\").val(e)})),$(document).on(\"click\",\"#addTariffChargesRow\",(function(){BMS.MAIN.addTariffChargesRow(\"#tariffCharges\")})),$(document).on(\"click\",\".productButton\",(function(){isPosPage?BMS.POS.addProduct(this.value):isPurchasePage?BMS.PURCHASE.addProduct(this.value):isTransferStockPage?BMS.STOCK_TRANSFER.addProduct(this.value):isProductReturnPage?BMS.RETURN.addProduct(this.value):isSpecimenCopyPage?BMS.SPECIMEN_COPY.addProduct(this.value):isScDistributionPage?BMS.SC_DISTRIBUTION.addProduct(this.value):isAddProductPage?BMS.PRODUCT.addProduct(this.value):isStockEntryPage?BMS.STOCK_ENTRY.addProduct(this.value):isSaleOrderPage&&BMS.ORDER.addProduct(this.value)})),$(document).on(\"change\",\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\",(function(){isPosPage?BMS.POS.addProduct(this.value):isPurchasePage?BMS.PURCHASE.addProduct(this.value):isTransferStockPage?BMS.STOCK_TRANSFER.addProduct(this.value):isProductReturnPage?BMS.RETURN.addProduct(this.value):isSpecimenCopyPage?BMS.SPECIMEN_COPY.addProduct(this.value):isScDistributionPage?BMS.SC_DISTRIBUTION.addProduct(this.value):isAddProductPage?BMS.PRODUCT.addProduct(this.value):isStockEntryPage?BMS.STOCK_ENTRY.addProduct(this.value):isSaleOrderPage&&BMS.ORDER.addProduct(this.value),$(this).html(\"<option value=''>Search Product....</option>\")})),$(document).on(\"click\",\"#addWastageSaleRow\",(function(){BMS.WASTAGE_SALE.addWastageSaleItem()})),$(document).on(\"click\",\".removeThisProduct, .removeThisItem\",(function(){$(this).closest(\"tr\").css(\"background-color\",\"red\").hide(\"fast\",(function(){$(this).closest(\"tr\").remove(),isPosPage?(BMS.POS.grandTotal(),BMS.POS.disableEnableWCSelect()):isPurchasePage?BMS.PURCHASE.grandTotal():isTransferStockPage?(BMS.STOCK_TRANSFER.grandTotal(),BMS.STOCK_TRANSFER.disableEnableWarehouseSelect()):isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSpecimenCopyPage?BMS.SPECIMEN_COPY.disableEnableWarehouseSelect():isStockEntryPage?BMS.STOCK_ENTRY.grandTotal():isSaleOrderPage&&(BMS.ORDER.grandTotal(),BMS.POS.disableEnableWCSelect())}))})),$(document).on(\"click\",\".removeThisTariffCharges\",(function(){$(this).closest(\".row\").css(\"background-color\",\"whitesmoke\").hide(\"fast\",(function(){$(this).closest(\".row\").remove(),isPosPage?BMS.POS.grandTotal():isPurchasePage?BMS.PURCHASE.grandTotal():isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSaleOrderPage&&BMS.ORDER.grandTotal()}))})),$(document).on(\"change\",\".tariffChargesName\",(function(){isPosPage?BMS.POS.grandTotal():isPurchasePage?BMS.PURCHASE.grandTotal():isProductReturnPage?BMS.RETURN.grandTotal():isWastageSalePage?BMS.WASTAGE_SALE.grandTotal():isSaleOrderPage&&BMS.ORDER.grandTotal()})),$(document).on(\"keyup blur\",\".productQnt\",(function(){isPosPage?BMS.POS.productQntCheck(this):isPurchasePage?(BMS.PURCHASE.calculateEachProduct(this),BMS.PURCHASE.grandTotal()):isTransferStockPage?BMS.STOCK_TRANSFER.productQntCheck(this):isProductReturnPage?(BMS.RETURN.grandTotal(),BMS.RETURN.calculateEachProduct(this)):isSpecimenCopyPage?BMS.SPECIMEN_COPY.productQntCheck(this):isStockEntryPage?(BMS.STOCK_ENTRY.calculateEachProduct(this),BMS.STOCK_ENTRY.grandTotal()):isSaleOrderPage&&BMS.ORDER.productQntCheck(this)})),$(document).on(\"keydown\",\".productQnt\",(function(e){\"Enter\"===e.key&&($(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").hasClass(\"select2-hidden-accessible\")||BMS.fn.select2(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\"),$(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").select2(\"open\"))})),$(document).on(\"keydown\",\"#purchaseDiscountValue\",(function(e){\"Enter\"===e.key&&(e.preventDefault(),$(\"#purchaseDiscount\").modal(\"hide\"),$(\"#finalizePurchase\").modal(\"show\"))})),$(document).on(\"keydown\",\"#shippingCharge\",(function(e){\"Enter\"===e.key&&(e.preventDefault(),$(\"#adjustAmount\").select())})),$(document).on(\"keydown\",\"#adjustAmount\",(function(e){$(this).addClass(\"disableAdjustAmountAutoChange\"),\"Enter\"===e.key&&(e.preventDefault(),$(\".posSalePaymentAmount\").first().select(),$(\".posSalePaymentAmount\").first().addClass(\"disablePaymentAmountAutoChange\"))})),$(document).on(\"keydown focus\",\".posSalePaymentAmount\",(function(e){var t=$(this).closest(\".row\").next(\".row\").find(\"input.posSalePaymentAmount\");$(this).addClass(\"disablePaymentAmountAutoChange\"),1===t.length&&\"Enter\"===e.key&&(e.preventDefault(),t.addClass(\"disablePaymentAmountAutoChange\"),t.select())})),$(document).on(\"keydown\",\".select2-search__field\",(function(e){isPosPage&&\"select2-selectPosProduct-results\"===$(this).attr(\"aria-controls\")&&\"\"===this.value&&$(\".productQnt\").length>0&&\"Enter\"===e.key&&($(\"#selectPosProduct\").select2(\"close\"),$(\"#orderDiscount\").modal(\"show\")),isPurchasePage&&\"select2-selectProduct-results\"===$(this).attr(\"aria-controls\")&&\"\"===this.value&&$(\".productQnt\").length>0&&\"Enter\"===e.key&&($(\"#selectProduct\").select2(\"close\"),$(\"#purchaseDiscount\").modal(\"show\"))})),$(document).on(\"hide.bs.modal\",\"#orderDiscount\",(function(e){var t=$(\"#orderDiscountValue\"),a=$(t).val();BMS.POS.isGivenDiscountPermitted(t)?($(\"#payment\").modal(\"show\"),BMS.POS.grandTotal()):(Swal.fire({title:\"Error!\",text:`You do not have permission to give ${a} discount.`,icon:\"error\"}),$(t).val(0),e.preventDefault())})),$(document).on(\"blur keyup\",\".wastageSaleItemQnt, .wastageSaleItemPrice\",(function(){var e=$(this).closest(\"tr\").find(\".wastageSaleItemQnt\").val(),t=$(this).closest(\"tr\").find(\".wastageSaleItemPrice\").val();$(this).closest(\"tr\").find(\".wastageSaleItemSubtotal\").html(parseFloat(e*t).toFixed(2)),BMS.WASTAGE_SALE.grandTotal()})),$(document).on(\"blur keyup\",\"#wastageSaleDiscount, #wastageSalePaidAmount\",(function(){BMS.WASTAGE_SALE.grandTotal()})),$(document).on(\"blur keyup\",\".productPurchaseDiscount, .productPurchasePrice\",(function(){isPurchasePage?(BMS.PURCHASE.calculateEachProduct(this),BMS.PURCHASE.grandTotal()):isTransferStockPage&&(BMS.STOCK_TRANSFER.calculateEachProduct($(this)),BMS.STOCK_TRANSFER.grandTotal())})),$(document).on(\"blur keyup\",\".productReturnDiscount, .productReturnPrice\",(function(){BMS.RETURN.calculateEachProduct(this),BMS.RETURN.grandTotal()})),$(document).on(\"keyup blur\",\"#purchaseDiscount, #purchasePaidAmount, #purchaseShipping\",(function(){BMS.PURCHASE.grandTotal()})),$(document).on(\"keyup blur\",\"#returnDiscount, #returnShipping, #returnSurcharge, #returnPaidAmount\",(function(){BMS.RETURN.grandTotal()})),$(document).on(\"keyup blur\",\"#productSaleItemPacket\",(function(){})),$(document).on(\"blur keydown\",\"#productSaleItemDiscount\",(function(e){BMS.POS.productDiscountCheck(e)})),$(document).on(\"keydown\",\"#orderDiscountValue\",(function(e){13===(e.keyCode||e.which)&&BMS.POS.orderDiscountCheck(this,e)})),$(document).on(\"keyup\",\".posSalePaymentAmount, #shippingCharge, #totalPackets, #packetShippingRate, #adjustAmount\",(function(e){BMS.POS.grandTotal(e)})),$(document).on(\"submit\",\"#posSale\",(function(e){e.preventDefault();var t=0===$(\".productQnt\").length,a=$(\".productSO\").filter((function(){return 1==this.value})).length>0;if(\"\"===$(\"#customersId\").val())return BMS.fn.alertError(\"Please select the customer\");var o=e.originalEvent.submitter;if(\"sale_is_hold\"!==o.value||confirm(\"Are you sure to Hold this?\"))if(t||a)Swal.fire({title:\"Error!\",html:t?\"Please add a least one product\":\"Sorry! there have at least one out of stock product in selected warehouse, which are marked with <span style='Background-color:pink;'>Pink background</span>. Please remove them first.\",icon:\"error\",onClose:$(\"body\").css(\"padding\",\"0px\")});else{$(o).html(\"Submit &nbsp;&nbsp; <i class='fa fa-spin fa-refresh'></i>\");var n=new FormData(this);n.append(o.name,o.value),$(\"#payment\").find(\"button\").prop(\"disabled\",!0),$.ajax({url:full_website_address+\"/info/?module=pos\",type:\"post\",data:n,cache:!1,contentType:!1,processData:!1,success:function(t,a){if(\"success\"==a){$(o).html(\"Printing...\");var n=JSON.parse(t);\"success\"===n.saleStatus?BMS.MAIN.printPage(full_website_address+\"/invoice-print/?invoiceType=posSale&id=\"+n.salesId,e,(function(){$(\"#payment\").modal(\"hide\"),BMS.POS.clearScreen(),$(\"#payment\").find(\"button\").prop(\"disabled\",!1)})):($(\"#posErrorMsg\").html('<div class=\"alert alert-danger\">'+n.msg+\"</div>\"),$(\"#payment\").find(\"button\").prop(\"disabled\",!1))}}})}})),$(document).on(\"submit\",\"#productPurchase, #productStockTransfer, #productReturn, #specimenCopyForm, #scDistributionForm\",(function(e){if($(\".productQnt\").length<1)return alert(\"Please add at least one product.\"),void e.preventDefault()})),$(document).on(\"submit\",\"#wastageSaleForm\",(function(e){return $(\".wastageSaleItemQnt\").length<1?(alert(\"Please add at least one item.\"),void e.preventDefault()):Number($(\"#wastageSalePaidAmount\").val())>0&&\"\"===$(\"#wastageSaleAccounts\").val()?(alert(\"Please select the accounts.\"),void e.preventDefault()):void 0})),$(document).on(\"keypress\",\"#posSale, #productPurchase, #productReturn, #productStockTransfer, #wastageSaleForm\",(function(e){13===(e.keyCode||e.which)&&(!1===$(\"#payment, #finalizePurchase, #finalizeReturn, #finalizeWastageSale\").hasClass(\"in\")&&e.preventDefault(),isPosPage?(BMS.POS.grandTotal(),$(\"#orderDiscount\").hasClass(\"in\")?$(\"#orderDiscount\").modal(\"hide\"):$(\"#salesTariffCharges\").hasClass(\"in\")?$(\"#salesTariffCharges\").modal(\"hide\"):$(\"#productSaleDetails\").hasClass(\"in\")&&$(\"#productSaleDetails\").modal(\"hide\")):isPurchasePage?(BMS.PURCHASE.grandTotal(),$(\"#purchaseTariffCharges\").hasClass(\"in\")?$(\"#purchaseTariffCharges\").modal(\"hide\"):$(\"#purchaseDiscount\").hasClass(\"in\")&&$(\"#purchaseDiscount\").modal(\"hide\")):isProductReturnPage?(BMS.RETURN.grandTotal(),$(\"#returnTariffCharges\").hasClass(\"in\")?$(\"#returnTariffCharges\").modal(\"hide\"):$(\"#returnDiscount\").hasClass(\"in\")&&$(\"#returnDiscount\").modal(\"hide\")):isWastageSalePage&&(BMS.WASTAGE_SALE.grandTotal(),$(\"#wastageSaleTariffCharges\").hasClass(\"in\")?$(\"#wastageSaleTariffCharges\").modal(\"hide\"):$(\"#wastageSaleDiscount\").hasClass(\"in\")&&$(\"#wastageSaleDiscount\").modal(\"hide\")))})),$(document).on(\"shown.bs.modal\",\"#orderDiscount, #purchaseDiscount, #returnDiscount, #wastageSaleDiscount, #payment\",(function(){$(\"#purchaseDiscountValue, #purchasePaidAmount, #orderDiscountValue, #shippingCharge, #returnDiscountValue, #returnPaidAmount, #wastageSaleDiscountValue, #shippingCharge\").select()})),$(document).on(\"show.bs.modal\",\"#customerPurchaseList\",(function(){BMS.fn.get(`customerPurchaseList&cid=${$(\"#customersId\").val()}`,(e=>{if(\"\"!=e){var t=\"\";e.forEach((e=>{\"Hold\"===e.sales_status?t+=`<li class=\"item\">\\n <a href=\"${full_website_address}/sales/pos/?edit=${e.id}\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n <span style=\"font-size: 12px;\" class=\"label label-warning\">Hold</span>\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`:t+=`<li onClick=\"getPurchaseProductList(${e.id}, '${e.ref}');\" class=\"item\">\\n <a href=\"javascript:void(0)\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`})),$(\"#showPurchaseList ul\").html(t)}else $(\"#showPurchaseList ul\").html('<li class=\"alert alert-danger\">Sorry! No data found.</li>')}))})),$(document).on(\"keydown\",\".searchInvoiceInPos\",(function(e){if(\"Enter\"===e.key){$(\"body\").toggleClass(\"wait\");var t=encodeURIComponent($(this).val());BMS.fn.get(`customerPurchaseList&cid=${$(\"#customersId\").val()}&s=${t}`,(e=>{if(\"\"==e)return $(\"body\").toggleClass(\"wait\"),void $(\"#showPurchaseList ul\").html('<li class=\"alert alert-danger\">Sorry! No data found.</li>');var t=\"\";e.forEach((e=>{\"Hold\"===e.sales_status?t+=`<li class=\"item\">\\n <a href=\"${full_website_address}/sales/pos/?edit=${e.id}\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n <span style=\"font-size: 12px;\" class=\"label label-warning\">Hold</span>\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`:t+=`<li onClick=\"getPurchaseProductList(${e.id}, '${e.ref}');\" class=\"item\">\\n <a href=\"javascript:void(0)\" class=\"product-title\">\\n ${e.date} (${e.ref})\\n <span style=\"font-size: 12px;\" class=\"label label-success pull-right\">${to_money(e.total)}</span>\\n <span class=\"product-description\">\\n From: ${e.shop}; Status: ${e.pay_status}\\n </span>\\n </a>\\n </li>`})),$(\"#showPurchaseList ul\").html(t),$(\"body\").toggleClass(\"wait\")}))}})),$(document).on(\"click\",\".quick-cash\",(function(){var e=Number($(this).html());$(\".posSalePaymentAmount\").val(parseFloat(e).toFixed(2)),BMS.POS.grandTotal()})),$(document).on(\"hide.bs.modal\",\"#productSaleDetails\",(function(){var e=$(\"#productSaleDetails .rowId\").val(),t=$(\"#productSaleDetails #productSaleItemPrice\").val(),a=$(\"#productSaleDetails #productSaleItemDiscount\").val(),o=$(\"#productSaleDetails #productSaleItemPacket\").val(),n=$(\"#productSaleDetails #productSaleItemDetails\").val(),s=$(\"tr#\"+e);s.find(\".netSalesPrice\").val(t);var r=BMS.FUNCTIONS.calculateDiscount(t,a),l=\"\";if(Number(r)===Number(t))l=parseFloat(t).toFixed(2);else l=\"<span>\"+r+\"</span><span><del><small>\"+parseFloat(t).toFixed(2)+\"</small></del></span>\";s.find(\".displayProductPrice\").html(l),s.find(\".productDiscount\").val(a),s.find(\".productItemDetails\").val(n),s.find(\".productPacket\").val(o),s.find(\".subtotalCol\").html(r*s.find(\".productQnt\").val()),BMS.POS.grandTotal()})),$(document).on(\"focus\",\".productQnt\",(function(){$(this)[0].scrollIntoView({behavior:\"smooth\",block:\"nearest\",inline:\"start\"})})),$(document).on(\"change\",\"#ReturnMoney\",(function(){$(\"#ReturnMoney\").is(\":checked\")?$(\".returnAmountAccountsDiv\").show():$(\".returnAmountAccountsDiv\").hide()})),$(document).on(\"submit\",\"#accountsLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=accountsLedger&account_id=\"+$(\"#accountSelection\").val()+\"&dateRange=\"+$(\"#accountsLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getAccountsInfo\",{accountsId:$(\"#accountSelection\").val()},(function(e,t){var a=JSON.parse(e);$(\"#accountsName\").html(a.name),$(\"#accountsBalance\").html(tsd(a.balance)),$(\"#accountsLedgerDates\").html($(\"#accountsLedgerDateRange\").val())}))})),$(document).on(\"submit\",\"#employeeLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=employeeLedger&emp_id=\"+$(\"#employeeSelection\").val()+\"&dateRange=\"+$(\"#employeeLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getEmpSalaryData\",{empId:$(\"#employeeSelection\").val()},(function(e,t){var a=JSON.parse(e),o=Number(a.emp_payable_salary)+Number(a.emp_payable_overtime)+Number(a.emp_payable_bonus);$(\"#salaryInfo > tbody > tr > td:nth-child(1)\").html(tsd(a.emp_payable_salary)),$(\"#salaryInfo > tbody > tr > td:nth-child(2)\").html(tsd(a.emp_payable_overtime)),$(\"#salaryInfo > tbody > tr > td:nth-child(3)\").html(tsd(a.emp_payable_bonus)),$(\"#salaryInfo > tbody > tr > td:nth-child(4)\").html(tsd(o)),$(\"#employeeName\").html(a.emp_firstname+\" \"+a.emp_lastname),$(\"#accountsLedgerDates\").html($(\"#employeeLedgerDateRange\").val())}))})),$(document).on(\"submit\",\"#journalLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=journalLedger&journal_id=\"+$(\"#journalSelection\").val()+\"&dateRange=\"+$(\"#journalLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#customerLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=customerLedger&customer_id=\"+$(\"#customerSelection\").val()+\"&dateRange=\"+$(\"#customerLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#companyLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=companyLedger&company_id=\"+$(\"#companySelection\").val()+\"&dateRange=\"+$(\"#companyLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#advancePaymentLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=ledgers&page=advancePaymentLedger&emp_id=\"+$(\"#employeeSelection\").val()+\"&dateRange=\"+$(\"#advancePaymentLedgerDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#productLedgerForm\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=productLedger&pid=\"+$(\"#productSelection\").val()+\"&wid=\"+$(\"#warehouseSelection\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"submit\",\"#customerStatementReport\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=customerStatement&cid=\"+$(\"#customerSelection\").val()+\"&dateRange=\"+$(\"#customerStatementDateRange\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load(),$.post(full_website_address+\"/info/?module=data&page=getCustomerStatementInfo\",{customerId:$(\"#customerSelection\").val(),dateRange:$(\"#customerStatementDateRange\").val()},(function(e,t){var a=JSON.parse(e),o=Number(a.net_purchased)-(Number(a.total_product_returns)+Number(a.total_purchased_discount)),n=Number(a.advance_payments_amount)+Number(a.received_payments_amount)+Number(a.sales_payments_amount),s=n+Number(a.previous_balance)+Number(a.total_given_bonus)+Number(a.special_discounts_amount)-(o+Number(a.total_shipping)+Number(a.payments_return_amount));$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(2)\").html(tsd(a.net_purchased)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(2)\").html(tsd(a.total_purchased_discount)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(2)\").html(tsd(a.total_shipping)),$(\"#paymentInfo > tbody > tr:nth-child(4) > td:nth-child(2)\").html(tsd(a.total_product_returns)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(2)\").html(tsd(o)),$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(4)\").html(tsd(a.sales_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(4)\").html(tsd(a.received_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(4)\").html(tsd(a.advance_payments_amount)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(4)\").html(tsd(n)),$(\"#paymentInfo > tbody > tr:nth-child(1) > td:nth-child(6)\").html(tsd(a.previous_balance)),$(\"#paymentInfo > tbody > tr:nth-child(2) > td:nth-child(6)\").html(tsd(a.total_given_bonus)),$(\"#paymentInfo > tbody > tr:nth-child(3) > td:nth-child(6)\").html(tsd(a.special_discounts_amount)),$(\"#paymentInfo > tbody > tr:nth-child(4) > td:nth-child(6)\").html(tsd(a.payments_return_amount)),$(\"#paymentInfo > tbody > tr:nth-child(5) > td:nth-child(6)\").html(tsd(s)),$(\"#customerName\").html(a.customer_name),$(\"#customerAddress\").html(a.customer_address+\", \"+a.district_name),$(\"#customerStatementDates\").html($(\"#customerStatementDateRange\").val())}))})),$(document).on(\"submit\",\"#locationWiseSaleReort\",(function(e){e.preventDefault();var t=full_website_address+\"/xhr/?module=reports&page=locationWiseSalesReport&pid=\"+$(\"#selectProductForLocationReport\").val()+\"&location=\"+$(\"#selectLocation\").val();$(\"#dataTableWithAjaxExtend\").DataTable().ajax.url(t).load()})),$(document).on(\"change\",\"#paymentEmployee, #dontAdujctAdvance, .paymentsType\",(function(){var e=$(this);$.post(\"<?php echo full_website_address(); ?>/info/?module=data&page=getEmpSalaryData\",{empId:$(\"#paymentEmployee\").val()},(function(t,a){$(\"#dontAdjustAdvance\").is(\":checked\");var o=JSON.parse(t),n=Number(o.emp_payable_salary)+Number(o.emp_payable_overtime)+Number(o.emp_payable_bonus),s=\"Last taken loan: \"+tsd(o.loan_amount)+\"; Paid: \"+tsd(o.loan_installment_paid_amount)+\"; Monthly:\"+tsd(o.loan_installment_amount);$(\"#salaryInfo > tbody > tr > td:nth-child(1)\").html(tsd(o.emp_payable_salary)),$(\"#salaryInfo > tbody > tr > td:nth-child(2)\").html(tsd(o.emp_payable_overtime)),$(\"#salaryInfo > tbody > tr > td:nth-child(3)\").html(tsd(o.emp_payable_bonus)),$(\"#salaryInfo > tbody > tr > td:nth-child(4)\").html(tsd(n)),$(\"#salaryInfo > tfoot > tr:nth-child(1) > th\").html(s);var r=$(e).val();\"Salary\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_salary).toFixed(0)):\"Overtime\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_overtime).toFixed(0)):\"Bonus\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(Number(o.emp_payable_bonus).toFixed(0)):\"Advance Salary\"==r?$(e).closest(\".row\").find(\".paymentAmount\").val(0):$(\".paymentAmount\").val(Number(o.emp_payable_salary).toFixed(0))}))})),$(document).on(\"change\",\"#paymentMethods\",(function(){\"Cheque\"==$(\"#paymentMethods\").val()?$(\"#hiddenItem\").css(\"display\",\"block\"):$(\"#hiddenItem\").css(\"display\",\"none\")})),$(document).off(\"click\",\"#addSalaryPaymentRow\"),$(document).on(\"click\",\"#addSalaryPaymentRow\",(function(){$(\"#salaryPaymentRow\").append('<div class=\"row\"> <div class=\"col-md-4\"> <div class=\"form-group required\"> <select name=\"paymentsType[]\" class=\"paymentsType form-control\" style=\"width: 100%;\" required> <option value=\"Salary\">Salary</option> <option value=\"Overtime\">Overtime</option> <option value=\"Bonus\">Bonus</option> </select> </div> </div> <div class=\"col-md-3\"> <div class=\"form-group required\"> <input type=\"number\" name=\"paymentAmount[]\" class=\"paymentAmount form-control\" required> </div> </div> <div class=\"col-md-4\"> <div class=\"form-group\"> <input type=\"text\" name=\"salaryPaymentNote[]\" class=\"salaryPaymentNote form-control\"> </div> </div> <div class=\"col-xs-1\"> <i style=\"cursor: pointer; padding: 10px 5px 0 0;\" class=\"fa fa-trash-o removeSalaryPaymentRow\"></i> </div> </div>')})),$(document).on(\"click\",\".removeSalaryPaymentRow\",(function(){$(this).closest(\".row\").css(\"background-color\",\"whitesmoke\").hide(\"slow\",(function(){$(this).closest(\".row\").remove()}))})),$(document).on(\"focusin\",\".datePicker\",(function(){BMS.FUNCTIONS.datePicker()})),$(document).on(\"focusin\",\".dateTimePicker\",(function(){BMS.FUNCTIONS.datePicker({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".dateRangePicker\",(function(){BMS.FUNCTIONS.dateRangePicker()})),$(document).on(\"focusin\",\".dateTimeRangePicker\",(function(){BMS.FUNCTIONS.dateRangePicker({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".dateRangePickerPreDefined\",(function(){BMS.FUNCTIONS.dateRangePickerPreDefined()})),$(document).on(\"focusin\",\".dateTimeRangePickerPreDefined\",(function(){BMS.FUNCTIONS.dateRangePickerPreDefined({selector:this,format:\"YYYY-MM-DD HH:mm\",timePicker:!0})})),$(document).on(\"focusin\",\".multiDatePicker\",(function(){BMS.FUNCTIONS.multiDatePicker()})),$(document).on(\"change\",\".imageToUpload\",(function(){var e=$(this).closest(\".imageContainer\").find(\".photoErrorMessage\");$(e).empty();var t=this.files[0],a=t.type,o=t.size;if(!1===[\"image/jpeg\",\"image/png\",\"image/jpg\"].includes(a))return $(e).length<1?(BMS.fn.alertError(\"<?php echo __('Please select a valid image file'); ?>\"),this.value=this.defaultValue):$(e).html(\"<div style='margin-bottom: 0;' class='alert alert-danger'><?php echo __('Please select a valid image file'); ?></div>\"),!1;if(\"<?php echo $_SETTINGS['MAX_UPLOAD_SIZE'] * 1024 * 1024; ?>\"<o)return $(e).length<1?(BMS.fn.alertError(\"<?php echo __('Max file size %d MB', $_SETTINGS['MAX_UPLOAD_SIZE']); ?>\"),this.value=this.defaultValue):$(e).html(\"<div class='alert alert-danger'><?php echo __('Max file size %d MB', $_SETTINGS['MAX_UPLOAD_SIZE']); ?></div>\"),!1;var n=$(this).val().replace(/\\\\/g,\"/\").replace(/.*\\//,\"\");$(this).closest(\".imageContainer\").find(\".imageNameShow\").val(n);var s=$(this),r=new FileReader;r.onload=function(e){$(s).css(\"color\",\"green\"),$(s).closest(\".imageContainer\").find(\".image_preview\").css(\"display\",\"block\"),$(s).closest(\".imageContainer\").find(\".previewing\").attr(\"src\",e.target.result)},r.readAsDataURL(this.files[0])})),$(document).on(\"click\",\"#addPosSalePaymentRow\",(function(){$(\".paymentMethodBox\").append('<div style=\"margin: 0;\" class=\"row\">\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Amount</label>\\n <span style=\"cursor:pointer; padding: 0 4px;\" class=\"pull-right removePosPaymentItem\" ><i class=\"fa fa-times\"></i></span>\\n <input type=\"number\" onclick=\"this.select();\" name=\"posSalePaymentAmount[]\" class=\"form-control posSalePaymentAmount\" step=\"any\">\\n </div>\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Reference/Info</label>\\n <input type=\"text\" name=\"posSalePaymentReference[]\" class=\"form-control\">\\n </div>\\n <div style=\"display: none;\" class=\"posSalePaymentBankAccount form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Bank Account</label>\\n <select name=\"posSalePaymentBankAccount[]\" class=\"form-control pull-left select2Ajax\" \\n select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=accountList\" style=\"width: 100%;\">\\n <option value=\"\"><?php echo __(\"Select Account\"); ?>....</option>\\n </select>\\n </div>\\n <div class=\"form-group pull-right col-md-3 adjustFormGroupPadding\">\\n <label>Payment Method</label>\\n <select name=\"posSalePaymentMethod[]\" class=\"posSalePaymentMethod form-control\">\\n <option value=\"Cash\"><?php echo __(\"Cash\"); ?></option>\\n <option value=\"Bank Transfer\"><?php echo __(\"Bank Transfer\"); ?></option>\\n <option value=\"Cheque\"><?php echo __(\"Cheque\"); ?></option>\\n <option value=\"Card\"><?php echo __(\"Card\"); ?></option>\\n <option value=\"Others\"><?php echo __(\"Others\"); ?></option>\\n </select>\\n </div>\\n </div>')})),$(document).on(\"click\",\".removePosPaymentItem\",(function(){$(this).closest(\".row\").remove(),BMS.POS.grandTotal()})),$(document).on(\"change\",\".posSalePaymentMethod\",(function(){\"Cash\"===$(this).val()?$(this).closest(\".row\").find(\".posSalePaymentBankAccount\").hide():$(this).closest(\".row\").find(\".posSalePaymentBankAccount\").show()})),$(document).on(\"submit\",\"#modalForm, #popUpForm, #jqFormAdd, #jqFormUpdate\",(function(e){e.preventDefault(),ajaxFormSubmit(this)})),$(document).on(\"submit\",\"#inlineForm\",(function(e){e.preventDefault(),ajaxFormSubmit(this,!0)})),$(document).on(\"click\",\".deleteEntry\",(function(e){e.preventDefault();var t=$(this).attr(\"href\"),a=$(this).attr(\"data-to-be-deleted\"),o=$(this).attr(\"removeParent\"),n=this;Swal.fire({title:\"Are you sure to delete this entry?\",icon:\"warning\",didOpen:function(){BMS.fn.play(\"warning\")},showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete it!\"}).then((e=>{e.value&&$.post(t,{datatoDelete:a},(function(e,t){if(isJson(e)){var a=JSON.parse(e);for(var s in a)sweetAlert[s]=a[s]}Swal.fire({toast:sweetAlert.toast,position:sweetAlert.position,timer:sweetAlert.timer,showConfirmButton:sweetAlert.showConfirmButton,showCloseButton:sweetAlert.showCloseButton,icon:sweetAlert.icon,title:sweetAlert.title,text:sweetAlert.text,onClose:$(\"body\").css(\"padding\",\"0px\")}),void 0!==o&&$(n).closest(o).hide(\"fast\"),$(\"#dataTableWithAjax\").DataTable().ajax.reload(null,!1),$(\"#dataTableWithAjaxExtend\").DataTable().ajax.reload(null,!1)}))}))})),$(document).on(\"click\",\".updateEntry\",(function(e){e.preventDefault();var t=$(this).attr(\"href\"),a=$(this).attr(\"data-to-be-updated\");$(this).css(\"color\",\"black\"),$(this).find(\"i.fa\").addClass(\"fa-spin\"),$.post(t,{datatoUpdate:a},(function(e,t){if(isJson(e)){var a=JSON.parse(e);for(var o in a)sweetAlert[o]=a[o]}Swal.fire({toast:sweetAlert.toast,position:sweetAlert.position,timer:sweetAlert.timer,showConfirmButton:sweetAlert.showConfirmButton,showCloseButton:sweetAlert.showCloseButton,icon:sweetAlert.icon,title:sweetAlert.title,text:sweetAlert.text,onClose:$(\"body\").css(\"padding\",\"0px\")}),$(\"#dataTableWithAjax\").DataTable().ajax.reload(null,!1),$(\"#dataTableWithAjaxExtend\").DataTable().ajax.reload(null,!1)}))})),$(document).on(\"dblclick\",\"iledit\",(function(e){e.preventDefault();var t=$(this),a=t.closest(\"td\"),o=t.closest(\"table\").find(\"th\").eq(a.index()),n=t.closest(\"tr\").find(\"pkey\").text(),s=o.attr(\"type\"),r=o.attr(\"data-source\"),l=o.attr(\"data-options\"),i=o.attr(\"where-to-update\"),c=t.attr(\"data-val\"),d=t.text(),u=a.width();if(\"select2\"===s){a.html(`\\n <select class=\"form-control select2InlineEdit\" select2-ajax-url=\"${r}\" style=\"width: ${u}px;\" required>\\n <option value=\"\"><?php echo __(\"Select Entry\"); ?>....</option>\\n </select>\\n `);var m=a.find(\".select2InlineEdit\");BMS.fn.select2(m,c,d),m.select2(\"open\")}else if(\"select\"===s){(l=l.split(\",\")).forEach((function(e){l+=`<option ${d==e?\"selected\":\"\"} value='${e}'>${e}</option>`})),a.html(`\\n <select class=\"form-control\" style=\"width: ${u}px; padding: 6px 6px;\" required>\\n ${l}\\n </select>\\n `),(m=a.find(\"select\")).select2(),m.select2(\"open\")}else a.html(`\\n <input type=\"text\" value=\"${d}\" style=\"width: ${u}px;\" class=\"form-control\">\\n `),\"datePicker\"===s&&(a.find(\"input\").addClass(\"datePicker\"),a.find(\".datePicker\").focus());a.find(\"input, select, textarea\").on(\"enter blur clear apply.daterangepicker, select2:close\",(function(){var e=[\"select2\",\"select\"].includes(s)?c:d,t=$(this).val(),o=$(this);t!==e?$.post(i,{pkey:n,newData:t},(function(e,t){void 0!==(e=JSON.parse(e)).error&&\"true\"===e.error?BMS.fn.alertError(e.msg):(BMS.fn.alertSuccess(\"The data has been successfully updated.\"),\"select2\"===s||\"select\"===s?a.html(\"<iledit data-val='\"+$(o).val()+\"'>\"+$(\"option:selected\",o).html()+\"</iledit>\"):a.html(\"<iledit>\"+$(o).val()+\"</iledit>\"))})):\"select2\"===s||\"select\"===s?(console.log($(\"option:selected\",o).html()),a.html(\"<iledit data-val='\"+$(o).val()+\"'>\"+$(\"option:selected\",o).html()+\"</iledit>\")):a.html(\"<iledit>\"+$(o).val()+\"</iledit>\")}))})),$(document).on(\"hidden.bs.modal\",(function(e){$(e.target).removeData(\"bs.modal\").find(\".modal-ajax\").html(\"\")})),$(document).ready((function(){$(document).on(\"mouseenter focus\",\".select2Ajax\",(function(){BMS.fn.select2(this)}))})),$(document).ready((function(){$(\"body\").tooltip({selector:'[data-toggle=\"tooltip\"]'})})),$(document).click((function(e){$(\".dropdown-menu[data-parent]\").hide()})),$(document).on(\"click\",'.col-sm-12 [data-toggle=\"dropdown\"]',(function(){if($(\"body\").hasClass(\"modal-open\"))throw new Error(\"This solution is not working inside a responsive table inside a modal, you need to find out a way to calculate the modal Z-index and add it to the element\");if($buttonGroup=$(this).parent(),$buttonGroup.attr(\"data-attachedUl\"))$ul=$(\"[data-parent=\"+$buttonGroup.attr(\"data-attachedUl\")+\"]\");else{var e=+new Date;$ul=$(this).siblings(\"ul\"),$ul.attr(\"data-parent\",e),$buttonGroup.attr(\"data-attachedUl\",e),$(window).resize((function(){$ul.css(\"display\",\"none\").data(\"top\")}))}var t,a,o;$buttonGroup.hasClass(\"open\")?(t=$(this).parent(),a=$ul,o=t.offset().top+t.outerHeight(),a.css(\"top\",o+\"px\"),a.css(\"left\",t.offset().left-100+\"px\"),a.css(\"position\",\"absolute\"),a.css(\"width\",a.width()),a.css(\"heigt\",a.height()),a.css(\"display\",\"block\"),a.appendTo(\".dynamic-container\")):$ul.css(\"display\",\"none\")})),$(document).on(\"click\",\".restricted\",(function(){Swal.fire({title:\"Sorry!\",text:\"You have no permission to perform this action\",icon:\"error\"})})),$(\".modal\").on(\"show.bs.modal\",(function(e){if(-1!==$.inArray(\"restricted\",e.target.classList))return e.preventDefault()})),$(\".modal\").on(\"shown.bs.modal\",(function(){$(this).find(\"[autofocus]\").focus()})),$(\"form\").on(\"focus\",\"input[type=number]\",(function(e){$(this).on(\"wheel.disableScroll\",(function(e){e.preventDefault()}))})),$(\"form\").on(\"blur\",\"input[type=number]\",(function(e){$(this).off(\"wheel.disableScroll\")}));var sweetAlert=[];sweetAlert.title=\"The command has been executed successfully.\",sweetAlert.text=\"\",sweetAlert.icon=\"success\",sweetAlert.toast=!0,sweetAlert.position=\"top\",sweetAlert.timer=5e3,sweetAlert.showConfirmButton=!1,sweetAlert.showCloseButton=!1,$('input[type=\"checkbox\"].square, input[type=\"radio\"].square').iCheck({checkboxClass:\"icheckbox_square-blue\",radioClass:\"iradio_square-blue\"}),$.ajaxSetup({beforeSend:function(e){e.setRequestHeader(\"X-CSRF-TOKEN\",xCsrfToken)}});var getPageTitle=JSON.parse('<?php echo json_encode($_SETTINGS[\"PAGE_TITLE\"]); ?>');$(window).bind(\"popstate\",(function(e){\"undefined\"!=typeof session&&(session.terminate(),phone.stop()),e.preventDefault(),$.get(location.href+\"?contentOnly=true\",(function(e,t){defaultiDisplayLength=\"\",$(\"li\").removeClass(\"active\");var a=location.href,o=\"Not Found!\";void 0!==getPageTitle[a]&&(o=getPageTitle[a]),window.document.title=o,$(\".dynamic-container\").html(e),jQuery.get(full_website_address+\"/assets/js/initiator.min.js\")}))})),$(document).on(\"keydown\",(function(e){\"F2\"===e.key&&($(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").hasClass(\"select2-hidden-accessible\")||BMS.fn.select2(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\"),$(\"#selectProduct, #selectPosProduct, #selectStockTransferProduct, #selectStockEntryProduct\").select2(\"open\")),\"F3\"===e.key&&(e.preventDefault(),$(\"#orderDiscount\").modal(\"show\"))})),$(document).on(\"click\",\".toggleNotButton\",(function(){var e=$(this).closest(\"span\").find(\".notThisValueFilter\");\"=\"===$(e).val()?($(e).val(\"!=\"),$(this).text(\"|\")):($(this).text(\"\"),$(e).val(\"=\"))})),$(document).on(\"click\",\".stopPropagation\",(function(e){e.stopPropagation()})),$(document).on(\"change\",\"#productType\",(function(){$(\"#productVariationSection\").hide(),$(\"#bundleProductsContainer\").hide(),$(\".bundleProduct\").hide(),$(\".groupedProduct\").hide();\"Variable\"===this.value?$(\"#productVariationSection\").show():\"Bundle\"===this.value?($(\".bundleProduct\").show(),$(\"#bundleProductsContainer\").show()):\"Grouped\"===this.value&&($(\".groupedProduct\").show(),$(\"#bundleProductsContainer\").show())})),$(document).on(\"click\",\".removeThisVariation\",(function(e){if(e.stopPropagation(),confirm(\"Are sure to remove this variation?\")){var t=$(this).closest(\"li\").find(\".variation_product_id\").val();$(this).closest(\"li\").hide(\"fast\",(function(){$(this).remove()})),void 0!==t&&$.ajax({url:full_website_address+\"/xhr/?module=products&page=deleteVariationProduct\",type:\"post\",data:{product_id:t},success:function(e,t){}})}})),$(document).on(\"click\",\"#setVariationPrice\",(function(){setVariationPrice()})),$(window).keydown((function(e){if(13==e.keyCode&&$(\"#productVariationPrice\").hasClass(\"in\"))return e.preventDefault(),setVariationPrice(),$(\"#productVariationPrice\").modal(\"hide\"),!1})),$(\"#browseProduct\").on(\"show.bs.modal\",(function(e){BMS.PRODUCT.showProduct()})),$(document).on(\"change\",\"#productHasExpiryDate\",(function(){\"1\"===this.value?$(\".productIntitalStock\").prop(\"disabled\",!0):$(\".productIntitalStock\").prop(\"disabled\",!1)}));let barCcode=\"\";$(document).on(\"keypress\",(e=>{if(\"Enter\"===e.key){var t=\"input\"!==e.target.tagName.toLowerCase();\"\"!==barCcode&&(isPosPage&&t?BMS.POS.addProduct(barCcode,!0):isPurchasePage&&t?BMS.PURCHASE.addProduct(barCcode,!0):isTransferStockPage&&t?BMS.STOCK_TRANSFER.addProduct(barCcode,!0):isProductReturnPage&&t?BMS.RETURN.addProduct(barCcode,!0):isStockEntryPage&&t?BMS.STOCK_ENTRY.addProduct(barCcode,!0):isAddProductPage&&$(\"#productCode\").val(barCcode)),barCcode=\"\"}else barCcode+=e.key})),$(document).on(\"click\",\".copyThis\",(function(e){navigator.clipboard.writeText($(this).text())}));\n\\ No newline at end of file"
        },
        {
          "filename": "core/ajax/ajax_data.php",
          "status": "modified",
          "additions": 14,
          "deletions": 14,
          "patch": "@@ -777,7 +777,7 @@\n                 loan_ids, sum(loan_installment_paying_amount) as loan_installment_paid_amount \n             from {$table_prefix}loan_installment where is_trash = 0 group by loan_ids\n         ) as loan_installment on loan_id = loan_ids\n-        where emp_id = {$emp_id}\n+        where emp_id = '{$emp_id}'\n         order by loan_id \n         desc limit 1\"\n     )[\"data\"][0];\n@@ -824,7 +824,7 @@\n                 sum(payments_return_amount) as payments_return_amount\n             from {$table_prefix}payments_return where is_trash = 0 and payments_return_type = 'Outgoing' group by payments_return_customer_id\n         ) as payment_return on customer_id = payments_return_customer_id\n-        where customer_id = {$customer_id}\"\n+        where customer_id = '{$customer_id}'\"\n     )[\"data\"][0];\n \n     echo json_encode($customerPaymentsData);\n@@ -896,7 +896,7 @@\n             where is_trash = 0 and payments_return_type = 'Outgoing' and date(payments_return_date) between '{$dateRange[0]}' and '{$dateRange[1]}' \n             group by payments_return_customer_id\n         ) as payment_return on customer_id = payments_return_customer_id\n-        where customer_id = {$customer_id}\"\n+        where customer_id = '{$customer_id}'\"\n     )[\"data\"][0];\n \n     $customerPaymentsData[\"previous_balance\"] = easySelectD(\"\n@@ -935,7 +935,7 @@\n                 where is_trash = 0 and payments_return_type = 'Outgoing' and date(payments_return_date) < '{$dateRange[0]}'\n                 group by payments_return_customer_id\n             ) as payment_return on customer_id = payments_return_customer_id\n-\t\t\twhere customer_id = {$customer_id}\n+\t\t\twhere customer_id = '{$customer_id}'\n \t\")[\"data\"][0][\"previous_balance\"];\n \n     echo json_encode($customerPaymentsData);\n@@ -962,18 +962,18 @@\n         left join (select \n                 loan_ids, \n                 1 as thisMonthInstallmentPayingStatus\n-            from {$table_prefix}loan_installment where is_trash = 0 and MONTH(loan_installment_date) = {$month} and year(loan_installment_date) = {$year} group by loan_ids \n+            from {$table_prefix}loan_installment where is_trash = 0 and MONTH(loan_installment_date) = '{$month}' and year(loan_installment_date) = '{$year}' group by loan_ids \n         ) as thisMonthStatus on loan_id = thisMonthStatus.loan_ids\n-        where loan.is_trash = 0 and loan_borrower = {$emp_id} and loan_installment_starting_from <= '{$year}-{$month}-01'\n+        where loan.is_trash = 0 and loan_borrower = '{$emp_id}' and loan_installment_starting_from <= '{$year}-{$month}-01'\n         and ( loan_paid_amount is null or loan_paid_amount < loan_amount)\" \n         // loan_paid_amount can be NULL on left join if there is no recrods, for that the is null check.\n-        // We can also use HAVING cluese without using is null check. But it will raise a error with full_group_by mode.\n+        // We can also use HAVING clause without using is null check. But it will raise a error with full_group_by mode.\n     );\n \n     $selectSalary = easySelectA(array(\n         \"table\"     => \"employees\",\n         \"fields\"    => \"round(emp_salary, 2) as emp_salary\",\n-        \"where\"     => array(\"emp_id = {$emp_id}\")\n+        \"where\"     => array(\"emp_id = '{$emp_id}'\")\n     ))[\"data\"][0][\"emp_salary\"];\n \n     if(!isset($getLoanDetails[\"data\"])) {\n@@ -1042,7 +1042,7 @@\n                 sum(payments_return_amount) as payments_return_amount_sum \n             from {$table_prefix}payments_return where is_trash = 0 group by payments_return_emp_id \n         ) as get_advance_return on payments_return_emp_id = emp_id\n-        where emp_id = {$emp_id}\"\n+        where emp_id = '{$emp_id}'\"\n     )[\"data\"][0];\n     \n     echo json_encode($getEmpAdvancePaymentData);\n@@ -1089,7 +1089,7 @@\n                 sum(CASE WHEN is_return = 1 then purchase_due end) as purchase_return_grand_total\n             from {$table_prefix}purchases where is_trash = 0 group by purchase_company_id\n         ) as purchaseBill on purchaseBill.purchase_company_id = company_id\n-        where company_id = {$company_id}\"\n+        where company_id = '{$company_id}'\"\n     )[\"data\"][0];\n     \n     echo json_encode($getEmpAdvancePaymentData);\n@@ -1369,7 +1369,7 @@\n \n if(isset($_GET['page']) and $_GET['page'] == \"customerPurchaseList\") {\n \n-    $invoiceSearch = ( isset($_GET[\"s\"]) and !empty($_GET[\"s\"]) ) ? \"and sales_reference like '%{$_GET[\"s\"]}%'\" : \"\";\n+    $invoiceSearch = ( isset($_GET[\"s\"]) and !empty($_GET[\"s\"]) ) ? \"and sales_reference like '%\". safe_input($_GET[\"s\"]) .\"%'\" : \"\";\n \n     $selectSales = easySelectA(array(\n         \"table\"     => \"sales\",\n@@ -1542,10 +1542,10 @@\n \n     $productCategoryFilter = ( isset($_GET[\"catId\"]) and !empty($_GET[\"catId\"]) ) ? $_GET[\"catId\"] : \"\";\n     $productBrandFilter = ( isset($_GET[\"brand\"]) and !empty($_GET[\"brand\"]) ) ? $_GET[\"brand\"] : \"\";\n-    $productEditionFilter = ( isset($_GET[\"edition\"]) and !empty($_GET[\"edition\"]) ) ? \" AND product.product_edition = '{$_GET[\"edition\"]}'\" : \" AND product_type != 'Child' \";\n+    $productEditionFilter = ( isset($_GET[\"edition\"]) and !empty($_GET[\"edition\"]) ) ? \" AND product.product_edition = '\". safe_input($_GET[\"edition\"]) .\"'\" : \" AND product_type != 'Child' \";\n     $productGenericFilter = ( isset($_GET[\"generic\"]) and !empty($_GET[\"generic\"]) ) ? $_GET[\"generic\"] : \"\";\n     $productAuthorFilter = ( isset($_GET[\"author\"]) and !empty($_GET[\"author\"]) ) ? $_GET[\"author\"] : \"\";\n-    $productTerms = ( isset($_GET[\"terms\"]) and !empty($_GET[\"terms\"]) ) ? \" AND product_name like '%{$_GET[\"terms\"]}%'\" : \"\";\n+    $productTerms = ( isset($_GET[\"terms\"]) and !empty($_GET[\"terms\"]) ) ? \" AND product_name like '%\". safe_input($_GET[\"terms\"]) .\"%'\" : \"\";\n     $productSort = ( isset($_GET[\"sort\"]) and !empty($_GET[\"sort\"]) ) ? $_GET[\"sort\"] : \"\";\n \n     $oderBy = array(\n@@ -1692,7 +1692,7 @@\n if(isset($_GET['page']) and $_GET['page'] == \"getChildProductData\") {\n \n \n-    $warehouse_filter = empty($_GET[\"wid\"]) ? \"\" : \" = \" . safe_input($_GET[\"wid\"]);\n+    $warehouse_filter = empty($_GET[\"wid\"]) ? \"\" : \" = '\" . safe_input($_GET[\"wid\"]) . \"'\";\n \n     $getChildProductData = easySelectA(array(\n         \"table\"     => \"products as product\","
        },
        {
          "filename": "core/ajax/ajax_select2.php",
          "status": "modified",
          "additions": 2,
          "deletions": 1,
          "patch": "@@ -1014,7 +1014,8 @@\n         \"table\"   => \"product_batches\",\n         \"fields\"  => \"batch_id, batch_number\",\n         \"where\"   => array(\n-            \"is_trash = 0 and date(batch_expiry_date) >= curdate() and batch_number LIKE '\". $search .\"%'\",\n+            \"is_trash = 0 and date(batch_expiry_date) >= curdate()\",\n+            \" and batch_number LIKE \" => \"{$search}%\",\n             \" and product_id\"   => $product_id\n         ),\n         \"limit\"   => array ("
        },
        {
          "filename": "core/functions.php",
          "status": "modified",
          "additions": 10,
          "deletions": 0,
          "patch": "@@ -1565,6 +1565,16 @@ function easyUpload(\n             );\n \n         } else {\n+\n+            // Remove path traversal characters\n+            $location = str_replace(\n+                array(\n+                    \"./\",\n+                    \"../\"\n+                ),\n+                \"\",\n+                $location\n+            );\n             \n             $uploadDir = DIR_UPLOAD . $location;\n "
        },
        {
          "filename": "core/route.php",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1,6 +1,6 @@\n <?php\n \n-// Remove directory browsing elements\n+// Remove path traversal characters\n $pageSlug = str_replace(\n     array(\n         \"./\","
        },
        {
          "filename": "include/apps/xhr/index.php",
          "status": "modified",
          "additions": 16,
          "deletions": 2,
          "patch": "@@ -12,9 +12,23 @@\n */\n \n if(isset($_GET['module'])) {\n+\n+    $module = $_GET['module'];\n+\n+    // Remove directory browsing elements\n+    $module = str_replace(\n+        array(\n+            \"./\",\n+            \"../\",\n+            \".\",\n+            \"..\"\n+        ),\n+        \"\",\n+        $module\n+    );\n     \n-    // Biuld the page location\n-    $ajaxModulePage = DIR_MODULE . $_GET['module'] . \"/ajax.php\";\n+    // Build the page location\n+    $ajaxModulePage = DIR_MODULE . $module . \"/ajax.php\";\n \n     // Check if the ajax page is exists\n     if(file_exists($ajaxModulePage)) {"
        },
        {
          "filename": "include/apps/xhr/info.php",
          "status": "modified",
          "additions": 15,
          "deletions": 1,
          "patch": "@@ -12,9 +12,23 @@\n \n \n if(isset($_GET['module'])) {\n+\n+    $module = $_GET['module'];\n+\n+    // Remove directory browsing elements\n+    $module = str_replace(\n+        array(\n+            \"./\",\n+            \"../\",\n+            \".\",\n+            \"..\"\n+        ),\n+        \"\",\n+        $module\n+    );\n     \n     // Biuld the page location\n-    $ajaxModulePage = DIR_BASE . \"core/ajax/ajax_\" . $_GET['module'] . \".php\";\n+    $ajaxModulePage = DIR_BASE . \"core/ajax/ajax_\" . $module . \".php\";\n \n     // Check if the ajax page is exists\n     if(file_exists($ajaxModulePage)) {"
        },
        {
          "filename": "include/lib/Composer/composer.lock",
          "status": "added",
          "additions": 1443,
          "deletions": 0,
          "patch": "@@ -0,0 +1,1443 @@\n+{\n+    \"_readme\": [\n+        \"This file locks the dependencies of your project to a known state\",\n+        \"Read more about it at https://getcomposer.org/doc/01-basic-usage.md#installing-dependencies\",\n+        \"This file is @generated automatically\"\n+    ],\n+    \"content-hash\": \"f700817e1354843cb08388babe276094\",\n+    \"packages\": [\n+        {\n+            \"name\": \"cboden/ratchet\",\n+            \"version\": \"v0.4.4\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/ratchetphp/Ratchet.git\",\n+                \"reference\": \"5012dc954541b40c5599d286fd40653f5716a38f\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/ratchetphp/Ratchet/zipball/5012dc954541b40c5599d286fd40653f5716a38f\",\n+                \"reference\": \"5012dc954541b40c5599d286fd40653f5716a38f\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"guzzlehttp/psr7\": \"^1.7|^2.0\",\n+                \"php\": \">=5.4.2\",\n+                \"ratchet/rfc6455\": \"^0.3.1\",\n+                \"react/event-loop\": \">=0.4\",\n+                \"react/socket\": \"^1.0 || ^0.8 || ^0.7 || ^0.6 || ^0.5\",\n+                \"symfony/http-foundation\": \"^2.6|^3.0|^4.0|^5.0|^6.0\",\n+                \"symfony/routing\": \"^2.6|^3.0|^4.0|^5.0|^6.0\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"~4.8\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Ratchet\\\\\": \"src/Ratchet\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"role\": \"Developer\"\n+                },\n+                {\n+                    \"name\": \"Matt Bonneau\",\n+                    \"role\": \"Developer\"\n+                }\n+            ],\n+            \"description\": \"PHP WebSocket library\",\n+            \"homepage\": \"http://socketo.me\",\n+            \"keywords\": [\n+                \"Ratchet\",\n+                \"WebSockets\",\n+                \"server\",\n+                \"sockets\",\n+                \"websocket\"\n+            ],\n+            \"support\": {\n+                \"chat\": \"https://gitter.im/reactphp/reactphp\",\n+                \"issues\": \"https://github.com/ratchetphp/Ratchet/issues\",\n+                \"source\": \"https://github.com/ratchetphp/Ratchet/tree/v0.4.4\"\n+            },\n+            \"time\": \"2021-12-14T00:20:41+00:00\"\n+        },\n+        {\n+            \"name\": \"evenement/evenement\",\n+            \"version\": \"v3.0.1\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/igorw/evenement.git\",\n+                \"reference\": \"531bfb9d15f8aa57454f5f0285b18bec903b8fb7\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/igorw/evenement/zipball/531bfb9d15f8aa57454f5f0285b18bec903b8fb7\",\n+                \"reference\": \"531bfb9d15f8aa57454f5f0285b18bec903b8fb7\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=7.0\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^6.0\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-0\": {\n+                    \"Evenement\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Igor Wiedler\",\n+                    \"email\": \"igor@wiedler.ch\"\n+                }\n+            ],\n+            \"description\": \"\u00c9v\u00e9nement is a very simple event dispatching library for PHP\",\n+            \"keywords\": [\n+                \"event-dispatcher\",\n+                \"event-emitter\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/igorw/evenement/issues\",\n+                \"source\": \"https://github.com/igorw/evenement/tree/master\"\n+            },\n+            \"time\": \"2017-07-23T21:35:13+00:00\"\n+        },\n+        {\n+            \"name\": \"guzzlehttp/psr7\",\n+            \"version\": \"2.4.3\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/guzzle/psr7.git\",\n+                \"reference\": \"67c26b443f348a51926030c83481b85718457d3d\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/guzzle/psr7/zipball/67c26b443f348a51926030c83481b85718457d3d\",\n+                \"reference\": \"67c26b443f348a51926030c83481b85718457d3d\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \"^7.2.5 || ^8.0\",\n+                \"psr/http-factory\": \"^1.0\",\n+                \"psr/http-message\": \"^1.0\",\n+                \"ralouphie/getallheaders\": \"^3.0\"\n+            },\n+            \"provide\": {\n+                \"psr/http-factory-implementation\": \"1.0\",\n+                \"psr/http-message-implementation\": \"1.0\"\n+            },\n+            \"require-dev\": {\n+                \"bamarni/composer-bin-plugin\": \"^1.8.1\",\n+                \"http-interop/http-factory-tests\": \"^0.9\",\n+                \"phpunit/phpunit\": \"^8.5.29 || ^9.5.23\"\n+            },\n+            \"suggest\": {\n+                \"laminas/laminas-httphandlerrunner\": \"Emit PSR-7 responses\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"bamarni-bin\": {\n+                    \"bin-links\": true,\n+                    \"forward-command\": false\n+                },\n+                \"branch-alias\": {\n+                    \"dev-master\": \"2.4-dev\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"GuzzleHttp\\\\Psr7\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Graham Campbell\",\n+                    \"email\": \"hello@gjcampbell.co.uk\",\n+                    \"homepage\": \"https://github.com/GrahamCampbell\"\n+                },\n+                {\n+                    \"name\": \"Michael Dowling\",\n+                    \"email\": \"mtdowling@gmail.com\",\n+                    \"homepage\": \"https://github.com/mtdowling\"\n+                },\n+                {\n+                    \"name\": \"George Mponos\",\n+                    \"email\": \"gmponos@gmail.com\",\n+                    \"homepage\": \"https://github.com/gmponos\"\n+                },\n+                {\n+                    \"name\": \"Tobias Nyholm\",\n+                    \"email\": \"tobias.nyholm@gmail.com\",\n+                    \"homepage\": \"https://github.com/Nyholm\"\n+                },\n+                {\n+                    \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n+                    \"email\": \"mark.sagikazar@gmail.com\",\n+                    \"homepage\": \"https://github.com/sagikazarmark\"\n+                },\n+                {\n+                    \"name\": \"Tobias Schultze\",\n+                    \"email\": \"webmaster@tubo-world.de\",\n+                    \"homepage\": \"https://github.com/Tobion\"\n+                },\n+                {\n+                    \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n+                    \"email\": \"mark.sagikazar@gmail.com\",\n+                    \"homepage\": \"https://sagikazarmark.hu\"\n+                }\n+            ],\n+            \"description\": \"PSR-7 message implementation that also provides common utility methods\",\n+            \"keywords\": [\n+                \"http\",\n+                \"message\",\n+                \"psr-7\",\n+                \"request\",\n+                \"response\",\n+                \"stream\",\n+                \"uri\",\n+                \"url\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/guzzle/psr7/issues\",\n+                \"source\": \"https://github.com/guzzle/psr7/tree/2.4.3\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/GrahamCampbell\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/Nyholm\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/psr7\",\n+                    \"type\": \"tidelift\"\n+                }\n+            ],\n+            \"time\": \"2022-10-26T14:07:24+00:00\"\n+        },\n+        {\n+            \"name\": \"marcelog/pami\",\n+            \"version\": \"v2.0.2\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/marcelog/PAMI.git\",\n+                \"reference\": \"f586d0fcbf7db7952965ccb91e4ed231bd168fb3\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/marcelog/PAMI/zipball/f586d0fcbf7db7952965ccb91e4ed231bd168fb3\",\n+                \"reference\": \"f586d0fcbf7db7952965ccb91e4ed231bd168fb3\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3.3\",\n+                \"psr/log\": \">= 1.0.0\"\n+            },\n+            \"require-dev\": {\n+                \"codeclimate/php-test-reporter\": \"dev-master\",\n+                \"evert/phpdoc-md\": \"~0.1.1\",\n+                \"marcelog/pagi\": \"2.*\",\n+                \"monolog/monolog\": \"1.*\",\n+                \"phing/phing\": \"2.*\",\n+                \"phpdocumentor/phpdocumentor\": \"2.*\",\n+                \"phpmd/phpmd\": \"2.*\",\n+                \"phpunit/phpunit\": \"4.*\",\n+                \"satooshi/php-coveralls\": \"1.0.1\",\n+                \"sebastian/phpcpd\": \"*\",\n+                \"squizlabs/php_codesniffer\": \"2.*\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"PAMI\\\\\": \"src/PAMI\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"Apache2\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Marcelo Gornstein\",\n+                    \"email\": \"marcelog@gmail.com\",\n+                    \"homepage\": \"http://marcelog.github.com/\",\n+                    \"role\": \"Developer\"\n+                }\n+            ],\n+            \"description\": \"Asterisk Manager Interface (AMI) client for PHP, event driven, object oriented\",\n+            \"homepage\": \"http://marcelog.github.com/PAMI\",\n+            \"keywords\": [\n+                \"action\",\n+                \"ami\",\n+                \"asterisk\",\n+                \"client\",\n+                \"event\",\n+                \"manager\",\n+                \"monitor\",\n+                \"telephony\",\n+                \"voip\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/marcelog/PAMI/issues\",\n+                \"source\": \"https://github.com/marcelog/PAMI/tree/v2.0.2\"\n+            },\n+            \"time\": \"2017-10-10T18:59:17+00:00\"\n+        },\n+        {\n+            \"name\": \"psr/http-factory\",\n+            \"version\": \"1.0.1\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/php-fig/http-factory.git\",\n+                \"reference\": \"12ac7fcd07e5b077433f5f2bee95b3a771bf61be\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/php-fig/http-factory/zipball/12ac7fcd07e5b077433f5f2bee95b3a771bf61be\",\n+                \"reference\": \"12ac7fcd07e5b077433f5f2bee95b3a771bf61be\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=7.0.0\",\n+                \"psr/http-message\": \"^1.0\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"branch-alias\": {\n+                    \"dev-master\": \"1.0.x-dev\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"PHP-FIG\",\n+                    \"homepage\": \"http://www.php-fig.org/\"\n+                }\n+            ],\n+            \"description\": \"Common interfaces for PSR-7 HTTP message factories\",\n+            \"keywords\": [\n+                \"factory\",\n+                \"http\",\n+                \"message\",\n+                \"psr\",\n+                \"psr-17\",\n+                \"psr-7\",\n+                \"request\",\n+                \"response\"\n+            ],\n+            \"support\": {\n+                \"source\": \"https://github.com/php-fig/http-factory/tree/master\"\n+            },\n+            \"time\": \"2019-04-30T12:38:16+00:00\"\n+        },\n+        {\n+            \"name\": \"psr/http-message\",\n+            \"version\": \"1.0.1\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/php-fig/http-message.git\",\n+                \"reference\": \"f6561bf28d520154e4b0ec72be95418abe6d9363\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/php-fig/http-message/zipball/f6561bf28d520154e4b0ec72be95418abe6d9363\",\n+                \"reference\": \"f6561bf28d520154e4b0ec72be95418abe6d9363\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3.0\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"branch-alias\": {\n+                    \"dev-master\": \"1.0.x-dev\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"PHP-FIG\",\n+                    \"homepage\": \"http://www.php-fig.org/\"\n+                }\n+            ],\n+            \"description\": \"Common interface for HTTP messages\",\n+            \"homepage\": \"https://github.com/php-fig/http-message\",\n+            \"keywords\": [\n+                \"http\",\n+                \"http-message\",\n+                \"psr\",\n+                \"psr-7\",\n+                \"request\",\n+                \"response\"\n+            ],\n+            \"support\": {\n+                \"source\": \"https://github.com/php-fig/http-message/tree/master\"\n+            },\n+            \"time\": \"2016-08-06T14:39:51+00:00\"\n+        },\n+        {\n+            \"name\": \"psr/log\",\n+            \"version\": \"3.0.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/php-fig/log.git\",\n+                \"reference\": \"fe5ea303b0887d5caefd3d431c3e61ad47037001\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/php-fig/log/zipball/fe5ea303b0887d5caefd3d431c3e61ad47037001\",\n+                \"reference\": \"fe5ea303b0887d5caefd3d431c3e61ad47037001\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=8.0.0\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"branch-alias\": {\n+                    \"dev-master\": \"3.x-dev\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Psr\\\\Log\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"PHP-FIG\",\n+                    \"homepage\": \"https://www.php-fig.org/\"\n+                }\n+            ],\n+            \"description\": \"Common interface for logging libraries\",\n+            \"homepage\": \"https://github.com/php-fig/log\",\n+            \"keywords\": [\n+                \"log\",\n+                \"psr\",\n+                \"psr-3\"\n+            ],\n+            \"support\": {\n+                \"source\": \"https://github.com/php-fig/log/tree/3.0.0\"\n+            },\n+            \"time\": \"2021-07-14T16:46:02+00:00\"\n+        },\n+        {\n+            \"name\": \"ralouphie/getallheaders\",\n+            \"version\": \"3.0.3\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/ralouphie/getallheaders.git\",\n+                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/ralouphie/getallheaders/zipball/120b605dfeb996808c31b6477290a714d356e822\",\n+                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.6\"\n+            },\n+            \"require-dev\": {\n+                \"php-coveralls/php-coveralls\": \"^2.1\",\n+                \"phpunit/phpunit\": \"^5 || ^6.5\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"files\": [\n+                    \"src/getallheaders.php\"\n+                ]\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Ralph Khattar\",\n+                    \"email\": \"ralph.khattar@gmail.com\"\n+                }\n+            ],\n+            \"description\": \"A polyfill for getallheaders.\",\n+            \"support\": {\n+                \"issues\": \"https://github.com/ralouphie/getallheaders/issues\",\n+                \"source\": \"https://github.com/ralouphie/getallheaders/tree/develop\"\n+            },\n+            \"time\": \"2019-03-08T08:55:37+00:00\"\n+        },\n+        {\n+            \"name\": \"ratchet/rfc6455\",\n+            \"version\": \"v0.3.1\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/ratchetphp/RFC6455.git\",\n+                \"reference\": \"7c964514e93456a52a99a20fcfa0de242a43ccdb\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/ratchetphp/RFC6455/zipball/7c964514e93456a52a99a20fcfa0de242a43ccdb\",\n+                \"reference\": \"7c964514e93456a52a99a20fcfa0de242a43ccdb\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"guzzlehttp/psr7\": \"^2 || ^1.7\",\n+                \"php\": \">=5.4.2\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^5.7\",\n+                \"react/socket\": \"^1.3\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Ratchet\\\\RFC6455\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"role\": \"Developer\"\n+                },\n+                {\n+                    \"name\": \"Matt Bonneau\",\n+                    \"role\": \"Developer\"\n+                }\n+            ],\n+            \"description\": \"RFC6455 WebSocket protocol handler\",\n+            \"homepage\": \"http://socketo.me\",\n+            \"keywords\": [\n+                \"WebSockets\",\n+                \"rfc6455\",\n+                \"websocket\"\n+            ],\n+            \"support\": {\n+                \"chat\": \"https://gitter.im/reactphp/reactphp\",\n+                \"issues\": \"https://github.com/ratchetphp/RFC6455/issues\",\n+                \"source\": \"https://github.com/ratchetphp/RFC6455/tree/v0.3.1\"\n+            },\n+            \"time\": \"2021-12-09T23:20:49+00:00\"\n+        },\n+        {\n+            \"name\": \"react/cache\",\n+            \"version\": \"v1.2.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/cache.git\",\n+                \"reference\": \"d47c472b64aa5608225f47965a484b75c7817d5b\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/cache/zipball/d47c472b64aa5608225f47965a484b75c7817d5b\",\n+                \"reference\": \"d47c472b64aa5608225f47965a484b75c7817d5b\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3.0\",\n+                \"react/promise\": \"^3.0 || ^2.0 || ^1.1\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.5 || ^5.7 || ^4.8.35\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"React\\\\Cache\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"Async, Promise-based cache interface for ReactPHP\",\n+            \"keywords\": [\n+                \"cache\",\n+                \"caching\",\n+                \"promise\",\n+                \"reactphp\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/cache/issues\",\n+                \"source\": \"https://github.com/reactphp/cache/tree/v1.2.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://opencollective.com/reactphp\",\n+                    \"type\": \"open_collective\"\n+                }\n+            ],\n+            \"time\": \"2022-11-30T15:59:55+00:00\"\n+        },\n+        {\n+            \"name\": \"react/dns\",\n+            \"version\": \"v1.10.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/dns.git\",\n+                \"reference\": \"a5427e7dfa47713e438016905605819d101f238c\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/dns/zipball/a5427e7dfa47713e438016905605819d101f238c\",\n+                \"reference\": \"a5427e7dfa47713e438016905605819d101f238c\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3.0\",\n+                \"react/cache\": \"^1.0 || ^0.6 || ^0.5\",\n+                \"react/event-loop\": \"^1.2\",\n+                \"react/promise\": \"^3.0 || ^2.7 || ^1.2.1\",\n+                \"react/promise-timer\": \"^1.9\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.3 || ^4.8.35\",\n+                \"react/async\": \"^4 || ^3 || ^2\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"React\\\\Dns\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"Async DNS resolver for ReactPHP\",\n+            \"keywords\": [\n+                \"async\",\n+                \"dns\",\n+                \"dns-resolver\",\n+                \"reactphp\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/dns/issues\",\n+                \"source\": \"https://github.com/reactphp/dns/tree/v1.10.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2022-09-08T12:22:46+00:00\"\n+        },\n+        {\n+            \"name\": \"react/event-loop\",\n+            \"version\": \"v1.3.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/event-loop.git\",\n+                \"reference\": \"187fb56f46d424afb6ec4ad089269c72eec2e137\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/event-loop/zipball/187fb56f46d424afb6ec4ad089269c72eec2e137\",\n+                \"reference\": \"187fb56f46d424afb6ec4ad089269c72eec2e137\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3.0\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.3 || ^5.7 || ^4.8.35\"\n+            },\n+            \"suggest\": {\n+                \"ext-event\": \"~1.0 for ExtEventLoop\",\n+                \"ext-pcntl\": \"For signal handling support when using the StreamSelectLoop\",\n+                \"ext-uv\": \"* for ExtUvLoop\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"React\\\\EventLoop\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"ReactPHP's core reactor event loop that libraries can use for evented I/O.\",\n+            \"keywords\": [\n+                \"asynchronous\",\n+                \"event-loop\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/event-loop/issues\",\n+                \"source\": \"https://github.com/reactphp/event-loop/tree/v1.3.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2022-03-17T11:10:22+00:00\"\n+        },\n+        {\n+            \"name\": \"react/promise\",\n+            \"version\": \"v2.9.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/promise.git\",\n+                \"reference\": \"234f8fd1023c9158e2314fa9d7d0e6a83db42910\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/promise/zipball/234f8fd1023c9158e2314fa9d7d0e6a83db42910\",\n+                \"reference\": \"234f8fd1023c9158e2314fa9d7d0e6a83db42910\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.4.0\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.3 || ^5.7 || ^4.8.36\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"files\": [\n+                    \"src/functions_include.php\"\n+                ],\n+                \"psr-4\": {\n+                    \"React\\\\Promise\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"A lightweight implementation of CommonJS Promises/A for PHP\",\n+            \"keywords\": [\n+                \"promise\",\n+                \"promises\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/promise/issues\",\n+                \"source\": \"https://github.com/reactphp/promise/tree/v2.9.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2022-02-11T10:27:51+00:00\"\n+        },\n+        {\n+            \"name\": \"react/promise-timer\",\n+            \"version\": \"v1.9.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/promise-timer.git\",\n+                \"reference\": \"aa7a73c74b8d8c0f622f5982ff7b0351bc29e495\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/promise-timer/zipball/aa7a73c74b8d8c0f622f5982ff7b0351bc29e495\",\n+                \"reference\": \"aa7a73c74b8d8c0f622f5982ff7b0351bc29e495\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=5.3\",\n+                \"react/event-loop\": \"^1.2\",\n+                \"react/promise\": \"^3.0 || ^2.7.0 || ^1.2.1\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.3 || ^5.7 || ^4.8.35\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"files\": [\n+                    \"src/functions_include.php\"\n+                ],\n+                \"psr-4\": {\n+                    \"React\\\\Promise\\\\Timer\\\\\": \"src/\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"A trivial implementation of timeouts for Promises, built on top of ReactPHP.\",\n+            \"homepage\": \"https://github.com/reactphp/promise-timer\",\n+            \"keywords\": [\n+                \"async\",\n+                \"event-loop\",\n+                \"promise\",\n+                \"reactphp\",\n+                \"timeout\",\n+                \"timer\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/promise-timer/issues\",\n+                \"source\": \"https://github.com/reactphp/promise-timer/tree/v1.9.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2022-06-13T13:41:03+00:00\"\n+        },\n+        {\n+            \"name\": \"react/socket\",\n+            \"version\": \"v1.12.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/socket.git\",\n+                \"reference\": \"81e1b4d7f5450ebd8d2e9a95bb008bb15ca95a7b\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/socket/zipball/81e1b4d7f5450ebd8d2e9a95bb008bb15ca95a7b\",\n+                \"reference\": \"81e1b4d7f5450ebd8d2e9a95bb008bb15ca95a7b\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"evenement/evenement\": \"^3.0 || ^2.0 || ^1.0\",\n+                \"php\": \">=5.3.0\",\n+                \"react/dns\": \"^1.8\",\n+                \"react/event-loop\": \"^1.2\",\n+                \"react/promise\": \"^3 || ^2.6 || ^1.2.1\",\n+                \"react/promise-timer\": \"^1.9\",\n+                \"react/stream\": \"^1.2\"\n+            },\n+            \"require-dev\": {\n+                \"phpunit/phpunit\": \"^9.3 || ^5.7 || ^4.8.35\",\n+                \"react/async\": \"^4 || ^3 || ^2\",\n+                \"react/promise-stream\": \"^1.4\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"React\\\\Socket\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"Async, streaming plaintext TCP/IP and secure TLS socket server and client connections for ReactPHP\",\n+            \"keywords\": [\n+                \"Connection\",\n+                \"Socket\",\n+                \"async\",\n+                \"reactphp\",\n+                \"stream\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/socket/issues\",\n+                \"source\": \"https://github.com/reactphp/socket/tree/v1.12.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2022-08-25T12:32:25+00:00\"\n+        },\n+        {\n+            \"name\": \"react/stream\",\n+            \"version\": \"v1.2.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/reactphp/stream.git\",\n+                \"reference\": \"7a423506ee1903e89f1e08ec5f0ed430ff784ae9\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/reactphp/stream/zipball/7a423506ee1903e89f1e08ec5f0ed430ff784ae9\",\n+                \"reference\": \"7a423506ee1903e89f1e08ec5f0ed430ff784ae9\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"evenement/evenement\": \"^3.0 || ^2.0 || ^1.0\",\n+                \"php\": \">=5.3.8\",\n+                \"react/event-loop\": \"^1.2\"\n+            },\n+            \"require-dev\": {\n+                \"clue/stream-filter\": \"~1.2\",\n+                \"phpunit/phpunit\": \"^9.3 || ^5.7 || ^4.8.35\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"React\\\\Stream\\\\\": \"src\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Christian L\u00fcck\",\n+                    \"email\": \"christian@clue.engineering\",\n+                    \"homepage\": \"https://clue.engineering/\"\n+                },\n+                {\n+                    \"name\": \"Cees-Jan Kiewiet\",\n+                    \"email\": \"reactphp@ceesjankiewiet.nl\",\n+                    \"homepage\": \"https://wyrihaximus.net/\"\n+                },\n+                {\n+                    \"name\": \"Jan Sorgalla\",\n+                    \"email\": \"jsorgalla@gmail.com\",\n+                    \"homepage\": \"https://sorgalla.com/\"\n+                },\n+                {\n+                    \"name\": \"Chris Boden\",\n+                    \"email\": \"cboden@gmail.com\",\n+                    \"homepage\": \"https://cboden.dev/\"\n+                }\n+            ],\n+            \"description\": \"Event-driven readable and writable streams for non-blocking I/O in ReactPHP\",\n+            \"keywords\": [\n+                \"event-driven\",\n+                \"io\",\n+                \"non-blocking\",\n+                \"pipe\",\n+                \"reactphp\",\n+                \"readable\",\n+                \"stream\",\n+                \"writable\"\n+            ],\n+            \"support\": {\n+                \"issues\": \"https://github.com/reactphp/stream/issues\",\n+                \"source\": \"https://github.com/reactphp/stream/tree/v1.2.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://github.com/WyriHaximus\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/clue\",\n+                    \"type\": \"github\"\n+                }\n+            ],\n+            \"time\": \"2021-07-11T12:37:55+00:00\"\n+        },\n+        {\n+            \"name\": \"symfony/deprecation-contracts\",\n+            \"version\": \"v3.0.2\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/symfony/deprecation-contracts.git\",\n+                \"reference\": \"26954b3d62a6c5fd0ea8a2a00c0353a14978d05c\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/symfony/deprecation-contracts/zipball/26954b3d62a6c5fd0ea8a2a00c0353a14978d05c\",\n+                \"reference\": \"26954b3d62a6c5fd0ea8a2a00c0353a14978d05c\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=8.0.2\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"branch-alias\": {\n+                    \"dev-main\": \"3.0-dev\"\n+                },\n+                \"thanks\": {\n+                    \"name\": \"symfony/contracts\",\n+                    \"url\": \"https://github.com/symfony/contracts\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"files\": [\n+                    \"function.php\"\n+                ]\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Nicolas Grekas\",\n+                    \"email\": \"p@tchwork.com\"\n+                },\n+                {\n+                    \"name\": \"Symfony Community\",\n+                    \"homepage\": \"https://symfony.com/contributors\"\n+                }\n+            ],\n+            \"description\": \"A generic function and convention to trigger deprecation notices\",\n+            \"homepage\": \"https://symfony.com\",\n+            \"support\": {\n+                \"source\": \"https://github.com/symfony/deprecation-contracts/tree/v3.0.2\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://symfony.com/sponsor\",\n+                    \"type\": \"custom\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/fabpot\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n+                    \"type\": \"tidelift\"\n+                }\n+            ],\n+            \"time\": \"2022-01-02T09:55:41+00:00\"\n+        },\n+        {\n+            \"name\": \"symfony/http-foundation\",\n+            \"version\": \"v6.0.17\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/symfony/http-foundation.git\",\n+                \"reference\": \"22fe17e40b0481d39212e7165e004eb26422085d\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/symfony/http-foundation/zipball/22fe17e40b0481d39212e7165e004eb26422085d\",\n+                \"reference\": \"22fe17e40b0481d39212e7165e004eb26422085d\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=8.0.2\",\n+                \"symfony/deprecation-contracts\": \"^2.1|^3\",\n+                \"symfony/polyfill-mbstring\": \"~1.1\"\n+            },\n+            \"require-dev\": {\n+                \"predis/predis\": \"~1.0\",\n+                \"symfony/cache\": \"^5.4|^6.0\",\n+                \"symfony/dependency-injection\": \"^5.4|^6.0\",\n+                \"symfony/expression-language\": \"^5.4|^6.0\",\n+                \"symfony/http-kernel\": \"^5.4.12|^6.0.12|^6.1.4\",\n+                \"symfony/mime\": \"^5.4|^6.0\",\n+                \"symfony/rate-limiter\": \"^5.2|^6.0\"\n+            },\n+            \"suggest\": {\n+                \"symfony/mime\": \"To use the file extension guesser\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Symfony\\\\Component\\\\HttpFoundation\\\\\": \"\"\n+                },\n+                \"exclude-from-classmap\": [\n+                    \"/Tests/\"\n+                ]\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Fabien Potencier\",\n+                    \"email\": \"fabien@symfony.com\"\n+                },\n+                {\n+                    \"name\": \"Symfony Community\",\n+                    \"homepage\": \"https://symfony.com/contributors\"\n+                }\n+            ],\n+            \"description\": \"Defines an object-oriented layer for the HTTP specification\",\n+            \"homepage\": \"https://symfony.com\",\n+            \"support\": {\n+                \"source\": \"https://github.com/symfony/http-foundation/tree/v6.0.17\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://symfony.com/sponsor\",\n+                    \"type\": \"custom\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/fabpot\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n+                    \"type\": \"tidelift\"\n+                }\n+            ],\n+            \"time\": \"2022-12-14T15:52:41+00:00\"\n+        },\n+        {\n+            \"name\": \"symfony/polyfill-mbstring\",\n+            \"version\": \"v1.27.0\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/symfony/polyfill-mbstring.git\",\n+                \"reference\": \"8ad114f6b39e2c98a8b0e3bd907732c207c2b534\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/symfony/polyfill-mbstring/zipball/8ad114f6b39e2c98a8b0e3bd907732c207c2b534\",\n+                \"reference\": \"8ad114f6b39e2c98a8b0e3bd907732c207c2b534\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=7.1\"\n+            },\n+            \"provide\": {\n+                \"ext-mbstring\": \"*\"\n+            },\n+            \"suggest\": {\n+                \"ext-mbstring\": \"For best performance\"\n+            },\n+            \"type\": \"library\",\n+            \"extra\": {\n+                \"branch-alias\": {\n+                    \"dev-main\": \"1.27-dev\"\n+                },\n+                \"thanks\": {\n+                    \"name\": \"symfony/polyfill\",\n+                    \"url\": \"https://github.com/symfony/polyfill\"\n+                }\n+            },\n+            \"autoload\": {\n+                \"files\": [\n+                    \"bootstrap.php\"\n+                ],\n+                \"psr-4\": {\n+                    \"Symfony\\\\Polyfill\\\\Mbstring\\\\\": \"\"\n+                }\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Nicolas Grekas\",\n+                    \"email\": \"p@tchwork.com\"\n+                },\n+                {\n+                    \"name\": \"Symfony Community\",\n+                    \"homepage\": \"https://symfony.com/contributors\"\n+                }\n+            ],\n+            \"description\": \"Symfony polyfill for the Mbstring extension\",\n+            \"homepage\": \"https://symfony.com\",\n+            \"keywords\": [\n+                \"compatibility\",\n+                \"mbstring\",\n+                \"polyfill\",\n+                \"portable\",\n+                \"shim\"\n+            ],\n+            \"support\": {\n+                \"source\": \"https://github.com/symfony/polyfill-mbstring/tree/v1.27.0\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://symfony.com/sponsor\",\n+                    \"type\": \"custom\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/fabpot\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n+                    \"type\": \"tidelift\"\n+                }\n+            ],\n+            \"time\": \"2022-11-03T14:55:06+00:00\"\n+        },\n+        {\n+            \"name\": \"symfony/routing\",\n+            \"version\": \"v6.0.17\",\n+            \"source\": {\n+                \"type\": \"git\",\n+                \"url\": \"https://github.com/symfony/routing.git\",\n+                \"reference\": \"61687a0aa80f6807c52e116ee64072f6ec53780c\"\n+            },\n+            \"dist\": {\n+                \"type\": \"zip\",\n+                \"url\": \"https://api.github.com/repos/symfony/routing/zipball/61687a0aa80f6807c52e116ee64072f6ec53780c\",\n+                \"reference\": \"61687a0aa80f6807c52e116ee64072f6ec53780c\",\n+                \"shasum\": \"\"\n+            },\n+            \"require\": {\n+                \"php\": \">=8.0.2\"\n+            },\n+            \"conflict\": {\n+                \"doctrine/annotations\": \"<1.12\",\n+                \"symfony/config\": \"<5.4\",\n+                \"symfony/dependency-injection\": \"<5.4\",\n+                \"symfony/yaml\": \"<5.4\"\n+            },\n+            \"require-dev\": {\n+                \"doctrine/annotations\": \"^1.12|^2\",\n+                \"psr/log\": \"^1|^2|^3\",\n+                \"symfony/config\": \"^5.4|^6.0\",\n+                \"symfony/dependency-injection\": \"^5.4|^6.0\",\n+                \"symfony/expression-language\": \"^5.4|^6.0\",\n+                \"symfony/http-foundation\": \"^5.4|^6.0\",\n+                \"symfony/yaml\": \"^5.4|^6.0\"\n+            },\n+            \"suggest\": {\n+                \"symfony/config\": \"For using the all-in-one router or any loader\",\n+                \"symfony/expression-language\": \"For using expression matching\",\n+                \"symfony/http-foundation\": \"For using a Symfony Request object\",\n+                \"symfony/yaml\": \"For using the YAML loader\"\n+            },\n+            \"type\": \"library\",\n+            \"autoload\": {\n+                \"psr-4\": {\n+                    \"Symfony\\\\Component\\\\Routing\\\\\": \"\"\n+                },\n+                \"exclude-from-classmap\": [\n+                    \"/Tests/\"\n+                ]\n+            },\n+            \"notification-url\": \"https://packagist.org/downloads/\",\n+            \"license\": [\n+                \"MIT\"\n+            ],\n+            \"authors\": [\n+                {\n+                    \"name\": \"Fabien Potencier\",\n+                    \"email\": \"fabien@symfony.com\"\n+                },\n+                {\n+                    \"name\": \"Symfony Community\",\n+                    \"homepage\": \"https://symfony.com/contributors\"\n+                }\n+            ],\n+            \"description\": \"Maps an HTTP request to a set of configuration variables\",\n+            \"homepage\": \"https://symfony.com\",\n+            \"keywords\": [\n+                \"router\",\n+                \"routing\",\n+                \"uri\",\n+                \"url\"\n+            ],\n+            \"support\": {\n+                \"source\": \"https://github.com/symfony/routing/tree/v6.0.17\"\n+            },\n+            \"funding\": [\n+                {\n+                    \"url\": \"https://symfony.com/sponsor\",\n+                    \"type\": \"custom\"\n+                },\n+                {\n+                    \"url\": \"https://github.com/fabpot\",\n+                    \"type\": \"github\"\n+                },\n+                {\n+                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n+                    \"type\": \"tidelift\"\n+                }\n+            ],\n+            \"time\": \"2022-12-20T16:40:04+00:00\"\n+        }\n+    ],\n+    \"packages-dev\": [],\n+    \"aliases\": [],\n+    \"minimum-stability\": \"stable\",\n+    \"stability-flags\": [],\n+    \"prefer-stable\": false,\n+    \"prefer-lowest\": false,\n+    \"platform\": [],\n+    \"platform-dev\": [],\n+    \"plugin-api-version\": \"2.3.0\"\n+}"
        },
        {
          "filename": "include/lib/Composer/composer.phar",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "module/accounts/ajax.php",
          "status": "modified",
          "additions": 7,
          "deletions": 2,
          "patch": "@@ -1525,6 +1525,11 @@\n     }\n \n \n+    $orderby = \"ASC\";\n+    if($requestData['order'][0]['dir'] === \"DESC\") {\n+        $orderby = \"DESC\";\n+    }\n+\n          \n     $getData = easySelectD(\n         \"select \n@@ -1558,8 +1563,8 @@\n         ) as payment_adjustment on pa_company = company_id\n \n         where company.is_trash = 0 and company_name like '{$search}%'\n-        group by company_id order by company_name \". safe_input($requestData['order'][0]['dir']) .\"\n-        LIMIT \". safe_input($requestData['start']) .\", \". safe_input($requestData['length']) .\"\n+        group by company_id order by company_name {$orderby}\n+        LIMIT \". intval(safe_input($requestData['start'])) .\", \". intval(safe_input($requestData['length'])) .\"\n         \"\n     );\n "
        },
        {
          "filename": "module/customer-support/ajax.php",
          "status": "added",
          "additions": 3133,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "module/customer-support/all-call-history.php",
          "status": "added",
          "additions": 147,
          "deletions": 0,
          "patch": "@@ -0,0 +1,147 @@\n+<!-- Content Wrapper. Contains page content -->\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+      <h1>\n+        <?= __(\"Customer Support\"); ?>\n+        <small><?= __(\"Call List\"); ?></small>\n+      </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+      <div class=\"row\">\n+        <div class=\"col-xs-12\">\n+          <div class=\"box\">\n+            <div class=\"box-header\">\n+              <h3 class=\"box-title\"><?= __(\"Call List\"); ?></h3>\n+              <div class=\"printButtonPosition\"></div>\n+            </div>\n+            <!-- Box header -->\n+            <div class=\"box-body\">\n+              <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                <thead>\n+                  <tr>\n+                    <th></th>\n+                    <th class=\"px120\"><?php echo __(\"Date\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Direction\"); ?></th>\n+                    <th class=\"px120\"><?php echo __(\"Status\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Reason\"); ?></th>\n+                    <th class=\"px160\"><?php echo __(\"Client\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Client Type\"); ?></th>\n+                    <th class=\"px220\"><?php echo __(\"Specimen Products\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Duration\"); ?></th>\n+                    <th class=\"px220\"><?php echo __(\"Feedback\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Specimen Received\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Informative\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Sale Our Book\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Use Our Book\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"MR Feedback\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Other Info\"); ?></th>\n+                    <th class=\"px85\"><?php echo __(\"Perform By\"); ?></th>\n+                  </tr>\n+                </thead>\n+   \n+                <tfoot>\n+                  <tr>\n+                    <th></th>\n+                    <th class=\"no-print\">\n+                        <input type=\"text\" placeholder=\"<?= __(\"Select Date\"); ?>\" name=\"callDate\" id=\"callDate\" class=\"form-control\" autocomplete=\"off\">\n+                    </th>\n+                    <th> \n+                        <select name=\"callDirection\" id=\"callDirection\" class=\"form-control select2\" style=\"width: 100%\">\n+                            <option value=\"\">Direction...</option>\n+                            <?php\n+                                $callDirection = array('Outgoing', 'Incoming');\n+                                foreach($callDirection as $Direction) {\n+                                    echo \"<option value='{$Direction}'>{$Direction}</option>\";\n+                                }\n+                            ?>\n+                      </select>\n+                    </th>\n+                    <th class=\"no-print\"> \n+                        <select name=\"callStatus\" id=\"callStatus\" class=\"form-control select2\" style=\"width: 100%\">\n+                            <option value=\"\">Status...</option>\n+                            <?php\n+                                $callStatus = array('Answered', 'Missed', 'Rejected', 'Not Answered', 'Busy', 'Unreachable', 'Pending');\n+                                foreach($callStatus as $status) {\n+                                    echo \"<option value='{$status}'>{$status}</option>\";\n+                                }\n+                            ?>\n+                      </select>\n+                    </th>\n+                    <th>\n+                        <select id=\"callReasonFilter\" class=\"form-control select2Ajax\" select2-tag=\"true\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=callReasonList\" style=\"width: 100%;\">\n+                            <option value=\"\"><?= __(\"All Reason\"); ?>...</option>\n+                        </select>\n+                    </th>\n+                    <th><?php echo __(\"Client\"); ?></th>\n+                    <th class=\"no-print\"> \n+                        <select id=\"clientType\" class=\"form-control select2\" style=\"width: 100%\">\n+                            <option value=\"\">Type...</option>\n+                            <?php\n+                                $personType = array('Teacher', 'Student', 'Guardian', 'Service Holder', 'Merchant');\n+                                foreach($personType as $type) {\n+                                    echo \"<option value='{$type}'>{$type}</option>\";\n+                                }\n+                            ?>\n+                      </select>\n+                    </th>\n+                    <th><?php echo __(\"Specimen Products\"); ?></th>\n+                    <th><?php echo __(\"Duration\"); ?></th>\n+                    <th><?php echo __(\"Feedback\"); ?></th>\n+                    <th>\n+                        <select id=\"specimenReceivedFilter\" class=\"form-control select2\" style=\"width: 100%\">\n+                            <option value=\"\">All...</option>\n+                            <?php\n+                                $sr = array('Yes', 'No', 'Partial', 'Not Sure');\n+                                foreach($sr as $sr) {\n+                                    echo \"<option value='{$sr}'>{$sr}</option>\";\n+                                }\n+                            ?>\n+                      </select>\n+                    </th>\n+                    <th><?php echo __(\"Informative\"); ?></th>\n+                    <th><?php echo __(\"Sale Our Book\"); ?></th>\n+                    <th><?php echo __(\"Use Our Book\"); ?></th>\n+                    <th><?php echo __(\"MR Feedback\"); ?></th>\n+                    <th><?php echo __(\"Other Info\"); ?></th>\n+                    <th class=\"no-print\">\n+                        <select name=\"callPerformBy\" id=\"callPerformBy\" class=\"form-control select2\" style=\"width: 100%\">\n+                                <option value=\"\">All...</option>\n+                                <?php\n+                                    $representative = easySelectA(array(\n+                                        \"table\"     => \"sip_credentials\",\n+                                        \"fields\"    => \"sip_representative, concat(emp_firstname, ' ', emp_lastname) as representative_name\",\n+                                        \"join\"      => array(\n+                                            \"left join {$table_prefix}users on sip_representative = user_id\",\n+                                            \"left join {$table_prefix}employees on user_emp_id = emp_id\"\n+                                        )\n+                                    ));\n+                                    foreach($representative[\"data\"] as $representative) {\n+                                        echo \"<option value='{$representative[\"sip_representative\"]}'>{$representative[\"representative_name\"]}</option>\";\n+                                    }\n+                                ?>\n+                        </select>\n+                    </th>\n+                  </tr>\n+                </tfoot>\n+              </table>\n+            </div>\n+            <!-- box body-->\n+          </div>\n+          <!-- box -->\n+        </div>\n+        <!-- col-xs-12-->\n+      </div>\n+      <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+  </div>\n+  <!-- /.content-wrapper -->\n+  <script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=allCallList\";\n+    BMS.FUNCTIONS.dateRangePickerPreDefined({selector: \"#callDate\"});\n+  </script>"
        },
        {
          "filename": "module/customer-support/call-center-old.php",
          "status": "added",
          "additions": 559,
          "deletions": 0,
          "patch": "@@ -0,0 +1,559 @@\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+\n+    <?php\n+\n+    $selectSipCredentials = easySelectA(array(\n+        \"table\"     => \"sip_credentials\",\n+        \"fields\"    => \"sip_username, sip_password, sip_domain, sip_websocket_addr\",\n+        \"where\"     => array(\n+            \"sip_representative\"    => $_SESSION[\"uid\"]\n+        )\n+    ));\n+\n+    if ($selectSipCredentials !== false) {\n+        $sip = $selectSipCredentials[\"data\"][0];\n+        echo \"<script> const sipCredentials = {\n+                uri: 'sip:{$sip['sip_username']}@{$sip['sip_domain']}',\n+                socket: '{$sip['sip_websocket_addr']}',\n+                user: '{$sip['sip_username']}',\n+                pass: '{$sip['sip_password']}'\n+            }; </script>\";\n+    }\n+\n+    $getExtentionNumber = easySelectA(array(\n+        \"table\"     => \"sip_credentials as sip_credential\",\n+        \"fields\"    => \"sip_username as extention, concat(emp_firstname, ' ', emp_lastname) as name\",\n+        \"join\"      => array(\n+            \"left join {$table_prefix}users on sip_representative = user_id\",\n+            \"left join {$table_prefix}employees on user_emp_id = emp_id\",\n+        ),\n+        \"where\" => array(\n+            \"sip_credential.is_trash = 0\"\n+        )\n+    ));\n+\n+    if ($getExtentionNumber !== false) {\n+\n+        echo \"<script> const extentionNumbers = \" . json_encode($getExtentionNumber[\"data\"]) . \"; </script>\";\n+    }\n+\n+    ?>\n+    <!-- Content Wrapper. Contains page content -->\n+    <script async src=\"<?php echo full_website_address(); ?>/js/?q=cs&v=2.1.8\"></script>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+\n+        <div class=\"row\" id=\"customerSupport\" style=\"position: fixed; top: 50px; z-index: 5; background-color: #ecf0f5; width: 88%; padding-top: 15px\">\n+\n+            <section style=\"padding: 0px 15px 15px 15px;\" class=\"content-header\">\n+                <h1>\n+                    <?php echo __(\"Customer Support\"); ?>\n+                </h1>\n+            </section>\n+\n+            <div class=\"col-md-3\">\n+\n+                <div id=\"callDailer\" class=\"input-group\">\n+                    <input id=\"callNumber\" placeholder=\"Please enter number here..\" type=\"text\" value=\"\" class=\"form-control\">\n+                    <span class=\"input-group-btn\">\n+                        <button id=\"callButton\" type=\"button\" class=\"btn btn-success btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Call</button>\n+                        <button style=\"display: none;\" id=\"hangButton\" type=\"button\" class=\"btn btn-danger btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> End</button>\n+                    </span>\n+                </div>\n+\n+                <div style=\"min-height: 80px; margin-left: 10px;\">\n+\n+                    <h3 style=\"margin-top: 15px;\" id=\"status\">Dail a number!</h3>\n+                    <?php\n+                    if ($selectSipCredentials === false) {\n+                        _e(\"Sorry! No credentials found. This module will not work.\");\n+                    }\n+                    ?>\n+                    <div style=\"padding: 5px; display: none;\" class=\"dndAlert alert-danger\">Do not Disturb mode is enabled. No incoming call will work.</div>\n+\n+                    <h3 style=\"margin: 0; display: none\" id=\"timer\">00:00:00</h3>\n+                    <div style=\"display: none; height: 70px; margin-top: 12px;\" id=\"callReceiver\">\n+\n+                        <button id=\"callReceiveButton\" type=\"button\" class=\"btn btn-success btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Accept</button>\n+                        <button id=\"IncomingCallHangButton\" type=\"button\" class=\"btn btn-danger btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Reject</button>\n+\n+                    </div>\n+\n+                </div>\n+\n+\n+                <!-- Action Buttons -->\n+                <a id=\"muteCall\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-microphone\"></i> Mute\n+                </a>\n+                <a id=\"unmuteCall\" style=\"display: none;\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-microphone-slash\"></i> Unmute\n+                </a>\n+                <a id=\"holdCall\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-pause\"></i> Hold\n+                </a>\n+                <a id=\"unholdCall\" style=\"display: none;\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-play\"></i> Unhold\n+                </a>\n+                <a id=\"transferCall\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-arrow-up\"></i> Transfer\n+                </a>\n+                <a id=\"enableDND\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-bell-slash\"></i> Enable DND\n+                </a>\n+                <a id=\"disableDND\" style=\"display: none;\" class=\"btn btn-app\">\n+                    <i class=\"fa fa-bell\"></i> Disable DND\n+                </a>\n+\n+                <div style=\"margin-top: 15px; margin-left: 10px;\" class=\"form-group\">\n+                    <button id=\"addNewCase\" class=\"btn btn-primary\">Add Case/ Issue</button>\n+                    <a data-toggle=\"modal\" data-target=\"#modalDefault\" href=\"<?php echo full_website_address(); ?>/xhr/?module=marketing&page=newPerson\" class=\"btn btn-primary\"><?= __(\"New Lead\"); ?></a>\n+                    <!-- <button class=\"btn btn-primary\">View Specimen Copies</button> -->\n+                </div>\n+\n+            </div>\n+\n+            <div class=\"col-md-3\">\n+\n+                <div class=\"box box-info\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Caller Info\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table class=\"table callerInfo\">\n+                            <tr>\n+                                <td><?php echo __(\"Name:\"); ?></td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                <td><?php echo __(\"Type:\"); ?></td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                <td><?php echo __(\"Desig.\"); ?></td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                <td><?php echo __(\"Address:\"); ?></td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                <td><?php echo __(\"Last Call:\"); ?></td>\n+                                <td></td>\n+                            </tr>\n+                        </table>\n+\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+            </div>\n+\n+            <div class=\"col-md-3\">\n+\n+                <div class=\"box box-danger\">\n+                    <!-- Box header -->\n+                    <div class=\"box-header with-border\">\n+                        <h3 class=\"box-title\"><?= __(\"FeedBack\"); ?></h3>\n+                    </div>\n+\n+                    <div class=\"box-body\">\n+\n+                        <div class=\"form-group\">\n+                            <textarea name=\"feedbackArea\" id=\"feedbackArea\" cols=\"30\" rows=\"6\" placeholder=\"Enter feedback here...\" class=\"form-control\"></textarea>\n+                        </div>\n+                        <!-- <div style=\"margin-bottom: 5px;\" class=\"form-group\">\n+                              <select name=\"feedbackReviewer\" id=\"feedbackReviewer\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=userList\" style=\"width: 100%;\">\n+                                  <option value=\"\"><?= __(\"Select feedback reviewer\"); ?>....</option>\n+                              </select>\n+                          </div> -->\n+                        <div class=\"row\">\n+                            <div class=\"col-md-8\">\n+                                <div class=\"form-group\">\n+                                    <input type=\"text\" placeholder=\"Caller\" name=\"feedbackCaller\" id=\"feedbackCaller\" class=\"form-control\">\n+                                </div>\n+                            </div>\n+                            <div class=\"col-md-4\">\n+                                <input id=\"saveFeedback\" type=\"button\" value=\"Save\" class=\"btn btn-primary\">\n+                            </div>\n+                        </div>\n+\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+            </div>\n+\n+            <div class=\"col-md-3\">\n+\n+                <div class=\"box box-primary\">\n+\n+                    <!-- Box header -->\n+                    <!-- Box header -->\n+                    <div class=\"box-header with-border\">\n+                        <h3 class=\"box-title\"><?= __(\"Message\"); ?></h3>\n+                    </div>\n+\n+                    <div class=\"box-body\">\n+\n+                        <div class=\"form-group\">\n+\n+                            <textarea name=\"csSmsText\" id=\"csSmsText\" cols=\"30\" rows=\"6\" placeholder=\"Enter text here...\" class=\"form-control\"></textarea>\n+                        </div>\n+\n+                        <div class=\"row\">\n+                            <div class=\"col-md-8\">\n+                                <div class=\"form-group\">\n+                                    <input type=\"text\" placeholder=\"Enter recipient number\" name=\"csSmsSendTo\" id=\"csSmsSendTo\" class=\"form-control\">\n+                                </div>\n+                            </div>\n+                            <div class=\"col-md-4\">\n+                                <input id=\"csSendSMS\" type=\"button\" value=\"Send SMS\" class=\"btn btn-primary\">\n+                            </div>\n+                        </div>\n+\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+            </div>\n+\n+        </div>\n+\n+        <div style=\"height: 310px;\"></div>\n+        <br />\n+\n+        <div id=\"test\" class=\"row\">\n+\n+            <div class=\"col-md-6\">\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Person List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body personList\">\n+                        <table dt-height=\"30vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=personListForCallCenter\" dt-disable-on-type-search class=\"dataTableWithAjaxExtend table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?= __(\"Person Details\"); ?></th>\n+                                    <th><?= __(\"Phone\"); ?></th>\n+                                    <th><?= __(\"Address\"); ?></th>\n+                                    <th><?= __(\"Specimen Products\"); ?></th>\n+                                    <th class=\"no-print no-sort\" width=\"100px\"><?= __(\"Action\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?= __(\"Person Details\"); ?></th>\n+                                    <th><?= __(\"Phone\"); ?></th>\n+                                    <th><?= __(\"Address\"); ?></th>\n+                                    <th><?= __(\"Specimen Products\"); ?></th>\n+                                    <th><?= __(\"Action\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Marketing Representative List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table dt-height=\"30vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=representativeList\" dt-disable-on-type-search class=\"dataTableWithAjaxExtend addToSMSBox table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th width=\"30px\"><?= __(\"ID\"); ?></th>\n+                                    <th class=\"no-sort\" width=\"80px\"><?= __(\"Photo\"); ?></th>\n+                                    <th><?php echo __(\"Name\"); ?></th>\n+                                    <th><?php echo __(\"Working Area\"); ?></th>\n+                                    <th><?php echo __(\"Contact Number\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?php echo __(\"Name\"); ?></th>\n+                                    <th><?php echo __(\"Working Area\"); ?></th>\n+                                    <th><?php echo __(\"Contact Number\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Library List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table dt-height=\"30vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=peoples&page=customerList\" dt-disable-on-type-search class=\"dataTableWithAjaxExtend table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th class=\"col-md-3\"><?= __(\"Name\"); ?></th>\n+                                    <th><?= __(\"District\"); ?></th>\n+                                    <th><?= __(\"Division\"); ?></th>\n+                                    <th><?= __(\"Address\"); ?></th>\n+                                    <th class=\"col-md-1\"><?= __(\"Contact\"); ?></th>\n+                                    <th class=\"hideit no-print no-sort\" width=\"100px\"><?= __(\"Action\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?= __(\"Customer Name\"); ?></th>\n+                                    <th><?= __(\"District\"); ?></th>\n+                                    <th><?= __(\"Division\"); ?></th>\n+                                    <th><?= __(\"Address\"); ?></th>\n+                                    <th><?= __(\"Contact\"); ?></th>\n+                                    <th><?= __(\"Action\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+\n+\n+\n+            </div>\n+            <!-- col-md-6-->\n+\n+            <div class=\"col-md-6\">\n+\n+                <div class=\"row\">\n+\n+                    <div class=\"col-md-6\">\n+\n+                        <div class=\"box\">\n+                            <div class=\"box-header with-border\">\n+                                <h3 class=\"box-title\"><?= __(\"Quick Feedback\"); ?></h3>\n+                            </div>\n+                            <!-- Box header -->\n+                            <div style=\"max-height: 220px; overflow: auto;\" class=\"box-body quickFeedback\">\n+\n+                                <ul class=\"todo-list\">\n+                                    <?php\n+                                    $selectFeedback = easySelectA(array(\n+                                        \"table\"     => \"notes\",\n+                                        \"fields\"    => \"note_text\",\n+                                        \"where\"     => array(\n+                                            \"is_trash = 0 and note_type = 'feedback' and note_created_by\"   => $_SESSION[\"uid\"]\n+                                        )\n+                                    ));\n+\n+                                    if ($selectFeedback !== false) {\n+\n+                                        foreach ($selectFeedback[\"data\"] as $fKey => $fValue) {\n+                                            echo '<li style=\"cursor:pointer;\">' . $fValue[\"note_text\"] . '</li>';\n+                                        }\n+                                    }\n+\n+                                    ?>\n+\n+                                    <li style=\"cursor:pointer; text-align: center;\"><i class=\"fa fa-plus-circle\"></i> Add New</li>\n+\n+                                </ul>\n+\n+                            </div>\n+                            <!-- box body-->\n+                        </div>\n+                        <!-- box -->\n+\n+                    </div>\n+\n+                    <div class=\"col-md-6\">\n+\n+                        <div class=\"box\">\n+                            <div class=\"box-header with-border\">\n+                                <h3 class=\"box-title\"><?= __(\"Note\"); ?></h3>\n+                            </div>\n+                            <!-- Box header -->\n+                            <div style=\"max-height: 220px; overflow: auto;\" class=\"box-body userNote\">\n+                                <ul class=\"todo-list\">\n+                                    <?php\n+                                    $selectFeedback = easySelectA(array(\n+                                        \"table\"     => \"notes\",\n+                                        \"fields\"    => \"note_text\",\n+                                        \"where\"     => array(\n+                                            \"is_trash = 0 and note_type = 'note' and note_created_by\"   => $_SESSION[\"uid\"]\n+                                        )\n+                                    ));\n+\n+                                    if ($selectFeedback !== false) {\n+\n+                                        foreach ($selectFeedback[\"data\"] as $fKey => $fValue) {\n+                                            echo '<li style=\"cursor:pointer;\">' . $fValue[\"note_text\"] . '</li>';\n+                                        }\n+                                    }\n+\n+                                    ?>\n+\n+                                    <li style=\"cursor:pointer; text-align: center;\"><i class=\"fa fa-plus-circle\"></i> Add New</li>\n+\n+                                </ul>\n+\n+                            </div>\n+                            <!-- box body-->\n+                        </div>\n+                        <!-- box -->\n+\n+                    </div>\n+\n+                </div>\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Case List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body caseList\">\n+                        <table dt-height=\"40vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=caseList\" dt-disable-on-type-search class=\"dataTableWithAjaxExtend table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?php echo __(\"Date\"); ?></th>\n+                                    <th><?php echo __(\"Requester\"); ?></th>\n+                                    <th><?php echo __(\"Title\"); ?></th>\n+                                    <th><?php echo __(\"Priority\"); ?></th>\n+                                    <th><?php echo __(\"Type\"); ?></th>\n+                                    <th><?php echo __(\"Status\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?php echo __(\"Date\"); ?></th>\n+                                    <th><?php echo __(\"Requester\"); ?></th>\n+                                    <th><?php echo __(\"Title\"); ?></th>\n+                                    <th><?php echo __(\"Priority\"); ?></th>\n+                                    <th><?php echo __(\"Type\"); ?></th>\n+                                    <th><?php echo __(\"Status\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Product List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table dt-height=\"40vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=productList\" dt-disable-on-type-search class=\"dataTableWithAjaxExtend table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th style=\"width: 150px;\"><?= __(\"Product Name\"); ?></th>\n+                                    <th style=\"width: 100px;\"><?= __(\"Edition\"); ?></th>\n+                                    <th style=\"width: 120px;\"><?= __(\"Category\"); ?></th>\n+                                    <th style=\"width: 300px;\"><?= __(\"Description\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?= __(\"Product Name\"); ?></th>\n+                                    <th>\n+                                        <select name=\"productEdition\" id=\"productEdition\" class=\"form-control select2\">\n+                                            <option value=\"\"><?= __(\"All Ed.\"); ?></option>\n+                                            <?php\n+\n+                                            $selectProductYear = easySelectA(array(\n+                                                \"table\"   => \"products\",\n+                                                \"fields\"  => \"product_edition\",\n+                                                \"groupby\" => \"product_edition\"\n+                                            ));\n+\n+                                            if ($selectProductYear) {\n+                                                foreach ($selectProductYear[\"data\"] as $key => $value) {\n+                                                    echo \"<option value='{$value['product_edition']}'>{$value['product_edition']}</option>\";\n+                                                }\n+                                            }\n+\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th>\n+                                        <select name=\"productCategory\" id=\"productCategory\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address(); ?>/info/?module=select2&page=productCategoryList\">\n+                                            <option value=\"\"><?= __(\"Category\"); ?>...</option>\n+                                        </select>\n+                                    </th>\n+                                    <th><?= __(\"Description\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+\n+\n+\n+            </div>\n+            <!-- col-md-6-->\n+\n+        </div>\n+        <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+</div>\n+<!-- /.content-wrapper -->\n+<script>\n+    // request permission on page load\n+    document.addEventListener('DOMContentLoaded', function() {\n+\n+        if (!Notification) {\n+            alert('Desktop notifications not available in your browser.');\n+            return;\n+        }\n+\n+        if (Notification.permission !== 'granted') {\n+            Notification.requestPermission();\n+        }\n+\n+        // Enable / Disable DND when page is load\n+        if( get_options(\"dnd\") === \"enable\" ) {\n+\n+            $(\"#enableDND\").hide();\n+            $(\"#disableDND\").show();\n+            $(\".dndAlert\").show();\n+\n+        } else {\n+            \n+            $(\"#disableDND\").hide();\n+            $(\"#enableDND\").show();\n+\n+        }\n+\n+    });\n+</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/call-center.php",
          "status": "added",
          "additions": 850,
          "deletions": 0,
          "patch": "@@ -0,0 +1,850 @@\n+<style>\n+    \n+    .tab-pane .row {\n+        margin-top: 10px;\n+    }\n+\n+    .message-item, .call-item {\n+        border-bottom: 1px solid whitesmoke;\n+        padding: 5px 0;\n+    }\n+    .message-item p, .call-item p {\n+        margin: 2px;\n+    }\n+\n+    .cc-title {\n+        margin: 0; \n+        padding-bottom: 10px; \n+        font-size: 20px; \n+        border-bottom: 1px solid #dcdbdb;\n+    }\n+\n+    .numberSearch {\n+        padding: 18px 0;\n+    }\n+\n+    .number-dialer-div {\n+        border: 1px solid #d2d6de;\n+        position: absolute;\n+        z-index: 1;\n+    }\n+\n+    .number-dialer-div:focus-within {\n+        border-color:#3c8dbc;\n+    }\n+\n+    .number-dialer-div * {\n+        border: none;\n+    }\n+\n+    .disable-number-dialer-div {\n+        background-color: #eeeeee !important;\n+        cursor: not-allowed;\n+    }\n+\n+    .suggestion-numbers {\n+        display: none;\n+        max-height: 340px;\n+        overflow: auto;\n+        background-color: white;\n+        padding: 10px;\n+        box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 1px, rgba(0, 0, 0, 0.07) 0px 2px 2px, rgba(0, 0, 0, 0.07) 0px 4px 4px, rgba(0, 0, 0, 0.07) 0px 8px 8px, rgba(0, 0, 0, 0.07) 0px 16px 16px;\n+    }\n+\n+    .suggestion-numbers .item {\n+        padding: 10px 0 10px 5px;\n+        position: relative;\n+    }\n+\n+    .suggestion-numbers .item:not(:last-child) {\n+        border-bottom: 1px solid #dcdbdb;\n+    }\n+\n+    .suggestion-numbers .item span {\n+        display: block;\n+        color: #2e82b2;\n+        font-weight: bold;\n+        cursor: pointer;\n+    }\n+\n+    .suggestion-numbers .item > button {\n+        position: absolute;\n+        right: .5em;\n+        top: 50%;\n+        transform: translate(0,-50%);\n+    }\n+\n+    .call-controller {\n+        margin-top: 55px;\n+    }\n+\n+    .call-dialer {\n+        min-height: 80px;\n+        margin-bottom: 10px;\n+        text-align: center;\n+    }\n+\n+    .statistics {\n+        position: absolute;\n+        width: 100%;\n+        bottom: -30px;\n+        /* background-color: #ecf0f5; */\n+        /* height: 120px; */\n+    }\n+\n+    .agent-live-stats-box {\n+        height: 410px;\n+        overflow: auto;\n+        margin-top: 10px;\n+    }\n+\n+    .agent-live-stats-box p {\n+        margin: 0;\n+    }\n+\n+    .agent-live-stats-box .name {\n+        font-size: 18px;\n+    }\n+\n+    .agent-live-stats-box .agent {\n+        padding: 12px 0;\n+        margin: 0;\n+    }\n+\n+    .agent-live-stats-box .agent:not(:last-child) {\n+        border-bottom: 1px solid #dcdbdb;\n+    }\n+\n+\n+    .call-history {\n+        max-height: 320px;\n+        overflow: auto;\n+    }\n+\n+\n+\n+</style>\n+\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+\n+    <?php\n+\n+    $selectSipCredentials = easySelectA(array(\n+        \"table\"     => \"sip_credentials\",\n+        \"fields\"    => \"sip_username, sip_password, sip_domain, sip_websocket_addr\",\n+        \"where\"     => array(\n+            \"sip_representative\"    => $_SESSION[\"uid\"]\n+        )\n+    ));\n+\n+    if ($selectSipCredentials !== false) {\n+        $sip = $selectSipCredentials[\"data\"][0];\n+        echo \"<script> const sipCredentials = {\n+                uri: 'sip:{$sip['sip_username']}@{$sip['sip_domain']}',\n+                socket: '{$sip['sip_websocket_addr']}',\n+                user: '{$sip['sip_username']}',\n+                pass: '{$sip['sip_password']}'\n+            }; </script>\";\n+    }\n+\n+    $getExtentionNumber = easySelectA(array(\n+        \"table\"     => \"sip_credentials as sip_credential\",\n+        \"fields\"    => \"sip_username as extention, concat(emp_firstname, ' ', emp_lastname) as name\",\n+        \"join\"      => array(\n+            \"left join {$table_prefix}users on sip_representative = user_id\",\n+            \"left join {$table_prefix}employees on user_emp_id = emp_id\",\n+        ),\n+        \"where\" => array(\n+            \"sip_credential.is_trash = 0\"\n+        )\n+    ));\n+\n+    if ($getExtentionNumber !== false) {\n+\n+        echo \"<script> const extentionNumbers = \" . json_encode($getExtentionNumber[\"data\"]) . \"; </script>\";\n+    }\n+\n+    ?>\n+    <!-- Content Wrapper. Contains page content -->\n+    <script async src=\"<?php echo full_website_address(); ?>/js/?q=cs&v=2.2.6\"></script>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+\n+      \n+        <!-- Left Column -->\n+        <div style=\"height: 86vh\" class=\"col-lg-3 col-md-4\">\n+\n+            <div class=\"number-dialer-div\">\n+                <div class=\"input-group\">\n+                    <span class=\"input-group-addon\">\n+                        <i class=\"fa fa-search\"></i>\n+                    </span>\n+                    <input type=\"text\" placeholder=\"Type name or number\" class=\"form-control numberSearch\">\n+                    <span class=\"input-group-addon\">\n+                        <i class=\"fa fa-caret-down\"></i>\n+                    </span>\n+                </div>\n+                <div class=\"suggestion-numbers\"> </div>\n+\n+            </div>\n+\n+\n+            <div class=\"call-controller\">\n+\n+\n+                <h3 style=\"margin-top: 10px; margin-bottom: 15px;\" id=\"status\"></h3>\n+                <h3 style=\"margin: 0 0 15px 0; display: none;\" id=\"timer\">00:00:00</h3>\n+                \n+\n+                <div class=\"call-dialer\">\n+                    \n+                    <button id=\"callButton\" type=\"button\" class=\"btn btn-success btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Dial</button>\n+                    <button style=\"display: none;\" id=\"hangButton\" type=\"button\" class=\"btn btn-danger btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> End Call</button>\n+\n+                </div>\n+\n+                <div style=\"display: none; min-height: 80px;\" id=\"callReceiver\">\n+                    \n+                    <button id=\"callReceiveButton\" type=\"button\" class=\"btn btn-success btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Accept</button>\n+                    <button id=\"IncomingCallHangButton\" type=\"button\" class=\"btn btn-danger btn-flat\"><i class=\"fa fa-fw fa-phone\"></i> Reject</button>\n+\n+                </div>\n+                \n+                <div class=\"row\">\n+                    <!-- Action Buttons -->\n+                    <a id=\"muteCall\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-microphone\"></i> Mute\n+                    </a>\n+                    <a id=\"unmuteCall\" style=\"display: none;\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-microphone-slash\"></i> Unmute\n+                    </a>\n+                    <a id=\"holdCall\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-pause\"></i> Hold\n+                    </a>\n+                    <a id=\"unholdCall\" style=\"display: none;\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-play\"></i> Unhold\n+                    </a>\n+                    <a id=\"transferCall\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-arrow-up\"></i> Transfer\n+                    </a>\n+                    <a id=\"enableDND\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-bell-slash\"></i> Enable DND\n+                    </a>\n+                    <a id=\"disableDND\" style=\"display: none;\" class=\"btn btn-app\">\n+                        <i class=\"fa fa-bell\"></i> Disable DND\n+                    </a>\n+                </div>\n+\n+                <div style=\"margin-top: 15px; margin-left: 10px;\" class=\"form-group\">\n+                    <button id=\"addNewCase\" class=\"btn btn-primary\">Add Case/ Issue</button>\n+                    <a data-toggle=\"modal\" data-target=\"#modalDefault\" href=\"<?php echo full_website_address(); ?>/xhr/?module=marketing&page=newPerson\" class=\"btn btn-primary\"><?= __(\"New Lead\"); ?></a>\n+                    <!-- <button class=\"btn btn-primary\">View Specimen Copies</button> -->\n+                </div>\n+\n+\n+                <?php\n+                if ($selectSipCredentials === false) {\n+                    _e(\"Sorry! No credentials found. This module will not work.\");\n+                }\n+                ?>\n+                <div style=\"padding: 5px; display: none; margin-top: 10px;\" class=\"dndAlert alert-danger\">Do not Disturb mode is enabled. No incoming call will work.</div>\n+\n+            </div>\n+\n+            <?php if(current_user_can(\"customer_support_dashboard.View\")) { ?>\n+                <div style=\"position: absolute; bottom: -25px; width: 95%;\" class=\"box box-success\">\n+\n+                    <div class=\"box-header with-border\">\n+                        <h3 class=\"box-title\">Live status</h3>\n+                    </div>\n+                    <div class=\"box-body agent-live-stats-box\">\n+\n+                        <?php \n+                            $selectUserExtension = easySelectA(array(\n+                                \"table\"     => \"sip_credentials as sip\",\n+                                \"fields\"    => \"sip_username as ext, emp_id, emp_firstname, emp_lastname\",\n+                                \"join\"      => array(\n+                                    \"left join {$table_prefix}users as user on user_id = sip_representative\",\n+                                    \"left join {$table_prefix}employees on emp_id = user_emp_id\"\n+                                ),\n+                                \"where\" => array(\n+                                    \"user.is_trash = 0 and user_status = 'Active'\"\n+                                )\n+                            ));\n+\n+                            if( $selectUserExtension !== false ) {\n+\n+                                foreach($selectUserExtension[\"data\"] as $key => $agent ) {\n+\n+                                    echo \"<div class='row agent'>\n+                                            <div class='col-md-3'>\n+                                                <img width='50px' height='50px' src='\". full_website_address() .\"/images/?for=employees&id={$agent[\"emp_id\"]}' class='img-circle' />\n+                                            </div>\n+                                            <div class='col-md-9'>\n+                                                <p class='name'>{$agent['emp_firstname']} {$agent['emp_lastname']}</p>\n+                                                <p class='agentExt{$agent['ext']}'>Available</p>\n+                                            </div> \n+                                        </div>\";\n+\n+                                }\n+\n+                            }\n+\n+                        ?>\n+\n+                        \n+\n+                    </div>\n+\n+                </div>\n+            \n+            <?php } ?>\n+\n+            \n+        \n+        </div>\n+\n+        <!-- Right Column -->\n+        <div style=\"height: 85vh;\" class=\"col-lg-9 col-md-8\">\n+\n+            <div class=\"nav-tabs-custom\">\n+                <ul class=\"nav nav-tabs call-center-tabs\">\n+                    <li class=\"\"> <a href=\"#tab_script\" data-toggle=\"tab\">Script</a> </li>\n+                    <li class=\"\" > <a href=\"#tab_leads\" data-toggle=\"tab\">Leads</a> </li>\n+                    <li class=\"active\"> <a href=\"#tab_messages\" data-toggle=\"tab\">Messages <span class=\"tabMessageCount\"></span> </a> </li>\n+                    <li class=\"hidden_tab\" style=\"display: none;\"> <a href=\"#tab_products\" data-toggle=\"tab\">Products</a> </li>\n+                    <li class=\"hidden_tab\" style=\"display: none;\" class='feedback_tab'> <a href=\"#tab_feedback\" data-toggle=\"tab\">Feedback</a> </li>\n+                </ul>\n+                <div class=\"tab-content\">\n+\n+                    <div class=\"tab-pane\" id=\"tab_script\">\n+\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+                        <p>Bangladesh is a land of rivers. Most of her lands are lowings</p>\n+\n+                    </div> <!-- End Script Tab -->\n+\n+                    <div class=\"tab-pane\" id=\"tab_leads\">\n+\n+                        <div class=\"row\">\n+\n+                            <div class=\"col-md-8\">\n+                                \n+                                <table class=\"table callerInfo\">\n+                                    <tr>\n+                                        <td><?php echo __(\"Name:\"); ?></td>\n+                                        <td></td>\n+                                    </tr>\n+                                    <tr>\n+                                        <td><?php echo __(\"Type:\"); ?></td>\n+                                        <td></td>\n+                                    </tr>\n+                                    <tr>\n+                                        <td><?php echo __(\"Desig.\"); ?></td>\n+                                        <td></td>\n+                                    </tr>\n+                                    <tr>\n+                                        <td><?php echo __(\"Address:\"); ?></td>\n+                                        <td></td>\n+                                    </tr>\n+                                    <tr>\n+                                        <td><?php echo __(\"Action\"); ?></td>\n+                                        <td></td>\n+                                    </tr>\n+          \n+                                </table>\n+\n+                                <div style=\"display: none\" class=\"dataToCopy\">\n+\n+                                </div>\n+\n+                                <br/>\n+                                <h2 class=\"cc-title\"><?= __(\"Order/ Service\"); ?></h3>\n+                                <table class=\"table callerOrderInfo\">\n+                                    <thead>\n+                                        <tr>\n+                                            <th><?php echo __(\"Date\"); ?></th>\n+                                            <th><?php echo __(\"Reference\"); ?></th>\n+                                            <th><?php echo __(\"Amount\"); ?></th>\n+                                            <th><?php echo __(\"Payment\"); ?></th>\n+                                            <th style=\"width: 220px;\" type=\"select\" \n+                                                data-options=\"Order Placed,In Production,Processing,Call not Picked,Confirmed,Hold,Delivered,Cancelled\"\n+                                                where-to-update=\"<?php echo full_website_address(); ?>/xhr/?module=my-shop&page=changeSaleStatus\"\n+                                                class=\"sort text-center no-print\"><?php echo __(\"Status\"); ?>\n+                                            </th>\n+                                            <th><?php echo __(\"Action\"); ?></th>\n+                                        </tr>\n+                                    </thead>\n+                                    <tbody>\n+                                        <tr><td class=\"text-center\" colspan=\"5\">Sorry! No order found.</td></tr>\n+                                    </tbody>\n+                                </table>\n+\n+                            </div>\n+                            <div class=\"col-md-4\">\n+\n+                                <h2 class=\"cc-title\"><?= __(\"Call History\"); ?> <small style=\"font-weight: bold\" class=\"call-count\"></small> </h3>\n+                                <div class=\"call-history\">\n+\n+                                    <p>No call</p>\n+                                    \n+                                </div>\n+\n+                                <br/>\n+                                <h2 class=\"cc-title\"><?= __(\"Cases\"); ?></h3>\n+                                <div class=\"case-history\">\n+\n+                                    <p>No Cases</p>\n+                                    \n+                                </div>\n+\n+                            </div>\n+\n+                        </div>\n+\n+                    </div> <!-- End Leads Tab -->\n+\n+                    <div class=\"tab-pane active\" id=\"tab_messages\">\n+                        \n+                        <div class=\"row\">\n+\n+                            <!-- Send Message Box -->\n+                            <div class=\"col-md-6\">\n+\n+                                <br/>\n+                                <div class=\"form-group\">\n+                                    <textarea name=\"csSmsText\" id=\"csSmsText\" cols=\"30\" rows=\"6\" placeholder=\"Enter text here...\" class=\"form-control\"></textarea>\n+                                </div>\n+\n+                                <div class=\"row\">\n+                                    <div class=\"col-md-8\">\n+                                        <div class=\"form-group\">\n+                                            <input type=\"text\" placeholder=\"Enter recipient number\" name=\"csSmsSendTo\" id=\"csSmsSendTo\" class=\"form-control\">\n+                                        </div>\n+                                    </div>\n+                                    <div class=\"col-md-4\">\n+                                        <input id=\"csSendSMS\" type=\"button\" value=\"Send SMS\" class=\"btn btn-primary\">\n+                                    </div>\n+                                </div>\n+                                \n+                            </div> <!-- End Send Message Box -->\n+                            \n+\n+                            <div class=\"col-md-6\">\n+\n+                                <h2 class=\"cc-title\"><?= __(\"Notes\"); ?></h3>\n+                                <div style=\"max-height: 220px; overflow: auto;\" class=\"box-body userNote\">\n+\n+                                    <ul class=\"todo-list\">\n+                                        <?php\n+                                        $selectFeedback = easySelectA(array(\n+                                            \"table\"     => \"notes\",\n+                                            \"fields\"    => \"note_text\",\n+                                            \"where\"     => array(\n+                                                \"is_trash = 0 and note_type = 'note' and note_created_by\"   => $_SESSION[\"uid\"]\n+                                            )\n+                                        ));\n+\n+                                        if ($selectFeedback !== false) {\n+\n+                                            foreach ($selectFeedback[\"data\"] as $fKey => $fValue) {\n+                                                echo '<li style=\"cursor:pointer;\">' . $fValue[\"note_text\"] . '</li>';\n+                                            }\n+                                        }\n+\n+                                        ?>\n+\n+                                        <li style=\"cursor:pointer; text-align: center;\"><i class=\"fa fa-plus-circle\"></i> Add New</li>\n+\n+                                    </ul>\n+\n+                                </div>\n+                                \n+                                <br/>\n+                                <h2 class=\"cc-title\"><?= __(\"Message History\"); ?></h3>\n+                                <div class=\"message-history\">\n+\n+                                    <p>No SMS</p>\n+                                    \n+                                </div>\n+\n+                            </div>\n+\n+\n+                        </div>\n+\n+                    </div> <!-- End Message Tab -->\n+\n+                    <div class=\"tab-pane\" id=\"tab_products\">\n+                        \n+                    </div> <!-- End Products Tab -->\n+\n+                    <div class=\"tab-pane\" id=\"tab_feedback\">\n+\n+                        <div class=\"row\" style=\"margin-left: 0;\">\n+\n+                            <div class=\"col-md-6\">\n+\n+                                <div class=\"form-group\">\n+                                    <label for=\"callFeedback\"><?= __(\"Call Feedback\"); ?></label>\n+                                    <textarea name=\"callFeedback\" id=\"callFeedback\" cols=\"30\" rows=\"5\" placeholder=\"Enter feedback here...\" class=\"form-control\"></textarea>\n+                                </div>\n+                                \n+                                \n+                                <div class=\"row\">\n+\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"callReason\"><?= __(\"Call Reason\"); ?></label>\n+                                        <select name=\"callReason[]\" id=\"callReason\" class=\"form-control select2Ajax\" select2-tag=\"true\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=callReasonList\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"Select Reason\"); ?>....</option>\n+                                        </select>\n+                                    </div>\n+\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"specimenCopyReceived\"><?= __(\"Specimen Copy Received\"); ?></label>\n+                                        <select name=\"specimenCopyReceived\" id=\"specimenCopyReceived\" class=\"form-control\">\n+                                            <option value=\"\">Select one...</option>\n+                                            <option value=\"No\">No</option>\n+                                            <option value=\"Yes\">Yes</option>\n+                                            <option value=\"Partial\">Partial</option>\n+                                            <option value=\"Not Sure\">Not Sure</option>\n+                                        </select>\n+                                    </div>\n+\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"feedbackInformative\"><?= __(\"Informative\"); ?></label>\n+                                        <select name=\"feedbackInformative\" id=\"feedbackInformative\" class=\"form-control\">\n+                                            <option value=\"\">Select one...</option>\n+                                            <option value=\"No\">No</option>\n+                                            <option value=\"Yes\">Yes</option>\n+                                        </select>\n+                                    </div>\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"SaleOurProduct\"><?= __(\"Sale Our Book\"); ?></label>\n+                                        <select name=\"SaleOurProduct\" id=\"SaleOurProduct\" class=\"form-control\">\n+                                            <option value=\"\">Select one...</option>\n+                                            <option value=\"No\">No</option>\n+                                            <option value=\"Yes\">Yes</option>\n+                                            <option value=\"Sold Before\">Sold Before</option>\n+                                        </select>\n+                                    </div>\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"userOurProduct\"><?= __(\"Use Our Book\"); ?></label>\n+                                        <select name=\"userOurProduct\" id=\"userOurProduct\" class=\"form-control\">\n+                                            <option value=\"\">Select one...</option>\n+                                            <option value=\"No\">No</option>\n+                                            <option value=\"Yes\">Yes</option>\n+                                            <option value=\"Used Before\">Used Before</option>\n+                                        </select>\n+                                    </div>\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"mrFeedback\"><?= __(\"MR Feedback\"); ?></label>\n+                                        <select name=\"mrFeedback\" id=\"mrFeedback\" class=\"form-control\">\n+                                            <option value=\"\">Select one...</option>\n+                                            <option value=\"No Comment\">No Comment</option>\n+                                            <option value=\"Positive\">Positive</option>\n+                                            <option value=\"Negative\">Negative</option>                                            \n+                                        </select>\n+                                    </div>\n+                                    \n+                                </div>\n+                                \n+                                <div class=\"form-group\">\n+                                    <label for=\"otherInformation\"><?php echo __(\"Other Info\"); ?></label>\n+                                    <textarea name=\"otherInformation\" id=\"otherInformation\" cols=\"30\" rows=\"2\" placeholder=\"Enter any other information here...\" class=\"form-control\"></textarea>\n+                                </div>\n+\n+                                <div class=\"row\">\n+                                    \n+                                    <div class=\"form-group col-md-6\">\n+                                        <input type=\"text\" placeholder=\"Caller\" name=\"feedbackCaller\" id=\"feedbackCaller\" class=\"form-control\">\n+                                    </div>\n+                                    <div class=\"col-md-6\">\n+                                        <input id=\"saveFeedback\" type=\"button\" value=\"Save\" class=\"btn btn-primary\">\n+                                    </div>\n+                                </div>\n+\n+                            </div>\n+\n+                            <div class=\"col-md-6\">\n+                                <!-- Box header -->\n+                                <div style=\"max-height: 220px; overflow: auto;\" class=\"box-body quickFeedback\">\n+                                    <ul class=\"todo-list\">\n+                                        <?php\n+                                        $selectFeedback = easySelectA(array(\n+                                            \"table\"     => \"notes\",\n+                                            \"fields\"    => \"note_text\",\n+                                            \"where\"     => array(\n+                                                \"is_trash = 0 and note_type = 'feedback' and note_created_by\"   => $_SESSION[\"uid\"]\n+                                            )\n+                                        ));\n+\n+                                        if ($selectFeedback !== false) {\n+\n+                                            foreach ($selectFeedback[\"data\"] as $fKey => $fValue) {\n+                                                echo '<li style=\"cursor:pointer;\">' . $fValue[\"note_text\"] . '</li>';\n+                                            }\n+                                        }\n+\n+                                        ?>\n+\n+                                        <li style=\"cursor:pointer; text-align: center;\"><i class=\"fa fa-plus-circle\"></i> Add New</li>\n+\n+                                    </ul>\n+\n+                                </div>\n+                            </div>\n+\n+                        </div>\n+                        \n+                    </div> <!-- End feedback Tab -->\n+\n+\n+                </div>\n+\n+            </div>\n+\n+\n+            <?php if(current_user_can(\"customer_support_dashboard.View\")) { ?>\n+\n+                <div class=\"statistics\">\n+\n+                    <div class=\"col-md-3 col-sm-6 col-xs-12\">\n+                        <div class=\"info-box\">\n+                            <span class=\"info-box-icon bg-green\"><i class=\"fa fa-flag-o\"></i></span>\n+\n+                            <div class=\"info-box-content\">\n+                            <span class=\"info-box-text\">Agent In Call</span>\n+                            <span class=\"info-box-number inCallAgent\">0</span>\n+                            </div>\n+                            <!-- /.info-box-content -->\n+                        </div>\n+                        <!-- /.info-box -->\n+                    </div>\n+                    <div class=\"col-md-3 col-sm-6 col-xs-12\">\n+                        <div class=\"info-box\">\n+                            <span class=\"info-box-icon bg-green\"><i class=\"fa fa-flag-o\"></i></span>\n+\n+                            <div class=\"info-box-content\">\n+                            <span class=\"info-box-text\">Busy Agent</span>\n+                            <span class=\"info-box-number busyAgentCount\">0</span>\n+                            </div>\n+                            <!-- /.info-box-content -->\n+                        </div>\n+                        <!-- /.info-box -->\n+                    </div>\n+                    <div class=\"col-md-3 col-sm-6 col-xs-12 \">\n+                        <div class=\"info-box\">\n+                            <span class=\"info-box-icon bg-green\"><i class=\"fa fa-flag-o\"></i></span>\n+\n+                            <div class=\"info-box-content\">\n+                            <span class=\"info-box-text\">Free Agent</span>\n+                            <span class=\"info-box-number freeAgentCount\">0</span>\n+                            </div> \n+                            <!-- /.info-box-content -->\n+                        </div>\n+                        <!-- /.info-box -->\n+                    </div>\n+                    <div class=\"col-md-3 col-sm-6 col-xs-12\">\n+                        <div class=\"info-box\">\n+                            <span class=\"info-box-icon bg-green\"><i class=\"fa fa-flag-o\"></i></span>\n+\n+                            <div class=\"info-box-content\">\n+                            <span class=\"info-box-text\">Agent Unavailable</span>\n+                            <span class=\"info-box-number unableAgentCount\">0</span>\n+                            </div>\n+                            <!-- /.info-box-content -->\n+                        </div>\n+                        <!-- /.info-box -->\n+                    </div>\n+\n+                </div>\n+\n+            <?php } ?>\n+\n+        </div>\n+\n+\n+\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+</div>\n+<!-- /.content-wrapper -->\n+\n+<script>\n+\n+    // request permission on page load\n+    document.addEventListener('DOMContentLoaded', function() {\n+\n+        if (!Notification) {\n+            alert('Desktop notifications not available in your browser.');\n+            return;\n+        }\n+\n+        if (Notification.permission !== 'granted') {\n+            Notification.requestPermission();\n+        }\n+\n+        // Enable / Disable DND when page is load\n+        if( get_options(\"dnd\") === \"enable\" ) {\n+\n+            $(\"#enableDND\").hide();\n+            $(\"#disableDND\").show();\n+            $(\".dndAlert\").show();\n+\n+        } else {\n+            \n+            $(\"#disableDND\").hide();\n+            $(\"#enableDND\").show();\n+\n+        }\n+\n+    });\n+\n+\n+    // Hide the suggestion numbers when escape key presed\n+    $(document).on(\"keydown\", \".numberSearch\", function(e) {\n+        \n+        var keyName = e.key;\n+        if( keyName === \"Escape\" ) {\n+            $(\".suggestion-numbers\").html(\"\").slideUp(\"fast\");\n+        }\n+\n+    });\n+\n+\n+    // Hide the suggestion numbers when click outside of the it\n+    $(document).mouseup(function(e) {\n+\n+        var container = $(\".number-dialer-div\");\n+\n+        if( !container.is(e.target) && container.has(e.target).length === 0 ) {\n+\n+            $(\".suggestion-numbers\").html(\"\").slideUp(\"fast\");\n+\n+        }\n+\n+    });\n+\n+\n+    var numberSearchTimeout;\n+    $(document).on(\"input focus\", \".numberSearch\", function(e) {        \n+\n+        var searchText = $(this).val();\n+\n+        if( searchText.length > 1 ) { // If the input length at least three\n+\n+            clearTimeout( numberSearchTimeout );\n+\n+            numberSearchTimeout = setTimeout(function() {\n+\n+                BMS.fn.get(\"searchContact&s=\"+ searchText, function(results) {\n+\n+                    if(results !== \"\") {\n+\n+                        var contactSuggestion = \"\";\n+                        results.forEach(item => {\n+                            contactSuggestion += `<div class=\"item\">\n+                                                    <span onclick=\"showCallerDetails('${item.number}')\" >${item.name} (${item.type})</span>\n+                                                    <span onclick=\"showCallerDetails('${item.number}')\">${item.number}</span>\n+                                                    <button onclick=\"dial('${item.number}')\" type=\"button\" class=\"btn btn-success btn-flat callButton\"><i class=\"fa fa-fw fa-phone\"></i> Call</button>\n+                                                </div>`;\n+                        });\n+\n+                        /** Show the suggestion numbers */\n+                        $(\".suggestion-numbers\").html(contactSuggestion).slideDown(\"fast\");\n+\n+                    } else {\n+\n+                        // Hide the suggestion numbers\n+                        $(\".suggestion-numbers\").html(\"\").slideUp(\"fast\");\n+                        \n+                    }\n+\n+                });\n+                \n+\n+            }, 400);\n+\n+\n+        } else {\n+\n+            // Hide the suggestion numbers\n+            $(\".suggestion-numbers\").html(\"\").slideUp(\"fast\");\n+\n+        }\n+    \n+    });\n+\n+\n+    \n+    <?php if(current_user_can(\"customer_support_dashboard.View\")) { ?>\n+\n+        function showAgentsStats() {\n+\n+            setTimeout(() => {\n+\n+                $.ajax({\n+                    url: `${full_website_address}/ami.php`,\n+                    timeout: 3000,\n+                    success: function(data) {\n+\n+                        showAgentsStats();\n+                        \n+                        var data = JSON.parse(data);\n+\n+                        $(\".inCallAgent\").html(data.agent_stats.inCallAgent);\n+                        $(\".busyAgentCount\").html(data.agent_stats.busyAgent);\n+                        $(\".freeAgentCount\").html(data.agent_stats.freeAgent);\n+                        $(\".unableAgentCount\").html(data.agent_stats.unableAgent);\n+                        \n+                        if( Object.keys(data.agent_status).length > 0) {\n+\n+                            $.each(data.agent_status, function(extens, item) {\n+\n+                                if(item.state === \"\") {\n+\n+                                    $(\".agentExt\" + extens ).html(`${item.status}`);\n+\n+                                } else {\n+                                    \n+                                    $(\".agentExt\" + extens ).html(`${item.type} (${item.number}), ${item.state}`);\n+\n+                                }\n+\n+\n+                            });\n+\n+                        }\n+\n+                    },\n+                    error: function() {\n+                        \n+                        showAgentsStats();\n+\n+                    }\n+\n+                });\n+                \n+            }, 3000);\n+\n+        }\n+\n+        // Initial States\n+        showAgentsStats();\n+\n+\n+    <?php } ?>\n+\n+\n+</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/case-list-all.php",
          "status": "added",
          "additions": 121,
          "deletions": 0,
          "patch": "@@ -0,0 +1,121 @@\n+<!-- Content Wrapper. Contains page content -->\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+        <h1>\n+            <?= __(\"Customer Support\"); ?>\n+            <a data-toggle=\"modal\" data-target=\"#modalDefaultMdm\" href=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=newCase\" class=\"btn btn-primary\"><?= __(\"New Case\"); ?></a>\n+        </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+        <div class=\"row\">\n+            <div class=\"col-xs-12\">\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Case List\"); ?></h3>\n+                        <div class=\"printButtonPosition\"></div>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th><?php echo __(\"Date\"); ?></th>\n+                                    <th><?php echo __(\"Case Title\"); ?></th>\n+                                    <th style=\"width: 200px;\"><?php echo __(\"Requester\"); ?></th>\n+                                    <th class=\"defaultOrder no-sort\"><?php echo __(\"Priority\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Type\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Status\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Assigned To\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Belongs To\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Last Reply\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Posted By\"); ?></th>\n+                                    <th class=\"no-sort\"><?php echo __(\"Action\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th class=\"no-print\">\n+                                        <input style=\"width: 160px;\" type=\"text\" placeholder=\"<?= __(\"Select Date\"); ?>\" id=\"caseAddedDate\" class=\"form-control\" autocomplete=\"off\">\n+                                    </th>\n+                                    <th><?php echo __(\"Case Title\"); ?></th>\n+                                    <th class=\"no-print\">\n+                                        <input style=\"width: 100%;\" type=\"text\" placeholder=\"<?= __(\"Search Requester\"); ?>\" id=\"searchRequester\" class=\"form-control\" autocomplete=\"off\">\n+                                    </th>\n+                                    <th class=\"no-print\"> \n+                                        <select id=\"casePriority\" class=\"form-control select2\" style=\"width: 100%\">\n+                                            <option value=\"\">Priority...</option>\n+                                            <?php\n+                                                $casePriority = array('Low', 'Medium', 'High', 'Critical');\n+                                                foreach($casePriority as $priority) {\n+                                                    echo \"<option value='{$priority}'>{$priority}</option>\";\n+                                                }\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th class=\"no-print\"> \n+                                        <select id=\"caseType\" class=\"form-control select2\" style=\"width: 100%\">\n+                                            <option value=\"\">Type...</option>\n+                                            <?php\n+                                                $caseType = array('Refund Request', 'Packaging Issues', 'Delivery Issue', 'Technical Issues', 'Query', 'Damaged Item', 'Exchange', 'Others');\n+                                                foreach($caseType as $type) {\n+                                                    echo \"<option value='{$type}'>{$type}</option>\";\n+                                                }\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th class=\"no-print\"> \n+                                        <select id=\"caseStatus\" class=\"form-control select2\" style=\"width: 100%\">\n+                                            <option value=\"\">Status...</option>\n+                                            <?php\n+                                                $caseStatus = array('Pending', 'Open', 'Replied', 'Customer Responded', 'Solved', 'Informed', 'On Hold');\n+                                                foreach($caseStatus as $status) {\n+                                                    echo \"<option value='{$status}'>{$status}</option>\";\n+                                                }\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th>\n+                                        <select id=\"caseAssignTo\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=userList\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"Select Assignee\"); ?>....</option>\n+                                        </select>\n+                                    </th>\n+                                    <th> \n+                                        <select id=\"caseBelongsTo\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=employeeList\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"Select Belongs to\"); ?>....</option>\n+                                        </select>\n+                                    </th>\n+                                    <th><?php echo __(\"Last Reply\"); ?></th>\n+                                    <th class=\"no-sort\">\n+                                        <select id=\"casePostedBy\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=userList\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"Posted By\"); ?>....</option>\n+                                        </select>\n+                                    </th>\n+                                    <th><?php echo __(\"Action\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+            </div>\n+            <!-- col-xs-12-->\n+        </div>\n+        <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+</div>\n+<!-- /.content-wrapper -->\n+\n+<script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=caseList\";\n+    BMS.FUNCTIONS.dateRangePickerPreDefined({selector: \"#caseAddedDate\"});\n+</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/case-list.php",
          "status": "added",
          "additions": 11,
          "deletions": 0,
          "patch": "@@ -0,0 +1,11 @@\n+<?php \n+\n+if(isset( $_GET[\"case_id\"] )) {\n+\n+    require \"case-reply-view.php\";\n+\n+} else {\n+    require \"case-list-all.php\";\n+}\n+\n+?>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/case-reply-view.php",
          "status": "added",
          "additions": 762,
          "deletions": 0,
          "patch": "@@ -0,0 +1,762 @@\n+<!-- Content Wrapper. Contains page content -->\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+        <h1>\n+            <?= __(\"Customer Support\"); ?>\n+            <a data-toggle=\"modal\" data-target=\"#modalDefaultMdm\" href=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=newCase\" class=\"btn btn-primary\"><?= __(\"New Case\"); ?></a>\n+        </h1>\n+    </section>\n+\n+    <?php \n+\n+        $selectCase = easySelectA(array(\n+            \"table\"     => \"cases as cases\",\n+            \"fields\"    => \"case_id, case_datetime, case_title, case_priority, case_type, case_status, last_reply,\n+                            case_site, case_assigned_to, case_belongs_to,\n+                            concat(assigned_to.emp_firstname, ' ', assigned_to.emp_lastname) as case_assign_name, \n+                            concat(belongs_to.emp_firstname, ' ', belongs_to.emp_lastname) as case_belongs_to_name,\n+                            case_customer, customer_name, customer_phone, customer_email, customer_address,\n+                            case_person, person_full_name, person_phone, person_email, person_address,\n+                            person_type, person_designation, institute_name, institute_type, upazila_name, district_name, division_name\n+                            \",\n+            \"join\"      => array(\n+                \"left join {$table_prefix}users on user_id = case_assigned_to\",\n+                \"left join {$table_prefix}employees as assigned_to on assigned_to.emp_id = user_emp_id\",\n+                \"left join {$table_prefix}employees as belongs_to on belongs_to.emp_id = case_belongs_to\",\n+                \"left join {$table_prefix}persons on person_id = case_person\",\n+                \"left join {$table_prefix}districts on district_id = person_district\",\n+                \"left join {$table_prefix}divisions on division_id = person_division\",\n+                \"left join {$table_prefix}upazilas on upazila_id = person_upazila\",\n+                \"left join {$table_prefix}institute on institute_id = person_institute\",\n+                \"left join {$table_prefix}customers on customer_id = case_customer\",\n+                \n+\n+                \"left join (select\n+                        max(reply_datetime) as last_reply,\n+                        reply_case_id\n+                    from {$table_prefix}case_replies\n+                    where is_trash = 0\n+                    group by reply_case_id\n+                ) as replies on replies.reply_case_id = case_id\"\n+            ),\n+            \"where\"     => array(\n+                \"cases.is_trash = 0 and cases.case_id\"  => $_GET[\"case_id\"]\n+            )\n+        ));\n+\n+        if($selectCase === false) {\n+\n+            echo '<div style=\"margin-top: 20px\" class=\"col-xs-12\"><div class=\"alert alert-danger\">Sorry! No Ticket/ Case found.</div></div>';\n+\n+        } else {\n+\n+            $case = $selectCase[\"data\"][0];\n+\n+    ?>\n+\n+        <script src=\"<?php echo full_website_address(); ?>/assets/3rd-party/tinymce_6.1.2/tinymce.min.js\"></script>\n+        <link rel=\"stylesheet\" href=\"<?php echo full_website_address(); ?>/assets/3rd-party/viewerjs-main/dist/viewer.min.css\">\n+        <script src=\"<?php echo full_website_address(); ?>/assets/3rd-party/viewerjs-main/dist/viewer.min.js\"></script>\n+\n+        <!-- Main content -->\n+        <section class=\"content container-fluid\">\n+            <div class=\"row\">\n+                <div class=\"col-xs-8\">\n+\n+                    <div class=\"case-title\">\n+                        <h1><?php echo $case[\"case_title\"]; ?></h1>\n+                        <p><b>Posted on:</b> <?php echo date(\"d F, Y h:m A\", strtotime($case[\"case_datetime\"])) . \" (\" .  time_elapsed_string($case[\"case_datetime\"])  .\")\"; ?></p>\n+                    </div>\n+                    \n+                    <div class=\"case-replies\">\n+\n+                        <form id=\"submitCaseReply\">\n+\n+                            <textarea name='caseReply' id='replyBox'></textarea>\n+                            <div class=\"box replyForm\">\n+\n+                                <div class=\"box-body\">\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"caseReplyAttachment\">Attachment</label>\n+                                        <input type=\"file\" name=\"caseReplyAttachment[]\" id=\"caseAttachment\" multiple accept=\"image/png, image/jpeg\" class=\"form-control\">\n+                                        <small style='margin-top: 5px; display: block'><b>Note:</b> Max Upload Size: <?php echo $_SETTINGS[\"MAX_UPLOAD_SIZE\"]; ?>MB. Only JPEG and PNG image types are allowed to upload</small>    \n+                                    </div>\n+                                    <div class=\"form-group col-md-3\">\n+                                        <label for=\"replyMode\"><?= __(\"Reply Mode:\"); ?></label>\n+                                        <select name=\"replyMode\" id=\"replyMode\" class=\"form-control\" style=\"width: 100%;\">\n+                                            <?php \n+                                                $mode = array('Public', 'Private');\n+                                                foreach($mode as $mode) {\n+                                                    echo \"<option value='{$mode}'>{$mode}</option>\";\n+                                                }\n+                                            ?>\n+\n+                                        </select>\n+                                    </div>\n+                                    <input type=\"hidden\" name=\"case_id\" value=\"<?php echo safe_entities($_GET[\"case_id\"]); ?>\">\n+                                    <input type=\"hidden\" name=\"caseType\" value=\"<?php echo $case[\"case_type\"]; ?>\">\n+                                    <div class=\"form-group col-md-2\">\n+                                        <br/>\n+                                        <button class='btn btn-primary' type='submit'>Submit</button>\n+                                    </div>\n+\n+                                </div>\n+                                    \n+                                    \n+                            </div>\n+\n+                        </form>\n+\n+                        <?php \n+\n+                            $selectReplies = easySelectA(array(\n+                                \"table\"     => \"case_replies as reply\",\n+                                \"fields\"    => \"reply_id, reply_type, reply_datetime, reply_details, reply_attachment,\n+                                                if(emp_firstname is null, customer_name, concat(emp_firstname, ' ', emp_lastname)) as reply_by,\n+                                                reply_by_customer\n+                                                \",\n+                                \"join\"      => array(\n+                                    \"left join {$table_prefix}users on user_id = reply_by_agent\",\n+                                    \"left join {$table_prefix}employees on emp_id = user_emp_id\",\n+                                    \"left join {$table_prefix}customers on customer_id = reply_by_customer\"\n+                                ),\n+                                \"where\"     => array(\n+                                    \"reply.is_trash = 0 and reply_case_id\"    => $_GET[\"case_id\"]\n+                                ),\n+                                \"orderby\"   => array(\n+                                    \"reply_id\"  => \"DESC\"\n+                                )\n+                            ));\n+\n+                            if($selectReplies !== false) {\n+\n+                                foreach($selectReplies[\"data\"] as $reply) {\n+\n+                                    $time_elaps = time_elapsed_string($reply[\"reply_datetime\"]) . \" (\" .  date(\"d F, Y h:m A\", strtotime($reply[\"reply_datetime\"]))  .\")\";\n+\n+                                    $attachment = \"\";\n+                                    if($reply[\"reply_attachment\"] !== null) {\n+\n+                                        $listAttachment = unserialize( html_entity_decode($reply[\"reply_attachment\"]) );\n+\n+                                        foreach($listAttachment as $image) {\n+                                            $attachment .= \"<li><img width='80' height='80' src='\". full_website_address() .\"/assets/upload/{$image}'></li>\";\n+                                        }\n+\n+                                    }\n+\n+\n+                                    // Define user and reply type\n+                                    $userType = \"<span><i class='fa fa-user'></i> Staff</span>\";\n+                                    $replyType = \"<span><i class='fa fa-globe'></i> Public</span>\";\n+                                    $replyClass = 'reply';\n+                                    $replyTypeMoveTo = 'Private';\n+                                    if( $reply[\"reply_by_customer\"] !== null ) {\n+                                        $userType = \"<span><i class='fa fa-user'></i> Customer</span>\";\n+                                    }\n+\n+                                    if( $reply[\"reply_type\"] === \"Private\" ) {\n+                                        $replyType = \"<span><i class='fa fa-lock'></i> Private</span>\";\n+                                        $replyClass = 'reply private';\n+                                        $replyTypeMoveTo = 'Public';\n+                                    }\n+\n+                                    // If there have any attachment then show them\n+                                    if($attachment !== \"\") {\n+                                        $attachment = \"<div class='attachment'>\n+                                                            <p>Attachment:</p>\n+                                                            <ul class='imageAttachment'>\n+                                                                {$attachment}\n+                                                            </ul>\n+                                                        </div>\";\n+                                    }\n+                                    \n+                                    \n+                                    echo \"<div class='{$replyClass}'>\n+                                            \n+                                            <div class='title'>\n+                                                <span>{$reply[\"reply_by\"]}</span>\n+                                                <span>\n+                                                    {$time_elaps}\n+                                                \n+                                                    <div class='btn-group'>\n+                                                        \n+                                                        <button type='button' class='btn btn-link' data-toggle='dropdown'>\n+                                                            <i class='fa fa-ellipsis-v'></i>\n+                                                        </button>\n+                                                        <ul class='dropdown-menu dropdown-menu-right' role='menu'>\n+\n+                                                            <li><a class='deleteEntry' removeParent='.reply' href='\". full_website_address() . \"/xhr/?module=customer-support&page=deleteCaseReply' data-to-be-deleted={$reply[\"reply_id\"]}'> Delete</a></li>\n+                                                            <li> <a class='updateEntry' href='\". full_website_address() . \"/xhr/?module=customer-support&page=updateCaseReplyType' data-to-be-updated='{$reply[\"reply_id\"]}'>Move to {$replyTypeMoveTo} </a> </li>\n+\n+                                                        </ul>\n+\n+                                                    </div>\n+                                                </span>\n+\n+                                            </div>\n+                                            <div class='type'>\n+                                                {$userType}\n+                                                {$replyType}\n+                                            </div>\n+\n+                                            <div class='reply-details'>\n+                                                \". str_replace('\\n', '</br>', html_entity_decode($reply[\"reply_details\"]) ) .\"\n+                                            </div>\n+                                            $attachment\n+                                            \n+\n+                                        </div>\";\n+\n+                                }\n+\n+                            }\n+\n+                        ?>\n+\n+                    </div>\n+      \n+\n+                </div>\n+                <!-- col-xs-8-->\n+\n+                <div class=\"col-xs-4\">\n+\n+                    <div class=\"box box-primary\">\n+\n+                        <div class=\"box-header with-border\">\n+                            <h3 class=\"box-title\"><?php echo __(\"Contact Details\"); ?></h3>\n+                        </div> <!-- box box-default -->\n+\n+                        <div class=\"box-body box-profile\">\n+\n+                            <?php if( $case[\"case_person\"] !== null ) { ?>\n+                        \n+                                <h3 class=\"profile-username\">\n+                                    <?php echo $case[\"person_full_name\"]; ?>\n+                                    <small><a data-toggle=\"modal\" href=\"<?php echo full_website_address(); ?>/xhr/?icheck=false&module=marketing&page=editPerson&id=<?php echo $case[\"case_person\"]; ?>\" data-target=\"#modalDefault\"><i class=\"fa fa-edit\"></i></a></small>\n+                                </h3>\n+                                <p>\n+                                    <?php echo $case[\"person_type\"]. ( $case[\"person_designation\"] === null ? \"\" : \" ({$case[\"person_designation\"]})\" ) ; ?>,\n+                                    <?php echo $case[\"institute_name\"]; ?>\n+                                </p>\n+\n+                                \n+                                \n+                                <strong><i class=\"fa fa-book margin-r-5\"></i> Contact</strong>\n+                                <p class=\"text-muted\">\n+                                    <?php echo $case[\"person_phone\"] . \", \" . $case[\"person_email\"];  ?>\n+                                </p>\n+\n+                                <a data-toggle=\"modal\" href=\"<?php echo full_website_address(); ?>/xhr/?module=marketing&page=viewSpecimenProduct&id=<?php echo $case[\"case_person\"]; ?>\"  data-target=\"#modalDefault\"> View Specimen Copies</a>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-map-marker margin-r-5\"></i> Address</strong>\n+                                <p class=\"text-muted\"><?php echo $case[\"person_address\"] . \", \" . $case[\"upazila_name\"] . \", \" . $case[\"district_name\"] . \", \" . $case[\"division_name\"]; ?></p>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-support margin-r-5\"></i> Recent Case/ Tickets</strong>\n+                                \n+                                \n+                                <?php \n+                                    $selectCaseForThisPerson = easySelectA(array(\n+                                        \"table\"     => \"cases\",\n+                                        \"fields\"    => \"case_id, case_title, case_status\",\n+                                        \"where\"     => array(\n+                                            \"is_trash = 0 and case_id != {$_GET[\"case_id\"]} and case_person\" => $case[\"case_person\"]\n+                                        ),\n+                                        \"orderby\"   => array(\n+                                            \"case_id\"   => \"DESC\"\n+                                        ),\n+                                        \"limit\" => array(\n+                                            \"start\"     => 0,\n+                                            \"length\"    => 5\n+                                        )\n+                                    ));\n+\n+                                    if($selectCaseForThisPerson !== false) {\n+                                        foreach($selectCaseForThisPerson[\"data\"] as $personCase) {\n+                                            echo \"<p style='margin: 5px;'><a href='\". full_website_address() .\"/customer-support/case-list/?case_id={$personCase['case_id']}'>{$personCase['case_title']}</a> ({$personCase['case_status']})</p>\";\n+                                            \n+                                        }\n+                                    } else {\n+                                        echo '<p class=\"text-muted\">Sorry! No Ticket/ Cases found.</p>';\n+                                    }\n+\n+                                ?>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-phone margin-r-5\"></i> Call Log</strong>\n+\n+                                <?php\n+\n+                                    $selectCalls = easySelectA(array(\n+                                        \"table\"     => \"calls\",\n+                                        \"fields\"    => \"count(*) as totalCall, max(call_datetime) as lastCallTime\",\n+                                        \"where\"     => array(\n+                                            \"client_identity LIKE\" => explode(\",\", $case[\"person_phone\"])[0] . \"%\"\n+                                        ),\n+                                        \"groupby\"   => \"client_identity\"\n+                                    ));\n+\n+\n+                                    if($selectCalls !== false) {\n+\n+                                        $callStats = $selectCalls[\"data\"][0];\n+                                        echo '<p class=\"text-muted\">\n+                                                <span class=\"margin-r-5\"><b>Call Count:</b> '. $callStats[\"totalCall\"] .';</span> \n+                                                <span class=\"margin-r-5\"><b>Last Call:</b> '. time_elapsed_string($callStats[\"lastCallTime\"]) .' ('. $callStats[\"lastCallTime\"] .')</span> \n+                                            </p>';\n+                                    } else {\n+                                        echo '<p class=\"text-muted\">Sorry! No calls found.</p>';\n+                                    }\n+\n+                                ?>\n+\n+                                \n+\n+          \n+                            <?php } else if( $case[\"case_customer\"] !== null )  { ?>\n+\n+                                <h3 class=\"profile-username\">\n+                                    <?php echo $case[\"customer_name\"]; ?>\n+                                    <small><a data-toggle=\"modal\" href=\"<?php echo full_website_address(); ?>/xhr/?icheck=false&module=peoples&page=editCustomer&id=<?php echo $case[\"case_customer\"]; ?>\" data-target=\"#modalDefault\"><i class=\"fa fa-edit\"></i></a></small>\n+                                </h3>\n+                                \n+                                \n+                                <strong><i class=\"fa fa-book margin-r-5\"></i> Contact</strong>\n+                                <p class=\"text-muted\">\n+                                    <?php echo $case[\"customer_phone\"] . \", \" . $case[\"customer_email\"];  ?>\n+                                </p>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-map-marker margin-r-5\"></i> Address</strong>\n+                                <p class=\"text-muted\"><?php echo $case[\"customer_address\"]; ?></p>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-support margin-r-5\"></i> Recent Case/ Tickets</strong>\n+                                \n+                                \n+                                <?php \n+                                    $selectCaseForThisCustomer = easySelectA(array(\n+                                        \"table\"     => \"cases\",\n+                                        \"fields\"    => \"case_id, case_title, case_status\",\n+                                        \"where\"     => array(\n+                                            \"is_trash = 0 and case_id != {$_GET[\"case_id\"]} and case_customer\" => $case[\"case_customer\"]\n+                                        ),\n+                                        \"orderby\"   => array(\n+                                            \"case_id\"   => \"DESC\"\n+                                        ),\n+                                        \"limit\" => array(\n+                                            \"start\"     => 0,\n+                                            \"length\"    => 5\n+                                        )\n+                                    ));\n+\n+                                    if($selectCaseForThisCustomer !== false) {\n+                                        foreach($selectCaseForThisCustomer[\"data\"] as $customerCase) {\n+                                            echo \"<p style='margin: 5px;'><a href='\". full_website_address() .\"/customer-support/case-list/?case_id={$personCase['case_id']}'>{$personCase['case_title']}</a> ({$personCase['case_status']})</p>\";\n+                                            \n+                                        }\n+                                    } else {\n+                                        echo '<p class=\"text-muted\">Sorry! No Ticket/ Cases found.</p>';\n+                                    }\n+\n+                                ?>\n+\n+                                <hr>\n+\n+                                <strong><i class=\"fa fa-phone margin-r-5\"></i> Call Log</strong>\n+\n+                                <?php\n+\n+                                    $selectCalls = easySelectA(array(\n+                                        \"table\"     => \"calls\",\n+                                        \"fields\"    => \"count(*) as totalCall, max(call_datetime) as lastCallTime\",\n+                                        \"where\"     => array(\n+                                            \"client_identity LIKE\" => explode(\",\", $case[\"customer_phone\"])[0] . \"%\"\n+                                        ),\n+                                        \"groupby\"   => \"client_identity\"\n+                                    ));\n+\n+\n+                                    if($selectCalls !== false) {\n+\n+                                        $callStats = $selectCalls[\"data\"][0];\n+                                        echo '<p class=\"text-muted\">\n+                                                <span class=\"margin-r-5\"><b>Call Count:</b> '. $callStats[\"totalCall\"] .';</span> \n+                                                <span class=\"margin-r-5\"><b>Last Call:</b> '. time_elapsed_string($callStats[\"lastCallTime\"]) .' ('. $callStats[\"lastCallTime\"] .')</span> \n+                                            </p>';\n+                                    } else {\n+                                        echo '<p class=\"text-muted\">Sorry! No calls found.</p>';\n+                                    }\n+\n+                                ?>\n+\n+                            <?php } else {\n+                                echo '<p class=\"text-muted\">Sorry! No data found.</p>';\n+                            }\n+                            ?>\n+\n+                        </div>\n+\n+                    </div>\n+\n+                    <form method=\"post\" role=\"form\" id=\"inlineForm\" action=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=updateCase\" enctype=\"multipart/form-data\">\n+                        <div class=\"box\">\n+\n+                            <div class=\"box-header with-border\">\n+                                <h3 class=\"box-title\"><?php echo __(\"Case Properties\"); ?></h3>\n+                            </div> <!-- box box-default -->\n+\n+                            <div class=\"box-body\">\n+\n+                                <div class=\"form-group required\">\n+                                    <label for=\"caseTitle\"><?= __(\"Title:\"); ?></label>\n+                                    <input type=\"text\" name=\"caseTitle\" id=\"caseTitle\" value=\"<?php echo $case[\"case_title\"]; ?>\" class=\"form-control\">\n+                                </div>\n+\n+                                <div class=\"row\">\n+\n+                                    <div class=\"form-group col-md-6 required\">\n+                                        <label for=\"casePriority\"><?= __(\"Prority:\"); ?></label>\n+                                        <select name=\"casePriority\" id=\"casePriority\" class=\"form-control\" style=\"width: 100%;\" required>\n+                                            <option value=\"\"><?= __(\"Select Prority\"); ?>....</option>\n+                                            <?php \n+                                                $priority = array('Low', 'Medium', 'High', 'Critical');\n+                                                foreach($priority as $priority) {\n+                                                    $selected = $case[\"case_priority\"] === $priority ? \"selected\" : \"\";\n+                                                    echo \"<option {$selected} value='{$priority}'>{$priority}</option>\";\n+                                                }\n+                                            ?>\n+\n+                                        </select>\n+                                    </div>\n+\n+                                    <div class=\"form-group col-md-6 required\">\n+                                        <label for=\"caseType\"><?= __(\"Type:\"); ?></label>\n+                                        <select name=\"caseType\" id=\"caseType\" class=\"form-control\" style=\"width: 100%;\" required>\n+                                            <option value=\"\"><?= __(\"Select Type\"); ?>....</option>\n+                                            <?php \n+                                                $type = array('Refund Request', 'Packaging Issues', 'Delivery Issue', 'Technical Issues', 'Query', 'Damaged Item', 'Exchange', 'Others');\n+                                                foreach($type as $type) {\n+                                                    $selected = $case[\"case_type\"] === $type ? \"selected\" : \"\";\n+                                                    echo \"<option {$selected} value='{$type}'>{$type}</option>\";\n+                                                }\n+                                            ?>\n+\n+                                        </select>\n+                                    </div>\n+\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"caseStatus\"><?= __(\"Status:\"); ?></label>\n+                                        <select name=\"caseStatus\" id=\"caseStatus\" class=\"form-control\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"Select Status\"); ?>....</option>\n+                                            <?php \n+                                                $status = array('Pending', 'Open', 'Replied', 'Customer Responded', 'Solved', 'Informed', 'On Hold');\n+                                                foreach($status as $status) {\n+                                                    $selected = $case[\"case_status\"] === $status ? \"selected\" : \"\";\n+                                                    echo \"<option {$selected} value='{$status}'>{$status}</option>\";\n+                                                }\n+                                            ?>\n+\n+                                        </select>\n+                                    </div>\n+\n+                                    <div class=\"form-group col-md-6\">\n+                                        <label for=\"caseSite\"><?= __(\"Site:\"); ?></label>\n+                                        <input type=\"text\" name=\"caseSite\" id=\"caseSite\" value=\"<?php echo $case[\"case_site\"] ?>\" class=\"form-control\">\n+                                    </div>\n+\n+                                </div>\n+\n+\n+                                <div class=\"form-group\">\n+                                    <label for=\"caseCustomer\"><?= __(\"Customer:\"); ?></label>\n+                                    <select name=\"caseCustomer\" id=\"caseCustomer\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=customerList\" style=\"width: 100%;\">\n+                                        <option value=\"\"><?= __(\"Select Customer\"); ?>....</option>\n+                                        <?php \n+                                            if($case[\"case_customer\"] !== null) {\n+                                                echo \"<option selected value='{$case[\"case_customer\"]}'>{$case[\"customer_name\"]}</option>\";\n+                                            }\n+                                        ?>\n+                                    </select>\n+                                </div>\n+\n+                                <div class=\"form-group\">\n+                                    <label for=\"casePerson\"><?= __(\"Person/ Lead:\"); ?></label>\n+                                    <select name=\"casePerson\" id=\"casePerson\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=personList\" style=\"width: 100%;\">\n+                                        <option value=\"\"><?= __(\"Select Person/ Lead\"); ?>....</option>\n+                                        <?php \n+                                            if($case[\"case_person\"] !== null) {\n+                                                echo \"<option selected value='{$case[\"case_person\"]}'>{$case[\"person_full_name\"]}</option>\";\n+                                            }\n+                                        ?>\n+                                    </select>\n+                                </div>\n+\n+                                <div class=\"form-group\">\n+                                    <label for=\"caseAssignTo\"><?= __(\"Assign To:\"); ?></label>\n+                                    <select name=\"caseAssignTo\" id=\"caseAssignTo\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=userList\" style=\"width: 100%;\">\n+                                        <option value=\"\"><?= __(\"Select user\"); ?>....</option>\n+                                        <?php \n+                                            if($case[\"case_assigned_to\"] !== null) {\n+                                                echo \"<option selected value='{$case[\"case_assigned_to\"]}'>{$case[\"case_assign_name\"]}</option>\";\n+                                            }\n+                                        ?>\n+                                    </select>\n+                                </div>\n+\n+                                <div class=\"form-group\">\n+                                    <label for=\"caseBelongsTo\"><?= __(\"Belongs To:\"); ?></label>\n+                                    <select name=\"caseBelongsTo\" id=\"caseBelongsTo\" class=\"form-control select2Ajax\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=employeeList\" style=\"width: 100%;\">\n+                                        <option value=\"\"><?= __(\"Select Employee\"); ?>....</option>\n+                                        <?php \n+                                            if($case[\"case_belongs_to\"] !== null) {\n+                                                echo \"<option selected value='{$case[\"case_belongs_to\"]}'>{$case[\"case_belongs_to_name\"]}</option>\";\n+                                            }\n+                                        ?>\n+                                    </select>\n+                                </div>\n+\n+                                <input type=\"hidden\" name=\"case_id\" value=\"<?php echo safe_entities($_GET[\"case_id\"]); ?>\">\n+\n+                            </div>\n+\n+                            <div class=\"box-footer\">\n+                                <button type=\"submit\" id=\"jqAjaxButton\" class=\"btn btn-primary\"><?php echo __(\"Update Case\"); ?></button>\n+                            </div>\n+\n+                        </div>\n+                \n+                    </form>\n+                </div>\n+\n+\n+            </div>\n+            <!-- row-->\n+        </section> <!-- Main content End tag -->\n+\n+    <?php  } ?>\n+\n+\n+</div>\n+<!-- /.content-wrapper -->\n+\n+\n+<style>\n+\n+    .case-title {\n+        border-top-left-radius: 10px;\n+        border-top-right-radius: 10px;\n+        padding: 10px;\n+        padding-left: 20px;\n+        position: sticky;\n+        top: 0;\n+        background-color: #fff;\n+        box-shadow: 0 2px 2px -2px rgb(34 47 62 / 10%), 0 8px 8px -4px rgb(34 47 62 / 7%);\n+        z-index: 1;\n+    }\n+\n+    .case-title h1 {\n+        font-size: 24px;\n+        font-weight: bold;\n+        margin: 0;\n+        padding: 0;\n+        color: #000\n+    }\n+    .case-title p {\n+        padding-top: 5px;\n+        font-size: 14px;\n+        color: #767676;\n+    }\n+\n+    .case-replies {\n+        height: 720px;\n+        overflow: auto;\n+    }\n+\n+    .case-replies::-webkit-scrollbar {\n+        width: 4px;\n+    }\n+\n+    .case-replies::-webkit-scrollbar-track {\n+        -webkit-box-shadow: inset 0 0 6px #598ecd; \n+        border-radius: 10px;\n+    }\n+\n+    .case-replies::-webkit-scrollbar-thumb {\n+        border-radius: 10px;\n+        -webkit-box-shadow: inset 0 0 6px #598ecd; \n+    }\n+\n+    .case-replies .reply {\n+        padding: 20px;\n+        padding-bottom: 30px;\n+        margin-top: 10px;\n+        margin-bottom: 10px;\n+        border-radius: 5px;\n+        background-color: #fff;\n+        border: 1px solid #ececec;\n+    }\n+\n+    .case-replies .private {\n+        background-color: #f9ecec;\n+        border: 1px solid #ececec;\n+    }\n+\n+    .reply .title span:first-child {\n+        font-size: 15px;\n+        font-weight: 600;\n+        color: #598ecd;\n+    }\n+    .reply .title span:last-child {\n+        float: right;\n+        color: #767676;\n+    }\n+\n+    .reply .type {\n+        color: #767676;\n+        font-size: 13px;\n+        margin-top: 5px;\n+    }\n+\n+    .reply .type span:first-child {\n+        margin-right: 10px;\n+    }\n+\n+    .reply .type span i {\n+        margin-right: 5px;\n+    }\n+\n+    .reply .reply-details {\n+        font-size: 14px;\n+        color: #000;\n+        margin-top: 20px;\n+        /* white-space: pre-line; */\n+    }\n+\n+    .reply .attachment {\n+        margin-top: 30px;\n+        padding-top: 5px;\n+        border-top: 1px solid #ece8e8;\n+    }\n+\n+    .reply .attachment p {\n+        font-weight: bold;\n+    }\n+\n+    .imageAttachment {\n+        list-style-type: none;\n+    }\n+\n+    .imageAttachment li {\n+        display: inline;\n+        margin: 5px;\n+        cursor: pointer;\n+    }\n+\n+    .tox-tinymce {\n+        border-bottom-right-radius: 0;\n+        border-bottom-left-radius: 0;\n+    }\n+\n+    .replyForm {\n+        border-bottom-left-radius: 10px;\n+        border-bottom-right-radius: 10px;\n+        box-shadow: none;\n+        border-top: none;\n+        margin-top: 5px;\n+        padding-top: 10px;\n+    }\n+\n+    hr {\n+        margin: 15px 0;\n+    }\n+\n+\n+</style>\n+\n+<script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=caseList\";\n+    BMS.FUNCTIONS.dateRangePickerPreDefined({selector: \"#caseAddedDate\"});\n+\n+    // Initialize the editor\n+    tinymce.init({\n+        selector: '#replyBox',\n+        menubar: false,\n+        plugins: 'link',\n+        toolbar: 'undo redo | styles | bold italic | alignleft aligncenter alignright alignjustify | link | outdent indent',\n+        statusbar: false,\n+        height : 350,\n+        default_link_target: \"_blank\",\n+        branding: false,\n+        invalid_elements : 'em,input,textarea,button',\n+    });\n+\n+    // Initialz all attachment to viewer\n+    $('.imageAttachment').each((index, item) => {\n+        //console.log(item);\n+        new Viewer( item );\n+    });\n+\n+    /** Add reply to cases */\n+    $(document).on(\"submit\", \"#submitCaseReply\", function(e) {\n+\n+        e.preventDefault();\n+\n+        if( $(\"#replyBox\").val() === \"\" ) {\n+            return alert(\"Please enter reply\");\n+        }\n+\n+        var formData = new FormData(this);       // Get all form data and store into formData \n+        /**\n+         * Disable all input field until ajax request complete. \n+         */\n+        $(this).find(\"input, select, button, textarea\").prop(\"disabled\", true);\n+\n+        var that = this;\n+\n+        $.ajax({\n+            url: full_website_address + \"/xhr/?module=customer-support&page=addCaseReply\",\n+            type: 'POST',\n+            data: formData,\n+            cache: false,\n+            contentType: false,\n+            processData: false,\n+            success: function (data, status) {\n+\n+                if (status == \"success\") {\n+\n+\n+                    if (data.indexOf(\"danger\") > 1) {\n+                        BMS.fn.alertError($(data).text());\n+                    } else {\n+                        \n+                        // clear content\n+                        tinymce.get(\"replyBox\").setContent('');\n+\n+                        // Insert the reply\n+                        $(data).insertAfter(\"#submitCaseReply\").hide().show('fast');\n+\n+                    }\n+\n+                    $(that).find(\"input, select, button, textarea\").prop(\"disabled\", false);\n+\n+                }\n+\n+            }\n+\n+        });\n+\n+    });\n+\n+\n+</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/dashboard.php",
          "status": "added",
          "additions": 206,
          "deletions": 0,
          "patch": "@@ -0,0 +1,206 @@\n+\t<!-- Content Wrapper. Contains page content -->\n+\t<div class=\"content-wrapper\">\n+\t\t<!-- Content Header (Page header) -->\n+\t\t<section class=\"content-header\">\n+\t\t\t<h1>\n+\t\t\t\t<?=__(\"Customer Support Dashboard\");?>\n+\t\t\t\t<small></small>\n+\t\t\t</h1>\n+\t\t</section>\n+\n+\t\t<!-- Main content -->\n+\t\t<section class=\"content\">\n+\t\t\n+\t\t\t<!-- Chart -->\n+\t\t\t<div class=\"row\">\n+\t\t\t\t<div class=\"col-lg-12\">\n+\t\t\t\t\t<div class=\"box box-primary\">\n+\t\t\t\t\t\t<div class=\"box-header with-border\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?php echo __(\"Call History Overview\"); ?></h3>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<div class=\"chart\">\n+\t\t\t\t\t\t\t\t<canvas id=\"overviewChart\" style=\"height: 380px\"></canvas>\n+\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t</div>\n+\n+\t\t\t<div class=\"row\">\n+\t\t\t\t<!-- Top Customer of this product -->\n+\t\t\t\t<div class=\"col-sm-12 col-lg-12\">\n+                    <div class=\"box\">\n+                        <div class=\"box-header\">\n+                            <h3 class=\"box-title\"><?= __(\"Agent Wise Statistics\"); ?></h3>\n+                        </div>\n+                        <!-- Box header -->\n+                        <div class=\"box-body\">\n+                            <table dt-height=\"30vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=agentWiseCallStatistics\" class=\"dataTableWithAjaxExtend addToSMSBox table table-bordered table-striped table-hover\" width=\"100%\">\n+                                <thead>\n+                                    <tr>\n+                                        <th></th>\n+                                        <th><?php echo __(\"Agent Name\"); ?></th>\n+                                        <th><?php echo __(\"Talk Time\"); ?></th>\n+                                        <th><?php echo __(\"ATT\"); ?></th>\n+                                        <th><?php echo __(\"Answered\"); ?></th>\n+                                        <th><?php echo __(\"Not Answred\"); ?></th>\n+                                        <th><?php echo __(\"Busy\"); ?></th>\n+                                        <th><?php echo __(\"Missed\"); ?></th>\n+                                        <th><?php echo __(\"Unreachable\"); ?></th>\n+                                        <th><?php echo __(\"Total\"); ?></th>\n+                                    </tr>\n+                                </thead>\n+                \n+                                <tfoot>\n+                                    <tr>\n+                                        <th></th>\n+                                        <th class=\"no-print\">\n+                                            <input style=\"width: 160px;\" type=\"text\" placeholder=\"<?= __(\"Select Date\"); ?>\" name=\"callDateRange\" id=\"callDateRange\" class=\"form-control\" autocomplete=\"off\">\n+                                        </th>\n+                                        <th><?php echo __(\"Talk Time\"); ?></th>\n+                                        <th><?php echo __(\"ATT\"); ?></th>\n+                                        <th><?php echo __(\"Answered\"); ?></th>\n+                                        <th><?php echo __(\"Not Answred\"); ?></th>\n+                                        <th><?php echo __(\"Busy\"); ?></th>\n+                                        <th><?php echo __(\"Missed\"); ?></th>\n+                                        <th><?php echo __(\"Unreachable\"); ?></th>\n+                                        <th><?php echo __(\"Total\"); ?></th>\n+                                    </tr>\n+                                </tfoot>\n+                            </table>\n+                        </div>\n+                        <!-- box body-->\n+                    </div>\n+                    <!-- box -->\n+\t\t\t\t</div> <!-- /.Col -->\n+\n+        \n+\n+\t\t\t\t\n+\n+\t\t\t</div> <!-- /.Row -->\n+\n+\n+\t\t</section> <!-- Main content End tag -->\n+\t\t<!-- /.content -->\n+\t</div>\n+\t<!-- /.content-wrapper -->\n+\n+\t<?php \n+\n+\t\t$callData = easySelectD(\"\n+            SELECT db_date, call_status, if(totalCall is null, 0, totalCall) as totalCall FROM `time_dimension`\n+            left join ( SELECT\n+                    date(call_datetime) as call_date,\n+                    count(*) as totalCall,\n+                    call_status\n+                from {$table_prefix}calls\n+                group by date(call_datetime), call_status\n+            ) as calls on call_date = db_date\n+            where db_date BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY) and CURRENT_DATE()\n+\t\t\");\n+        \n+\n+        $dates = array();\n+        $unreachableCall = array();\n+        $busyCall = array();\n+        $notAnsweredCall = array();\n+        $answeredCall = array();\n+\n+\n+        if($callData !== false) {\n+\n+            foreach($callData[\"data\"] as $key => $call){\n+\n+                if( !in_array($call[\"db_date\"], $dates) ) {\n+                    array_push($dates, $call[\"db_date\"]);\n+                }\n+\n+                // If call status empty then set zero in all call type\n+                if( empty($call[\"call_status\"]) ) {\n+                    array_push($unreachableCall, 0);\n+                    array_push($busyCall, 0);\n+                    array_push($notAnsweredCall, 0);\n+                    array_push($answeredCall, 0);\n+                }\n+\n+                if( $call[\"call_status\"] === \"Unreachable\" ) {\n+\n+                    array_push($unreachableCall, $call[\"totalCall\"]);\n+\n+                } else if( $call[\"call_status\"] === \"Busy\" ) {\n+\n+                    array_push($busyCall, $call[\"totalCall\"]);\n+\n+                } else if( $call[\"call_status\"] === \"Not Answered\" ) {\n+\n+                    array_push($notAnsweredCall, $call[\"totalCall\"]);\n+\n+                } else if( $call[\"call_status\"] === \"Answered\" ) {\n+\n+                    array_push($answeredCall, $call[\"totalCall\"]);\n+                    \n+                }\n+                \n+            }\n+\n+        }\n+\n+\t\t$callDates = __(json_encode($dates));\n+\t\t$unreachableCall = json_encode($unreachableCall);\n+        $busyCall = json_encode($busyCall);\n+        $notAnsweredCall = json_encode($notAnsweredCall);\n+        $answeredCall = json_encode($answeredCall);\n+\n+\t?>\n+\n+\t<script src=\"<?php echo full_website_address(); ?>/assets/3rd-party/chart.js/Chart.min.js\"></script>\n+\n+<script>\n+\n+var ctx = document.getElementById('overviewChart');\n+var myLineChart = new Chart(ctx, {\n+\ttype: 'line',\n+\tdata: {\n+\t\tlabels: <?php echo $callDates; ?>,\n+\t\tdatasets: [\n+\t\t\t{\n+\t\t\t\tlabel: \"<?= __(\"Answered\"); ?>\",\n+\t\t\t\tborderColor: \"green\",\n+\t\t\t\tborderWidth: 2,\n+\t\t\t\tdata: <?php echo $answeredCall; ?>\n+\t\t\t},\n+            {\n+\t\t\t\tlabel: \"<?= __(\"Not Answered\"); ?>\",\n+\t\t\t\tborderColor: \"red\",\n+\t\t\t\tborderWidth: 2,\n+\t\t\t\tdata: <?php echo $notAnsweredCall; ?>\n+\t\t\t},\n+            {\n+\t\t\t\tlabel: \"<?= __(\"Busy\"); ?>\",\n+\t\t\t\tborderColor: \"blue\",\n+\t\t\t\tborderWidth: 2,\n+\t\t\t\tdata: <?php echo $busyCall; ?>\n+\t\t\t},\n+            {\n+\t\t\t\tlabel: \"<?= __(\"Unreachable\"); ?>\",\n+\t\t\t\tborderColor: \"gray\",\n+\t\t\t\tborderWidth: 2,\n+\t\t\t\tdata: <?php echo $unreachableCall; ?>\n+\t\t\t}\n+\t\t]\n+\t},\n+\toptions: {\n+\t\tresponsive: true,\n+\t\ttooltips: {\n+\t\t\tmode: 'index',\n+\t\t\tintersect: false\n+\t\t}\n+\t}\n+});\n+\n+BMS.FUNCTIONS.dateRangePickerPreDefined({selector: \"#callDateRange\"});\n+\n+</script>"
        },
        {
          "filename": "module/customer-support/introductory.php",
          "status": "added",
          "additions": 104,
          "deletions": 0,
          "patch": "@@ -0,0 +1,104 @@\n+<?php \n+/**\n+ * Module Name: Customer Support\n+ * Module URI: https://bumsys.net\n+ * Description: A free and open source call center software.\n+ * Version: 1.1.0\n+ * Developer: Khurshid Alam\n+ * Developer URI: https://kmk.alam.dev\n+ */\n+\n+\n+// Declaring the module menu\n+$menu[\"Customer Support\"] = array (\n+    \"t_link\"    => \"#\",\n+    \"title\"     => \"\",\n+    \"t_icon\"    => \"fa fa-assistive-listening-systems\"\n+);\n+$menu[\"Customer Support\"][\"Dashboard\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/dashboard/\",\n+    \"title\"     => \"Customer Support Dashboard\",\n+    \"t_icon\"    => \"fa fa-dashboard\",\n+    \"dload\"     => true, // This will disable ajax loading\n+    \"__?\"       => current_user_can(\"customer_support_dashboard.View\")\n+);\n+$menu[\"Customer Support\"][\"Call Center\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/call-center/\",\n+    \"title\"     => \"Call Center Dashboard\",\n+    \"t_icon\"    => \"fa fa-headphones\",\n+    \"dload\"     => true,\n+    \"__?\"       => current_user_can(\"customer_support_call_center.View\")\n+);\n+$menu[\"Customer Support\"][\"Call Center Old\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/call-center-old/\",\n+    \"title\"     => \"Call Center Dashboard\",\n+    \"t_icon\"    => \"fa fa-headphones\",\n+    \"dload\"     => true,\n+    \"__?\"       => current_user_can(\"customer_support_call_center.View\")\n+);\n+$menu[\"Customer Support\"][\"Voice Message\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/voice-message/\",\n+    \"title\"     => \"Voice Brodcasting System\",\n+    \"t_icon\"    => \"fa fa-volume-up\",\n+    \"dload\"     => true,\n+    \"__?\"       => current_user_can(\"customer_support_voice_message.View || customer_support_voice_message.Add || customer_support_voice_message.Edit || customer_support_voice_message.Delete\")\n+);\n+$menu[\"Customer Support\"][\"Case List\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/case-list/\",\n+    \"title\"     => \"Case/ Ticket List\",\n+    \"t_icon\"    => \"fa fa-exclamation-circle\",\n+    \"__?\"       => current_user_can(\"customer_support_cases.View || customer_support_cases.Add || customer_support_cases.Edit || customer_support_cases.Delete\")\n+);\n+$menu[\"Customer Support\"][\"My Call History\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/my-call-history/\",\n+    \"title\"     => \"My Call History\",\n+    \"t_icon\"    => \"fa fa-headphones\",\n+    \"__?\"       => current_user_can(\"customer_support_my_call_history.View || customer_support_my_call_history.Add || customer_support_my_call_history.Edit || customer_support_my_call_history.Delete\")\n+);\n+$menu[\"Customer Support\"][\"All Call History\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/all-call-history/\",\n+    \"title\"     => \"All Call History\",\n+    \"t_icon\"    => \"fa fa-phone\",\n+    \"__?\"       => current_user_can(\"customer_support_all_call_history.View || customer_support_all_call_history.Add || customer_support_all_call_history.Edit || customer_support_all_call_history.Delete\")\n+);\n+$menu[\"Customer Support\"][\"SMS\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/sms-list/\",\n+    \"title\"     => \"SMS List\",\n+    \"t_icon\"    => \"fa fa-comment\",\n+    \"__?\"       => current_user_can(\"customer_support_sms.View || customer_support_sms.Add || customer_support_sms.Edit || customer_support_sms.Delete\")\n+);\n+$menu[\"Customer Support\"][\"Notes/ Feedback\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/note-list/\",\n+    \"title\"     => \"Notes/ Feedback List\",\n+    \"t_icon\"    => \"fa fa-sticky-note\",\n+    \"__?\"       => current_user_can(\"customer_support_note.View || customer_support_note.Add || customer_support_note.Edit || customer_support_note.Delete\")\n+);\n+$menu[\"Customer Support\"][\"Representative\"] = array (\n+    \"t_link\"    => full_website_address() . \"/customer-support/representative-list/\",\n+    \"title\"     => \"Representative List\",\n+    \"t_icon\"    => \"fa fa-user\",\n+    \"__?\"       => current_user_can(\"customer_support_representative.View || customer_support_representative.Add || customer_support_representative.Edit || customer_support_representative.Delete\")\n+);\n+\n+\n+// Add menu in specific position\n+add_menu($menu, 7);\n+\n+\n+// Permissions\n+add_permission(\n+    array(\n+        \"customer_support_dashboard\" => array(\"View\"),\n+        \"customer_support_call_center\" => array(\"View\"),\n+        \"customer_support_cases\" => \"\",\n+        \"customer_support_my_call_history\" => \"\",\n+        \"customer_support_all_call_history\" => \"\",\n+        \"customer_support_sms\" => \"\",\n+        \"customer_support_representative\" => \"\",\n+        \"customer_support_note\" => \"\"\n+    )\n+)\n+\n+\n+\n+?>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/my-call-history.php",
          "status": "added",
          "additions": 97,
          "deletions": 0,
          "patch": "@@ -0,0 +1,97 @@\n+<!-- Content Wrapper. Contains page content -->\n+<div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+        <h1>\n+            <?= __(\"Customer Support\"); ?>\n+            <small><?= __(\"Call List\"); ?></small>\n+        </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+        <div class=\"row\">\n+            <div class=\"col-xs-12\">\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Call List\"); ?></h3>\n+                        <div class=\"printButtonPosition\"></div>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                                <tr>\n+                                    <th></th>\n+                                    <th class=\"px160 defaultOrder\"><?php echo __(\"Date\"); ?></th>\n+                                    <th><?php echo __(\"Direction\"); ?></th>\n+                                    <th class=\"px120\"><?php echo __(\"Reason\"); ?></th>\n+                                    <th class=\"px120\"><?php echo __(\"Status\"); ?></th>\n+                                    <th><?php echo __(\"Client\"); ?></th>\n+                                    <th class=\"px220\"><?php echo __(\"Specimen Products\"); ?></th>\n+                                    <th><?php echo __(\"Duration\"); ?></th>\n+                                    <th style=\"width: 420px;\"><?php echo __(\"Feedback\"); ?></th>\n+                                </tr>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <th></th>\n+                                    <th class=\"no-print\">\n+                                        <input style=\"width: 160px;\" type=\"text\" placeholder=\"<?= __(\"Select Date\"); ?>\" name=\"callDate\" id=\"callDate\" class=\"form-control\" autocomplete=\"off\">\n+                                    </th>\n+                                    <th>\n+                                        <select name=\"callDirection\" id=\"callDirection\" class=\"form-control select2\" style=\"width: 100%\">\n+                                            <option value=\"\">Direction...</option>\n+                                            <?php\n+                                            $callDirection = array('Outgoing', 'Incoming');\n+                                            foreach ($callDirection as $Direction) {\n+                                                echo \"<option value='{$Direction}'>{$Direction}</option>\";\n+                                            }\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th>\n+                                        <select id=\"callReasonFilter\" class=\"form-control select2Ajax\" select2-tag=\"true\" select2-ajax-url=\"<?php echo full_website_address() ?>/info/?module=select2&page=callReasonList\" style=\"width: 100%;\">\n+                                            <option value=\"\"><?= __(\"All Reason\"); ?>...</option>\n+                                        </select>\n+                                    </th>\n+                                    <th>\n+                                        <select name=\"callStatus\" id=\"callStatus\" class=\"form-control select2\" style=\"width: 100%\">\n+                                            <option value=\"\">Status...</option>\n+                                            <?php\n+                                            $callStatus = array('Answered', 'Missed', 'Rejected', 'Not Answered', 'Busy', 'Unreachable', 'Pending');\n+                                            foreach ($callStatus as $status) {\n+                                                echo \"<option value='{$status}'>{$status}</option>\";\n+                                            }\n+                                            ?>\n+                                        </select>\n+                                    </th>\n+                                    <th><?php echo __(\"Client\"); ?></th>\n+                                    <th><?php echo __(\"Specimen Products\"); ?></th>\n+                                    <th><?php echo __(\"Duration\"); ?></th>\n+                                    <th><?php echo __(\"Feedback\"); ?></th>\n+                                </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+            </div>\n+            <!-- col-xs-12-->\n+        </div>\n+        <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+</div>\n+<!-- /.content-wrapper -->\n+\n+<script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=myCallList\";\n+    BMS.FUNCTIONS.dateRangePickerPreDefined({\n+        selector: \"#callDate\"\n+    });\n+</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/customer-support/note-list.php",
          "status": "added",
          "additions": 59,
          "deletions": 0,
          "patch": "@@ -0,0 +1,59 @@\n+  <!-- Content Wrapper. Contains page content -->\n+\n+  <div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+      <h1>\n+        <?= __(\"Customer Support\"); ?>\n+        <small><?= __(\"Note List\"); ?></small>\n+      </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+      <div class=\"row\">\n+        <div class=\"col-xs-12\">\n+          <div class=\"box\">\n+            <div class=\"box-header\">\n+              <h3 class=\"box-title\"><?= __(\"Note/ Feedback List\"); ?></h3>\n+            </div>\n+            <!-- Box header -->\n+            <div class=\"box-body\">\n+              <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                <thead>\n+                  <tr>\n+                    <th></th>\n+                    <th><?php echo __(\"ID\"); ?></th>\n+                    <th><?php echo __(\"Type\"); ?></th>\n+                    <th><?php echo __(\"Text\"); ?></th>\n+                    <th class=\"no-sort\"><?php echo __(\"Action\"); ?></th>\n+                  </tr>\n+                </thead>\n+   \n+                <tfoot>\n+                  <tr>\n+                    <th></th>\n+                    <th><?php echo __(\"ID\"); ?></th>\n+                    <th><?php echo __(\"Type\"); ?></th>\n+                    <th><?php echo __(\"Text\"); ?></th>\n+                    <th><?php echo __(\"Action\"); ?></th>\n+                  </tr>\n+                </tfoot>\n+              </table>\n+            </div>\n+            <!-- box body-->\n+          </div>\n+          <!-- box -->\n+        </div>\n+        <!-- col-xs-12-->\n+      </div>\n+      <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+  </div>\n+  <!-- /.content-wrapper -->\n+  <script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=noteList\";\n+  </script>"
        },
        {
          "filename": "module/customer-support/representative-list.php",
          "status": "added",
          "additions": 65,
          "deletions": 0,
          "patch": "@@ -0,0 +1,65 @@\n+  <!-- Content Wrapper. Contains page content -->\n+\n+  <div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+      <h1>\n+        <?= __(\"Customer Support\"); ?>\n+        <?php \n+          if(current_user_can(\"customer_support_representative.Add\")) {\n+            echo '<a data-toggle=\"modal\" data-target=\"#modalDefault\" href=\"'. full_website_address() .'/xhr/?module=customer-support&page=newRepresentative\" class=\"btn btn-sm btn-primary\"><i class=\"fa fa-plus\"></i> Add</a>';\n+          }\n+        ?>\n+      </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+      <div class=\"row\">\n+        <div class=\"col-xs-12\">\n+          <div class=\"box\">\n+            <div class=\"box-header\">\n+              <h3 class=\"box-title\"><?= __(\"Representative List\"); ?></h3>\n+            </div>\n+            <!-- Box header -->\n+            <div class=\"box-body\">\n+              <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                <thead>\n+                  <tr>\n+                    <th></th>\n+                    <th><?php echo __(\"Name\"); ?></th>\n+                    <th><?php echo __(\"SIP User\"); ?></th>\n+                    <th><?php echo __(\"SIP Domian\"); ?></th>\n+                    <th><?php echo __(\"Socket URL\"); ?></th>\n+                    <th><?php echo __(\"Action\"); ?></th>\n+                  </tr>\n+                </thead>\n+   \n+                <tfoot>\n+                  <tr>\n+                    <th></th>\n+                    <th><?php echo __(\"Name\"); ?></th>\n+                    <th><?php echo __(\"SIP User\"); ?></th>\n+                    <th><?php echo __(\"SIP Domian\"); ?></th>\n+                    <th><?php echo __(\"Socket URL\"); ?></th>\n+                    <th><?php echo __(\"Action\"); ?></th>\n+                  </tr>\n+                </tfoot>\n+              </table>\n+            </div>\n+            <!-- box body-->\n+          </div>\n+          <!-- box -->\n+        </div>\n+        <!-- col-xs-12-->\n+      </div>\n+      <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+  </div>\n+  <!-- /.content-wrapper -->\n+  <script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=callCenterRepresentativeList\";\n+  </script>"
        },
        {
          "filename": "module/customer-support/screenshot.png",
          "status": "added",
          "additions": 0,
          "deletions": 0,
          "patch": null
        },
        {
          "filename": "module/customer-support/sms-list.php",
          "status": "added",
          "additions": 61,
          "deletions": 0,
          "patch": "@@ -0,0 +1,61 @@\n+  <!-- Content Wrapper. Contains page content -->\n+\n+  <div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+      <h1>\n+        <?= __(\"Customer Support\"); ?>\n+        <small><?= __(\"SMS List\"); ?></small>\n+      </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+      <div class=\"row\">\n+        <div class=\"col-xs-12\">\n+          <div class=\"box\">\n+            <div class=\"box-header\">\n+              <h3 class=\"box-title\"><?= __(\"SMS List\"); ?></h3>\n+            </div>\n+            <!-- Box header -->\n+            <div class=\"box-body\">\n+              <table id=\"dataTableWithAjaxExtend\" class=\"table table-bordered table-striped table-hover\" width=\"100%\">\n+                <thead>\n+                  <tr>\n+                    <th></th>\n+                    <th class=\"defaultOrder\"><?php echo __(\"Date\"); ?></th>\n+                    <th><?php echo __(\"To\"); ?></th>\n+                    <th><?php echo __(\"Text\"); ?></th>\n+                    <th><?php echo __(\"Status\"); ?></th>\n+                    <th><?php echo __(\"Send by\"); ?></th>\n+                  </tr>\n+                </thead>\n+   \n+                <tfoot>\n+                  <tr>\n+                    <th></th>\n+                    <th><?php echo __(\"Date\"); ?></th>\n+                    <th><?php echo __(\"To\"); ?></th>\n+                    <th><?php echo __(\"Text\"); ?></th>\n+                    <th><?php echo __(\"Status\"); ?></th>\n+                    <th><?php echo __(\"Send by\"); ?></th>\n+                  </tr>\n+                </tfoot>\n+              </table>\n+            </div>\n+            <!-- box body-->\n+          </div>\n+          <!-- box -->\n+        </div>\n+        <!-- col-xs-12-->\n+      </div>\n+      <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+  </div>\n+  <!-- /.content-wrapper -->\n+  <script>\n+    /*Column Defference target column of data table */\n+    var DataTableAjaxPostUrl = \"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=smsList\";\n+  </script>"
        },
        {
          "filename": "module/customer-support/voice-message.php",
          "status": "added",
          "additions": 102,
          "deletions": 0,
          "patch": "@@ -0,0 +1,102 @@\n+<?php \n+\n+$selectSipCredentials = easySelectA(array(\n+    \"table\"     => \"sip_credentials\",\n+    \"fields\"    => \"sip_username, sip_password, sip_domain, sip_websocket_addr\",\n+    \"where\"     => array(\n+        \"sip_representative\"    => $_SESSION[\"uid\"]\n+    )\n+));\n+\n+if($selectSipCredentials !== false) {\n+    $sip = $selectSipCredentials[\"data\"][0];\n+    echo \"<script> const sipCredentials = {\n+        uri: 'sip:{$sip['sip_username']}@{$sip['sip_domain']}',\n+        socket: '{$sip['sip_websocket_addr']}',\n+        user: '{$sip['sip_username']}',\n+        pass: '{$sip['sip_password']}'\n+    }; </script>\";\n+}\n+\n+?>\n+\n+<!-- Content Wrapper. Contains page content -->\n+<script async src=\"<?php echo full_website_address(); ?>/js/?q=voiceMessage&v=2.0.3\"></script>\n+  <div class=\"content-wrapper\">\n+    <!-- Content Header (Page header) -->\n+    <section class=\"content-header\">\n+      <h1>\n+        <?php echo __(\"Voice Message Broadcasting System\"); ?>\n+        <a data-toggle=\"modal\" data-target=\"#modalDefault\" href=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=newVoiceMessageEntry\" class=\"btn btn-sm btn-primary\"><i class=\"fa fa-plus\"></i> <?= __(\"Add New\"); ?></a>\n+      </h1>\n+    </section>\n+\n+    <!-- Main content -->\n+    <section class=\"content container-fluid\">\n+\n+        <div class=\"row\">\n+\n+            <div class=\"col-md-8\">\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Voice Message List\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div class=\"box-body\">\n+                        <table dt-height=\"30vh\" dt-data-url=\"<?php echo full_website_address(); ?>/xhr/?module=customer-support&page=voiceMessageList\" class=\"dataTableWithAjaxExtend addToSMSBox table table-bordered table-striped table-hover\" width=\"100%\">\n+                            <thead>\n+                            <tr>\n+                                <th></th>\n+                                <th><?php echo __(\"Date\"); ?></th>\n+                                <th><?php echo __(\"Description\"); ?></th>\n+                                <th><?php echo __(\"Record\"); ?></th>\n+                                <th><?php echo __(\"Status\"); ?></th>\n+                                <th><?php echo __(\"Action\"); ?></th>\n+                            </tr>\n+                            </thead>\n+            \n+                            <tfoot>\n+                            <tr>\n+                                <th></th>\n+                                <th><?php echo __(\"Date\"); ?></th>\n+                                <th><?php echo __(\"Description\"); ?></th>\n+                                <th><?php echo __(\"Record\"); ?></th>\n+                                <th><?php echo __(\"Status\"); ?></th>\n+                                <th><?php echo __(\"Action\"); ?></th>\n+                            </tr>\n+                            </tfoot>\n+                        </table>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+\n+            </div>\n+\n+            <!-- terminal --> \n+            <div class=\"col-md-4\">\n+\n+                <div class=\"box\">\n+                    <div class=\"box-header\">\n+                        <h3 class=\"box-title\"><?= __(\"Terminal\"); ?></h3>\n+                    </div>\n+                    <!-- Box header -->\n+                    <div style=\"height: 340px; background-color: black; color: white; overflow: auto;\" class=\"box-body\">\n+                       <ul class=\"voiceMessageTerminal\" style=\"list-style: none; padding-left: 10px;\">\n+                           <li>Click Start Sending to initiate the terminal</li>\n+                       </ul>\n+                    </div>\n+                    <!-- box body-->\n+                </div>\n+                <!-- box -->\n+                \n+            </div>\n+        \n+        </div>\n+        <!-- row-->\n+\n+    </section> <!-- Main content End tag -->\n+    <!-- /.content -->\n+  </div>\n+  <!-- /.content-wrapper -->"
        },
        {
          "filename": "module/home2.php",
          "status": "added",
          "additions": 322,
          "deletions": 0,
          "patch": "@@ -0,0 +1,322 @@\n+\t<!-- Content Wrapper. Contains page content -->\n+\t<div class=\"content-wrapper\">\n+\t    <!-- Content Header (Page header) -->\n+\t    <section class=\"content-header\">\n+\t        <h1>\n+\t            <?= __(\"Dashboard\"); ?>\n+\t            <small></small>\n+\t        </h1>\n+\t        <ol class=\"breadcrumb\">\n+\t            <li><a href=\"#\"><i class=\"fa fa-dashboard\"></i> Home</a></li>\n+\t            <li class=\"active\">Dashboard</li>\n+\t        </ol>\n+\t    </section>\n+\n+\t    <!-- Main content -->\n+\t    <section class=\"content\">\n+\t        <!-- Small boxes (Stat box) -->\n+\t        <div class=\"row\">\n+\t            <div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t                <!-- small box -->\n+\t                <div class=\"small-box bg-green\">\n+\t                    <div class=\"inner\">\n+\t                        <h3><?php\n+                                $selectSoldQnt =  easySelectD(\"SELECT if(sum(sales_quantity) is null, 0, sum(sales_quantity)) as totalSales FROM {$table_prefix}sales where YEAR(sales_delivery_date) = YEAR(CURRENT_DATE) and is_trash = 0 group by YEAR(sales_delivery_date)\");\n+\n+                                $soldQnt = 0;\n+                                if ($selectSoldQnt !== false) {\n+                                    $soldQnt = number_format($selectSoldQnt[\"data\"][0][\"totalSales\"], 2);\n+                                }\n+\n+                                echo __($soldQnt);\n+\n+                                ?></h3>\n+\n+\t                        <p><?= __(\"This Year Product Sales\"); ?></p>\n+\t                    </div>\n+\t                    <div class=\"icon\">\n+\t                        <i class=\"fa fa-shopping-bag\"></i>\n+\t                    </div>\n+\t                    <a href=\"<?php echo full_website_address(); ?>/sales/pos-sale/\" class=\"small-box-footer\"><?= __(\"Sales List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t                </div>\n+\t            </div>\n+\t            <!-- ./col -->\n+\t            <div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t                <!-- small box -->\n+\t                <div class=\"small-box bg-aqua\">\n+\t                    <div class=\"inner\">\n+\t                        <h3><?php echo __(easySelectD(\"SELECT count(DISTINCT sales_customer_id) as totalCustomer FROM {$table_prefix}sales\")[\"data\"][0][\"totalCustomer\"]); ?></h3>\n+\n+\t                        <p><?= __(\"Total Customers\"); ?></p>\n+\t                    </div>\n+\t                    <div class=\"icon\">\n+\t                        <i class=\"fa fa-user\"></i>\n+\t                    </div>\n+\t                    <a href=\"<?php echo full_website_address(); ?>/peoples/customer-list/\" class=\"small-box-footer\"><?= __(\"Customers List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t                </div>\n+\t            </div>\n+\t            <!-- ./col -->\n+\t            <div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t                <!-- small box -->\n+\t                <div class=\"small-box bg-yellow\">\n+\t                    <div class=\"inner\">\n+\t                        <h3><?php echo __(easySelectD(\"SELECT count(product_id) as totalProduct FROM {$table_prefix}products\")[\"data\"][0][\"totalProduct\"]); ?></h3>\n+\n+\t                        <p><?= __(\"Total Products\"); ?></p>\n+\t                    </div>\n+\t                    <div class=\"icon\">\n+\t                        <i class=\"fa fa-cube\"></i>\n+\t                    </div>\n+\t                    <a href=\"<?php echo full_website_address(); ?>/products/product-list/\" class=\"small-box-footer\"><?= __(\"Products List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t                </div>\n+\t            </div>\n+\t            <!-- ./col -->\n+\t        </div>\n+\t        <!-- /.row -->\n+\n+\t        <!-- Chart -->\n+\t        <div class=\"row\">\n+\t            <div class=\"col-lg-12\">\n+\t                <div class=\"box box-primary\">\n+\t                    <div class=\"box-header with-border\">\n+\t                        <h3 class=\"box-title\"><?= __(\"Sales Overview\"); ?></h3>\n+\t                    </div>\n+\t                    <div class=\"box-body\">\n+\t                        <div class=\"chart\">\n+\t                            <canvas id=\"overviewChart\" style=\"height: 300px\"></canvas>\n+\t                        </div>\n+\t                    </div>\n+\n+\t                    <div class=\"box-footer\">\n+\t                        <div class=\"row\">\n+\t                            <div class=\"col-sm-3 col-xs-6\">\n+\t                                <div class=\"description-block border-right\">\n+\t                                    <span class=\"description-percentage text-green\"><i class=\"fa fa-caret-up\"></i> 17%</span>\n+\t                                    <h5 class=\"description-header\">$35,210.43</h5>\n+\t                                    <span class=\"description-text\">TOTAL REVENUE</span>\n+\t                                </div>\n+\t                                <!-- /.description-block -->\n+\t                            </div>\n+\t                            <!-- /.col -->\n+\t                            <div class=\"col-sm-3 col-xs-6\">\n+\t                                <div class=\"description-block border-right\">\n+\t                                    <span class=\"description-percentage text-yellow\"><i class=\"fa fa-caret-left\"></i> 0%</span>\n+\t                                    <h5 class=\"description-header\">$10,390.90</h5>\n+\t                                    <span class=\"description-text\">TOTAL COST</span>\n+\t                                </div>\n+\t                                <!-- /.description-block -->\n+\t                            </div>\n+\t                            <!-- /.col -->\n+\t                            <div class=\"col-sm-3 col-xs-6\">\n+\t                                <div class=\"description-block border-right\">\n+\t                                    <span class=\"description-percentage text-green\"><i class=\"fa fa-caret-up\"></i> 20%</span>\n+\t                                    <h5 class=\"description-header\">$24,813.53</h5>\n+\t                                    <span class=\"description-text\">TOTAL PROFIT</span>\n+\t                                </div>\n+\t                                <!-- /.description-block -->\n+\t                            </div>\n+\t                            <!-- /.col -->\n+\t                            <div class=\"col-sm-3 col-xs-6\">\n+\t                                <div class=\"description-block\">\n+\t                                    <span class=\"description-percentage text-red\"><i class=\"fa fa-caret-down\"></i> 18%</span>\n+\t                                    <h5 class=\"description-header\">1200</h5>\n+\t                                    <span class=\"description-text\">Total Sales </span>\n+\t                                </div>\n+\t                                <!-- /.description-block -->\n+\t                            </div>\n+\t                        </div>\n+\t                        <!-- /.row -->\n+\t                    </div>\n+\t                    <!-- /.box-footer -->\n+\n+\t                </div>\n+\t            </div>\n+\t        </div>\n+\n+\t        <div class=\"row\">\n+\t            <!-- Top Customer of this product -->\n+\t            <div class=\"col-sm-12 col-lg-6\">\n+\t                <div class=\"box box-info\">\n+\t                    <div class=\"box-header\">\n+\t                        <h3 class=\"box-title\"><?= __(\"Top Sold Products of %d\", date(\"Y\")); ?></h3>\n+\t                    </div>\n+\t                    <div class=\"box-body\">\n+\t                        <table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t                            <thead>\n+\t                                <tr>\n+\t                                    <th class=\"no-sort\"><?= __(\"Product Name\"); ?></th>\n+\t                                    <th class=\"text-right\"><?= __(\"Sold Qnt\"); ?></th>\n+\t                                </tr>\n+\t                            </thead>\n+\n+\t                            <tbody>\n+\t                                <?php\n+                                    $topProduct = easySelectA(array(\n+                                        \"table\"   => \"product_stock as product_stock\",\n+                                        \"fields\"  => \"product_name, product_unit, sum(stock_item_qty) as totalItemQnt\",\n+                                        \"join\"    => array(\n+                                            \"left join {$table_prefix}products on stock_product_id = product_id\"\n+                                        ),\n+                                        \"where\"   => array(\n+                                            \"product_stock.is_trash = 0 and stock_type\"  => 'sale',\n+                                            \"\"\n+                                        ),\n+                                        \"having\" => array(\n+                                            \"max(stock_entry_date) >= CONCAT(YEAR(CURRENT_DATE),'-',01,'-',01) AND max(stock_entry_date) <= CONCAT(YEAR(CURRENT_DATE),'-',12,'-',31)\"\n+                                        ),\n+                                        \"groupby\" => \"stock_product_id\",\n+                                        \"orderby\" => array(\n+                                            \"sum(stock_item_qty)\" => \"DESC\"\n+                                        ),\n+                                        \"limit\" => array(\n+                                            \"start\"   => 0,\n+                                            \"length\"  => 10\n+                                        )\n+                                    ));\n+                                    $num = 1;\n+                                    if ($topProduct) {\n+                                        foreach ($topProduct[\"data\"] as $key => $product) {\n+                                            echo \"<tr>\";\n+                                            echo  \"<td>$num. {$product['product_name']}</td>\";\n+                                            echo  \"<td class='text-right'>\" . __(number_format($product['totalItemQnt'], 2)) . \" \" . __($product['product_unit']) . \"</td>\";\n+                                            echo \"</tr>\";\n+                                            $num++;\n+                                        }\n+                                    } else {\n+                                        echo \"\n+\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\t\";\n+                                    }\n+\n+                                    ?>\n+\t                            </tbody>\n+\n+\t                        </table>\n+\t                    </div>\n+\t                </div>\n+\t            </div> <!-- /.Col -->\n+\n+\t            <!-- Top Customer of this product -->\n+\t            <div class=\"col-sm-12 col-lg-6\">\n+\t                <div class=\"box box-info\">\n+\t                    <div class=\"box-header\">\n+\t                        <h3 class=\"box-title\"><?= __(\"Low Product Stock\"); ?></h3>\n+\t                    </div>\n+\t                    <div class=\"box-body\">\n+\t                        <table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t                            <thead>\n+\t                                <tr>\n+\t                                    <th class=\"no-sort\"><?= __(\"Product Name\"); ?></th>\n+\t                                    <th class=\"text-right\"><?= __(\"Left Stock\"); ?></th>\n+\t                                </tr>\n+\t                            </thead>\n+\n+\t                            <tbody>\n+\t                                <?php\n+\n+                                    $select_low_product = easySelectD(\"\n+                                                                    SELECT \n+                                                                        pbs.vp_id as pid, \n+                                                                        product_name, product_unit, \n+                                                                        round(sum(base_stock_in), 2) as base_stock_in,\n+                                                                        base_qty\n+                                                                    FROM product_base_stock as pbs -- Product Base Stock\n+                                                                    left join {$table_prefix}products as product on product.product_id = pbs.vp_id\n+                                                                    where batch_id is null or date(batch_expiry_date) > curdate()\n+                                                                    GROUP BY pbs.vp_id\n+                                                                    order by base_stock_in ASC\n+                                                                    limit 0,10\n+                                                            \");\n+\n+                                    $num = 1;\n+                                    if ($select_low_product) {\n+                                        foreach ($select_low_product[\"data\"] as $key => $product) {\n+                                            echo \"<tr>\";\n+                                            echo  \"<td>$num. {$product['product_name']}</td>\";\n+                                            echo  \"<td class='text-right'>\" . __(number_format($product['base_stock_in'] / $product['base_qty'], 2)) . \" \" . __($product['product_unit']) . \"</td>\";\n+                                            echo \"</tr>\";\n+                                            $num++;\n+                                        }\n+                                    } else {\n+                                        echo \"\n+\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\";\n+                                    }\n+\n+                                    ?>\n+\t                            </tbody>\n+\n+\t                        </table>\n+\t                    </div>\n+\t                </div>\n+\t            </div> <!-- /.Col -->\n+\n+\t        </div> <!-- /.Row -->\n+\n+\n+\t    </section> <!-- Main content End tag -->\n+\t    <!-- /.content -->\n+\t</div>\n+\t<!-- /.content-wrapper -->\n+\n+\t<?php\n+\n+    $salesData = easySelectD(\"\n+\t\t\tselect sales_delivery_date, sum(sales_quantity) as sales_quantity from {$table_prefix}sales where is_trash = 0 and sales_delivery_date >= DATE_SUB(NOW(), INTERVAL 30 DAY) group by sales_delivery_date\n+\t\t\");\n+\n+    $dateStart = date('Y-m-d', strtotime('today - 30 days'));\n+\n+    $i = 0;\n+    $newdate = array();\n+    $newvalue = array();\n+\n+    while ($dateStart <= date(\"Y-m-d\")) {\n+\n+        $dateStart = date(\"Y-m-d\", strtotime(\"$dateStart + 1 day\"));\n+\n+        if (isset($salesData[\"data\"][$i]) && $salesData[\"data\"][$i][\"sales_delivery_date\"] == $dateStart) {\n+\n+            array_push($newdate, $salesData[\"data\"][$i][\"sales_delivery_date\"]);\n+            array_push($newvalue, $salesData[\"data\"][$i][\"sales_quantity\"]);\n+            $i++;\n+        } else {\n+\n+            array_push($newdate, $dateStart);\n+            array_push($newvalue, 0);\n+        }\n+    }\n+\n+    $salesDate = __(json_encode($newdate));\n+    $salesAmount = json_encode($newvalue);\n+\n+    ?>\n+\n+\t<script src=\"<?php echo full_website_address(); ?>/assets/3rd-party/chart.js/Chart.min.js\"></script>\n+\n+\t<script>\n+\t    var ctx = document.getElementById('overviewChart');\n+\t    var myLineChart = new Chart(ctx, {\n+\t        type: 'line',\n+\t        data: {\n+\t            labels: <?php echo $salesDate; ?>,\n+\t            datasets: [{\n+\t                label: \"<?= __(\"Sales\"); ?>\",\n+\t                borderColor: \"green\",\n+\t                borderWidth: 2,\n+\t                data: <?php echo $salesAmount; ?>\n+\t            }]\n+\t        },\n+\t        options: {\n+\t            responsive: true,\n+\t            tooltips: {\n+\t                mode: 'index',\n+\t                intersect: false\n+\t            }\n+\t        }\n+\t    });\n+\t</script>\n\\ No newline at end of file"
        },
        {
          "filename": "module/home_back.php",
          "status": "added",
          "additions": 473,
          "deletions": 0,
          "patch": "@@ -0,0 +1,473 @@\n+\t<!-- Content Wrapper. Contains page content -->\n+\t<div class=\"content-wrapper\">\n+\t\t<!-- Content Header (Page header) -->\n+\t\t<section class=\"content-header\">\n+\t\t\t<h1>\n+\t\t\t\t<?=__(\"Dashboard\");?>\n+\t\t\t\t<small></small>\n+\t\t\t</h1>\n+\t\t\t<ol class=\"breadcrumb\">\n+\t\t\t\t<li><a href=\"#\"><i class=\"fa fa-dashboard\"></i> Home</a></li>\n+\t\t\t\t<li class=\"active\">Dashboard</li>\n+\t\t\t</ol>\n+\t\t</section>\n+\n+\t\t<!-- Main content -->\n+\t\t<section class=\"content\">\n+\t\t\t<!-- Small boxes (Stat box) -->\n+\t\t\t<div class=\"row\">\n+\t\t\t\t<div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t\t\t\t\t<!-- small box -->\n+\t\t\t\t\t<div class=\"small-box bg-green\">\n+\t\t\t\t\t\t<div class=\"inner\">\n+\t\t\t\t\t\t\t<h3><?php \n+\t\t\t\t\t\t\t$selectSoldQnt =  easySelectD(\"SELECT if(sum(sales_quantity) is null, 0, sum(sales_quantity)) as totalSales FROM {$table_prefix}sales where YEAR(sales_delivery_date) = YEAR(CURRENT_DATE) and is_trash = 0 group by YEAR(sales_delivery_date)\");\n+\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t$soldQnt = 0;\n+\t\t\t\t\t\t\tif($selectSoldQnt !== false) {\n+\t\t\t\t\t\t\t\t$soldQnt = number_format($selectSoldQnt[\"data\"][0][\"totalSales\"], 2);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\techo __($soldQnt);\n+\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t?></h3>\n+\n+\t\t\t\t\t\t\t<p><?= __(\"This Year Product Sales\"); ?></p>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"icon\">\n+\t\t\t\t\t\t\t<i class=\"fa fa-shopping-bag\"></i>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<a href=\"<?php echo full_website_address(); ?>/sales/pos-sale/\" class=\"small-box-footer\"><?= __(\"Sales List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<!-- ./col -->\n+\t\t\t\t<div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t\t\t\t\t<!-- small box -->\n+\t\t\t\t\t<div class=\"small-box bg-aqua\">\n+\t\t\t\t\t\t<div class=\"inner\">\n+\t\t\t\t\t\t<h3><?php echo __(easySelectD(\"SELECT count(DISTINCT sales_customer_id) as totalCustomer FROM {$table_prefix}sales\")[\"data\"][0][\"totalCustomer\"]); ?></h3>\n+\n+\t\t\t\t\t\t\t<p><?= __(\"Total Customers\"); ?></p>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"icon\">\n+\t\t\t\t\t\t\t<i class=\"fa fa-user\"></i>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<a href=\"<?php echo full_website_address(); ?>/peoples/customer-list/\" class=\"small-box-footer\"><?= __(\"Customers List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<!-- ./col -->\n+\t\t\t\t<div class=\"col-md-4 col-sm-6 col-xs-12\">\n+\t\t\t\t\t<!-- small box -->\n+\t\t\t\t\t<div class=\"small-box bg-yellow\">\n+\t\t\t\t\t\t<div class=\"inner\">\n+\t\t\t\t\t\t\t<h3><?php echo __(easySelectD(\"SELECT count(product_id) as totalProduct FROM {$table_prefix}products\")[\"data\"][0][\"totalProduct\"]); ?></h3>\n+\n+\t\t\t\t\t\t\t<p><?= __(\"Total Products\"); ?></p>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"icon\">\n+\t\t\t\t\t\t\t<i class=\"fa fa-cube\"></i>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<a href=\"<?php echo full_website_address(); ?>/products/product-list/\" class=\"small-box-footer\"><?= __(\"Products List\"); ?> <i class=\"fa fa-arrow-circle-right\"></i></a>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<!-- ./col -->\n+\t\t\t</div>\n+\t\t\t<!-- /.row -->\n+\n+\t\t\t<!-- Chart -->\n+\t\t\t<div class=\"row\">\n+\t\t\t\t<div class=\"col-lg-12\">\n+\t\t\t\t\t<div class=\"box box-primary\">\n+\t\t\t\t\t\t<div class=\"box-header with-border\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?= __(\"Sales Overview\"); ?></h3>\n+\n+                            <select style=\"width: 200px; display: inline; float: right;\" id=\"salesOverviewType\">\n+                                <option value=\"daily\">Daily</option>\n+                                <option selected value=\"weekly\">Weekly</option>\n+                                <option value=\"monthly\">Monthly</option>\n+                            </select>\n+\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<div class=\"chart\">\n+\t\t\t\t\t\t\t\t<canvas id=\"salesOverviewChart\" style=\"height: 320px\"></canvas>\n+\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t</div>\n+\n+\t\t\t<div class=\"row\">\n+\n+                <!-- Customers Need to get Attention -->\n+\t\t\t\t<div class=\"col-sm-12 col-lg-6\">\n+\t\t\t\t\t<div class=\"box box-success\">\n+\t\t\t\t\t\t<div class=\"box-header\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?= __(\"Customers Need to get attention\"); ?></h3>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"no-sort\"><?= __(\"Customer Name\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Previous Year\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Running Year\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Increase Rate\"); ?></th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t\t<tbody>\n+\t\t\t\t\t\t\t\t\t<?php\n+\t\t\t\t\t\t\t\t\t\t\n+                                        /**\n+                                         * See here to know how to caculat parcentage\n+                                         * https://www.bbc.co.uk/bitesize/guides/zpjmjty/revision/2\n+                                         * \n+                                         * \n+                                         * percentage increase = increased number \u00f7 original number \u00d7 100\n+                                         * percentage decrease = decreased number \u00f7 original number \u00d7 100\n+                                         * \n+                                         */\n+                                        $getPurchaseIncreasedCustomer = easySelectA(array(\n+                                            \"table\"     => \"customers\",\n+                                            \"fields\"    => \"customer_id, customer_name, upazila_name, district_name,\n+                                                            round(previous_year_total_sales, 2) as previous_year_total_purchase, \n+                                                            round(current_year_total_sales, 2) as current_year_total_purchase,\n+                                                            round( ( current_year_total_sales - previous_year_total_sales ) / previous_year_total_sales * 100) as increased_rate\n+                                                            \",\n+                                            \"join\"      => array(\n+                                                \"left join {$table_prefix}upazilas on customer_upazila = upazila_id\",\n+                                                \"left join {$table_prefix}districts on customer_district = district_id\",\n+                                                \"left join (\n+                                                    select\n+                                                        sales_customer_id,\n+                                                        sum( CASE WHEN YEAR(sales_delivery_date) = YEAR( CURDATE() - INTERVAL 1 YEAR ) THEN sales_grand_total END ) as previous_year_total_sales,\n+                                                        sum( CASE WHEN YEAR(sales_delivery_date) = YEAR( CURDATE() ) THEN sales_grand_total END ) as current_year_total_sales\n+                                                    from ro_sales\n+                                                    where is_trash = 0\n+                                                    group by sales_customer_id\n+                                                ) as customer_sale on sales_customer_id = customer_id\"\n+                                            ),\n+                                            \"where\" => array(\n+                                                \"previous_year_total_sales is not null and previous_year_total_sales < current_year_total_sales and current_year_total_sales > 100000\"\n+                                            ),\n+                                            \"orderby\"   => array(\n+                                                \"increased_rate\"    => \"DESC\"\n+                                            ),\n+                                            \"limit\" => array(\n+                                                \"start\"     => 0,\n+                                                \"length\"    => 10\n+                                            )\n+                                        \n+                                        ));\n+\n+\n+\t\t\t\t\t\t\t\t\t\t$num = 1;\n+\t\t\t\t\t\t\t\t\t\tif($getPurchaseIncreasedCustomer !== false) {\n+\n+\t\t\t\t\t\t\t\t\t\t\tforeach($getPurchaseIncreasedCustomer[\"data\"] as $key => $customer) {\n+\t\t\t\t\t\t\t\t\t\t\t\techo \"<tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td>{$num}. <a title='Show More Details' href='\". full_website_address() .\"/reports/customer-report/?cid={$customer['customer_id']}'>{$customer['customer_name']}, {$customer['upazila_name']}, {$customer['district_name']}</a></td>\";\n+                                                \n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'>\". to_money($customer['previous_year_total_purchase']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'>\". to_money($customer['current_year_total_purchase']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'> <span class='description-percentage text-green'><i class='fa fa-caret-up'></i> {$customer['increased_rate']}%</span></td>\";\n+                                                \n+\t\t\t\t\t\t\t\t\t\t\t\techo \"</tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\t$num++;\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\t\techo \"\n+\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\t\";\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t?>\n+\t\t\t\t\t\t\t\t</tbody>\n+\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div> <!-- /.Col -->\n+\n+                <!-- Alerming Customer -->\n+\t\t\t\t<div class=\"col-sm-12 col-lg-6\">\n+\t\t\t\t\t<div class=\"box box-danger\">\n+\t\t\t\t\t\t<div class=\"box-header\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?= __(\"Alerming Customer\"); ?></h3>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"no-sort\"><?= __(\"Customer Name\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Previous Year\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Running Year\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Descrease Rate\"); ?></th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t\t<tbody>\n+\t\t\t\t\t\t\t\t\t<?php\n+\t\t\t\t\t\t\t\t\t\t\n+                                        /**\n+                                         * See here to know how to caculat parcentage\n+                                         * https://www.bbc.co.uk/bitesize/guides/zpjmjty/revision/2\n+                                         * \n+                                         * \n+                                         * percentage increase = increased number \u00f7 original number \u00d7 100\n+                                         * percentage decrease = decreased number \u00f7 original number \u00d7 100\n+                                         * \n+                                         */\n+                                        $getPurchaseIncreasedCustomer = easySelectA(array(\n+                                            \"table\"     => \"customers\",\n+                                            \"fields\"    => \"customer_id, customer_name, upazila_name, district_name,\n+                                                            round(previous_year_total_sales, 2) as previous_year_total_purchase, \n+                                                            round(current_year_total_sales, 2) as current_year_total_purchase,\n+                                                            round( ( previous_year_total_sales - current_year_total_sales ) / previous_year_total_sales * 100) as decreased_rate\n+                                                            \",\n+                                            \"join\"      => array(\n+                                                \"left join {$table_prefix}upazilas on customer_upazila = upazila_id\",\n+                                                \"left join {$table_prefix}districts on customer_district = district_id\",\n+                                                \"left join (\n+                                                    select\n+                                                        sales_customer_id,\n+                                                        sum( CASE WHEN YEAR(sales_delivery_date) = YEAR( CURDATE() - INTERVAL 1 YEAR ) THEN sales_grand_total END ) as previous_year_total_sales,\n+                                                        sum( CASE WHEN YEAR(sales_delivery_date) = YEAR( CURDATE() ) THEN sales_grand_total END ) as current_year_total_sales\n+                                                    from ro_sales\n+                                                    where is_trash = 0\n+                                                    group by sales_customer_id\n+                                                ) as customer_sale on sales_customer_id = customer_id\"\n+                                            ),\n+                                            \"where\" => array(\n+                                                \"previous_year_total_sales is not null and previous_year_total_sales > current_year_total_sales and previous_year_total_sales > 100000\"\n+                                            ),\n+                                            \"orderby\"   => array(\n+                                                \"decreased_rate\"    => \"DESC\"\n+                                            ),\n+                                            \"limit\" => array(\n+                                                \"start\"     => 0,\n+                                                \"length\"    => 10\n+                                            )\n+                                        \n+                                        ));\n+\n+\n+\t\t\t\t\t\t\t\t\t\t$num = 1;\n+\t\t\t\t\t\t\t\t\t\tif($getPurchaseIncreasedCustomer !== false) {\n+\n+\t\t\t\t\t\t\t\t\t\t\tforeach($getPurchaseIncreasedCustomer[\"data\"] as $key => $customer) {\n+\t\t\t\t\t\t\t\t\t\t\t\techo \"<tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td>{$num}. <a title='Show More Details' href='\". full_website_address() .\"/reports/customer-report/?cid={$customer['customer_id']}'>{$customer['customer_name']}, {$customer['upazila_name']}, {$customer['district_name']}</a></td>\";\n+                                                \n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'>\". to_money($customer['previous_year_total_purchase']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'>\". to_money($customer['current_year_total_purchase']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'> <span class='description-percentage text-red'><i class='fa fa-caret-down'></i> {$customer['decreased_rate']}%</span></td>\";\n+                                                \n+\t\t\t\t\t\t\t\t\t\t\t\techo \"</tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\t$num++;\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\t\techo \"\n+\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\t\";\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t?>\n+\t\t\t\t\t\t\t\t</tbody>\n+\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div> <!-- /.Col -->\n+            \n+\t\t\t\t<!-- Top Customer of this product -->\n+\t\t\t\t<div class=\"col-sm-12 col-lg-6\">\n+\t\t\t\t\t<div class=\"box box-info\">\n+\t\t\t\t\t\t<div class=\"box-header\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?= __(\"Top Sold Products of %d\", date(\"Y\")); ?></h3>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"no-sort\"><?= __(\"Product Name\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Sold Qnt\"); ?></th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t\t<tbody>\n+\t\t\t\t\t\t\t\t\t<?php\n+\t\t\t\t\t\t\t\t\t\t$topProduct = easySelectA(array(\n+\t\t\t\t\t\t\t\t\t\t\t\"table\"   => \"product_stock as product_stock\",\n+\t\t\t\t\t\t\t\t\t\t\t\"fields\"  => \"product_name, product_unit, sum(stock_item_qty) as totalItemQnt\",\n+\t\t\t\t\t\t\t\t\t\t\t\"join\"    => array(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"left join {$table_prefix}products on stock_product_id = product_id\"\n+\t\t\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\t\t\t\"where\"   => array(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"product_stock.is_trash = 0 and stock_type\"  => 'sale',\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"\"\n+\t\t\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\t\t\t\"having\" => array(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"max(stock_entry_date) >= CONCAT(YEAR(CURRENT_DATE),'-',01,'-',01) AND max(stock_entry_date) <= CONCAT(YEAR(CURRENT_DATE),'-',12,'-',31)\"\n+\t\t\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\t\t\t\"groupby\" => \"stock_product_id\",\n+\t\t\t\t\t\t\t\t\t\t\t\"orderby\" => array(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"sum(stock_item_qty)\" => \"DESC\"\n+\t\t\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\t\t\t\"limit\" => array(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"start\"   => 0,\n+\t\t\t\t\t\t\t\t\t\t\t\t\"length\"  => 10\n+\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t));\n+\t\t\t\t\t\t\t\t\t\t$num = 1;\n+\t\t\t\t\t\t\t\t\t\tif($topProduct) {\n+\t\t\t\t\t\t\t\t\t\t\tforeach($topProduct[\"data\"] as $key => $product) {\n+\t\t\t\t\t\t\t\t\t\t\t\techo \"<tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo  \"<td>$num. {$product['product_name']}</td>\";\n+                                                echo  \"<td class='text-right'>\". __(number_format($product['totalItemQnt'], 2)) . \" \" . __($product['product_unit']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\t\techo \"</tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t\t$num++;\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\techo \"\n+\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\t\";\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t?>\n+\t\t\t\t\t\t\t\t</tbody>\n+\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div> <!-- /.Col -->\n+\n+\t\t\t\t<!-- Top Customer of this product -->\n+\t\t\t\t<div class=\"col-sm-12 col-lg-6\">\n+\t\t\t\t\t<div class=\"box box-info\">\n+\t\t\t\t\t\t<div class=\"box-header\">\n+\t\t\t\t\t\t\t<h3 class=\"box-title\"><?= __(\"Low Product Stock\"); ?></h3>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t<div class=\"box-body\">\n+\t\t\t\t\t\t\t<table class=\"table table-bordered table-striped table-hover\" style=\"width: 100%;\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"no-sort\"><?= __(\"Product Name\"); ?></th>\n+\t\t\t\t\t\t\t\t\t\t<th class=\"text-right\"><?= __(\"Left Stock\"); ?></th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t\n+\t\t\t\t\t\t\t\t<tbody>\n+\t\t\t\t\t\t\t\t<?php\n+\n+\t\t\t\t\t\t\t\t\t$select_low_product = easySelectD(\"\n+                                                                    SELECT \n+                                                                        pbs.vp_id as pid, \n+                                                                        product_name, product_unit, \n+                                                                        round(sum(base_stock_in), 2) as base_stock_in,\n+                                                                        base_qty\n+                                                                    FROM product_base_stock as pbs -- Product Base Stock\n+                                                                    left join {$table_prefix}products as product on product.product_id = pbs.vp_id\n+                                                                    where batch_id is null or date(batch_expiry_date) > curdate()\n+                                                                    GROUP BY pbs.vp_id\n+                                                                    order by base_stock_in ASC\n+                                                                    limit 0,10\n+                                                            \");\n+\n+\t\t\t\t\t\t\t\t\t$num = 1;\n+\t\t\t\t\t\t\t\t\tif($select_low_product) {\n+\t\t\t\t\t\t\t\t\t\tforeach($select_low_product[\"data\"] as $key => $product) {\n+\t\t\t\t\t\t\t\t\t\t\techo \"<tr>\";\n+\t\t\t\t\t\t\t\t\t\t\techo  \"<td>$num. {$product['product_name']}</td>\";\n+\t\t\t\t\t\t\t\t\t\t\techo  \"<td class='text-right'>\". __(number_format($product['base_stock_in']/$product['base_qty'], 2)) . \" \" . __($product['product_unit']) .\"</td>\";\n+\t\t\t\t\t\t\t\t\t\t\techo \"</tr>\";\n+\t\t\t\t\t\t\t\t\t\t\t$num++;\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\techo \"\n+\t\t\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t\t\t<td class='text-center' colspan='2'>No Data Found!</td>\n+\t\t\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t\t\t\";\n+\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t?>\n+\t\t\t\t\t\t\t\t</tbody>\n+\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div> <!-- /.Col -->\n+\n+\t\t\t</div> <!-- /.Row -->\n+\n+\n+\t\t</section> <!-- Main content End tag -->\n+\t\t<!-- /.content -->\n+\t</div>\n+\t<!-- /.content-wrapper -->\n+\n+\t<script src=\"<?php echo full_website_address(); ?>/assets/3rd-party/chart.js/Chart.min.js\"></script>\n+\n+<script>\n+\n+\n+/** Weekly Sales */\n+var ctx = document.getElementById('salesOverviewChart');\n+var salesOverviewCharts = new Chart(ctx, {\n+\ttype: 'line',\n+\tdata: {},\n+\toptions: {\n+\t\tresponsive: true,\n+\t\ttooltips: {\n+\t\t\tmode: 'index',\n+\t\t\tintersect: false,\n+            callbacks: {\n+                label: function(tooltipItem, data) {\n+                    return format_number(tooltipItem.yLabel)\n+                }\n+            }\n+\t\t}\n+\t}\n+});\n+\n+\n+/** When Document Ready Then load the chart */\n+$(function() {\n+\n+    BMS.fn.get(\"salesOverviewChartData&type=weekly\", function(data) {\n+\n+        salesOverviewCharts.data = data;\n+\n+        salesOverviewCharts.update();\n+\n+    });\n+\n+});\n+\n+/** Update Sales  */\n+$(document).on(\"change\", \"#salesOverviewType\", function() {\n+\n+    BMS.fn.get(\"salesOverviewChartData&type=\"+  $(this).val() , function(data) {\n+\n+        salesOverviewCharts.data = data;\n+\n+        salesOverviewCharts.update();\n+\n+    });\n+\n+});\n+\n+</script>"
        },
        {
          "filename": "theme/rui/footer.php",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -244,7 +244,7 @@\n     <footer class=\"main-footer\">\n         <!-- To the right -->\n         <div class=\"pull-right hidden-xs\">\n-            Version 2.1.1\n+            Version 2.2.0\n         </div>\n         <!-- Default to the left -->\n         <strong>Copyright &copy; <?php echo date(\"Y\"); ?> <a href=\"https://bumsys.org/\"><span\n@@ -255,7 +255,7 @@ class=\"logo-lg\"><b>bum</b>sys</span></a>.</strong> All rights reserved.\n     <!-- ./wrapper -->\n \n     <!-- Include all Header JS -->\n-    <script src=\"<?php echo full_website_address(); ?>/js/?q=foot&v=2.1.1\"></script>\n+    <script src=\"<?php echo full_website_address(); ?>/js/?q=foot&v=2.2.0\"></script>\n \n <!-- \n     <script>"
        },
        {
          "filename": "theme/rui/header.php",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -10,10 +10,10 @@\n     <link rel=\"shortcut icon\" href=\"<?php echo full_website_address() . \"/assets/images/logo.png\" ?>\" type=\"image/x-icon\">\n \n     <!-- Include all CSS -->\n-    <link rel=\"stylesheet\" href=\"<?php echo full_website_address(); ?>/css/?v=2.1.1\">\n+    <link rel=\"stylesheet\" href=\"<?php echo full_website_address(); ?>/css/?v=2.2.0\">\n \n     <!-- Include all Header JS -->\n-    <script src=\"<?php echo full_website_address(); ?>/js/?q=head&v=2.1.1\"></script>\n+    <script src=\"<?php echo full_website_address(); ?>/js/?q=head&v=2.2.0\"></script>\n \n \n     <script>"
        }
      ],
      "file_patterns": {
        "security_files": 0,
        "config_files": 0,
        "dependency_files": 0,
        "test_files": 0,
        "unique_directories": 9,
        "max_directory_depth": 3
      },
      "context": {
        "surrounding_commits": [
          {
            "sha": "112aa0b2637e485a6851a4c6734c3bf383607be9",
            "date": "2023-09-26T04:34:20Z",
            "author_login": "kmkalam24"
          },
          {
            "sha": "687051aa6970455771b2e0a3478d719ddfa27617",
            "date": "2023-09-26T04:28:49Z",
            "author_login": "kmkalam24"
          },
          {
            "sha": "c109613506dd04b2da8af8f49cc275cbe7e3b00b",
            "date": "2023-09-26T04:26:00Z",
            "author_login": "kmkalam24"
          },
          {
            "sha": "8d611503b9f71c3b2ec23cff99af5787aa4147a5",
            "date": "2023-09-26T04:25:24Z",
            "author_login": "kmkalam24"
          },
          {
            "sha": "97808dba96de03bd6a3da9696243063870d6fbbf",
            "date": "2023-09-04T09:57:24Z",
            "author_login": "kmkalam24"
          }
        ]
      }
    }
  },
  "vulnerability_details": {
    "cvss_score": 7.2,
    "cvss_vector": "CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:H/I:H/A:H",
    "cwe_id": "CWE-89",
    "description": " SQL Injection in GitHub repository unilogies/bumsys prior to 2.2.0.",
    "attack_vector": "NETWORK",
    "attack_complexity": "LOW"
  },
  "temporal_data": {
    "published_date": "2023-05-22T11:15:09.493",
    "last_modified": "2024-11-21T07:59:22.663",
    "fix_date": "2023-04-28T09:00:55Z"
  },
  "references": [
    {
      "url": "https://github.com/unilogies/bumsys/commit/1b426f58a513194206d0ea8ab58baf1461e54978",
      "source": "security@huntr.dev",
      "tags": [
        "Patch"
      ]
    },
    {
      "url": "https://huntr.dev/bounties/37b80402-0edf-4f26-a668-b6f8b48dcdfb",
      "source": "security@huntr.dev",
      "tags": [
        "Exploit",
        "Patch",
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/unilogies/bumsys/commit/1b426f58a513194206d0ea8ab58baf1461e54978",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Patch"
      ]
    },
    {
      "url": "https://huntr.dev/bounties/37b80402-0edf-4f26-a668-b6f8b48dcdfb",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Exploit",
        "Patch",
        "Third Party Advisory"
      ]
    }
  ],
  "collection_metadata": {
    "collected_at": "2025-01-11T23:05:32.988471",
    "processing_status": "raw"
  },
  "repository_context": {
    "name": "bumsys",
    "owner": "unilogies",
    "created_at": "2022-10-21T06:15:58Z",
    "updated_at": "2023-09-26T06:07:34Z",
    "pushed_at": "2023-09-26T04:34:23Z",
    "size": 158429,
    "stars": 6,
    "forks": 4,
    "open_issues": 0,
    "watchers": 6,
    "has_security_policy": false,
    "default_branch": "main",
    "protected_branches": [],
    "languages": {},
    "commit_activity": {
      "total_commits_last_year": 0,
      "avg_commits_per_week": 0,
      "days_active_last_year": 0
    },
    "security_features": {
      "has_security_policy": false,
      "has_protected_branches": false,
      "has_wiki": true,
      "has_issues": true,
      "allow_forking": true,
      "is_template": false,
      "license": "mit"
    },
    "collected_at": "2025-01-14T13:41:53.005789"
  }
}