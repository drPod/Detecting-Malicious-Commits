{
  "cve_id": "CVE-2023-52139",
  "github_data": {
    "repository": "misskey-dev/misskey",
    "fix_commit": "c96bc36fedc804dc840ea791a9355d7df0748e64",
    "related_commits": [
      "c96bc36fedc804dc840ea791a9355d7df0748e64",
      "c96bc36fedc804dc840ea791a9355d7df0748e64"
    ],
    "patch_url": "https://github.com/misskey-dev/misskey/commit/c96bc36fedc804dc840ea791a9355d7df0748e64.patch",
    "fix_commit_details": {
      "sha": "c96bc36fedc804dc840ea791a9355d7df0748e64",
      "commit_date": "2023-12-27T06:08:59Z",
      "author": {
        "login": "chocolate-pie",
        "type": "User",
        "stats": {
          "total_commits": 9,
          "average_weekly_commits": 0.021377672209026127,
          "total_additions": 0,
          "total_deletions": 0,
          "weeks_active": 8
        }
      },
      "commit_message": {
        "title": "Merge pull request from GHSA-7pxq-6xx9-xpgm",
        "length": 1076,
        "has_description": true,
        "references_issue": true
      },
      "stats": {
        "total": 1378,
        "additions": 797,
        "deletions": 581
      },
      "files": [
        {
          "filename": "CHANGELOG.md",
          "status": "modified",
          "additions": 0,
          "deletions": 1,
          "patch": "@@ -132,7 +132,6 @@\n - Fix: \u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0\u304c\u30e2\u30c7\u30ec\u30fc\u30bf\u30fc\u306f\u95b2\u89a7\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u4fee\u6b63\n - Fix: \u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u306e\u30c8\u30ec\u30f3\u30c9\u9664\u5916\u8a2d\u5b9a\u304c\u5373\u6642\u306b\u52b9\u679c\u3092\u6301\u3064\u3088\u3046\u306b\u4fee\u6b63\n - Fix: HTTP Digest\u30d8\u30c3\u30c0\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u90e8\u5206\u306b\u5927\u6587\u5b57\u306e\"SHA-256\"\u3057\u304b\u4f7f\u3048\u306a\u3044\n-- Fix: \u7ba1\u7406\u8005\u7528API\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u554f\u984c\u3092\u4fee\u6b63\n \n ## 2023.11.1\n "
        },
        {
          "filename": "locales/index.d.ts",
          "status": "modified",
          "additions": 49,
          "deletions": 0,
          "patch": "@@ -2066,6 +2066,55 @@ export interface Locale {\n         \"write:flash\": string;\n         \"read:flash-likes\": string;\n         \"write:flash-likes\": string;\n+        \"read:admin:abuse-user-reports\": string;\n+        \"write:admin:delete-account\": string;\n+        \"write:admin:delete-all-files-of-a-user\": string;\n+        \"read:admin:index-stats\": string;\n+        \"read:admin:table-stats\": string;\n+        \"read:admin:user-ips\": string;\n+        \"read:admin:meta\": string;\n+        \"write:admin:reset-password\": string;\n+        \"write:admin:resolve-abuse-user-report\": string;\n+        \"write:admin:send-email\": string;\n+        \"read:admin:server-info\": string;\n+        \"read:admin:show-moderation-log\": string;\n+        \"read:admin:show-user\": string;\n+        \"read:admin:show-users\": string;\n+        \"write:admin:suspend-user\": string;\n+        \"write:admin:unset-user-avatar\": string;\n+        \"write:admin:unset-user-banner\": string;\n+        \"write:admin:unsuspend-user\": string;\n+        \"write:admin:meta\": string;\n+        \"write:admin:user-note\": string;\n+        \"write:admin:roles\": string;\n+        \"read:admin:roles\": string;\n+        \"write:admin:relays\": string;\n+        \"read:admin:relays\": string;\n+        \"write:admin:invite-codes\": string;\n+        \"read:admin:invite-codes\": string;\n+        \"write:admin:announcements\": string;\n+        \"read:admin:announcements\": string;\n+        \"write:admin:avatar-decorations\": string;\n+        \"read:admin:avatar-decorations\": string;\n+        \"write:admin:federation\": string;\n+        \"write:admin:account\": string;\n+        \"read:admin:account\": string;\n+        \"write:admin:emoji\": string;\n+        \"read:admin:emoji\": string;\n+        \"write:admin:queue\": string;\n+        \"read:admin:queue\": string;\n+        \"write:admin:promo\": string;\n+        \"write:admin:drive\": string;\n+        \"read:admin:drive\": string;\n+        \"read:admin:stream\": string;\n+        \"write:admin:ad\": string;\n+        \"read:admin:ad\": string;\n+        \"write:invite-codes\": string;\n+        \"read:invite-codes\": string;\n+        \"write:clip-favorite\": string;\n+        \"read:clip-favorite\": string;\n+        \"read:federation\": string;\n+        \"write:report-abuse\": string;\n     };\n     \"_auth\": {\n         \"shareAccessTitle\": string;"
        },
        {
          "filename": "locales/ja-JP.yml",
          "status": "modified",
          "additions": 49,
          "deletions": 0,
          "patch": "@@ -1971,6 +1971,55 @@ _permissions:\n   \"write:flash\": \"Play\u3092\u64cd\u4f5c\u3059\u308b\"\n   \"read:flash-likes\": \"Play\u306e\u3044\u3044\u306d\u3092\u898b\u308b\"\n   \"write:flash-likes\": \"Play\u306e\u3044\u3044\u306d\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:abuse-user-reports\": \"\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u306e\u901a\u5831\u3092\u898b\u308b\"\n+  \"write:admin:delete-account\": \"\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b\"\n+  \"write:admin:delete-all-files-of-a-user\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\"\n+  \"read:admin:index-stats\": \"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u898b\u308b\"\n+  \"read:admin:table-stats\": \"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u898b\u308b\"\n+  \"read:admin:user-ips\": \"\u30e6\u30fc\u30b6\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u898b\u308b\"\n+  \"read:admin:meta\": \"\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u898b\u308b\"\n+  \"write:admin:reset-password\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\"\n+  \"write:admin:resolve-abuse-user-report\": \"\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u306e\u901a\u5831\u3092\u89e3\u6c7a\u3059\u308b\"\n+  \"write:admin:send-email\": \"\u30e1\u30fc\u30eb\u3092\u9001\u308b\"\n+  \"read:admin:server-info\": \"\u30b5\u30fc\u30d0\u30fc\u306e\u60c5\u5831\u3092\u898b\u308b\"\n+  \"read:admin:show-moderation-log\": \"\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0\u3092\u898b\u308b\"\n+  \"read:admin:show-user\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u60c5\u5831\u3092\u898b\u308b\"\n+  \"read:admin:show-users\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u60c5\u5831\u3092\u898b\u308b\"\n+  \"write:admin:suspend-user\": \"\u30e6\u30fc\u30b6\u30fc\u3092\u51cd\u7d50\u3059\u308b\"\n+  \"write:admin:unset-user-avatar\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30a2\u30d0\u30bf\u30fc\u3092\u524a\u9664\u3059\u308b\"\n+  \"write:admin:unset-user-banner\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30d0\u30fc\u30ca\u30fc\u3092\u524a\u9664\u3059\u308b\"\n+  \"write:admin:unsuspend-user\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u51cd\u7d50\u3092\u89e3\u9664\u3059\u308b\"\n+  \"write:admin:meta\": \"\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"write:admin:user-note\": \"\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30ce\u30fc\u30c8\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"write:admin:roles\": \"\u30ed\u30fc\u30eb\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:roles\": \"\u30ed\u30fc\u30eb\u3092\u898b\u308b\"\n+  \"write:admin:relays\": \"\u30ea\u30ec\u30fc\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:relays\": \"\u30ea\u30ec\u30fc\u3092\u898b\u308b\"\n+  \"write:admin:invite-codes\": \"\u62db\u5f85\u30b3\u30fc\u30c9\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:invite-codes\": \"\u62db\u5f85\u30b3\u30fc\u30c9\u3092\u898b\u308b\"\n+  \"write:admin:announcements\": \"\u304a\u77e5\u3089\u305b\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:announcements\": \"\u304a\u77e5\u3089\u305b\u3092\u898b\u308b\"\n+  \"write:admin:avatar-decorations\": \"\u30a2\u30d0\u30bf\u30fc\u30c7\u30b3\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:avatar-decorations\": \"\u30a2\u30d0\u30bf\u30fc\u30c7\u30b3\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u898b\u308b\"\n+  \"write:admin:federation\": \"\u9023\u5408\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"write:admin:account\": \"\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:account\": \"\u30e6\u30fc\u30b6\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u898b\u308b\"\n+  \"write:admin:emoji\": \"\u7d75\u6587\u5b57\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:emoji\": \"\u7d75\u6587\u5b57\u3092\u898b\u308b\"\n+  \"write:admin:queue\": \"\u30b8\u30e7\u30d6\u30ad\u30e5\u30fc\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:queue\": \"\u30b8\u30e7\u30d6\u30ad\u30e5\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u898b\u308b\"\n+  \"write:admin:promo\": \"\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u30ce\u30fc\u30c8\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"write:admin:drive\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30c9\u30e9\u30a4\u30d6\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:drive\": \"\u30e6\u30fc\u30b6\u30fc\u306e\u30c9\u30e9\u30a4\u30d6\u306e\u95a2\u3059\u308b\u60c5\u5831\u3092\u898b\u308b\"\n+  \"read:admin:stream\": \"\u7ba1\u7406\u8005\u7528\u306eWebsocket API\u3092\u4f7f\u3046\"\n+  \"write:admin:ad\": \"\u5e83\u544a\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:admin:ad\": \"\u5e83\u544a\u3092\u898b\u308b\"\n+  \"write:invite-codes\": \"\u62db\u5f85\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3059\u308b\"\n+  \"read:invite-codes\": \"\u62db\u5f85\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3059\u308b\"\n+  \"write:clip-favorite\": \"\u30af\u30ea\u30c3\u30d7\u306e\u3044\u3044\u306d\u3092\u64cd\u4f5c\u3059\u308b\"\n+  \"read:clip-favorite\": \"\u30af\u30ea\u30c3\u30d7\u306e\u3044\u3044\u306d\u3092\u898b\u308b\"\n+  \"read:federation\": \"\u9023\u5408\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\"\n+  \"write:report-abuse\": \"\u9055\u53cd\u3092\u5831\u544a\u3059\u308b\"\n \n _auth:\n   shareAccessTitle: \"\u30a2\u30d7\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\""
        },
        {
          "filename": "packages/backend/src/misc/api-permissions.ts",
          "status": "removed",
          "additions": 0,
          "deletions": 40,
          "patch": "@@ -1,40 +0,0 @@\n-/*\n- * SPDX-FileCopyrightText: syuilo and other misskey contributors\n- * SPDX-License-Identifier: AGPL-3.0-only\n- */\n-\n-export const kinds = [\n-\t'read:account',\n-\t'write:account',\n-\t'read:blocks',\n-\t'write:blocks',\n-\t'read:drive',\n-\t'write:drive',\n-\t'read:favorites',\n-\t'write:favorites',\n-\t'read:following',\n-\t'write:following',\n-\t'read:messaging',\n-\t'write:messaging',\n-\t'read:mutes',\n-\t'write:mutes',\n-\t'write:notes',\n-\t'read:notifications',\n-\t'write:notifications',\n-\t'read:reactions',\n-\t'write:reactions',\n-\t'write:votes',\n-\t'read:pages',\n-\t'write:pages',\n-\t'write:page-likes',\n-\t'read:page-likes',\n-\t'read:user-groups',\n-\t'write:user-groups',\n-\t'read:channels',\n-\t'write:channels',\n-\t'read:gallery',\n-\t'write:gallery',\n-\t'read:gallery-likes',\n-\t'write:gallery-likes',\n-];\n-// IF YOU ADD KINDS(PERMISSIONS), YOU MUST ADD TRANSLATIONS (under _permissions)."
        },
        {
          "filename": "packages/backend/src/server/api/ApiCallService.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 1,
          "patch": "@@ -330,7 +330,8 @@ export class ApiCallService implements OnApplicationShutdown {\n \t\t\t}\n \t\t}\n \n-\t\tif (token && ep.meta.kind && !token.permission.some(p => p === ep.meta.kind)) {\n+\t\tif (token && ((ep.meta.kind && !token.permission.some(p => p === ep.meta.kind))\n+\t\t\t|| (!ep.meta.kind && (ep.meta.requireCredential || ep.meta.requireModerator || ep.meta.requireAdmin)))) {\n \t\t\tthrow new ApiError({\n \t\t\t\tmessage: 'Your app does not have the necessary permissions to use this endpoint.',\n \t\t\t\tcode: 'PERMISSION_DENIED',"
        },
        {
          "filename": "packages/backend/src/server/api/StreamingApiServerService.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 0,
          "patch": "@@ -71,6 +71,10 @@ export class StreamingApiServerService {\n \n \t\t\ttry {\n \t\t\t\t[user, app] = await this.authenticateService.authenticate(token);\n+\n+\t\t\t\tif (app !== null && !app.permission.some(p => p === 'read:account')) {\n+\t\t\t\t\tthrow new AuthenticationError('Your app does not have necessary permissions to use websocket API.');\n+\t\t\t\t}\n \t\t\t} catch (e) {\n \t\t\t\tif (e instanceof AuthenticationError) {\n \t\t\t\t\tsocket.write(["
        },
        {
          "filename": "packages/backend/src/server/api/endpoints.ts",
          "status": "modified",
          "additions": 19,
          "deletions": 1,
          "patch": "@@ -4,6 +4,7 @@\n  */\n \n import type { Schema } from '@/misc/json-schema.js';\n+import { permissions } from 'misskey-js';\n import { RolePolicies } from '@/core/RoleService.js';\n \n import * as ep___admin_meta from './endpoints/admin/meta.js';\n@@ -724,7 +725,7 @@ const eps = [\n \t['retention', ep___retention],\n ];\n \n-export interface IEndpointMeta {\n+interface IEndpointMetaBase {\n \treadonly stability?: 'deprecated' | 'experimental' | 'stable';\n \n \treadonly tags?: ReadonlyArray<string>;\n@@ -823,6 +824,23 @@ export interface IEndpointMeta {\n \treadonly cacheSec?: number;\n }\n \n+export type IEndpointMeta = (Omit<IEndpointMetaBase, 'requireCrential' | 'requireModerator' | 'requireAdmin'> & {\n+\trequireCredential?: false,\n+\trequireAdmin?: false,\n+\trequireModerator?: false,\n+}) | (Omit<IEndpointMetaBase, 'secure'> & {\n+\tsecure: true,\n+}) | (Omit<IEndpointMetaBase, 'requireCredential' | 'kind'> & {\n+\trequireCredential: true,\n+\tkind: (typeof permissions)[number],\n+}) | (Omit<IEndpointMetaBase, 'requireModerator' | 'kind'> & {\n+\trequireModerator: true,\n+\tkind: (typeof permissions)[number],\n+}) | (Omit<IEndpointMetaBase, 'requireAdmin' | 'kind'> & {\n+\trequireAdmin: true,\n+\tkind: (typeof permissions)[number],\n+})\n+\n export interface IEndpoint {\n \tname: string;\n \tmeta: IEndpointMeta;"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/abuse-user-reports.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { AbuseUserReportEntityService } from '@/core/entities/AbuseUserReportEnt\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:abuse-user-reports',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/accounts/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -15,7 +15,7 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n+\tsecure: true,\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/accounts/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { UserEntityService } from '@/core/entities/UserEntityService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:account',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/accounts/find-by-email.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '@/server/api/error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'read:admin:account',\n \n \terrors: {\n \t\tuserNotFound: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/ad/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:ad',\n \tres: {\n \t\ttype: 'object',\n \t\toptional: false,"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/ad/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:ad',\n \n \terrors: {\n \t\tnoSuchAd: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/ad/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:ad',\n \tres: {\n \t\ttype: 'array',\n \t\toptional: false,"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/ad/update.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:ad',\n \n \terrors: {\n \t\tnoSuchAd: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/announcements/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { AnnouncementService } from '@/core/AnnouncementService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:announcements',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/announcements/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:announcements',\n \n \terrors: {\n \t\tnoSuchAnnouncement: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/announcements/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { IdService } from '@/core/IdService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:announcements',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/announcements/update.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:announcements',\n \n \terrors: {\n \t\tnoSuchAnnouncement: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/avatar-decorations/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { AvatarDecorationService } from '@/core/AvatarDecorationService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageAvatarDecorations',\n+\tkind: 'write:admin:avatar-decorations',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/avatar-decorations/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageAvatarDecorations',\n+\tkind: 'write:admin:avatar-decorations',\n \terrors: {\n \t},\n } as const;"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/avatar-decorations/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -15,10 +15,9 @@ import { AvatarDecorationService } from '@/core/AvatarDecorationService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageAvatarDecorations',\n+\tkind: 'read:admin:avatar-decorations',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/avatar-decorations/update.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageAvatarDecorations',\n+\tkind: 'write:admin:avatar-decorations',\n \n \terrors: {\n \t},"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/delete-account.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:delete-account',\n \n \tres: {\n \t},"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/delete-all-files-of-a-user.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:delete-all-files-of-a-user',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/drive/clean-remote-files.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { QueueService } from '@/core/QueueService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:drive',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/drive/cleanup.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:drive',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/drive/files.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { DriveFileEntityService } from '@/core/entities/DriveFileEntityService.j\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:drive',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/drive/show-file.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:drive',\n \n \terrors: {\n \t\tnoSuchFile: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/add-aliases-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/add.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n \n \terrors: {\n \t\tnoSuchFile: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/copy.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -16,10 +16,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n \n \terrors: {\n \t\tnoSuchEmoji: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/delete-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n \n \terrors: {\n \t\tnoSuchEmoji: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/import-zip.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -8,7 +8,7 @@ import { Endpoint } from '@/server/api/endpoint-base.js';\n import { QueueService } from '@/core/QueueService.js';\n \n export const meta = {\n-\tkind: 'write:admin',\n+\tsecure: true,\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n } as const;"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/list-remote.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -15,10 +15,9 @@ import { sqlLikeEscape } from '@/misc/sql-like-escape.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'read:admin:emoji',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -15,10 +15,9 @@ import { EmojiEntityService } from '@/core/entities/EmojiEntityService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'read:admin:emoji',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/remove-aliases-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/set-aliases-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/set-category-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/set-license-bulk.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { CustomEmojiService } from '@/core/CustomEmojiService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/emoji/update.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireRolePolicy: 'canManageCustomEmojis',\n+\tkind: 'write:admin:emoji',\n \n \terrors: {\n \t\tnoSuchEmoji: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/federation/delete-all-files.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:federation',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/federation/refresh-remote-instance-metadata.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:federation',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/federation/remove-all-following.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { QueueService } from '@/core/QueueService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:federation',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/federation/update-instance.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:federation',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/get-index-stats.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,8 +11,7 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \trequireCredential: true,\n \trequireAdmin: true,\n-\n-\tkind: 'read:admin',\n+\tkind: 'read:admin:index-stats',\n \n \ttags: ['admin'],\n \tres: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/get-table-stats.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,8 +11,7 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \trequireCredential: true,\n \trequireAdmin: true,\n-\n-\tkind: 'read:admin',\n+\tkind: 'read:admin:table-stats',\n \n \ttags: ['admin'],\n "
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/get-user-ips.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 3,
          "patch": "@@ -12,10 +12,9 @@ import { IdService } from '@/core/IdService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:user-ips',\n \tres: {\n \t\ttype: 'array',\n \t\toptional: false,\n@@ -34,7 +33,7 @@ export const meta = {\n \t\t\t\t},\n \t\t\t},\n \t\t},\n-\t}\n+\t},\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/invite/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -16,10 +16,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:invite-codes',\n \n \terrors: {\n \t\tinvalidDateTime: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/invite/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:invite-codes',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/meta.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { DEFAULT_POLICIES } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['meta'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'read:admin:meta',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/promo/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:promo',\n \n \terrors: {\n \t\tnoSuchNote: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/queue/clear.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import { QueueService } from '@/core/QueueService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:queue',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/queue/deliver-delayed.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import type { DeliverQueue } from '@/core/QueueModule.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:queue',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/queue/inbox-delayed.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import type { InboxQueue } from '@/core/QueueModule.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:queue',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/queue/promote.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import { QueueService } from '@/core/QueueService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:queue',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/queue/stats.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import type { DbQueue, DeliverQueue, EndedPollNotificationQueue, InboxQueue, Obj\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:emoji',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/relays/add.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:relays',\n \n \terrors: {\n \t\tinvalidUrl: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/relays/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { RelayService } from '@/core/RelayService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:relays',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/relays/remove.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { RelayService } from '@/core/RelayService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:relays',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/reset-password.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:reset-password',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/resolve-abuse-user-report.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -15,10 +15,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:resolve-abuse-user-report',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/assign.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { RoleService } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import { RoleService } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:roles',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { RoleService } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { RoleEntityService } from '@/core/entities/RoleEntityService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:roles',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/show.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { RoleEntityService } from '@/core/entities/RoleEntityService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/unassign.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { RoleService } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/update-default-policies.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -11,10 +11,9 @@ import { MetaService } from '@/core/MetaService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:roles',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/update.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,10 +14,9 @@ import { RoleService } from '@/core/RoleService.js';\n export const meta = {\n \ttags: ['admin', 'role'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/roles/users.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -16,10 +16,9 @@ import { ApiError } from '../../../error.js';\n export const meta = {\n \ttags: ['admin', 'role', 'users'],\n \n-\tkind: 'read:admin',\n-\n \trequireCredential: false,\n \trequireAdmin: true,\n+\tkind: 'read:admin:roles',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/send-email.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -10,10 +10,9 @@ import { EmailService } from '@/core/EmailService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:send-email',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/server-info.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -14,11 +14,10 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'read:admin:server-info',\n \n \ttags: ['admin', 'meta'],\n \n-\tkind: 'read:admin',\n-\n \tres: {\n \t\ttype: 'object',\n \t\toptional: false, nullable: false,"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/show-moderation-logs.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -15,8 +15,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireAdmin: true,\n-\n-\tkind: 'read:admin',\n+\tkind: 'read:admin:show-moderation-log',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/show-user.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -16,8 +16,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireModerator: true,\n-\n-\tkind: 'read:admin',\n+\tkind: 'read:admin:show-user',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/show-users.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -16,8 +16,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireModerator: true,\n-\n-\tkind: 'read:admin',\n+\tkind: 'read:admin:show-users',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/suspend-user.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -19,10 +19,9 @@ import { QueueService } from '@/core/QueueService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:suspend-user',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/unset-user-avatar.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:unset-user-avatar',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/unset-user-banner.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:unset-user-banner',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/unsuspend-user.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -13,10 +13,9 @@ import { DI } from '@/di-symbols.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:unsuspend-user',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/update-meta.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { MetaService } from '@/core/MetaService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireAdmin: true,\n+\tkind: 'write:admin:meta',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/admin/update-user-note.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 2,
          "patch": "@@ -12,10 +12,9 @@ import { ModerationLogService } from '@/core/ModerationLogService.js';\n export const meta = {\n \ttags: ['admin'],\n \n-\tkind: 'write:admin',\n-\n \trequireCredential: true,\n \trequireModerator: true,\n+\tkind: 'write:admin:user-note',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/ap/get.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -12,6 +12,7 @@ export const meta = {\n \ttags: ['federation'],\n \n \trequireCredential: true,\n+\tkind: 'read:federation',\n \n \tlimit: {\n \t\tduration: ms('1hour'),"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/ap/show.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -25,6 +25,7 @@ export const meta = {\n \ttags: ['federation'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tlimit: {\n \t\tduration: ms('1hour'),"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/federation/update-remote-user.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -11,7 +11,7 @@ import { GetterService } from '@/server/api/GetterService.js';\n export const meta = {\n \ttags: ['federation'],\n \n-\trequireCredential: true,\n+\trequireCredential: false,\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/fetch-external-resources.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -14,6 +14,7 @@ export const meta = {\n \ttags: ['meta'],\n \n \trequireCredential: true,\n+\tsecure: true,\n \n \tlimit: {\n \t\tduration: ms('1hour'),"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -14,6 +14,7 @@ export const meta = {\n \ttags: ['account'],\n \n \trequireCredential: true,\n+\tkind: \"read:account\",\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/claim-achievement.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -10,6 +10,7 @@ import { AchievementService, ACHIEVEMENT_TYPES } from '@/core/AchievementService\n export const meta = {\n \trequireCredential: true,\n \tprohibitMoved: true,\n+\tkind: 'write:account',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/get-all.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -9,6 +9,7 @@ import { RegistryApiService } from '@/core/RegistryApiService.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/get-detail.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -10,6 +10,7 @@ import { ApiError } from '../../../error.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \terrors: {\n \t\tnoSuchKey: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/get.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -10,6 +10,7 @@ import { ApiError } from '../../../error.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \terrors: {\n \t\tnoSuchKey: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/keys-with-type.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -9,6 +9,7 @@ import { RegistryApiService } from '@/core/RegistryApiService.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/keys.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -9,6 +9,7 @@ import { RegistryApiService } from '@/core/RegistryApiService.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'read:account',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/remove.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -12,6 +12,7 @@ import { ApiError } from '../../../error.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'write:account',\n \n \terrors: {\n \t\tnoSuchKey: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/i/registry/set.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -9,6 +9,7 @@ import { RegistryApiService } from '@/core/RegistryApiService.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'write:account',\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/invite/create.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -19,6 +19,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireRolePolicy: 'canInvite',\n+\tkind: 'write:invite-codes',\n \n \terrors: {\n \t\texceededCreateLimit: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/invite/delete.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -15,6 +15,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireRolePolicy: 'canInvite',\n+\tkind: 'write:invite-codes',\n \n \terrors: {\n \t\tnoSuchCode: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/invite/limit.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -16,6 +16,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireRolePolicy: 'canInvite',\n+\tkind: 'read:invite-codes',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/invite/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -15,6 +15,7 @@ export const meta = {\n \n \trequireCredential: true,\n \trequireRolePolicy: 'canInvite',\n+\tkind: 'read:invite-codes',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/my/apps.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -13,6 +13,7 @@ export const meta = {\n \ttags: ['account', 'app'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/hybrid-timeline.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -25,6 +25,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/mentions.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -16,6 +16,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/polls/recommendation.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -14,6 +14,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/state.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -12,6 +12,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/timeline.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -22,6 +22,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/translate.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -17,6 +17,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'object',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/notes/user-list-timeline.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -22,6 +22,7 @@ export const meta = {\n \ttags: ['notes', 'lists'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/promo/read.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -15,6 +15,7 @@ export const meta = {\n \ttags: ['notes'],\n \n \trequireCredential: true,\n+\tkind: 'write:account',\n \n \terrors: {\n \t\tnoSuchNote: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/roles/list.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -13,6 +13,7 @@ export const meta = {\n \ttags: ['role'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tres: {\n \t\ttype: 'array',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/roles/notes.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -18,6 +18,7 @@ export const meta = {\n \ttags: ['role', 'notes'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \terrors: {\n \t\tnoSuchRole: {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/sw/register.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -14,6 +14,7 @@ export const meta = {\n \ttags: ['account'],\n \n \trequireCredential: true,\n+\tsecure: true,\n \n \tdescription: 'Register to receive push notifications.',\n "
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/sw/show-registration.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -12,6 +12,7 @@ export const meta = {\n \ttags: ['account'],\n \n \trequireCredential: true,\n+\tsecure: true,\n \n \tdescription: 'Check push notification registration exists.',\n "
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/sw/update-registration.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -13,6 +13,7 @@ export const meta = {\n \ttags: ['account'],\n \n \trequireCredential: true,\n+\tsecure: true,\n \n \tdescription: 'Update push notification registration.',\n "
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/achievements.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -9,7 +9,7 @@ import type { UserProfilesRepository } from '@/models/_.js';\n import { DI } from '@/di-symbols.js';\n \n export const meta = {\n-\trequireCredential: true,\n+\trequireCredential: false,\n \n \tres: {\n \t\ttype: 'array',\n@@ -24,7 +24,7 @@ export const meta = {\n \t\t\t\t},\n \t\t\t},\n \t\t},\n-\t}\n+\t},\n } as const;\n \n export const paramDef = {"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/lists/create-from-public.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -18,6 +18,7 @@ import { UserListService } from '@/core/UserListService.js';\n export const meta = {\n \trequireCredential: true,\n \tprohibitMoved: true,\n+\tkind: 'write:account',\n \tres: {\n \t\ttype: 'object',\n \t\toptional: false, nullable: false,"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/lists/favorite.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -12,6 +12,7 @@ import { DI } from '@/di-symbols.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'write:account',\n \terrors: {\n \t\tnoSuchList: {\n \t\t\tmessage: 'No such user list.',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/lists/unfavorite.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -11,6 +11,7 @@ import { DI } from '@/di-symbols.js';\n \n export const meta = {\n \trequireCredential: true,\n+\tkind: 'write:account',\n \terrors: {\n \t\tnoSuchList: {\n \t\t\tmessage: 'No such user list.',"
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/relation.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -11,6 +11,7 @@ export const meta = {\n \ttags: ['users'],\n \n \trequireCredential: true,\n+\tkind: 'read:account',\n \n \tdescription: 'Show the different kinds of relations between the authenticated user and the specified user(s).',\n "
        },
        {
          "filename": "packages/backend/src/server/api/endpoints/users/report-abuse.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 0,
          "patch": "@@ -20,6 +20,7 @@ export const meta = {\n \ttags: ['users'],\n \n \trequireCredential: true,\n+\tkind: 'write:report-abuse',\n \n \tdescription: 'File a report.',\n "
        },
        {
          "filename": "packages/backend/src/server/api/stream/ChannelsService.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 1,
          "patch": "@@ -19,6 +19,7 @@ import { AntennaChannelService } from './channels/antenna.js';\n import { DriveChannelService } from './channels/drive.js';\n import { HashtagChannelService } from './channels/hashtag.js';\n import { RoleTimelineChannelService } from './channels/role-timeline.js';\n+import { type MiChannelService } from './channel.js';\n \n @Injectable()\n export class ChannelsService {\n@@ -41,7 +42,7 @@ export class ChannelsService {\n \t}\n \n \t@bindThis\n-\tpublic getChannelService(name: string) {\n+\tpublic getChannelService(name: string): MiChannelService<boolean> {\n \t\tswitch (name) {\n \t\t\tcase 'main': return this.mainChannelService;\n \t\t\tcase 'homeTimeline': return this.homeTimelineChannelService;"
        },
        {
          "filename": "packages/backend/src/server/api/stream/Connection.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 0,
          "patch": "@@ -248,6 +248,11 @@ export default class Connection {\n \t\t\treturn;\n \t\t}\n \n+\t\tif (this.token && ((channelService.kind && !this.token.permission.some(p => p === channelService.kind))\n+\t\t\t|| (!channelService.kind && channelService.requireCredential))) {\n+\t\t\treturn;\n+\t\t}\n+\n \t\t// \u5171\u6709\u53ef\u80fd\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u3066\u3001\u304b\u3064\u305d\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u65e2\u306b\u63a5\u7d9a\u3057\u3066\u3044\u305f\u3089\u7121\u610f\u5473\u306a\u306e\u3067\u7121\u8996\n \t\tif (channelService.shouldShare && this.channels.some(c => c.chName === channel)) {\n \t\t\treturn;"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channel.ts",
          "status": "modified",
          "additions": 8,
          "deletions": 0,
          "patch": "@@ -16,6 +16,7 @@ export default abstract class Channel {\n \tpublic abstract readonly chName: string;\n \tpublic static readonly shouldShare: boolean;\n \tpublic static readonly requireCredential: boolean;\n+\tpublic static readonly kind?: string | null;\n \n \tprotected get user() {\n \t\treturn this.connection.user;\n@@ -76,3 +77,10 @@ export default abstract class Channel {\n \n \tpublic onMessage?(type: string, body: any): void;\n }\n+\n+export type MiChannelService<T extends boolean> = {\n+\tshouldShare: boolean;\n+\trequireCredential: T;\n+\tkind: T extends true ? string : string | null | undefined;\n+\tcreate: (id: string, connection: Connection) => Channel;\n+}"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/admin.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -5,12 +5,13 @@\n \n import { Injectable } from '@nestjs/common';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class AdminChannel extends Channel {\n \tpublic readonly chName = 'admin';\n \tpublic static shouldShare = true;\n-\tpublic static requireCredential = true;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:admin:stream';\n \n \t@bindThis\n \tpublic async init(params: any) {\n@@ -22,9 +23,10 @@ class AdminChannel extends Channel {\n }\n \n @Injectable()\n-export class AdminChannelService {\n+export class AdminChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = AdminChannel.shouldShare;\n \tpublic readonly requireCredential = AdminChannel.requireCredential;\n+\tpublic readonly kind = AdminChannel.kind;\n \n \tconstructor(\n \t) {"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/antenna.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -8,12 +8,13 @@ import { isUserRelated } from '@/misc/is-user-related.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n import type { GlobalEvents } from '@/core/GlobalEventService.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class AntennaChannel extends Channel {\n \tpublic readonly chName = 'antenna';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:account';\n \tprivate antennaId: string;\n \n \tconstructor(\n@@ -62,9 +63,10 @@ class AntennaChannel extends Channel {\n }\n \n @Injectable()\n-export class AntennaChannelService {\n+export class AntennaChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = AntennaChannel.shouldShare;\n \tpublic readonly requireCredential = AntennaChannel.requireCredential;\n+\tpublic readonly kind = AntennaChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/channel.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -8,12 +8,12 @@ import { isUserRelated } from '@/misc/is-user-related.js';\n import type { Packed } from '@/misc/json-schema.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class ChannelChannel extends Channel {\n \tpublic readonly chName = 'channel';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate channelId: string;\n \n \tconstructor(\n@@ -65,9 +65,10 @@ class ChannelChannel extends Channel {\n }\n \n @Injectable()\n-export class ChannelChannelService {\n+export class ChannelChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = ChannelChannel.shouldShare;\n \tpublic readonly requireCredential = ChannelChannel.requireCredential;\n+\tpublic readonly kind = ChannelChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/drive.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -5,12 +5,13 @@\n \n import { Injectable } from '@nestjs/common';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class DriveChannel extends Channel {\n \tpublic readonly chName = 'drive';\n \tpublic static shouldShare = true;\n-\tpublic static requireCredential = true;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:account';\n \n \t@bindThis\n \tpublic async init(params: any) {\n@@ -22,9 +23,10 @@ class DriveChannel extends Channel {\n }\n \n @Injectable()\n-export class DriveChannelService {\n+export class DriveChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = DriveChannel.shouldShare;\n \tpublic readonly requireCredential = DriveChannel.requireCredential;\n+\tpublic readonly kind = DriveChannel.kind;\n \n \tconstructor(\n \t) {"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/global-timeline.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -12,12 +12,12 @@ import { MetaService } from '@/core/MetaService.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n import { RoleService } from '@/core/RoleService.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class GlobalTimelineChannel extends Channel {\n \tpublic readonly chName = 'globalTimeline';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate withRenotes: boolean;\n \tprivate withFiles: boolean;\n \n@@ -91,9 +91,10 @@ class GlobalTimelineChannel extends Channel {\n }\n \n @Injectable()\n-export class GlobalTimelineChannelService {\n+export class GlobalTimelineChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = GlobalTimelineChannel.shouldShare;\n \tpublic readonly requireCredential = GlobalTimelineChannel.requireCredential;\n+\tpublic readonly kind = GlobalTimelineChannel.kind;\n \n \tconstructor(\n \t\tprivate metaService: MetaService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/hashtag.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -9,12 +9,12 @@ import { isUserRelated } from '@/misc/is-user-related.js';\n import type { Packed } from '@/misc/json-schema.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class HashtagChannel extends Channel {\n \tpublic readonly chName = 'hashtag';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate q: string[][];\n \n \tconstructor(\n@@ -70,9 +70,10 @@ class HashtagChannel extends Channel {\n }\n \n @Injectable()\n-export class HashtagChannelService {\n+export class HashtagChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = HashtagChannel.shouldShare;\n \tpublic readonly requireCredential = HashtagChannel.requireCredential;\n+\tpublic readonly kind = HashtagChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/home-timeline.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -10,12 +10,13 @@ import { isInstanceMuted } from '@/misc/is-instance-muted.js';\n import type { Packed } from '@/misc/json-schema.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class HomeTimelineChannel extends Channel {\n \tpublic readonly chName = 'homeTimeline';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = true;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:account';\n \tprivate withRenotes: boolean;\n \tprivate withFiles: boolean;\n \n@@ -99,9 +100,10 @@ class HomeTimelineChannel extends Channel {\n }\n \n @Injectable()\n-export class HomeTimelineChannelService {\n+export class HomeTimelineChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = HomeTimelineChannel.shouldShare;\n \tpublic readonly requireCredential = HomeTimelineChannel.requireCredential;\n+\tpublic readonly kind = HomeTimelineChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/hybrid-timeline.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -12,12 +12,13 @@ import { MetaService } from '@/core/MetaService.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n import { RoleService } from '@/core/RoleService.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class HybridTimelineChannel extends Channel {\n \tpublic readonly chName = 'hybridTimeline';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = true;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:account';\n \tprivate withRenotes: boolean;\n \tprivate withReplies: boolean;\n \tprivate withFiles: boolean;\n@@ -114,9 +115,10 @@ class HybridTimelineChannel extends Channel {\n }\n \n @Injectable()\n-export class HybridTimelineChannelService {\n+export class HybridTimelineChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = HybridTimelineChannel.shouldShare;\n \tpublic readonly requireCredential = HybridTimelineChannel.requireCredential;\n+\tpublic readonly kind = HybridTimelineChannel.kind;\n \n \tconstructor(\n \t\tprivate metaService: MetaService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/local-timeline.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -11,12 +11,12 @@ import { MetaService } from '@/core/MetaService.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n import { RoleService } from '@/core/RoleService.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class LocalTimelineChannel extends Channel {\n \tpublic readonly chName = 'localTimeline';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate withRenotes: boolean;\n \tprivate withReplies: boolean;\n \tprivate withFiles: boolean;\n@@ -90,9 +90,10 @@ class LocalTimelineChannel extends Channel {\n }\n \n @Injectable()\n-export class LocalTimelineChannelService {\n+export class LocalTimelineChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = LocalTimelineChannel.shouldShare;\n \tpublic readonly requireCredential = LocalTimelineChannel.requireCredential;\n+\tpublic readonly kind = LocalTimelineChannel.kind;\n \n \tconstructor(\n \t\tprivate metaService: MetaService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/main.ts",
          "status": "modified",
          "additions": 5,
          "deletions": 3,
          "patch": "@@ -7,12 +7,13 @@ import { Injectable } from '@nestjs/common';\n import { isInstanceMuted, isUserFromMutedInstance } from '@/misc/is-instance-muted.js';\n import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class MainChannel extends Channel {\n \tpublic readonly chName = 'main';\n \tpublic static shouldShare = true;\n-\tpublic static requireCredential = true;\n+\tpublic static requireCredential = true as const;\n+\tpublic static kind = 'read:account';\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,\n@@ -63,9 +64,10 @@ class MainChannel extends Channel {\n }\n \n @Injectable()\n-export class MainChannelService {\n+export class MainChannelService implements MiChannelService<true> {\n \tpublic readonly shouldShare = MainChannel.shouldShare;\n \tpublic readonly requireCredential = MainChannel.requireCredential;\n+\tpublic readonly kind = MainChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/queue-stats.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -6,14 +6,14 @@\n import Xev from 'xev';\n import { Injectable } from '@nestjs/common';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n const ev = new Xev();\n \n class QueueStatsChannel extends Channel {\n \tpublic readonly chName = 'queueStats';\n \tpublic static shouldShare = true;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \n \tconstructor(id: string, connection: Channel['connection']) {\n \t\tsuper(id, connection);\n@@ -53,9 +53,10 @@ class QueueStatsChannel extends Channel {\n }\n \n @Injectable()\n-export class QueueStatsChannelService {\n+export class QueueStatsChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = QueueStatsChannel.shouldShare;\n \tpublic readonly requireCredential = QueueStatsChannel.requireCredential;\n+\tpublic readonly kind = QueueStatsChannel.kind;\n \n \tconstructor(\n \t) {"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/role-timeline.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -10,12 +10,12 @@ import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { bindThis } from '@/decorators.js';\n import { RoleService } from '@/core/RoleService.js';\n import type { GlobalEvents } from '@/core/GlobalEventService.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class RoleTimelineChannel extends Channel {\n \tpublic readonly chName = 'roleTimeline';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate roleId: string;\n \n \tconstructor(\n@@ -67,9 +67,10 @@ class RoleTimelineChannel extends Channel {\n }\n \n @Injectable()\n-export class RoleTimelineChannelService {\n+export class RoleTimelineChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = RoleTimelineChannel.shouldShare;\n \tpublic readonly requireCredential = RoleTimelineChannel.requireCredential;\n+\tpublic readonly kind = RoleTimelineChannel.kind;\n \n \tconstructor(\n \t\tprivate noteEntityService: NoteEntityService,"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/server-stats.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -6,14 +6,14 @@\n import Xev from 'xev';\n import { Injectable } from '@nestjs/common';\n import { bindThis } from '@/decorators.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n const ev = new Xev();\n \n class ServerStatsChannel extends Channel {\n \tpublic readonly chName = 'serverStats';\n \tpublic static shouldShare = true;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \n \tconstructor(id: string, connection: Channel['connection']) {\n \t\tsuper(id, connection);\n@@ -53,9 +53,10 @@ class ServerStatsChannel extends Channel {\n }\n \n @Injectable()\n-export class ServerStatsChannelService {\n+export class ServerStatsChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = ServerStatsChannel.shouldShare;\n \tpublic readonly requireCredential = ServerStatsChannel.requireCredential;\n+\tpublic readonly kind = ServerStatsChannel.kind;\n \n \tconstructor(\n \t) {"
        },
        {
          "filename": "packages/backend/src/server/api/stream/channels/user-list.ts",
          "status": "modified",
          "additions": 4,
          "deletions": 3,
          "patch": "@@ -11,12 +11,12 @@ import { NoteEntityService } from '@/core/entities/NoteEntityService.js';\n import { DI } from '@/di-symbols.js';\n import { bindThis } from '@/decorators.js';\n import { isInstanceMuted } from '@/misc/is-instance-muted.js';\n-import Channel from '../channel.js';\n+import Channel, { type MiChannelService } from '../channel.js';\n \n class UserListChannel extends Channel {\n \tpublic readonly chName = 'userList';\n \tpublic static shouldShare = false;\n-\tpublic static requireCredential = false;\n+\tpublic static requireCredential = false as const;\n \tprivate listId: string;\n \tprivate membershipsMap: Record<string, Pick<MiUserListMembership, 'withReplies'> | undefined> = {};\n \tprivate listUsersClock: NodeJS.Timeout;\n@@ -137,9 +137,10 @@ class UserListChannel extends Channel {\n }\n \n @Injectable()\n-export class UserListChannelService {\n+export class UserListChannelService implements MiChannelService<false> {\n \tpublic readonly shouldShare = UserListChannel.shouldShare;\n \tpublic readonly requireCredential = UserListChannel.requireCredential;\n+\tpublic readonly kind = UserListChannel.kind;\n \n \tconstructor(\n \t\t@Inject(DI.userListsRepository)"
        },
        {
          "filename": "packages/backend/src/server/oauth/OAuth2ProviderService.ts",
          "status": "modified",
          "additions": 2,
          "deletions": 2,
          "patch": "@@ -17,9 +17,9 @@ import bodyParser from 'body-parser';\n import fastifyExpress from '@fastify/express';\n import { verifyChallenge } from 'pkce-challenge';\n import { mf2 } from 'microformats-parser';\n+import { permissions as kinds } from 'misskey-js';\n import { secureRndstr } from '@/misc/secure-rndstr.js';\n import { HttpRequestService } from '@/core/HttpRequestService.js';\n-import { kinds } from '@/misc/api-permissions.js';\n import type { Config } from '@/config.js';\n import { DI } from '@/di-symbols.js';\n import { bindThis } from '@/decorators.js';\n@@ -426,7 +426,7 @@ export class OAuth2ProviderService {\n \t\t\t\t}\n \n \t\t\t\ttry {\n-\t\t\t\t\tconst scopes = [...new Set(scope)].filter(s => kinds.includes(s));\n+\t\t\t\t\tconst scopes = [...new Set(scope)].filter(s => (<readonly string[]>kinds).includes(s));\n \t\t\t\t\tif (!scopes.length) {\n \t\t\t\t\t\tthrow new AuthorizationError('`scope` parameter has no known scope', 'invalid_scope');\n \t\t\t\t\t}"
        },
        {
          "filename": "packages/backend/test/e2e/api.ts",
          "status": "modified",
          "additions": 42,
          "deletions": 1,
          "patch": "@@ -7,7 +7,7 @@ process.env.NODE_ENV = 'test';\n \n import * as assert from 'assert';\n import { IncomingMessage } from 'http';\n-import { signup, api, startServer, successfulApiCall, failedApiCall, uploadFile, waitFire, connectStream, relativeFetch } from '../utils.js';\n+import { signup, api, startServer, successfulApiCall, failedApiCall, uploadFile, waitFire, connectStream, relativeFetch, createAppToken } from '../utils.js';\n import type { INestApplicationContext } from '@nestjs/common';\n import type * as misskey from 'misskey-js';\n \n@@ -89,6 +89,11 @@ describe('API', () => {\n \t});\n \n \ttest('\u7ba1\u7406\u8005\u5c02\u7528\u306eAPI\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650', async () => {\n+\t\tconst application = await createAppToken(alice, ['read:account']);\n+\t\tconst application2 = await createAppToken(alice, ['read:admin:index-stats']);\n+\t\tconst application3 = await createAppToken(bob, []);\n+\t\tconst application4 = await createAppToken(bob, ['read:admin:index-stats']);\n+\n \t\t// alice\u306f\u7ba1\u7406\u8005\u3001API\u3092\u4f7f\u3048\u308b\n \t\tawait successfulApiCall({\n \t\t\tendpoint: '/admin/get-index-stats',\n@@ -128,6 +133,42 @@ describe('API', () => {\n \t\t\tcode: 'AUTHENTICATION_FAILED',\n \t\t\tid: 'b0a7f5f8-dc2f-4171-b91f-de88ad238e14',\n \t\t});\n+\n+\t\tawait successfulApiCall({\n+\t\t\tendpoint: '/admin/get-index-stats',\n+\t\t\tparameters: {},\n+\t\t\tuser: { token: application2 },\n+\t\t});\n+\n+\t\tawait failedApiCall({\n+\t\t\tendpoint: '/admin/get-index-stats',\n+\t\t\tparameters: {},\n+\t\t\tuser: { token: application },\n+\t\t}, {\n+\t\t\tstatus: 403,\n+\t\t\tcode: 'PERMISSION_DENIED',\n+\t\t\tid: '1370e5b7-d4eb-4566-bb1d-7748ee6a1838',\n+\t\t});\n+\n+\t\tawait failedApiCall({\n+\t\t\tendpoint: '/admin/get-index-stats',\n+\t\t\tparameters: {},\n+\t\t\tuser: { token: application3 },\n+\t\t}, {\n+\t\t\tstatus: 403,\n+\t\t\tcode: 'ROLE_PERMISSION_DENIED',\n+\t\t\tid: 'c3d38592-54c0-429d-be96-5636b0431a61',\n+\t\t});\n+\n+\t\tawait failedApiCall({\n+\t\t\tendpoint: '/admin/get-index-stats',\n+\t\t\tparameters: {},\n+\t\t\tuser: { token: application4 },\n+\t\t}, {\n+\t\t\tstatus: 403,\n+\t\t\tcode: 'ROLE_PERMISSION_DENIED',\n+\t\t\tid: 'c3d38592-54c0-429d-be96-5636b0431a61',\n+\t\t});\n \t});\n \n \tdescribe('Authentication header', () => {"
        },
        {
          "filename": "packages/backend/test/e2e/streaming.ts",
          "status": "modified",
          "additions": 24,
          "deletions": 1,
          "patch": "@@ -6,8 +6,9 @@\n process.env.NODE_ENV = 'test';\n \n import * as assert from 'assert';\n+import { WebSocket } from 'ws';\n import { MiFollowing } from '@/models/Following.js';\n-import { signup, api, post, startServer, initTestDb, waitFire } from '../utils.js';\n+import { signup, api, post, startServer, initTestDb, waitFire, createAppToken, port } from '../utils.js';\n import type { INestApplicationContext } from '@nestjs/common';\n import type * as misskey from 'misskey-js';\n \n@@ -560,6 +561,28 @@ describe('Streaming', () => {\n \t\t\t});\n \t\t});\n \n+\t\ttest('Authentication', async () => {\n+\t\t\tconst application = await createAppToken(ayano, []);\n+\t\t\tconst application2 = await createAppToken(ayano, ['read:account']);\n+\t\t\tconst socket = new WebSocket(`ws://127.0.0.1:${port}/streaming?i=${application}`);\n+\t\t\tconst established = await new Promise<boolean>((resolve, reject) => {\n+\t\t\t\tsocket.on('error', () => resolve(false));\n+\t\t\t\tsocket.on('unexpected-response', () => resolve(false));\n+\t\t\t\tsetTimeout(() => resolve(true), 3000);\n+\t\t\t});\n+\n+\t\t\tsocket.close();\n+\t\t\tassert.strictEqual(established, false);\n+\n+\t\t\tconst fired = await waitFire(\n+\t\t\t\t{ token: application2 }, 'hybridTimeline',\n+\t\t\t\t() => api('notes/create', { text: 'Hello, world!' }, ayano),\n+\t\t\t\tmsg => msg.type === 'note' && msg.body.userId === ayano.id,\n+\t\t\t);\n+\n+\t\t\tassert.strictEqual(fired, true);\n+\t\t});\n+\n \t\t// XXX: QueryFailedError: duplicate key value violates unique constraint \"IDX_347fec870eafea7b26c8a73bac\"\n \t\t/*\n \t\tdescribe('Hashtag Timeline', () => {"
        },
        {
          "filename": "packages/backend/test/utils.ts",
          "status": "modified",
          "additions": 10,
          "deletions": 0,
          "patch": "@@ -6,6 +6,7 @@\n import * as assert from 'node:assert';\n import { readFile } from 'node:fs/promises';\n import { isAbsolute, basename } from 'node:path';\n+import { randomUUID } from 'node:crypto';\n import { inspect } from 'node:util';\n import WebSocket, { ClientOptions } from 'ws';\n import fetch, { File, RequestInit } from 'node-fetch';\n@@ -126,6 +127,15 @@ export const post = async (user: UserToken, params?: misskey.Endpoints['notes/cr\n \treturn res.body ? res.body.createdNote : null;\n };\n \n+export const createAppToken = async (user: UserToken, permissions: (typeof misskey.permissions)[number][]) => {\n+\tconst res = await api('miauth/gen-token', {\n+\t\tsession: randomUUID(),\n+\t\tpermission: permissions,\n+\t}, user);\n+\n+\treturn (res.body as misskey.entities.MiauthGenTokenResponse).token;\n+};\n+\n // \u975e\u516c\u958b\u30ce\u30fc\u30c8\u3092API\u8d8a\u3057\u306b\u898b\u305f\u3068\u304d\u306e\u30ce\u30fc\u30c8 NoteEntityService.ts\n export const hiddenNote = (note: any): any => {\n \tconst temp = {"
        },
        {
          "filename": "packages/frontend/src/components/MkTokenGenerateWindow.vue",
          "status": "modified",
          "additions": 5,
          "deletions": 4,
          "patch": "@@ -33,7 +33,7 @@ SPDX-License-Identifier: AGPL-3.0-only\n \t\t\t\t<MkButton inline @click=\"enableAll\">{{ i18n.ts.enableAll }}</MkButton>\n \t\t\t</div>\n \t\t\t<div class=\"_gaps_s\">\n-\t\t\t\t<MkSwitch v-for=\"kind in (initialPermissions || Misskey.permissions)\" :key=\"kind\" v-model=\"permissions[kind]\">{{ i18n.t(`_permissions.${kind}`) }}</MkSwitch>\n+\t\t\t\t<MkSwitch v-for=\"kind in Object.keys(permissions)\" :key=\"kind\" v-model=\"permissions[kind]\">{{ i18n.t(`_permissions.${kind}`) }}</MkSwitch>\n \t\t\t</div>\n \t\t</div>\n \t</MkSpacer>\n@@ -54,7 +54,7 @@ const props = withDefaults(defineProps<{\n \ttitle?: string | null;\n \tinformation?: string | null;\n \tinitialName?: string | null;\n-\tinitialPermissions?: string[] | null;\n+\tinitialPermissions?: (typeof Misskey.permissions)[number][] | null;\n }>(), {\n \ttitle: null,\n \tinformation: null,\n@@ -67,16 +67,17 @@ const emit = defineEmits<{\n \t(ev: 'done', result: { name: string | null, permissions: string[] }): void;\n }>();\n \n+const defaultPermissions = Misskey.permissions.filter(p => !p.startsWith('read:admin') && !p.startsWith('write:admin'));\n const dialog = shallowRef<InstanceType<typeof MkModalWindow>>();\n const name = ref(props.initialName);\n-const permissions = ref({});\n+const permissions = ref(<Record<(typeof Misskey.permissions)[number], boolean>>{});\n \n if (props.initialPermissions) {\n \tfor (const kind of props.initialPermissions) {\n \t\tpermissions.value[kind] = true;\n \t}\n } else {\n-\tfor (const kind of Misskey.permissions) {\n+\tfor (const kind of defaultPermissions) {\n \t\tpermissions.value[kind] = false;\n \t}\n }"
        },
        {
          "filename": "packages/misskey-js/src/autogen/apiClientJSDoc.ts",
          "status": "modified",
          "additions": 116,
          "deletions": 110,
          "patch": "@@ -1,6 +1,6 @@\n /*\n  * version: 2023.12.0\n- * generatedAt: 2023-12-25T03:48:32.008Z\n+ * generatedAt: 2023-12-26T23:35:09.494Z\n  */\n \n import type { SwitchCaseResponseType } from '../api.js';\n@@ -11,7 +11,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:meta*\n      */\n     request<E extends 'admin/meta', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -22,7 +22,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:abuse-user-reports*\n      */\n     request<E extends 'admin/abuse-user-reports', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -33,7 +33,8 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *No* / **Permission**: *write:admin*\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+     * **Credential required**: *No*\n      */\n     request<E extends 'admin/accounts/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -44,7 +45,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:account*\n      */\n     request<E extends 'admin/accounts/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -55,7 +56,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:account*\n      */\n     request<E extends 'admin/accounts/find-by-email', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -66,7 +67,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     request<E extends 'admin/ad/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -77,7 +78,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     request<E extends 'admin/ad/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -88,7 +89,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:ad*\n      */\n     request<E extends 'admin/ad/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -99,7 +100,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     request<E extends 'admin/ad/update', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -110,7 +111,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     request<E extends 'admin/announcements/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -121,7 +122,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     request<E extends 'admin/announcements/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -132,7 +133,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:announcements*\n      */\n     request<E extends 'admin/announcements/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -143,7 +144,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     request<E extends 'admin/announcements/update', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -154,7 +155,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     request<E extends 'admin/avatar-decorations/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -165,7 +166,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     request<E extends 'admin/avatar-decorations/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -176,7 +177,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:avatar-decorations*\n      */\n     request<E extends 'admin/avatar-decorations/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -187,7 +188,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     request<E extends 'admin/avatar-decorations/update', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -198,7 +199,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:delete-all-files-of-a-user*\n      */\n     request<E extends 'admin/delete-all-files-of-a-user', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -209,7 +210,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-avatar*\n      */\n     request<E extends 'admin/unset-user-avatar', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -220,7 +221,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-banner*\n      */\n     request<E extends 'admin/unset-user-banner', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -231,7 +232,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n      */\n     request<E extends 'admin/drive/clean-remote-files', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -242,7 +243,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n      */\n     request<E extends 'admin/drive/cleanup', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -253,7 +254,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n      */\n     request<E extends 'admin/drive/files', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -264,7 +265,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n      */\n     request<E extends 'admin/drive/show-file', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -275,7 +276,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/add-aliases-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -286,7 +287,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/add', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -297,7 +298,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/copy', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -308,7 +309,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/delete-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -319,7 +320,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -330,7 +331,8 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+     * **Credential required**: *Yes*\n      */\n     request<E extends 'admin/emoji/import-zip', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -341,7 +343,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     request<E extends 'admin/emoji/list-remote', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -352,7 +354,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     request<E extends 'admin/emoji/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -363,7 +365,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/remove-aliases-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -374,7 +376,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/set-aliases-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -385,7 +387,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/set-category-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -396,7 +398,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/set-license-bulk', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -407,7 +409,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     request<E extends 'admin/emoji/update', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -418,7 +420,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     request<E extends 'admin/federation/delete-all-files', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -429,7 +431,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     request<E extends 'admin/federation/refresh-remote-instance-metadata', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -440,7 +442,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     request<E extends 'admin/federation/remove-all-following', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -451,7 +453,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     request<E extends 'admin/federation/update-instance', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -462,7 +464,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:index-stats*\n      */\n     request<E extends 'admin/get-index-stats', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -473,7 +475,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:table-stats*\n      */\n     request<E extends 'admin/get-table-stats', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -484,7 +486,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:user-ips*\n      */\n     request<E extends 'admin/get-user-ips', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -495,7 +497,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:invite-codes*\n      */\n     request<E extends 'admin/invite/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -506,7 +508,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:invite-codes*\n      */\n     request<E extends 'admin/invite/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -517,7 +519,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:promo*\n      */\n     request<E extends 'admin/promo/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -528,7 +530,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n      */\n     request<E extends 'admin/queue/clear', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -539,7 +541,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n      */\n     request<E extends 'admin/queue/deliver-delayed', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -550,7 +552,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n      */\n     request<E extends 'admin/queue/inbox-delayed', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -561,7 +563,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n      */\n     request<E extends 'admin/queue/promote', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -572,7 +574,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     request<E extends 'admin/queue/stats', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -583,7 +585,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n      */\n     request<E extends 'admin/relays/add', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -594,7 +596,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:relays*\n      */\n     request<E extends 'admin/relays/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -605,7 +607,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n      */\n     request<E extends 'admin/relays/remove', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -616,7 +618,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:reset-password*\n      */\n     request<E extends 'admin/reset-password', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -627,7 +629,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:resolve-abuse-user-report*\n      */\n     request<E extends 'admin/resolve-abuse-user-report', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -638,7 +640,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:send-email*\n      */\n     request<E extends 'admin/send-email', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -649,7 +651,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:server-info*\n      */\n     request<E extends 'admin/server-info', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -660,7 +662,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-moderation-log*\n      */\n     request<E extends 'admin/show-moderation-logs', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -671,7 +673,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-user*\n      */\n     request<E extends 'admin/show-user', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -682,7 +684,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-users*\n      */\n     request<E extends 'admin/show-users', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -693,7 +695,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:suspend-user*\n      */\n     request<E extends 'admin/suspend-user', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -704,7 +706,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unsuspend-user*\n      */\n     request<E extends 'admin/unsuspend-user', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -715,7 +717,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:meta*\n      */\n     request<E extends 'admin/update-meta', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -726,7 +728,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:delete-account*\n      */\n     request<E extends 'admin/delete-account', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -737,7 +739,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:user-note*\n      */\n     request<E extends 'admin/update-user-note', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -748,7 +750,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -759,7 +761,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -770,7 +772,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n      */\n     request<E extends 'admin/roles/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -781,7 +783,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n      */\n     request<E extends 'admin/roles/show', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -792,7 +794,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/update', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -803,7 +805,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/assign', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -814,7 +816,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/unassign', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -825,7 +827,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     request<E extends 'admin/roles/update-default-policies', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -836,7 +838,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *No* / **Permission**: *read:admin*\n+     * **Credential required**: *No* / **Permission**: *read:admin:roles*\n      */\n     request<E extends 'admin/roles/users', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -924,7 +926,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:federation*\n      */\n     request<E extends 'ap/get', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -935,7 +937,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'ap/show', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -1729,7 +1731,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *No*\n      */\n     request<E extends 'federation/update-remote-user', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2037,7 +2039,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2168,7 +2170,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'i/claim-achievement', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2469,7 +2471,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i/registry/get-all', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2480,7 +2482,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i/registry/get-detail', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2491,7 +2493,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i/registry/get', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2502,7 +2504,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i/registry/keys-with-type', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2513,7 +2515,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'i/registry/keys', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2524,7 +2526,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'i/registry/remove', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2547,7 +2549,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'i/registry/set', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2683,7 +2685,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n      */\n     request<E extends 'invite/create', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2694,7 +2696,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n      */\n     request<E extends 'invite/delete', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2705,7 +2707,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n      */\n     request<E extends 'invite/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2716,7 +2718,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n      */\n     request<E extends 'invite/limit', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2838,7 +2840,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'my/apps', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2959,7 +2961,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/hybrid-timeline', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2981,7 +2983,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/mentions', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -2992,7 +2994,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/polls/recommendation', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3102,7 +3104,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/state', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3135,7 +3137,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/timeline', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3146,7 +3148,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/translate', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3168,7 +3170,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'notes/user-list-timeline', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3422,7 +3424,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'promo/read', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3433,7 +3435,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'roles/list', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3466,7 +3468,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'roles/notes', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3532,6 +3534,7 @@ declare module '../api.js' {\n     /**\n      * Check push notification registration exists.\n      * \n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     request<E extends 'sw/show-registration', P extends Endpoints[E]['req']>(\n@@ -3543,6 +3546,7 @@ declare module '../api.js' {\n     /**\n      * Update push notification registration.\n      * \n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     request<E extends 'sw/update-registration', P extends Endpoints[E]['req']>(\n@@ -3554,6 +3558,7 @@ declare module '../api.js' {\n     /**\n      * Register to receive push notifications.\n      * \n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     request<E extends 'sw/register', P extends Endpoints[E]['req']>(\n@@ -3741,7 +3746,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'users/lists/favorite', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3752,7 +3757,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'users/lists/unfavorite', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3774,7 +3779,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     request<E extends 'users/lists/create-from-public', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3862,7 +3867,7 @@ declare module '../api.js' {\n     /**\n      * Show the different kinds of relations between the authenticated user and the specified user(s).\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     request<E extends 'users/relation', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3873,7 +3878,7 @@ declare module '../api.js' {\n     /**\n      * File a report.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:report-abuse*\n      */\n     request<E extends 'users/report-abuse', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3917,7 +3922,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n-     * **Credential required**: *Yes*\n+     * **Credential required**: *No*\n      */\n     request<E extends 'users/achievements', P extends Endpoints[E]['req']>(\n       endpoint: E,\n@@ -3950,6 +3955,7 @@ declare module '../api.js' {\n     /**\n      * No description provided.\n      * \n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     request<E extends 'fetch-external-resources', P extends Endpoints[E]['req']>("
        },
        {
          "filename": "packages/misskey-js/src/autogen/endpoint.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1,6 +1,6 @@\n /*\n  * version: 2023.12.0\n- * generatedAt: 2023-12-25T03:48:32.001Z\n+ * generatedAt: 2023-12-26T23:35:09.491Z\n  */\n \n import type {"
        },
        {
          "filename": "packages/misskey-js/src/autogen/entities.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1,6 +1,6 @@\n /*\n  * version: 2023.12.0\n- * generatedAt: 2023-12-25T03:48:31.996Z\n+ * generatedAt: 2023-12-26T23:35:09.489Z\n  */\n \n import { operations } from './types.js';"
        },
        {
          "filename": "packages/misskey-js/src/autogen/models.ts",
          "status": "modified",
          "additions": 1,
          "deletions": 1,
          "patch": "@@ -1,6 +1,6 @@\n /*\n  * version: 2023.12.0\n- * generatedAt: 2023-12-25T03:48:31.993Z\n+ * generatedAt: 2023-12-26T23:35:09.485Z\n  */\n \n import { components } from './types.js';"
        },
        {
          "filename": "packages/misskey-js/src/autogen/types.ts",
          "status": "modified",
          "additions": 231,
          "deletions": 219,
          "patch": "@@ -3,7 +3,7 @@\n \n /*\n  * version: 2023.12.0\n- * generatedAt: 2023-12-25T03:48:31.850Z\n+ * generatedAt: 2023-12-26T23:35:09.389Z\n  */\n \n /**\n@@ -22,7 +22,7 @@ export type paths = {\n      * admin/meta\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:meta*\n      */\n     post: operations['admin/meta'];\n   };\n@@ -31,7 +31,7 @@ export type paths = {\n      * admin/abuse-user-reports\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:abuse-user-reports*\n      */\n     post: operations['admin/abuse-user-reports'];\n   };\n@@ -40,7 +40,8 @@ export type paths = {\n      * admin/accounts/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *No* / **Permission**: *write:admin*\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+     * **Credential required**: *No*\n      */\n     post: operations['admin/accounts/create'];\n   };\n@@ -49,7 +50,7 @@ export type paths = {\n      * admin/accounts/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:account*\n      */\n     post: operations['admin/accounts/delete'];\n   };\n@@ -58,7 +59,7 @@ export type paths = {\n      * admin/accounts/find-by-email\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:account*\n      */\n     post: operations['admin/accounts/find-by-email'];\n   };\n@@ -67,7 +68,7 @@ export type paths = {\n      * admin/ad/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     post: operations['admin/ad/create'];\n   };\n@@ -76,7 +77,7 @@ export type paths = {\n      * admin/ad/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     post: operations['admin/ad/delete'];\n   };\n@@ -85,7 +86,7 @@ export type paths = {\n      * admin/ad/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:ad*\n      */\n     post: operations['admin/ad/list'];\n   };\n@@ -94,7 +95,7 @@ export type paths = {\n      * admin/ad/update\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n      */\n     post: operations['admin/ad/update'];\n   };\n@@ -103,7 +104,7 @@ export type paths = {\n      * admin/announcements/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     post: operations['admin/announcements/create'];\n   };\n@@ -112,7 +113,7 @@ export type paths = {\n      * admin/announcements/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     post: operations['admin/announcements/delete'];\n   };\n@@ -121,7 +122,7 @@ export type paths = {\n      * admin/announcements/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:announcements*\n      */\n     post: operations['admin/announcements/list'];\n   };\n@@ -130,7 +131,7 @@ export type paths = {\n      * admin/announcements/update\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n      */\n     post: operations['admin/announcements/update'];\n   };\n@@ -139,7 +140,7 @@ export type paths = {\n      * admin/avatar-decorations/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     post: operations['admin/avatar-decorations/create'];\n   };\n@@ -148,7 +149,7 @@ export type paths = {\n      * admin/avatar-decorations/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     post: operations['admin/avatar-decorations/delete'];\n   };\n@@ -157,7 +158,7 @@ export type paths = {\n      * admin/avatar-decorations/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:avatar-decorations*\n      */\n     post: operations['admin/avatar-decorations/list'];\n   };\n@@ -166,7 +167,7 @@ export type paths = {\n      * admin/avatar-decorations/update\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n      */\n     post: operations['admin/avatar-decorations/update'];\n   };\n@@ -175,7 +176,7 @@ export type paths = {\n      * admin/delete-all-files-of-a-user\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:delete-all-files-of-a-user*\n      */\n     post: operations['admin/delete-all-files-of-a-user'];\n   };\n@@ -184,7 +185,7 @@ export type paths = {\n      * admin/unset-user-avatar\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-avatar*\n      */\n     post: operations['admin/unset-user-avatar'];\n   };\n@@ -193,7 +194,7 @@ export type paths = {\n      * admin/unset-user-banner\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-banner*\n      */\n     post: operations['admin/unset-user-banner'];\n   };\n@@ -202,7 +203,7 @@ export type paths = {\n      * admin/drive/clean-remote-files\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n      */\n     post: operations['admin/drive/clean-remote-files'];\n   };\n@@ -211,7 +212,7 @@ export type paths = {\n      * admin/drive/cleanup\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n      */\n     post: operations['admin/drive/cleanup'];\n   };\n@@ -220,7 +221,7 @@ export type paths = {\n      * admin/drive/files\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n      */\n     post: operations['admin/drive/files'];\n   };\n@@ -229,7 +230,7 @@ export type paths = {\n      * admin/drive/show-file\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n      */\n     post: operations['admin/drive/show-file'];\n   };\n@@ -238,7 +239,7 @@ export type paths = {\n      * admin/emoji/add-aliases-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/add-aliases-bulk'];\n   };\n@@ -247,7 +248,7 @@ export type paths = {\n      * admin/emoji/add\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/add'];\n   };\n@@ -256,7 +257,7 @@ export type paths = {\n      * admin/emoji/copy\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/copy'];\n   };\n@@ -265,7 +266,7 @@ export type paths = {\n      * admin/emoji/delete-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/delete-bulk'];\n   };\n@@ -274,7 +275,7 @@ export type paths = {\n      * admin/emoji/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/delete'];\n   };\n@@ -283,7 +284,8 @@ export type paths = {\n      * admin/emoji/import-zip\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+     * **Credential required**: *Yes*\n      */\n     post: operations['admin/emoji/import-zip'];\n   };\n@@ -292,7 +294,7 @@ export type paths = {\n      * admin/emoji/list-remote\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     post: operations['admin/emoji/list-remote'];\n   };\n@@ -301,7 +303,7 @@ export type paths = {\n      * admin/emoji/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     post: operations['admin/emoji/list'];\n   };\n@@ -310,7 +312,7 @@ export type paths = {\n      * admin/emoji/remove-aliases-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/remove-aliases-bulk'];\n   };\n@@ -319,7 +321,7 @@ export type paths = {\n      * admin/emoji/set-aliases-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/set-aliases-bulk'];\n   };\n@@ -328,7 +330,7 @@ export type paths = {\n      * admin/emoji/set-category-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/set-category-bulk'];\n   };\n@@ -337,7 +339,7 @@ export type paths = {\n      * admin/emoji/set-license-bulk\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/set-license-bulk'];\n   };\n@@ -346,7 +348,7 @@ export type paths = {\n      * admin/emoji/update\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n      */\n     post: operations['admin/emoji/update'];\n   };\n@@ -355,7 +357,7 @@ export type paths = {\n      * admin/federation/delete-all-files\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     post: operations['admin/federation/delete-all-files'];\n   };\n@@ -364,7 +366,7 @@ export type paths = {\n      * admin/federation/refresh-remote-instance-metadata\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     post: operations['admin/federation/refresh-remote-instance-metadata'];\n   };\n@@ -373,7 +375,7 @@ export type paths = {\n      * admin/federation/remove-all-following\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     post: operations['admin/federation/remove-all-following'];\n   };\n@@ -382,7 +384,7 @@ export type paths = {\n      * admin/federation/update-instance\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n      */\n     post: operations['admin/federation/update-instance'];\n   };\n@@ -391,7 +393,7 @@ export type paths = {\n      * admin/get-index-stats\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:index-stats*\n      */\n     post: operations['admin/get-index-stats'];\n   };\n@@ -400,7 +402,7 @@ export type paths = {\n      * admin/get-table-stats\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:table-stats*\n      */\n     post: operations['admin/get-table-stats'];\n   };\n@@ -409,7 +411,7 @@ export type paths = {\n      * admin/get-user-ips\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:user-ips*\n      */\n     post: operations['admin/get-user-ips'];\n   };\n@@ -418,7 +420,7 @@ export type paths = {\n      * admin/invite/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:invite-codes*\n      */\n     post: operations['admin/invite/create'];\n   };\n@@ -427,7 +429,7 @@ export type paths = {\n      * admin/invite/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:invite-codes*\n      */\n     post: operations['admin/invite/list'];\n   };\n@@ -436,7 +438,7 @@ export type paths = {\n      * admin/promo/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:promo*\n      */\n     post: operations['admin/promo/create'];\n   };\n@@ -445,7 +447,7 @@ export type paths = {\n      * admin/queue/clear\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n      */\n     post: operations['admin/queue/clear'];\n   };\n@@ -454,7 +456,7 @@ export type paths = {\n      * admin/queue/deliver-delayed\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n      */\n     post: operations['admin/queue/deliver-delayed'];\n   };\n@@ -463,7 +465,7 @@ export type paths = {\n      * admin/queue/inbox-delayed\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n      */\n     post: operations['admin/queue/inbox-delayed'];\n   };\n@@ -472,7 +474,7 @@ export type paths = {\n      * admin/queue/promote\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n      */\n     post: operations['admin/queue/promote'];\n   };\n@@ -481,7 +483,7 @@ export type paths = {\n      * admin/queue/stats\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n      */\n     post: operations['admin/queue/stats'];\n   };\n@@ -490,7 +492,7 @@ export type paths = {\n      * admin/relays/add\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n      */\n     post: operations['admin/relays/add'];\n   };\n@@ -499,7 +501,7 @@ export type paths = {\n      * admin/relays/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:relays*\n      */\n     post: operations['admin/relays/list'];\n   };\n@@ -508,7 +510,7 @@ export type paths = {\n      * admin/relays/remove\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n      */\n     post: operations['admin/relays/remove'];\n   };\n@@ -517,7 +519,7 @@ export type paths = {\n      * admin/reset-password\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:reset-password*\n      */\n     post: operations['admin/reset-password'];\n   };\n@@ -526,7 +528,7 @@ export type paths = {\n      * admin/resolve-abuse-user-report\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:resolve-abuse-user-report*\n      */\n     post: operations['admin/resolve-abuse-user-report'];\n   };\n@@ -535,7 +537,7 @@ export type paths = {\n      * admin/send-email\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:send-email*\n      */\n     post: operations['admin/send-email'];\n   };\n@@ -544,7 +546,7 @@ export type paths = {\n      * admin/server-info\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:server-info*\n      */\n     post: operations['admin/server-info'];\n   };\n@@ -553,7 +555,7 @@ export type paths = {\n      * admin/show-moderation-logs\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-moderation-log*\n      */\n     post: operations['admin/show-moderation-logs'];\n   };\n@@ -562,7 +564,7 @@ export type paths = {\n      * admin/show-user\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-user*\n      */\n     post: operations['admin/show-user'];\n   };\n@@ -571,7 +573,7 @@ export type paths = {\n      * admin/show-users\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:show-users*\n      */\n     post: operations['admin/show-users'];\n   };\n@@ -580,7 +582,7 @@ export type paths = {\n      * admin/suspend-user\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:suspend-user*\n      */\n     post: operations['admin/suspend-user'];\n   };\n@@ -589,7 +591,7 @@ export type paths = {\n      * admin/unsuspend-user\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:unsuspend-user*\n      */\n     post: operations['admin/unsuspend-user'];\n   };\n@@ -598,7 +600,7 @@ export type paths = {\n      * admin/update-meta\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:meta*\n      */\n     post: operations['admin/update-meta'];\n   };\n@@ -607,7 +609,7 @@ export type paths = {\n      * admin/delete-account\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:delete-account*\n      */\n     post: operations['admin/delete-account'];\n   };\n@@ -616,7 +618,7 @@ export type paths = {\n      * admin/update-user-note\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:user-note*\n      */\n     post: operations['admin/update-user-note'];\n   };\n@@ -625,7 +627,7 @@ export type paths = {\n      * admin/roles/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/create'];\n   };\n@@ -634,7 +636,7 @@ export type paths = {\n      * admin/roles/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/delete'];\n   };\n@@ -643,7 +645,7 @@ export type paths = {\n      * admin/roles/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n      */\n     post: operations['admin/roles/list'];\n   };\n@@ -652,7 +654,7 @@ export type paths = {\n      * admin/roles/show\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *read:admin*\n+     * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n      */\n     post: operations['admin/roles/show'];\n   };\n@@ -661,7 +663,7 @@ export type paths = {\n      * admin/roles/update\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/update'];\n   };\n@@ -670,7 +672,7 @@ export type paths = {\n      * admin/roles/assign\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/assign'];\n   };\n@@ -679,7 +681,7 @@ export type paths = {\n      * admin/roles/unassign\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/unassign'];\n   };\n@@ -688,7 +690,7 @@ export type paths = {\n      * admin/roles/update-default-policies\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes* / **Permission**: *write:admin*\n+     * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n      */\n     post: operations['admin/roles/update-default-policies'];\n   };\n@@ -697,7 +699,7 @@ export type paths = {\n      * admin/roles/users\n      * @description No description provided.\n      *\n-     * **Credential required**: *No* / **Permission**: *read:admin*\n+     * **Credential required**: *No* / **Permission**: *read:admin:roles*\n      */\n     post: operations['admin/roles/users'];\n   };\n@@ -769,7 +771,7 @@ export type paths = {\n      * ap/get\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:federation*\n      */\n     post: operations['ap/get'];\n   };\n@@ -778,7 +780,7 @@ export type paths = {\n      * ap/show\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['ap/show'];\n   };\n@@ -1519,7 +1521,7 @@ export type paths = {\n      * federation/update-remote-user\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *No*\n      */\n     post: operations['federation/update-remote-user'];\n   };\n@@ -1792,7 +1794,7 @@ export type paths = {\n      * i\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i'];\n   };\n@@ -1901,7 +1903,7 @@ export type paths = {\n      * i/claim-achievement\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['i/claim-achievement'];\n   };\n@@ -2150,7 +2152,7 @@ export type paths = {\n      * i/registry/get-all\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i/registry/get-all'];\n   };\n@@ -2159,7 +2161,7 @@ export type paths = {\n      * i/registry/get-detail\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i/registry/get-detail'];\n   };\n@@ -2168,7 +2170,7 @@ export type paths = {\n      * i/registry/get\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i/registry/get'];\n   };\n@@ -2177,7 +2179,7 @@ export type paths = {\n      * i/registry/keys-with-type\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i/registry/keys-with-type'];\n   };\n@@ -2186,7 +2188,7 @@ export type paths = {\n      * i/registry/keys\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['i/registry/keys'];\n   };\n@@ -2195,7 +2197,7 @@ export type paths = {\n      * i/registry/remove\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['i/registry/remove'];\n   };\n@@ -2214,7 +2216,7 @@ export type paths = {\n      * i/registry/set\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['i/registry/set'];\n   };\n@@ -2326,7 +2328,7 @@ export type paths = {\n      * invite/create\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n      */\n     post: operations['invite/create'];\n   };\n@@ -2335,7 +2337,7 @@ export type paths = {\n      * invite/delete\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n      */\n     post: operations['invite/delete'];\n   };\n@@ -2344,7 +2346,7 @@ export type paths = {\n      * invite/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n      */\n     post: operations['invite/list'];\n   };\n@@ -2353,7 +2355,7 @@ export type paths = {\n      * invite/limit\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n      */\n     post: operations['invite/limit'];\n   };\n@@ -2467,7 +2469,7 @@ export type paths = {\n      * my/apps\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['my/apps'];\n   };\n@@ -2573,7 +2575,7 @@ export type paths = {\n      * notes/hybrid-timeline\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/hybrid-timeline'];\n   };\n@@ -2591,7 +2593,7 @@ export type paths = {\n      * notes/mentions\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/mentions'];\n   };\n@@ -2600,7 +2602,7 @@ export type paths = {\n      * notes/polls/recommendation\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/polls/recommendation'];\n   };\n@@ -2697,7 +2699,7 @@ export type paths = {\n      * notes/state\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/state'];\n   };\n@@ -2724,7 +2726,7 @@ export type paths = {\n      * notes/timeline\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/timeline'];\n   };\n@@ -2733,7 +2735,7 @@ export type paths = {\n      * notes/translate\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/translate'];\n   };\n@@ -2751,7 +2753,7 @@ export type paths = {\n      * notes/user-list-timeline\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['notes/user-list-timeline'];\n   };\n@@ -2959,7 +2961,7 @@ export type paths = {\n      * promo/read\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['promo/read'];\n   };\n@@ -2968,7 +2970,7 @@ export type paths = {\n      * roles/list\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['roles/list'];\n   };\n@@ -2995,7 +2997,7 @@ export type paths = {\n      * roles/notes\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['roles/notes'];\n   };\n@@ -3056,6 +3058,7 @@ export type paths = {\n      * sw/show-registration\n      * @description Check push notification registration exists.\n      *\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     post: operations['sw/show-registration'];\n@@ -3065,6 +3068,7 @@ export type paths = {\n      * sw/update-registration\n      * @description Update push notification registration.\n      *\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     post: operations['sw/update-registration'];\n@@ -3074,6 +3078,7 @@ export type paths = {\n      * sw/register\n      * @description Register to receive push notifications.\n      *\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     post: operations['sw/register'];\n@@ -3234,7 +3239,7 @@ export type paths = {\n      * users/lists/favorite\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['users/lists/favorite'];\n   };\n@@ -3243,7 +3248,7 @@ export type paths = {\n      * users/lists/unfavorite\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['users/lists/unfavorite'];\n   };\n@@ -3261,7 +3266,7 @@ export type paths = {\n      * users/lists/create-from-public\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:account*\n      */\n     post: operations['users/lists/create-from-public'];\n   };\n@@ -3333,7 +3338,7 @@ export type paths = {\n      * users/relation\n      * @description Show the different kinds of relations between the authenticated user and the specified user(s).\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *read:account*\n      */\n     post: operations['users/relation'];\n   };\n@@ -3342,7 +3347,7 @@ export type paths = {\n      * users/report-abuse\n      * @description File a report.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *Yes* / **Permission**: *write:report-abuse*\n      */\n     post: operations['users/report-abuse'];\n   };\n@@ -3378,7 +3383,7 @@ export type paths = {\n      * users/achievements\n      * @description No description provided.\n      *\n-     * **Credential required**: *Yes*\n+     * **Credential required**: *No*\n      */\n     post: operations['users/achievements'];\n   };\n@@ -3412,6 +3417,7 @@ export type paths = {\n      * fetch-external-resources\n      * @description No description provided.\n      *\n+     * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n      * **Credential required**: *Yes*\n      */\n     post: operations['fetch-external-resources'];\n@@ -4381,7 +4387,7 @@ export type operations = {\n    * admin/meta\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:meta*\n    */\n   'admin/meta': {\n     responses: {\n@@ -4522,7 +4528,7 @@ export type operations = {\n    * admin/abuse-user-reports\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:abuse-user-reports*\n    */\n   'admin/abuse-user-reports': {\n     requestBody: {\n@@ -4614,7 +4620,8 @@ export type operations = {\n    * admin/accounts/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *No* / **Permission**: *write:admin*\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+   * **Credential required**: *No*\n    */\n   'admin/accounts/create': {\n     requestBody: {\n@@ -4668,7 +4675,7 @@ export type operations = {\n    * admin/accounts/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:account*\n    */\n   'admin/accounts/delete': {\n     requestBody: {\n@@ -4720,7 +4727,7 @@ export type operations = {\n    * admin/accounts/find-by-email\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:account*\n    */\n   'admin/accounts/find-by-email': {\n     requestBody: {\n@@ -4773,7 +4780,7 @@ export type operations = {\n    * admin/ad/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n    */\n   'admin/ad/create': {\n     requestBody: {\n@@ -4834,7 +4841,7 @@ export type operations = {\n    * admin/ad/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n    */\n   'admin/ad/delete': {\n     requestBody: {\n@@ -4886,7 +4893,7 @@ export type operations = {\n    * admin/ad/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:ad*\n    */\n   'admin/ad/list': {\n     requestBody: {\n@@ -4946,7 +4953,7 @@ export type operations = {\n    * admin/ad/update\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:ad*\n    */\n   'admin/ad/update': {\n     requestBody: {\n@@ -5007,7 +5014,7 @@ export type operations = {\n    * admin/announcements/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n    */\n   'admin/announcements/create': {\n     requestBody: {\n@@ -5096,7 +5103,7 @@ export type operations = {\n    * admin/announcements/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n    */\n   'admin/announcements/delete': {\n     requestBody: {\n@@ -5148,7 +5155,7 @@ export type operations = {\n    * admin/announcements/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:announcements*\n    */\n   'admin/announcements/list': {\n     requestBody: {\n@@ -5222,7 +5229,7 @@ export type operations = {\n    * admin/announcements/update\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:announcements*\n    */\n   'admin/announcements/update': {\n     requestBody: {\n@@ -5285,7 +5292,7 @@ export type operations = {\n    * admin/avatar-decorations/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n    */\n   'admin/avatar-decorations/create': {\n     requestBody: {\n@@ -5339,7 +5346,7 @@ export type operations = {\n    * admin/avatar-decorations/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n    */\n   'admin/avatar-decorations/delete': {\n     requestBody: {\n@@ -5391,7 +5398,7 @@ export type operations = {\n    * admin/avatar-decorations/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:avatar-decorations*\n    */\n   'admin/avatar-decorations/list': {\n     requestBody: {\n@@ -5465,7 +5472,7 @@ export type operations = {\n    * admin/avatar-decorations/update\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:avatar-decorations*\n    */\n   'admin/avatar-decorations/update': {\n     requestBody: {\n@@ -5521,7 +5528,7 @@ export type operations = {\n    * admin/delete-all-files-of-a-user\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:delete-all-files-of-a-user*\n    */\n   'admin/delete-all-files-of-a-user': {\n     requestBody: {\n@@ -5573,7 +5580,7 @@ export type operations = {\n    * admin/unset-user-avatar\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-avatar*\n    */\n   'admin/unset-user-avatar': {\n     requestBody: {\n@@ -5625,7 +5632,7 @@ export type operations = {\n    * admin/unset-user-banner\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:unset-user-banner*\n    */\n   'admin/unset-user-banner': {\n     requestBody: {\n@@ -5677,7 +5684,7 @@ export type operations = {\n    * admin/drive/clean-remote-files\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n    */\n   'admin/drive/clean-remote-files': {\n     responses: {\n@@ -5721,7 +5728,7 @@ export type operations = {\n    * admin/drive/cleanup\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:drive*\n    */\n   'admin/drive/cleanup': {\n     responses: {\n@@ -5765,7 +5772,7 @@ export type operations = {\n    * admin/drive/files\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n    */\n   'admin/drive/files': {\n     requestBody: {\n@@ -5836,7 +5843,7 @@ export type operations = {\n    * admin/drive/show-file\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:drive*\n    */\n   'admin/drive/show-file': {\n     requestBody: {\n@@ -5940,7 +5947,7 @@ export type operations = {\n    * admin/emoji/add-aliases-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/add-aliases-bulk': {\n     requestBody: {\n@@ -5992,7 +5999,7 @@ export type operations = {\n    * admin/emoji/add\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/add': {\n     requestBody: {\n@@ -6052,7 +6059,7 @@ export type operations = {\n    * admin/emoji/copy\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/copy': {\n     requestBody: {\n@@ -6109,7 +6116,7 @@ export type operations = {\n    * admin/emoji/delete-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/delete-bulk': {\n     requestBody: {\n@@ -6160,7 +6167,7 @@ export type operations = {\n    * admin/emoji/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/delete': {\n     requestBody: {\n@@ -6212,7 +6219,8 @@ export type operations = {\n    * admin/emoji/import-zip\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n+   * **Credential required**: *Yes*\n    */\n   'admin/emoji/import-zip': {\n     requestBody: {\n@@ -6264,7 +6272,7 @@ export type operations = {\n    * admin/emoji/list-remote\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n    */\n   'admin/emoji/list-remote': {\n     requestBody: {\n@@ -6338,7 +6346,7 @@ export type operations = {\n    * admin/emoji/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n    */\n   'admin/emoji/list': {\n     requestBody: {\n@@ -6407,7 +6415,7 @@ export type operations = {\n    * admin/emoji/remove-aliases-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/remove-aliases-bulk': {\n     requestBody: {\n@@ -6459,7 +6467,7 @@ export type operations = {\n    * admin/emoji/set-aliases-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/set-aliases-bulk': {\n     requestBody: {\n@@ -6511,7 +6519,7 @@ export type operations = {\n    * admin/emoji/set-category-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/set-category-bulk': {\n     requestBody: {\n@@ -6564,7 +6572,7 @@ export type operations = {\n    * admin/emoji/set-license-bulk\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/set-license-bulk': {\n     requestBody: {\n@@ -6617,7 +6625,7 @@ export type operations = {\n    * admin/emoji/update\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:emoji*\n    */\n   'admin/emoji/update': {\n     requestBody: {\n@@ -6679,7 +6687,7 @@ export type operations = {\n    * admin/federation/delete-all-files\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n    */\n   'admin/federation/delete-all-files': {\n     requestBody: {\n@@ -6730,7 +6738,7 @@ export type operations = {\n    * admin/federation/refresh-remote-instance-metadata\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n    */\n   'admin/federation/refresh-remote-instance-metadata': {\n     requestBody: {\n@@ -6781,7 +6789,7 @@ export type operations = {\n    * admin/federation/remove-all-following\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n    */\n   'admin/federation/remove-all-following': {\n     requestBody: {\n@@ -6832,7 +6840,7 @@ export type operations = {\n    * admin/federation/update-instance\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:federation*\n    */\n   'admin/federation/update-instance': {\n     requestBody: {\n@@ -6884,7 +6892,7 @@ export type operations = {\n    * admin/get-index-stats\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:index-stats*\n    */\n   'admin/get-index-stats': {\n     responses: {\n@@ -6933,7 +6941,7 @@ export type operations = {\n    * admin/get-table-stats\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:table-stats*\n    */\n   'admin/get-table-stats': {\n     responses: {\n@@ -6979,7 +6987,7 @@ export type operations = {\n    * admin/get-user-ips\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:user-ips*\n    */\n   'admin/get-user-ips': {\n     requestBody: {\n@@ -7037,7 +7045,7 @@ export type operations = {\n    * admin/invite/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:invite-codes*\n    */\n   'admin/invite/create': {\n     requestBody: {\n@@ -7092,7 +7100,7 @@ export type operations = {\n    * admin/invite/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:invite-codes*\n    */\n   'admin/invite/list': {\n     requestBody: {\n@@ -7155,7 +7163,7 @@ export type operations = {\n    * admin/promo/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:promo*\n    */\n   'admin/promo/create': {\n     requestBody: {\n@@ -7208,7 +7216,7 @@ export type operations = {\n    * admin/queue/clear\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n    */\n   'admin/queue/clear': {\n     responses: {\n@@ -7252,7 +7260,7 @@ export type operations = {\n    * admin/queue/deliver-delayed\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n    */\n   'admin/queue/deliver-delayed': {\n     responses: {\n@@ -7298,7 +7306,7 @@ export type operations = {\n    * admin/queue/inbox-delayed\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:queue*\n    */\n   'admin/queue/inbox-delayed': {\n     responses: {\n@@ -7344,7 +7352,7 @@ export type operations = {\n    * admin/queue/promote\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:queue*\n    */\n   'admin/queue/promote': {\n     requestBody: {\n@@ -7396,7 +7404,7 @@ export type operations = {\n    * admin/queue/stats\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:emoji*\n    */\n   'admin/queue/stats': {\n     responses: {\n@@ -7447,7 +7455,7 @@ export type operations = {\n    * admin/relays/add\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n    */\n   'admin/relays/add': {\n     requestBody: {\n@@ -7510,7 +7518,7 @@ export type operations = {\n    * admin/relays/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:relays*\n    */\n   'admin/relays/list': {\n     responses: {\n@@ -7566,7 +7574,7 @@ export type operations = {\n    * admin/relays/remove\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:relays*\n    */\n   'admin/relays/remove': {\n     requestBody: {\n@@ -7617,7 +7625,7 @@ export type operations = {\n    * admin/reset-password\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:reset-password*\n    */\n   'admin/reset-password': {\n     requestBody: {\n@@ -7673,7 +7681,7 @@ export type operations = {\n    * admin/resolve-abuse-user-report\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:resolve-abuse-user-report*\n    */\n   'admin/resolve-abuse-user-report': {\n     requestBody: {\n@@ -7727,7 +7735,7 @@ export type operations = {\n    * admin/send-email\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:send-email*\n    */\n   'admin/send-email': {\n     requestBody: {\n@@ -7780,7 +7788,7 @@ export type operations = {\n    * admin/server-info\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:server-info*\n    */\n   'admin/server-info': {\n     responses: {\n@@ -7850,7 +7858,7 @@ export type operations = {\n    * admin/show-moderation-logs\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:show-moderation-log*\n    */\n   'admin/show-moderation-logs': {\n     requestBody: {\n@@ -7921,7 +7929,7 @@ export type operations = {\n    * admin/show-user\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:show-user*\n    */\n   'admin/show-user': {\n     requestBody: {\n@@ -7975,7 +7983,7 @@ export type operations = {\n    * admin/show-users\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:show-users*\n    */\n   'admin/show-users': {\n     requestBody: {\n@@ -8050,7 +8058,7 @@ export type operations = {\n    * admin/suspend-user\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:suspend-user*\n    */\n   'admin/suspend-user': {\n     requestBody: {\n@@ -8102,7 +8110,7 @@ export type operations = {\n    * admin/unsuspend-user\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:unsuspend-user*\n    */\n   'admin/unsuspend-user': {\n     requestBody: {\n@@ -8154,7 +8162,7 @@ export type operations = {\n    * admin/update-meta\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:meta*\n    */\n   'admin/update-meta': {\n     requestBody: {\n@@ -8299,7 +8307,7 @@ export type operations = {\n    * admin/delete-account\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:delete-account*\n    */\n   'admin/delete-account': {\n     requestBody: {\n@@ -8353,7 +8361,7 @@ export type operations = {\n    * admin/update-user-note\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:user-note*\n    */\n   'admin/update-user-note': {\n     requestBody: {\n@@ -8406,7 +8414,7 @@ export type operations = {\n    * admin/roles/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/create': {\n     requestBody: {\n@@ -8474,7 +8482,7 @@ export type operations = {\n    * admin/roles/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/delete': {\n     requestBody: {\n@@ -8526,7 +8534,7 @@ export type operations = {\n    * admin/roles/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n    */\n   'admin/roles/list': {\n     responses: {\n@@ -8572,7 +8580,7 @@ export type operations = {\n    * admin/roles/show\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *read:admin*\n+   * **Credential required**: *Yes* / **Permission**: *read:admin:roles*\n    */\n   'admin/roles/show': {\n     requestBody: {\n@@ -8626,7 +8634,7 @@ export type operations = {\n    * admin/roles/update\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/update': {\n     requestBody: {\n@@ -8693,7 +8701,7 @@ export type operations = {\n    * admin/roles/assign\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/assign': {\n     requestBody: {\n@@ -8748,7 +8756,7 @@ export type operations = {\n    * admin/roles/unassign\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/unassign': {\n     requestBody: {\n@@ -8802,7 +8810,7 @@ export type operations = {\n    * admin/roles/update-default-policies\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes* / **Permission**: *write:admin*\n+   * **Credential required**: *Yes* / **Permission**: *write:admin:roles*\n    */\n   'admin/roles/update-default-policies': {\n     requestBody: {\n@@ -8853,7 +8861,7 @@ export type operations = {\n    * admin/roles/users\n    * @description No description provided.\n    *\n-   * **Credential required**: *No* / **Permission**: *read:admin*\n+   * **Credential required**: *No* / **Permission**: *read:admin:roles*\n    */\n   'admin/roles/users': {\n     requestBody: {\n@@ -9327,7 +9335,7 @@ export type operations = {\n    * ap/get\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:federation*\n    */\n   'ap/get': {\n     requestBody: {\n@@ -9386,7 +9394,7 @@ export type operations = {\n    * ap/show\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'ap/show': {\n     requestBody: {\n@@ -13615,7 +13623,7 @@ export type operations = {\n    * federation/update-remote-user\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *No*\n    */\n   'federation/update-remote-user': {\n     requestBody: {\n@@ -15200,7 +15208,7 @@ export type operations = {\n    * i\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   i: {\n     responses: {\n@@ -15853,7 +15861,7 @@ export type operations = {\n    * i/claim-achievement\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'i/claim-achievement': {\n     requestBody: {\n@@ -17311,7 +17319,7 @@ export type operations = {\n    * i/registry/get-all\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'i/registry/get-all': {\n     requestBody: {\n@@ -17366,7 +17374,7 @@ export type operations = {\n    * i/registry/get-detail\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'i/registry/get-detail': {\n     requestBody: {\n@@ -17422,7 +17430,7 @@ export type operations = {\n    * i/registry/get\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'i/registry/get': {\n     requestBody: {\n@@ -17478,7 +17486,7 @@ export type operations = {\n    * i/registry/keys-with-type\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'i/registry/keys-with-type': {\n     requestBody: {\n@@ -17533,7 +17541,7 @@ export type operations = {\n    * i/registry/keys\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'i/registry/keys': {\n     requestBody: {\n@@ -17586,7 +17594,7 @@ export type operations = {\n    * i/registry/remove\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'i/registry/remove': {\n     requestBody: {\n@@ -17690,7 +17698,7 @@ export type operations = {\n    * i/registry/set\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'i/registry/set': {\n     requestBody: {\n@@ -18446,7 +18454,7 @@ export type operations = {\n    * invite/create\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n    */\n   'invite/create': {\n     responses: {\n@@ -18492,7 +18500,7 @@ export type operations = {\n    * invite/delete\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:invite-codes*\n    */\n   'invite/delete': {\n     requestBody: {\n@@ -18544,7 +18552,7 @@ export type operations = {\n    * invite/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n    */\n   'invite/list': {\n     requestBody: {\n@@ -18602,7 +18610,7 @@ export type operations = {\n    * invite/limit\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:invite-codes*\n    */\n   'invite/limit': {\n     responses: {\n@@ -19282,7 +19290,7 @@ export type operations = {\n    * my/apps\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'my/apps': {\n     requestBody: {\n@@ -19959,7 +19967,7 @@ export type operations = {\n    * notes/hybrid-timeline\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/hybrid-timeline': {\n     requestBody: {\n@@ -20101,7 +20109,7 @@ export type operations = {\n    * notes/mentions\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/mentions': {\n     requestBody: {\n@@ -20162,7 +20170,7 @@ export type operations = {\n    * notes/polls/recommendation\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/polls/recommendation': {\n     requestBody: {\n@@ -20762,7 +20770,7 @@ export type operations = {\n    * notes/state\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/state': {\n     requestBody: {\n@@ -20929,7 +20937,7 @@ export type operations = {\n    * notes/timeline\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/timeline': {\n     requestBody: {\n@@ -21001,7 +21009,7 @@ export type operations = {\n    * notes/translate\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/translate': {\n     requestBody: {\n@@ -21117,7 +21125,7 @@ export type operations = {\n    * notes/user-list-timeline\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'notes/user-list-timeline': {\n     requestBody: {\n@@ -22409,7 +22417,7 @@ export type operations = {\n    * promo/read\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'promo/read': {\n     requestBody: {\n@@ -22461,7 +22469,7 @@ export type operations = {\n    * roles/list\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'roles/list': {\n     responses: {\n@@ -22625,7 +22633,7 @@ export type operations = {\n    * roles/notes\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'roles/notes': {\n     requestBody: {\n@@ -22954,6 +22962,7 @@ export type operations = {\n    * sw/show-registration\n    * @description Check push notification registration exists.\n    *\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n    * **Credential required**: *Yes*\n    */\n   'sw/show-registration': {\n@@ -23015,6 +23024,7 @@ export type operations = {\n    * sw/update-registration\n    * @description Update push notification registration.\n    *\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n    * **Credential required**: *Yes*\n    */\n   'sw/update-registration': {\n@@ -23073,6 +23083,7 @@ export type operations = {\n    * sw/register\n    * @description Register to receive push notifications.\n    *\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n    * **Credential required**: *Yes*\n    */\n   'sw/register': {\n@@ -24077,7 +24088,7 @@ export type operations = {\n    * users/lists/favorite\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'users/lists/favorite': {\n     requestBody: {\n@@ -24129,7 +24140,7 @@ export type operations = {\n    * users/lists/unfavorite\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'users/lists/unfavorite': {\n     requestBody: {\n@@ -24237,7 +24248,7 @@ export type operations = {\n    * users/lists/create-from-public\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:account*\n    */\n   'users/lists/create-from-public': {\n     requestBody: {\n@@ -24728,7 +24739,7 @@ export type operations = {\n    * users/relation\n    * @description Show the different kinds of relations between the authenticated user and the specified user(s).\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *read:account*\n    */\n   'users/relation': {\n     requestBody: {\n@@ -24803,7 +24814,7 @@ export type operations = {\n    * users/report-abuse\n    * @description File a report.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *Yes* / **Permission**: *write:report-abuse*\n    */\n   'users/report-abuse': {\n     requestBody: {\n@@ -25036,7 +25047,7 @@ export type operations = {\n    * users/achievements\n    * @description No description provided.\n    *\n-   * **Credential required**: *Yes*\n+   * **Credential required**: *No*\n    */\n   'users/achievements': {\n     requestBody: {\n@@ -25202,6 +25213,7 @@ export type operations = {\n    * fetch-external-resources\n    * @description No description provided.\n    *\n+   * **Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n    * **Credential required**: *Yes*\n    */\n   'fetch-external-resources': {"
        },
        {
          "filename": "packages/misskey-js/src/consts.ts",
          "status": "modified",
          "additions": 49,
          "deletions": 1,
          "patch": "@@ -45,7 +45,55 @@ export const permissions = [\n \t'write:flash',\n \t'read:flash-likes',\n \t'write:flash-likes',\n-];\n+\t'read:admin:abuse-user-reports',\n+\t'write:admin:delete-account',\n+\t'write:admin:delete-all-files-of-a-user',\n+\t'read:admin:index-stats',\n+\t'read:admin:table-stats',\n+\t'read:admin:user-ips',\n+\t'read:admin:meta',\n+\t'write:admin:reset-password',\n+\t'write:admin:resolve-abuse-user-report',\n+\t'write:admin:send-email',\n+\t'read:admin:server-info',\n+\t'read:admin:show-moderation-log',\n+\t'read:admin:show-user',\n+\t'read:admin:show-users',\n+\t'write:admin:suspend-user',\n+\t'write:admin:unset-user-avatar',\n+\t'write:admin:unset-user-banner',\n+\t'write:admin:unsuspend-user',\n+\t'write:admin:meta',\n+\t'write:admin:user-note',\n+\t'write:admin:roles',\n+\t'read:admin:roles',\n+\t'write:admin:relays',\n+\t'read:admin:relays',\n+\t'write:admin:invite-codes',\n+\t'read:admin:invite-codes',\n+\t'write:admin:announcements',\n+\t'read:admin:announcements',\n+\t'write:admin:avatar-decorations',\n+\t'read:admin:avatar-decorations',\n+\t'write:admin:federation',\n+\t'write:admin:account',\n+\t'read:admin:account',\n+\t'write:admin:emoji',\n+\t'read:admin:emoji',\n+\t'write:admin:queue',\n+\t'read:admin:queue',\n+\t'write:admin:promo',\n+\t'write:admin:drive',\n+\t'read:admin:drive',\n+\t'write:admin:ad',\n+\t'read:admin:ad',\n+\t'write:invite-codes',\n+\t'read:invite-codes',\n+\t'write:clip-favorite',\n+\t'read:clip-favorite',\n+\t'read:federation',\n+\t'write:report-abuse',\n+] as const;\n \n export const moderationLogTypes = [\n \t'updateServerSettings',"
        }
      ],
      "file_patterns": {
        "security_files": 10,
        "config_files": 1,
        "dependency_files": 0,
        "test_files": 3,
        "unique_directories": 39,
        "max_directory_depth": 8
      },
      "context": {
        "surrounding_commits": [
          {
            "sha": "9760f3d7c9113f5436732bf6d6e454b253061b1d",
            "date": "2025-01-14T13:49:59Z",
            "author_login": "tai-cha"
          },
          {
            "sha": "87cdbaea4fa0955bf217fa6d4cf5bd420ada73eb",
            "date": "2025-01-14T13:28:06Z",
            "author_login": "github-actions[bot]"
          },
          {
            "sha": "1b47e2d4f2e7435a2b4eddef50828f0b7cc7ca15",
            "date": "2025-01-14T13:28:00Z",
            "author_login": "github-actions[bot]"
          },
          {
            "sha": "d018fe58aa91eb702b098df659f23f9a981f4368",
            "date": "2025-01-14T13:06:39Z",
            "author_login": "dahlia"
          },
          {
            "sha": "f45fd01551fb283604297e4c94cca4d04ebf03aa",
            "date": "2025-01-14T12:49:35Z",
            "author_login": "samunohito"
          }
        ]
      }
    }
  },
  "vulnerability_details": {
    "cvss_score": 9.0,
    "cvss_vector": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:H/I:H/A:H",
    "cwe_id": "CWE-285",
    "description": "Misskey is an open source, decentralized social media platform. Third-party applications may be able to access some endpoints or Websocket APIs that are incorrectly specified as [kind](https://github.com/misskey-dev/misskey/blob/406b4bdbe79b5b0b68fcdcb3c4b6e419460a0258/packages/backend/src/server/api/endpoints.ts#L811) or [secure](https://github.com/misskey-dev/misskey/blob/406b4bdbe79b5b0b68fcdcb3c4b6e419460a0258/packages/backend/src/server/api/endpoints.ts#L805) without the user's permission and perform operations such as reading or adding non-public content. As a result, if the user who authenticated the application is an administrator, confidential information such as object storage secret keys and SMTP server passwords will be leaked, and general users can also create invitation codes without permission and leak non-public user information. This is patched in version [2023.12.1](https://github.com/misskey-dev/misskey/commit/c96bc36fedc804dc840ea791a9355d7df0748e64).",
    "attack_vector": "NETWORK",
    "attack_complexity": "LOW"
  },
  "temporal_data": {
    "published_date": "2023-12-29T18:15:39.227",
    "last_modified": "2024-11-21T08:39:15.833",
    "fix_date": "2023-12-27T06:08:59Z"
  },
  "references": [
    {
      "url": "https://github.com/misskey-dev/misskey/commit/c96bc36fedc804dc840ea791a9355d7df0748e64",
      "source": "security-advisories@github.com",
      "tags": [
        "Patch"
      ]
    },
    {
      "url": "https://github.com/misskey-dev/misskey/security/advisories/GHSA-7pxq-6xx9-xpgm",
      "source": "security-advisories@github.com",
      "tags": [
        "Third Party Advisory"
      ]
    },
    {
      "url": "https://github.com/misskey-dev/misskey/commit/c96bc36fedc804dc840ea791a9355d7df0748e64",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Patch"
      ]
    },
    {
      "url": "https://github.com/misskey-dev/misskey/security/advisories/GHSA-7pxq-6xx9-xpgm",
      "source": "af854a3a-2127-422b-91ae-364da2661108",
      "tags": [
        "Third Party Advisory"
      ]
    }
  ],
  "collection_metadata": {
    "collected_at": "2025-01-11T23:06:44.117116",
    "processing_status": "raw"
  },
  "repository_context": {
    "name": "misskey",
    "owner": "misskey-dev",
    "created_at": "2016-12-25T13:16:07Z",
    "updated_at": "2025-01-14T13:28:10Z",
    "pushed_at": "2025-01-14T13:28:07Z",
    "size": 163993,
    "stars": 10240,
    "forks": 1398,
    "open_issues": 2259,
    "watchers": 10240,
    "has_security_policy": false,
    "default_branch": "develop",
    "protected_branches": [],
    "languages": {
      "TypeScript": 5535094,
      "Vue": 2400709,
      "JavaScript": 550003,
      "SCSS": 24017,
      "Pug": 20568,
      "CSS": 5581,
      "Dockerfile": 4843,
      "HTML": 4126,
      "Shell": 1827,
      "Smarty": 1782,
      "MDX": 575,
      "Procfile": 35
    },
    "commit_activity": {
      "total_commits_last_year": 1573,
      "avg_commits_per_week": 30.25,
      "days_active_last_year": 229
    },
    "security_features": {
      "has_security_policy": false,
      "has_protected_branches": false,
      "has_wiki": true,
      "has_issues": true,
      "allow_forking": true,
      "is_template": false,
      "license": "agpl-3.0"
    },
    "collected_at": "2025-01-14T13:33:01.563786"
  }
}